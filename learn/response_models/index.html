
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mirascope streamlines LLM development with a unified interface supporting major providers like OpenAI, Anthropic, Gemini, Mistral, and more. Build powerful AI applications faster with flexible, developer-friendly abstractions that aren't obstructions.">
      
      
      
        <link rel="canonical" href="https://mirascope.com/learn/response_models/">
      
      
        <link rel="prev" href="../chaining/">
      
      
        <link rel="next" href="../json_mode/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.32">
    
    <meta name="keywords" content="prompt engineering, prompt management, LLM, AI">
    <meta name="language" content="English">

    
      
        <title>Response Models - Mirascope</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-DJHT1QG9GK"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-DJHT1QG9GK",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-DJHT1QG9GK",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Response Models - Mirascope" >
      
        <meta  property="og:description"  content="Mirascope streamlines LLM development with a unified interface supporting major providers like OpenAI, Anthropic, Gemini, Mistral, and more. Build powerful AI applications faster with flexible, developer-friendly abstractions that aren't obstructions." >
      
        <meta  property="og:image"  content="https://mirascope.com/assets/images/social/learn/response_models.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://mirascope.com/learn/response_models/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Response Models - Mirascope" >
      
        <meta  name="twitter:description"  content="Mirascope streamlines LLM development with a unified interface supporting major providers like OpenAI, Anthropic, Gemini, Mistral, and more. Build powerful AI applications faster with flexible, developer-friendly abstractions that aren't obstructions." >
      
        <meta  name="twitter:image"  content="https://mirascope.com/assets/images/social/learn/response_models.png" >
      
    
    
<!-- Google Tag Manager -->
<script>
  (function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != "dataLayer" ? "&l=" + l : "";
    j.async = true;
    j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, "script", "dataLayer", "GTM-T8PZJDKM");
</script>
<!-- End Google Tag Manager -->
<!-- Begin Google Analytics -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-DJHT1QG9GK"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-DJHT1QG9GK");
</script>
<!-- End Google Analytics -->

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#response-models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Mirascope" class="md-header__button md-logo" aria-label="Mirascope" data-md-component="logo">
      
  <img src="../../assets/brandmark.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mirascope
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Response Models
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Mirascope/mirascope/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mirascope
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../WELCOME/" class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/getting_started/quickstart/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Learn

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/otel/" class="md-tabs__link">
          
  
  Integrations

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/core/anthropic/call/" class="md-tabs__link">
          
  
  API Reference

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Mirascope" class="md-nav__button md-logo" aria-label="Mirascope" data-md-component="logo">
      
  <img src="../../assets/brandmark.png" alt="logo">

    </a>
    Mirascope
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Mirascope/mirascope/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mirascope
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../WELCOME/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Mirascope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../WHY/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why Use Mirascope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HELP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MIGRATE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/structured_outputs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structured Outputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/dynamic_configuration_and_chaining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dynamic Configuration &amp; Chaining
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/tools_and_agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools &amp; Agents
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    More Advanced
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            More Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/text_classification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/text_translation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Translation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/text_summarization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Summarization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/search_with_sources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search with Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/llm_validation_with_retries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM Validation With Retries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/extract_from_pdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extracting from PDF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/knowledge_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Knowledge Graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/generating_captions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Captions for an Image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/pii_scrubbing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PII Scrubbing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/extraction_using_vision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extraction using Vision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/code_generation_and_execution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Generation and Execution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/support_ticket_routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support Ticket Routing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/document_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Document Segmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/generating_synthetic_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Synthetic Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/removing_semantic_duplicates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Removing Semantic Duplicates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/speech_transcription/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transcribing Speech
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/query_plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Plan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/named_entity_recognition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Named Entity Recognition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/more_advanced/o1_style_thinking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    o1 Style Thinking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Agents
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Agents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/web_search_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Search Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/qwant_search_agent_with_sources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Qwant Search Agent with Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/blog_writing_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent Executor: Blog Writing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/sql_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate SQL with LLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/localized_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Localized Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/local_chat_with_codebase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Chat with Codebase
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/agents/documentation_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prompt Engineering
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Prompt Engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Text Based
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            Text Based
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/self_ask/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Self-Ask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/plan_and_solve/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plan and Solve
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/contrastive_chain_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contrastive Chain of Thought
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/tabular_chain_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tabular Chain of Thought
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/chain_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chain of Thought
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/thread_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thread of Thought
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/rereading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rereading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/emotion_prompting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Emotion Prompting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/rephrase_and_respond/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rephrase and Respond
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/common_phrases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Phrases (Prompt Mining)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/text_based/role_prompting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Prompting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Chaining Based
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            Chaining Based
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/self_refine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Self-Refine: Enhancing LLM Outputs Through Iterative Self-Improvement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/self_consistency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Self-Consistency: Enhancing LLM Reasoning with Multiple Outputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/reverse_chain_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reverse Chain of Thought: Enhancing LLM Reasoning with Self-Reflection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/prompt_paraphrasing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompt Paraphrasing: Generating Diverse Prompts for LLM Testing and Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/mixture_of_reasoning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mixture of Reasoning: Enhancing LLM Performance with Multiple Techniques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/demonstration_ensembling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Demonstration Ensembling: Enhancing LLM Responses with Aggregated Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/chain_of_verification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chain of Verification: Enhancing LLM Accuracy through Self-Verification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/least_to_most/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Least to Most: Enhancing LLM Reasoning with Subproblem Decomposition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/diverse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DiVeRSe: Enhancing LLM Reasoning with Prompt Variations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/decomposed_prompting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decomposed Prompting: Enhancing LLM Problem-Solving with Tool-Based Subproblems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/system_to_attention/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System to Attention (S2A): Enhancing LLM Focus with Query Filtering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/step_back/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step-back Prompting: Enhancing LLM Reasoning with High-Level Questions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/skeleton_of_thought/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skeleton of Thought: Enhancing LLM Response Speed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/prompt_engineering/chaining_based/sim_to_m/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sim to M: Enhancing LLM Reasoning with Perspective-Taking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Evaluations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Evaluations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/evals/evaluating_sql_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluating Generating SQL with LLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/evals/evaluating_web_search_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluating Web Search Agent with LLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/evals/evaluating_documentation_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluating Documentation Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LangGraph vs. Mirascope
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            LangGraph vs. Mirascope
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/langgraph_vs_mirascope/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LangGraph Quickstart using Mirascope
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Learn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Learn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prompts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../streams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chaining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chaining
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Response Models
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Response Models
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-use-response-models" class="md-nav__link">
    <span class="md-ellipsis">
      Why Use Response Models?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage-and-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage and Syntax
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Usage and Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-original-call-response" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Original Call Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-types" class="md-nav__link">
    <span class="md-ellipsis">
      Built-In Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-field-types" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Field Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-and-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Validation and Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation and Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-original-call-response-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Original Call Response On Error
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-mode" class="md-nav__link">
    <span class="md-ellipsis">
      JSON Mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#few-shot-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Few-Shot Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming-response-models" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Response Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fromcallargs" class="md-nav__link">
    <span class="md-ellipsis">
      FromCallArgs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../output_parsers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Output Parsers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../async/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../retries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Retries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_15" >
        
          
          <label class="md-nav__link" for="__nav_4_15" id="__nav_4_15_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Provider-Specific Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_15">
            <span class="md-nav__icon md-icon"></span>
            Provider-Specific Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provider_specific_features/openai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provider_specific_features/anthropic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anthropic
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/custom_provider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom LLM Provider
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_17" >
        
          
          <label class="md-nav__link" for="__nav_4_17" id="__nav_4_17_label" tabindex="">
            
  
  <span class="md-ellipsis">
    MCP - Model Context Protocol
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_17">
            <span class="md-nav__icon md-icon"></span>
            MCP - Model Context Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcp/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/otel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenTelemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hyperdx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HyperDX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/logfire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logfire
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/langfuse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Langfuse
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1_1" id="__nav_6_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Anthropic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            Anthropic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/anthropic/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_2" >
        
          
          <label class="md-nav__link" for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure AI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_2">
            <span class="md-nav__icon md-icon"></span>
            Azure AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/azure/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3" >
        
          
          <label class="md-nav__link" for="__nav_6_1_3" id="__nav_6_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Base
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3">
            <span class="md-nav__icon md-icon"></span>
            Base
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/call_factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_factory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/merge_decorators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    merge_decorators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/message_param/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    message_param
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/prompt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prompt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/structured_stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    structured_stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/base/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_4" >
        
          
          <label class="md-nav__link" for="__nav_6_1_4" id="__nav_6_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bedrock
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_4">
            <span class="md-nav__icon md-icon"></span>
            Bedrock
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/bedrock/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_5" >
        
          
          <label class="md-nav__link" for="__nav_6_1_5" id="__nav_6_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cohere
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_5">
            <span class="md-nav__icon md-icon"></span>
            Cohere
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/cohere/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_6" >
        
          
          <label class="md-nav__link" for="__nav_6_1_6" id="__nav_6_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Costs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_6">
            <span class="md-nav__icon md-icon"></span>
            Costs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/costs/calculate_cost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    calculate_cost
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7" >
        
          
          <label class="md-nav__link" for="__nav_6_1_7" id="__nav_6_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Google
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7">
            <span class="md-nav__icon md-icon"></span>
            Google
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/google/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_8" >
        
          
          <label class="md-nav__link" for="__nav_6_1_8" id="__nav_6_1_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Groq
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_8">
            <span class="md-nav__icon md-icon"></span>
            Groq
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/groq/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_9" >
        
          
          <label class="md-nav__link" for="__nav_6_1_9" id="__nav_6_1_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LiteLLM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_9">
            <span class="md-nav__icon md-icon"></span>
            LiteLLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/litellm/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_10" >
        
          
          <label class="md-nav__link" for="__nav_6_1_10" id="__nav_6_1_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mistral
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_10">
            <span class="md-nav__icon md-icon"></span>
            Mistral
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/mistral/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_11" >
        
          
          <label class="md-nav__link" for="__nav_6_1_11" id="__nav_6_1_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenAI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_11">
            <span class="md-nav__icon md-icon"></span>
            OpenAI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/openai/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_12" >
        
          
          <label class="md-nav__link" for="__nav_6_1_12" id="__nav_6_1_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    xAI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_12">
            <span class="md-nav__icon md-icon"></span>
            xAI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/call_params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/call_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/call_response_chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call_response_chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/dynamic_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dynamic_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/xai/tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LLM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            LLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/llm/call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    call
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/web/duckduckgo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DuckDuckGo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/web/httpx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/web/parse_url_content/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParseURLContent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/web/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/system/file_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FileSystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tools/system/docker_operation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DockerOperation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/integrations/langfuse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Langfuse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/integrations/logfire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logfire
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/integrations/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/integrations/otel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenTelemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/integrations/tenacity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tenacity
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prompts &amp; Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/behind-the-scenes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Behind the Scenes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/library-updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Library Updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/tips--inspiration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips &amp; Inspiration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-use-response-models" class="md-nav__link">
    <span class="md-ellipsis">
      Why Use Response Models?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage-and-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage and Syntax
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Usage and Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-original-call-response" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Original Call Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-types" class="md-nav__link">
    <span class="md-ellipsis">
      Built-In Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-field-types" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Field Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-and-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Validation and Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation and Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-original-call-response-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Original Call Response On Error
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-mode" class="md-nav__link">
    <span class="md-ellipsis">
      JSON Mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#few-shot-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Few-Shot Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming-response-models" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Response Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fromcallargs" class="md-nav__link">
    <span class="md-ellipsis">
      FromCallArgs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
<div class="notebook-links">
  
</div>


                  

  
  


<h1 id="response-models">Response Models<a class="headerlink" href="#response-models" title="Permanent link">&para;</a></h1>
<div class="admonition mira">
<p><div align="center">
    If you haven't already, we recommend first reading the section on <a href="../calls/">Calls</a>
</div></p>
</div>
<p>Response Models in Mirascope provide a powerful way to structure and validate the output from Large Language Models (LLMs). By leveraging Pydantic's <a href="https://docs.pydantic.dev/latest/usage/models/"><code>BaseModel</code></a>, Response Models offer type safety, automatic validation, and easier data manipulation for your LLM responses. While we cover some details in this documentation, we highly recommend reading through Pydantic's documentation for a deeper, comprehensive dive into everything you can do with Pydantic's <code>BaseModel</code>.</p>
<h2 id="why-use-response-models">Why Use Response Models?<a class="headerlink" href="#why-use-response-models" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Structured Output</strong>: Define exactly what you expect from the LLM, ensuring consistency in responses.</li>
<li><strong>Automatic Validation</strong>: Pydantic handles type checking and validation, reducing errors in your application.</li>
<li><strong>Improved Type Hinting</strong>: Better IDE support and clearer code structure.</li>
<li><strong>Easier Data Manipulation</strong>: Work with Python objects instead of raw strings or dictionaries.</li>
</ol>
<h2 id="basic-usage-and-syntax">Basic Usage and Syntax<a class="headerlink" href="#basic-usage-and-syntax" title="Permanent link">&para;</a></h2>
<p>Let's take a look at a basic example using Mirascope vs. official provider SDKs:</p>
<div class="admonition mira">
<p class="admonition-title">Mirascope</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Shorthand</label><label for="__tabbed_1_2">Messages</label><label for="__tabbed_1_3">String Template</label><label for="__tabbed_1_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="2:10"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><input id="__tabbed_2_7" name="__tabbed_2" type="radio" /><input id="__tabbed_2_8" name="__tabbed_2" type="radio" /><input id="__tabbed_2_9" name="__tabbed_2" type="radio" /><input id="__tabbed_2_10" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">OpenAI</label><label for="__tabbed_2_2">Anthropic</label><label for="__tabbed_2_3">Google</label><label for="__tabbed_2_4">Groq</label><label for="__tabbed_2_5">xAI</label><label for="__tabbed_2_6">Mistral</label><label for="__tabbed_2_7">Cohere</label><label for="__tabbed_2_8">LiteLLM</label><label for="__tabbed_2_9">Azure AI</label><label for="__tabbed_2_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="3:10"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><input id="__tabbed_3_8" name="__tabbed_3" type="radio" /><input id="__tabbed_3_9" name="__tabbed_3" type="radio" /><input id="__tabbed_3_10" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">OpenAI</label><label for="__tabbed_3_2">Anthropic</label><label for="__tabbed_3_3">Google</label><label for="__tabbed_3_4">Groq</label><label for="__tabbed_3_5">xAI</label><label for="__tabbed_3_6">Mistral</label><label for="__tabbed_3_7">Cohere</label><label for="__tabbed_3_8">LiteLLM</label><label for="__tabbed_3_9">Azure AI</label><label for="__tabbed_3_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="4:10"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><input id="__tabbed_4_5" name="__tabbed_4" type="radio" /><input id="__tabbed_4_6" name="__tabbed_4" type="radio" /><input id="__tabbed_4_7" name="__tabbed_4" type="radio" /><input id="__tabbed_4_8" name="__tabbed_4" type="radio" /><input id="__tabbed_4_9" name="__tabbed_4" type="radio" /><input id="__tabbed_4_10" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">OpenAI</label><label for="__tabbed_4_2">Anthropic</label><label for="__tabbed_4_3">Google</label><label for="__tabbed_4_4">Groq</label><label for="__tabbed_4_5">xAI</label><label for="__tabbed_4_6">Mistral</label><label for="__tabbed_4_7">Cohere</label><label for="__tabbed_4_8">LiteLLM</label><label for="__tabbed_4_9">Azure AI</label><label for="__tabbed_4_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="5:10"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><input id="__tabbed_5_4" name="__tabbed_5" type="radio" /><input id="__tabbed_5_5" name="__tabbed_5" type="radio" /><input id="__tabbed_5_6" name="__tabbed_5" type="radio" /><input id="__tabbed_5_7" name="__tabbed_5" type="radio" /><input id="__tabbed_5_8" name="__tabbed_5" type="radio" /><input id="__tabbed_5_9" name="__tabbed_5" type="radio" /><input id="__tabbed_5_10" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">OpenAI</label><label for="__tabbed_5_2">Anthropic</label><label for="__tabbed_5_3">Google</label><label for="__tabbed_5_4">Groq</label><label for="__tabbed_5_5">xAI</label><label for="__tabbed_5_6">Mistral</label><label for="__tabbed_5_7">Cohere</label><label for="__tabbed_5_8">LiteLLM</label><label for="__tabbed_5_9">Azure AI</label><label for="__tabbed_5_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
</span><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<details class="note">
<summary>Official SDK</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:10"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><input id="__tabbed_6_4" name="__tabbed_6" type="radio" /><input id="__tabbed_6_5" name="__tabbed_6" type="radio" /><input id="__tabbed_6_6" name="__tabbed_6" type="radio" /><input id="__tabbed_6_7" name="__tabbed_6" type="radio" /><input id="__tabbed_6_8" name="__tabbed_6" type="radio" /><input id="__tabbed_6_9" name="__tabbed_6" type="radio" /><input id="__tabbed_6_10" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">OpenAI</label><label for="__tabbed_6_2">Anthropic</label><label for="__tabbed_6_3">Google</label><label for="__tabbed_6_4">Groq</label><label for="__tabbed_6_5">xAI</label><label for="__tabbed_6_6">Mistral</label><label for="__tabbed_6_7">Cohere</label><label for="__tabbed_6_8">LiteLLM</label><label for="__tabbed_6_9">Azure AI</label><label for="__tabbed_6_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kn">from</span> <span class="nn">openai</span> <span class="kn">import</span> <span class="n">OpenAI</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">()</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a>    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="hll">                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a><span class="hll">                    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-40-26" name="__codelineno-40-26" href="#__codelineno-40-26"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-40-27" name="__codelineno-40-27" href="#__codelineno-40-27"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-40-28" name="__codelineno-40-28" href="#__codelineno-40-28"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-40-29" name="__codelineno-40-29" href="#__codelineno-40-29"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-40-30" name="__codelineno-40-30" href="#__codelineno-40-30"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-40-31" name="__codelineno-40-31" href="#__codelineno-40-31"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-40-32" name="__codelineno-40-32" href="#__codelineno-40-32"></a><span class="hll">                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><a id="__codelineno-40-33" name="__codelineno-40-33" href="#__codelineno-40-33"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-40-34" name="__codelineno-40-34" href="#__codelineno-40-34"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-40-35" name="__codelineno-40-35" href="#__codelineno-40-35"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="s2">&quot;required&quot;</span><span class="p">,</span>
</span><a id="__codelineno-40-36" name="__codelineno-40-36" href="#__codelineno-40-36"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-40-37" name="__codelineno-40-37" href="#__codelineno-40-37"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>
</span><a id="__codelineno-40-38" name="__codelineno-40-38" href="#__codelineno-40-38"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
</span><a id="__codelineno-40-39" name="__codelineno-40-39" href="#__codelineno-40-39"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-40-40" name="__codelineno-40-40" href="#__codelineno-40-40"></a>
<a id="__codelineno-40-41" name="__codelineno-40-41" href="#__codelineno-40-41"></a>
<a id="__codelineno-40-42" name="__codelineno-40-42" href="#__codelineno-40-42"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-40-43" name="__codelineno-40-43" href="#__codelineno-40-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-40-44" name="__codelineno-40-44" href="#__codelineno-40-44"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kn">from</span> <span class="nn">anthropic</span> <span class="kn">import</span> <span class="n">Anthropic</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Anthropic</span><span class="p">()</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>    <span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="hll">                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="hll">                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="hll">                <span class="s2">&quot;input_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="hll">                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="hll">                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="hll">                        <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="hll">                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="hll">                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">},</span>
</span><a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="hll">    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
</span><a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="hll">        <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;tool_use&quot;</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">input</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="hll">            <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</span><a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a>
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a>
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="kn">from</span> <span class="nn">google.genai</span> <span class="kn">import</span> <span class="n">Client</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="kn">from</span> <span class="nn">google.genai.types</span> <span class="kn">import</span> <span class="n">FunctionDeclaration</span><span class="p">,</span> <span class="n">Tool</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="kn">from</span> <span class="nn">proto.marshal.collections</span> <span class="kn">import</span> <span class="n">RepeatedComposite</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a>        <span class="n">contents</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;parts&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}]},</span>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a>        <span class="n">config</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="hll">            <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="hll">                <span class="n">Tool</span><span class="p">(</span>
</span><a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="hll">                    <span class="n">function_declarations</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="hll">                        <span class="n">FunctionDeclaration</span><span class="p">(</span>
</span><a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="hll">                            <span class="o">**</span><span class="p">{</span>
</span><a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a><span class="hll">                                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="hll">                                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="hll">                                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a><span class="hll">                                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a><span class="hll">                                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="hll">                                        <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="hll">                                    <span class="p">},</span>
</span><a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a><span class="hll">                                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a><span class="hll">                                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a><span class="hll">                                <span class="p">},</span>
</span><a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a><span class="hll">                            <span class="p">}</span>
</span><a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a><span class="hll">                        <span class="p">)</span>
</span><a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a><span class="hll">                    <span class="p">]</span>
</span><a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a><span class="hll">                <span class="p">)</span>
</span><a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a><span class="hll">            <span class="p">],</span>
</span><a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a><span class="hll">            <span class="s2">&quot;tool_config&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a><span class="hll">                <span class="s2">&quot;function_calling_config&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a><span class="hll">                    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span>
</span><a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a><span class="hll">                    <span class="s2">&quot;allowed_function_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Book&quot;</span><span class="p">],</span>
</span><a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a><span class="hll">                <span class="p">}</span>
</span><a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a><span class="hll">            <span class="p">},</span>  <span class="c1"># pyright: ignore [reportArgumentType]</span>
</span><a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a><span class="hll">        <span class="p">},</span>
</span><a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-42-49" name="__codelineno-42-49" href="#__codelineno-42-49"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="p">[</span>
</span><a id="__codelineno-42-50" name="__codelineno-42-50" href="#__codelineno-42-50"></a><span class="hll">        <span class="n">function_call</span>
</span><a id="__codelineno-42-51" name="__codelineno-42-51" href="#__codelineno-42-51"></a><span class="hll">        <span class="k">for</span> <span class="n">function_call</span> <span class="ow">in</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">function_calls</span> <span class="ow">or</span> <span class="p">[])</span>
</span><a id="__codelineno-42-52" name="__codelineno-42-52" href="#__codelineno-42-52"></a><span class="hll">        <span class="k">if</span> <span class="n">function_call</span><span class="o">.</span><span class="n">args</span>
</span><a id="__codelineno-42-53" name="__codelineno-42-53" href="#__codelineno-42-53"></a><span class="hll">    <span class="p">]:</span>
</span><a id="__codelineno-42-54" name="__codelineno-42-54" href="#__codelineno-42-54"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
</span><a id="__codelineno-42-55" name="__codelineno-42-55" href="#__codelineno-42-55"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-42-56" name="__codelineno-42-56" href="#__codelineno-42-56"></a><span class="hll">                <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">RepeatedComposite</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><a id="__codelineno-42-57" name="__codelineno-42-57" href="#__codelineno-42-57"></a><span class="hll">                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><a id="__codelineno-42-58" name="__codelineno-42-58" href="#__codelineno-42-58"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-42-59" name="__codelineno-42-59" href="#__codelineno-42-59"></a><span class="hll">        <span class="p">)</span>
</span><a id="__codelineno-42-60" name="__codelineno-42-60" href="#__codelineno-42-60"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-42-61" name="__codelineno-42-61" href="#__codelineno-42-61"></a>
<a id="__codelineno-42-62" name="__codelineno-42-62" href="#__codelineno-42-62"></a>
<a id="__codelineno-42-63" name="__codelineno-42-63" href="#__codelineno-42-63"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-42-64" name="__codelineno-42-64" href="#__codelineno-42-64"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-42-65" name="__codelineno-42-65" href="#__codelineno-42-65"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kn">from</span> <span class="nn">groq</span> <span class="kn">import</span> <span class="n">Groq</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Groq</span><span class="p">()</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="hll">                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a><span class="hll">                    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-43-24" name="__codelineno-43-24" href="#__codelineno-43-24"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-43-25" name="__codelineno-43-25" href="#__codelineno-43-25"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-43-26" name="__codelineno-43-26" href="#__codelineno-43-26"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-43-27" name="__codelineno-43-27" href="#__codelineno-43-27"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-43-28" name="__codelineno-43-28" href="#__codelineno-43-28"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-43-29" name="__codelineno-43-29" href="#__codelineno-43-29"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-43-30" name="__codelineno-43-30" href="#__codelineno-43-30"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-43-31" name="__codelineno-43-31" href="#__codelineno-43-31"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-43-32" name="__codelineno-43-32" href="#__codelineno-43-32"></a><span class="hll">                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><a id="__codelineno-43-33" name="__codelineno-43-33" href="#__codelineno-43-33"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-43-34" name="__codelineno-43-34" href="#__codelineno-43-34"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-43-35" name="__codelineno-43-35" href="#__codelineno-43-35"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="s2">&quot;required&quot;</span><span class="p">,</span>
</span><a id="__codelineno-43-36" name="__codelineno-43-36" href="#__codelineno-43-36"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-43-37" name="__codelineno-43-37" href="#__codelineno-43-37"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>
</span><a id="__codelineno-43-38" name="__codelineno-43-38" href="#__codelineno-43-38"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
</span><a id="__codelineno-43-39" name="__codelineno-43-39" href="#__codelineno-43-39"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-43-40" name="__codelineno-43-40" href="#__codelineno-43-40"></a>
<a id="__codelineno-43-41" name="__codelineno-43-41" href="#__codelineno-43-41"></a>
<a id="__codelineno-43-42" name="__codelineno-43-42" href="#__codelineno-43-42"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-43-43" name="__codelineno-43-43" href="#__codelineno-43-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-43-44" name="__codelineno-43-44" href="#__codelineno-43-44"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kn">from</span> <span class="nn">openai</span> <span class="kn">import</span> <span class="n">OpenAI</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://api.x.ai/v1&quot;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_KEY_HERE&quot;</span><span class="p">)</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="hll">                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a><span class="hll">                    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a><span class="hll">                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="s2">&quot;required&quot;</span><span class="p">,</span>
</span><a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>
</span><a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
</span><a id="__codelineno-44-39" name="__codelineno-44-39" href="#__codelineno-44-39"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-44-40" name="__codelineno-44-40" href="#__codelineno-44-40"></a>
<a id="__codelineno-44-41" name="__codelineno-44-41" href="#__codelineno-44-41"></a>
<a id="__codelineno-44-42" name="__codelineno-44-42" href="#__codelineno-44-42"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-44-43" name="__codelineno-44-43" href="#__codelineno-44-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-44-44" name="__codelineno-44-44" href="#__codelineno-44-44"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="kn">from</span> <span class="nn">mistralai</span> <span class="kn">import</span> <span class="n">Mistral</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Mistral</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MISTRAL_API_KEY&quot;</span><span class="p">])</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="hll">                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="hll">                    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-45-35" name="__codelineno-45-35" href="#__codelineno-45-35"></a><span class="hll">                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><a id="__codelineno-45-36" name="__codelineno-45-36" href="#__codelineno-45-36"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-45-37" name="__codelineno-45-37" href="#__codelineno-45-37"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-45-38" name="__codelineno-45-38" href="#__codelineno-45-38"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="s2">&quot;any&quot;</span><span class="p">,</span>
</span><a id="__codelineno-45-39" name="__codelineno-45-39" href="#__codelineno-45-39"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-45-40" name="__codelineno-45-40" href="#__codelineno-45-40"></a><span class="hll">    <span class="k">if</span> <span class="p">(</span>
</span><a id="__codelineno-45-41" name="__codelineno-45-41" href="#__codelineno-45-41"></a><span class="hll">        <span class="n">completion</span>
</span><a id="__codelineno-45-42" name="__codelineno-45-42" href="#__codelineno-45-42"></a><span class="hll">        <span class="ow">and</span> <span class="p">(</span><span class="n">choices</span> <span class="o">:=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
</span><a id="__codelineno-45-43" name="__codelineno-45-43" href="#__codelineno-45-43"></a><span class="hll">        <span class="ow">and</span> <span class="p">(</span><span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">)</span>
</span><a id="__codelineno-45-44" name="__codelineno-45-44" href="#__codelineno-45-44"></a><span class="hll">    <span class="p">):</span>
</span><a id="__codelineno-45-45" name="__codelineno-45-45" href="#__codelineno-45-45"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">))</span>
</span><a id="__codelineno-45-46" name="__codelineno-45-46" href="#__codelineno-45-46"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-45-47" name="__codelineno-45-47" href="#__codelineno-45-47"></a>
<a id="__codelineno-45-48" name="__codelineno-45-48" href="#__codelineno-45-48"></a>
<a id="__codelineno-45-49" name="__codelineno-45-49" href="#__codelineno-45-49"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-45-50" name="__codelineno-45-50" href="#__codelineno-45-50"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-45-51" name="__codelineno-45-51" href="#__codelineno-45-51"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="kn">from</span> <span class="nn">cohere</span> <span class="kn">import</span> <span class="n">Client</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="kn">from</span> <span class="nn">cohere.types</span> <span class="kn">import</span> <span class="n">Tool</span><span class="p">,</span> <span class="n">ToolParameterDefinitionsValue</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>        <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="hll">            <span class="n">Tool</span><span class="p">(</span>
</span><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="hll">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="hll">                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="hll">                <span class="n">parameter_definitions</span><span class="o">=</span><span class="p">{</span>
</span><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="hll">                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">ToolParameterDefinitionsValue</span><span class="p">(</span>
</span><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="hll">                        <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
</span><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="hll">                    <span class="p">),</span>
</span><a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a><span class="hll">                    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="n">ToolParameterDefinitionsValue</span><span class="p">(</span>
</span><a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a><span class="hll">                        <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
</span><a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="hll">                    <span class="p">),</span>
</span><a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a><span class="hll">            <span class="p">)</span>
</span><a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a><span class="hll">    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>
</span><a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
</span><a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a>
<a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a>
<a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kn">from</span> <span class="nn">litellm</span> <span class="kn">import</span> <span class="n">completion</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">completion</span><span class="p">(</span>
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}],</span>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="hll">                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="hll">                    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a><span class="hll">                <span class="p">},</span>
</span><a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a><span class="hll">                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a><span class="hll">        <span class="n">tool_choice</span><span class="o">=</span><span class="s2">&quot;required&quot;</span><span class="p">,</span>
</span><a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>  <span class="c1"># pyright: ignore [reportAttributeAccessIssue]</span>
</span><a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
</span><a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-47-38" name="__codelineno-47-38" href="#__codelineno-47-38"></a>
<a id="__codelineno-47-39" name="__codelineno-47-39" href="#__codelineno-47-39"></a>
<a id="__codelineno-47-40" name="__codelineno-47-40" href="#__codelineno-47-40"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-47-41" name="__codelineno-47-41" href="#__codelineno-47-41"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-47-42" name="__codelineno-47-42" href="#__codelineno-47-42"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kn">from</span> <span class="nn">azure.ai.inference</span> <span class="kn">import</span> <span class="n">ChatCompletionsClient</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="kn">from</span> <span class="nn">azure.ai.inference.models</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>    <span class="n">ChatCompletionsToolDefinition</span><span class="p">,</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>    <span class="n">ChatRequestMessage</span><span class="p">,</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>    <span class="n">FunctionDefinition</span><span class="p">,</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="p">)</span>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="kn">from</span> <span class="nn">azure.core.credentials</span> <span class="kn">import</span> <span class="n">AzureKeyCredential</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="n">client</span> <span class="o">=</span> <span class="n">ChatCompletionsClient</span><span class="p">(</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;YOUR_ENDPOINT&quot;</span><span class="p">,</span> <span class="n">credential</span><span class="o">=</span><span class="n">AzureKeyCredential</span><span class="p">(</span><span class="s2">&quot;YOUR_KEY&quot;</span><span class="p">)</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="p">)</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a>
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a>    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span>
<a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a>        <span class="n">messages</span><span class="o">=</span><span class="p">[</span><span class="n">ChatRequestMessage</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">})],</span>
<a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="hll">        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a><span class="hll">            <span class="n">ChatCompletionsToolDefinition</span><span class="p">(</span>
</span><a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a><span class="hll">                <span class="n">function</span><span class="o">=</span><span class="n">FunctionDefinition</span><span class="p">(</span>
</span><a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a><span class="hll">                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a><span class="hll">                    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a><span class="hll">                    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a><span class="hll">                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a><span class="hll">                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a><span class="hll">                            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a><span class="hll">                        <span class="p">},</span>
</span><a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a><span class="hll">                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a><span class="hll">                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-48-39" name="__codelineno-48-39" href="#__codelineno-48-39"></a><span class="hll">                <span class="p">)</span>
</span><a id="__codelineno-48-40" name="__codelineno-48-40" href="#__codelineno-48-40"></a><span class="hll">            <span class="p">)</span>
</span><a id="__codelineno-48-41" name="__codelineno-48-41" href="#__codelineno-48-41"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-48-42" name="__codelineno-48-42" href="#__codelineno-48-42"></a><span class="hll">        <span class="n">tool_choices</span><span class="o">=</span><span class="s2">&quot;required&quot;</span><span class="p">,</span>
</span><a id="__codelineno-48-43" name="__codelineno-48-43" href="#__codelineno-48-43"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-48-44" name="__codelineno-48-44" href="#__codelineno-48-44"></a><span class="hll">    <span class="k">if</span> <span class="n">tool_calls</span> <span class="o">:=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">:</span>
</span><a id="__codelineno-48-45" name="__codelineno-48-45" href="#__codelineno-48-45"></a><span class="hll">        <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
</span><a id="__codelineno-48-46" name="__codelineno-48-46" href="#__codelineno-48-46"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-48-47" name="__codelineno-48-47" href="#__codelineno-48-47"></a>
<a id="__codelineno-48-48" name="__codelineno-48-48" href="#__codelineno-48-48"></a>
<a id="__codelineno-48-49" name="__codelineno-48-49" href="#__codelineno-48-49"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-48-50" name="__codelineno-48-50" href="#__codelineno-48-50"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-48-51" name="__codelineno-48-51" href="#__codelineno-48-51"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="kn">import</span> <span class="nn">boto3</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="n">bedrock_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="n">service_name</span><span class="o">=</span><span class="s2">&quot;bedrock-runtime&quot;</span><span class="p">)</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Book</span><span class="p">:</span>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>    <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}]}]</span>
<a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a><span class="hll">    <span class="n">tool_config</span> <span class="o">=</span> <span class="p">{</span>
</span><a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a><span class="hll">        <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a><span class="hll">            <span class="p">{</span>
</span><a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a><span class="hll">                <span class="s2">&quot;toolSpec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a><span class="hll">                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
</span><a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a><span class="hll">                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An extracted book.&quot;</span><span class="p">,</span>
</span><a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a><span class="hll">                    <span class="s2">&quot;inputSchema&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a><span class="hll">                        <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a><span class="hll">                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a><span class="hll">                            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a><span class="hll">                                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-49-27" name="__codelineno-49-27" href="#__codelineno-49-27"></a><span class="hll">                                <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><a id="__codelineno-49-28" name="__codelineno-49-28" href="#__codelineno-49-28"></a><span class="hll">                            <span class="p">},</span>
</span><a id="__codelineno-49-29" name="__codelineno-49-29" href="#__codelineno-49-29"></a><span class="hll">                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">],</span>
</span><a id="__codelineno-49-30" name="__codelineno-49-30" href="#__codelineno-49-30"></a><span class="hll">                        <span class="p">}</span>
</span><a id="__codelineno-49-31" name="__codelineno-49-31" href="#__codelineno-49-31"></a><span class="hll">                    <span class="p">},</span>
</span><a id="__codelineno-49-32" name="__codelineno-49-32" href="#__codelineno-49-32"></a><span class="hll">                <span class="p">}</span>
</span><a id="__codelineno-49-33" name="__codelineno-49-33" href="#__codelineno-49-33"></a><span class="hll">            <span class="p">}</span>
</span><a id="__codelineno-49-34" name="__codelineno-49-34" href="#__codelineno-49-34"></a><span class="hll">        <span class="p">],</span>
</span><a id="__codelineno-49-35" name="__codelineno-49-35" href="#__codelineno-49-35"></a><span class="hll">        <span class="s2">&quot;toolChoice&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">},</span>
</span><a id="__codelineno-49-36" name="__codelineno-49-36" href="#__codelineno-49-36"></a><span class="hll">    <span class="p">}</span>
</span><a id="__codelineno-49-37" name="__codelineno-49-37" href="#__codelineno-49-37"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">bedrock_client</span><span class="o">.</span><span class="n">converse</span><span class="p">(</span>
</span><a id="__codelineno-49-38" name="__codelineno-49-38" href="#__codelineno-49-38"></a><span class="hll">        <span class="n">modelId</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span>
</span><a id="__codelineno-49-39" name="__codelineno-49-39" href="#__codelineno-49-39"></a><span class="hll">        <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
</span><a id="__codelineno-49-40" name="__codelineno-49-40" href="#__codelineno-49-40"></a><span class="hll">        <span class="n">toolConfig</span><span class="o">=</span><span class="n">tool_config</span><span class="p">,</span>
</span><a id="__codelineno-49-41" name="__codelineno-49-41" href="#__codelineno-49-41"></a><span class="hll">    <span class="p">)</span>
</span><a id="__codelineno-49-42" name="__codelineno-49-42" href="#__codelineno-49-42"></a><span class="hll">    <span class="n">output_message</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">]</span>
</span><a id="__codelineno-49-43" name="__codelineno-49-43" href="#__codelineno-49-43"></a><span class="hll">    <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_message</span><span class="p">)</span>
</span><a id="__codelineno-49-44" name="__codelineno-49-44" href="#__codelineno-49-44"></a><span class="hll">    <span class="k">for</span> <span class="n">content_piece</span> <span class="ow">in</span> <span class="n">output_message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]:</span>
</span><a id="__codelineno-49-45" name="__codelineno-49-45" href="#__codelineno-49-45"></a><span class="hll">        <span class="k">if</span> <span class="s2">&quot;toolUse&quot;</span> <span class="ow">in</span> <span class="n">content_piece</span> <span class="ow">and</span> <span class="n">content_piece</span><span class="p">[</span><span class="s2">&quot;toolUse&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">):</span>
</span><a id="__codelineno-49-46" name="__codelineno-49-46" href="#__codelineno-49-46"></a><span class="hll">            <span class="n">tool_input</span> <span class="o">=</span> <span class="n">content_piece</span><span class="p">[</span><span class="s2">&quot;toolUse&quot;</span><span class="p">][</span><span class="s2">&quot;input&quot;</span><span class="p">]</span>
</span><a id="__codelineno-49-47" name="__codelineno-49-47" href="#__codelineno-49-47"></a><span class="hll">            <span class="k">return</span> <span class="n">Book</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">tool_input</span><span class="p">)</span>
</span><a id="__codelineno-49-48" name="__codelineno-49-48" href="#__codelineno-49-48"></a><span class="hll">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No tool call found&quot;</span><span class="p">)</span>
</span><a id="__codelineno-49-49" name="__codelineno-49-49" href="#__codelineno-49-49"></a>
<a id="__codelineno-49-50" name="__codelineno-49-50" href="#__codelineno-49-50"></a>
<a id="__codelineno-49-51" name="__codelineno-49-51" href="#__codelineno-49-51"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-49-52" name="__codelineno-49-52" href="#__codelineno-49-52"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-49-53" name="__codelineno-49-53" href="#__codelineno-49-53"></a><span class="hll"><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>Notice how Mirascope makes generating structured outputs significantly simpler than the official SDKs. It also greatly reduces boilerplate and standardizes the interaction across all supported LLM providers.</p>
<div class="admonition info">
<p class="admonition-title">Tools By Default</p>
<p>By default, <code>response_model</code> will use <a href="../tools/">Tools</a> under the hood, forcing to the LLM to call that specific tool and constructing the response model from the tool's arguments.</p>
<p>We default to using tools because all supported providers support tools. You can also optionally set <code>json_mode=True</code> to use <a href="../json_mode/">JSON Mode</a> instead, which we cover in <a href="#json-mode">more detail below</a>.</p>
</div>
<h3 id="accessing-original-call-response">Accessing Original Call Response<a class="headerlink" href="#accessing-original-call-response" title="Permanent link">&para;</a></h3>
<p>Every <code>response_model</code> that uses a Pydantic <code>BaseModel</code> will automatically have the original <code>BaseCallResponse</code> instance accessible through the <code>_response</code> property:</p>
<div class="admonition mira">
<p class="admonition-title">Mirascope</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Shorthand</label><label for="__tabbed_7_2">Messages</label><label for="__tabbed_7_3">String Template</label><label for="__tabbed_7_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="8:10"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><input id="__tabbed_8_5" name="__tabbed_8" type="radio" /><input id="__tabbed_8_6" name="__tabbed_8" type="radio" /><input id="__tabbed_8_7" name="__tabbed_8" type="radio" /><input id="__tabbed_8_8" name="__tabbed_8" type="radio" /><input id="__tabbed_8_9" name="__tabbed_8" type="radio" /><input id="__tabbed_8_10" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">OpenAI</label><label for="__tabbed_8_2">Anthropic</label><label for="__tabbed_8_3">Google</label><label for="__tabbed_8_4">Groq</label><label for="__tabbed_8_5">xAI</label><label for="__tabbed_8_6">Mistral</label><label for="__tabbed_8_7">Cohere</label><label for="__tabbed_8_8">LiteLLM</label><label for="__tabbed_8_9">Azure AI</label><label for="__tabbed_8_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>
<a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a>
<a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a>
<a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a>
<a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a>
<a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a>
<a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>
<a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a>
<a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a>
<a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a>
<a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a>
<a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a>
<a id="__codelineno-51-23" name="__codelineno-51-23" href="#__codelineno-51-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-51-24" name="__codelineno-51-24" href="#__codelineno-51-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-51-25" name="__codelineno-51-25" href="#__codelineno-51-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>
<a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a>
<a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a>
<a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a>
<a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a>
<a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a>
<a id="__codelineno-52-23" name="__codelineno-52-23" href="#__codelineno-52-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-52-24" name="__codelineno-52-24" href="#__codelineno-52-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-52-25" name="__codelineno-52-25" href="#__codelineno-52-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>
<a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a>
<a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a>
<a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a>
<a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a>
<a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a>
<a id="__codelineno-53-23" name="__codelineno-53-23" href="#__codelineno-53-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-53-24" name="__codelineno-53-24" href="#__codelineno-53-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-53-25" name="__codelineno-53-25" href="#__codelineno-53-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a>
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a>
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a>
<a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a>
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a>
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a>
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a>
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a>
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a>
<a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a>
<a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a>
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a>
<a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a>
<a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a>
<a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="9:10"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><input id="__tabbed_9_4" name="__tabbed_9" type="radio" /><input id="__tabbed_9_5" name="__tabbed_9" type="radio" /><input id="__tabbed_9_6" name="__tabbed_9" type="radio" /><input id="__tabbed_9_7" name="__tabbed_9" type="radio" /><input id="__tabbed_9_8" name="__tabbed_9" type="radio" /><input id="__tabbed_9_9" name="__tabbed_9" type="radio" /><input id="__tabbed_9_10" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">OpenAI</label><label for="__tabbed_9_2">Anthropic</label><label for="__tabbed_9_3">Google</label><label for="__tabbed_9_4">Groq</label><label for="__tabbed_9_5">xAI</label><label for="__tabbed_9_6">Mistral</label><label for="__tabbed_9_7">Cohere</label><label for="__tabbed_9_8">LiteLLM</label><label for="__tabbed_9_9">Azure AI</label><label for="__tabbed_9_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a>
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a>
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>
<a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a>
<a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a>
<a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a>
<a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-61-25" name="__codelineno-61-25" href="#__codelineno-61-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a>
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a>
<a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a>
<a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a>
<a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a>
<a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a>
<a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a>
<a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a>
<a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a>
<a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a>
<a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-63-20" name="__codelineno-63-20" href="#__codelineno-63-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-63-21" name="__codelineno-63-21" href="#__codelineno-63-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-63-22" name="__codelineno-63-22" href="#__codelineno-63-22"></a>
<a id="__codelineno-63-23" name="__codelineno-63-23" href="#__codelineno-63-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-63-24" name="__codelineno-63-24" href="#__codelineno-63-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-63-25" name="__codelineno-63-25" href="#__codelineno-63-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a>
<a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a>
<a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a>
<a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a>
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a>
<a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a>
<a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a>
<a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>
<a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a>
<a id="__codelineno-66-13" name="__codelineno-66-13" href="#__codelineno-66-13"></a>
<a id="__codelineno-66-14" name="__codelineno-66-14" href="#__codelineno-66-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-66-15" name="__codelineno-66-15" href="#__codelineno-66-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-66-16" name="__codelineno-66-16" href="#__codelineno-66-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-66-17" name="__codelineno-66-17" href="#__codelineno-66-17"></a>
<a id="__codelineno-66-18" name="__codelineno-66-18" href="#__codelineno-66-18"></a>
<a id="__codelineno-66-19" name="__codelineno-66-19" href="#__codelineno-66-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-66-20" name="__codelineno-66-20" href="#__codelineno-66-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-66-21" name="__codelineno-66-21" href="#__codelineno-66-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-66-22" name="__codelineno-66-22" href="#__codelineno-66-22"></a>
<a id="__codelineno-66-23" name="__codelineno-66-23" href="#__codelineno-66-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-66-24" name="__codelineno-66-24" href="#__codelineno-66-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-66-25" name="__codelineno-66-25" href="#__codelineno-66-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a>
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a>
<a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a>
<a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a>
<a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>
<a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a>
<a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a>
<a id="__codelineno-68-13" name="__codelineno-68-13" href="#__codelineno-68-13"></a>
<a id="__codelineno-68-14" name="__codelineno-68-14" href="#__codelineno-68-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-68-15" name="__codelineno-68-15" href="#__codelineno-68-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-68-16" name="__codelineno-68-16" href="#__codelineno-68-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-68-17" name="__codelineno-68-17" href="#__codelineno-68-17"></a>
<a id="__codelineno-68-18" name="__codelineno-68-18" href="#__codelineno-68-18"></a>
<a id="__codelineno-68-19" name="__codelineno-68-19" href="#__codelineno-68-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-68-20" name="__codelineno-68-20" href="#__codelineno-68-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-68-21" name="__codelineno-68-21" href="#__codelineno-68-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-68-22" name="__codelineno-68-22" href="#__codelineno-68-22"></a>
<a id="__codelineno-68-23" name="__codelineno-68-23" href="#__codelineno-68-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-68-24" name="__codelineno-68-24" href="#__codelineno-68-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-68-25" name="__codelineno-68-25" href="#__codelineno-68-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a>
<a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a>
<a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a>
<a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a>
<a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-69-20" name="__codelineno-69-20" href="#__codelineno-69-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-69-21" name="__codelineno-69-21" href="#__codelineno-69-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-69-22" name="__codelineno-69-22" href="#__codelineno-69-22"></a>
<a id="__codelineno-69-23" name="__codelineno-69-23" href="#__codelineno-69-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-69-24" name="__codelineno-69-24" href="#__codelineno-69-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-69-25" name="__codelineno-69-25" href="#__codelineno-69-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="10:10"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><input id="__tabbed_10_4" name="__tabbed_10" type="radio" /><input id="__tabbed_10_5" name="__tabbed_10" type="radio" /><input id="__tabbed_10_6" name="__tabbed_10" type="radio" /><input id="__tabbed_10_7" name="__tabbed_10" type="radio" /><input id="__tabbed_10_8" name="__tabbed_10" type="radio" /><input id="__tabbed_10_9" name="__tabbed_10" type="radio" /><input id="__tabbed_10_10" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">OpenAI</label><label for="__tabbed_10_2">Anthropic</label><label for="__tabbed_10_3">Google</label><label for="__tabbed_10_4">Groq</label><label for="__tabbed_10_5">xAI</label><label for="__tabbed_10_6">Mistral</label><label for="__tabbed_10_7">Cohere</label><label for="__tabbed_10_8">LiteLLM</label><label for="__tabbed_10_9">Azure AI</label><label for="__tabbed_10_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>
<a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>
<a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a>
<a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a>
<a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a>
<a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-70-25" name="__codelineno-70-25" href="#__codelineno-70-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a>
<a id="__codelineno-71-10" name="__codelineno-71-10" href="#__codelineno-71-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-71-11" name="__codelineno-71-11" href="#__codelineno-71-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-71-12" name="__codelineno-71-12" href="#__codelineno-71-12"></a>
<a id="__codelineno-71-13" name="__codelineno-71-13" href="#__codelineno-71-13"></a>
<a id="__codelineno-71-14" name="__codelineno-71-14" href="#__codelineno-71-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-71-15" name="__codelineno-71-15" href="#__codelineno-71-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-71-16" name="__codelineno-71-16" href="#__codelineno-71-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-71-17" name="__codelineno-71-17" href="#__codelineno-71-17"></a>
<a id="__codelineno-71-18" name="__codelineno-71-18" href="#__codelineno-71-18"></a>
<a id="__codelineno-71-19" name="__codelineno-71-19" href="#__codelineno-71-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-71-20" name="__codelineno-71-20" href="#__codelineno-71-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-71-21" name="__codelineno-71-21" href="#__codelineno-71-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-71-22" name="__codelineno-71-22" href="#__codelineno-71-22"></a>
<a id="__codelineno-71-23" name="__codelineno-71-23" href="#__codelineno-71-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-71-24" name="__codelineno-71-24" href="#__codelineno-71-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-71-25" name="__codelineno-71-25" href="#__codelineno-71-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>
<a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a>
<a id="__codelineno-72-10" name="__codelineno-72-10" href="#__codelineno-72-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-72-11" name="__codelineno-72-11" href="#__codelineno-72-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-72-12" name="__codelineno-72-12" href="#__codelineno-72-12"></a>
<a id="__codelineno-72-13" name="__codelineno-72-13" href="#__codelineno-72-13"></a>
<a id="__codelineno-72-14" name="__codelineno-72-14" href="#__codelineno-72-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-72-15" name="__codelineno-72-15" href="#__codelineno-72-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-72-16" name="__codelineno-72-16" href="#__codelineno-72-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-72-17" name="__codelineno-72-17" href="#__codelineno-72-17"></a>
<a id="__codelineno-72-18" name="__codelineno-72-18" href="#__codelineno-72-18"></a>
<a id="__codelineno-72-19" name="__codelineno-72-19" href="#__codelineno-72-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-72-20" name="__codelineno-72-20" href="#__codelineno-72-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-72-21" name="__codelineno-72-21" href="#__codelineno-72-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-72-22" name="__codelineno-72-22" href="#__codelineno-72-22"></a>
<a id="__codelineno-72-23" name="__codelineno-72-23" href="#__codelineno-72-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-72-24" name="__codelineno-72-24" href="#__codelineno-72-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-72-25" name="__codelineno-72-25" href="#__codelineno-72-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>
<a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a>
<a id="__codelineno-73-7" name="__codelineno-73-7" href="#__codelineno-73-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-73-8" name="__codelineno-73-8" href="#__codelineno-73-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-73-9" name="__codelineno-73-9" href="#__codelineno-73-9"></a>
<a id="__codelineno-73-10" name="__codelineno-73-10" href="#__codelineno-73-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-73-11" name="__codelineno-73-11" href="#__codelineno-73-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-73-12" name="__codelineno-73-12" href="#__codelineno-73-12"></a>
<a id="__codelineno-73-13" name="__codelineno-73-13" href="#__codelineno-73-13"></a>
<a id="__codelineno-73-14" name="__codelineno-73-14" href="#__codelineno-73-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-73-15" name="__codelineno-73-15" href="#__codelineno-73-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-73-16" name="__codelineno-73-16" href="#__codelineno-73-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-73-17" name="__codelineno-73-17" href="#__codelineno-73-17"></a>
<a id="__codelineno-73-18" name="__codelineno-73-18" href="#__codelineno-73-18"></a>
<a id="__codelineno-73-19" name="__codelineno-73-19" href="#__codelineno-73-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-73-20" name="__codelineno-73-20" href="#__codelineno-73-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-73-21" name="__codelineno-73-21" href="#__codelineno-73-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-73-22" name="__codelineno-73-22" href="#__codelineno-73-22"></a>
<a id="__codelineno-73-23" name="__codelineno-73-23" href="#__codelineno-73-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-73-24" name="__codelineno-73-24" href="#__codelineno-73-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-73-25" name="__codelineno-73-25" href="#__codelineno-73-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>
<a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a>
<a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a>
<a id="__codelineno-74-10" name="__codelineno-74-10" href="#__codelineno-74-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-74-11" name="__codelineno-74-11" href="#__codelineno-74-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-74-12" name="__codelineno-74-12" href="#__codelineno-74-12"></a>
<a id="__codelineno-74-13" name="__codelineno-74-13" href="#__codelineno-74-13"></a>
<a id="__codelineno-74-14" name="__codelineno-74-14" href="#__codelineno-74-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-74-15" name="__codelineno-74-15" href="#__codelineno-74-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-74-16" name="__codelineno-74-16" href="#__codelineno-74-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-74-17" name="__codelineno-74-17" href="#__codelineno-74-17"></a>
<a id="__codelineno-74-18" name="__codelineno-74-18" href="#__codelineno-74-18"></a>
<a id="__codelineno-74-19" name="__codelineno-74-19" href="#__codelineno-74-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-74-20" name="__codelineno-74-20" href="#__codelineno-74-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-74-21" name="__codelineno-74-21" href="#__codelineno-74-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-74-22" name="__codelineno-74-22" href="#__codelineno-74-22"></a>
<a id="__codelineno-74-23" name="__codelineno-74-23" href="#__codelineno-74-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-74-24" name="__codelineno-74-24" href="#__codelineno-74-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-74-25" name="__codelineno-74-25" href="#__codelineno-74-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>
<a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>
<a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a>
<a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a>
<a id="__codelineno-75-13" name="__codelineno-75-13" href="#__codelineno-75-13"></a>
<a id="__codelineno-75-14" name="__codelineno-75-14" href="#__codelineno-75-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-75-15" name="__codelineno-75-15" href="#__codelineno-75-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-75-16" name="__codelineno-75-16" href="#__codelineno-75-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-75-17" name="__codelineno-75-17" href="#__codelineno-75-17"></a>
<a id="__codelineno-75-18" name="__codelineno-75-18" href="#__codelineno-75-18"></a>
<a id="__codelineno-75-19" name="__codelineno-75-19" href="#__codelineno-75-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-75-20" name="__codelineno-75-20" href="#__codelineno-75-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-75-21" name="__codelineno-75-21" href="#__codelineno-75-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-75-22" name="__codelineno-75-22" href="#__codelineno-75-22"></a>
<a id="__codelineno-75-23" name="__codelineno-75-23" href="#__codelineno-75-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-75-24" name="__codelineno-75-24" href="#__codelineno-75-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-75-25" name="__codelineno-75-25" href="#__codelineno-75-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a>
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a>
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a>
<a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a>
<a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a>
<a id="__codelineno-76-18" name="__codelineno-76-18" href="#__codelineno-76-18"></a>
<a id="__codelineno-76-19" name="__codelineno-76-19" href="#__codelineno-76-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-76-20" name="__codelineno-76-20" href="#__codelineno-76-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-76-21" name="__codelineno-76-21" href="#__codelineno-76-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-76-22" name="__codelineno-76-22" href="#__codelineno-76-22"></a>
<a id="__codelineno-76-23" name="__codelineno-76-23" href="#__codelineno-76-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-76-24" name="__codelineno-76-24" href="#__codelineno-76-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-76-25" name="__codelineno-76-25" href="#__codelineno-76-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a>
<a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a>
<a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a>
<a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-77-20" name="__codelineno-77-20" href="#__codelineno-77-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-77-21" name="__codelineno-77-21" href="#__codelineno-77-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-77-22" name="__codelineno-77-22" href="#__codelineno-77-22"></a>
<a id="__codelineno-77-23" name="__codelineno-77-23" href="#__codelineno-77-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-77-24" name="__codelineno-77-24" href="#__codelineno-77-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-77-25" name="__codelineno-77-25" href="#__codelineno-77-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a>
<a id="__codelineno-78-6" name="__codelineno-78-6" href="#__codelineno-78-6"></a>
<a id="__codelineno-78-7" name="__codelineno-78-7" href="#__codelineno-78-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-78-8" name="__codelineno-78-8" href="#__codelineno-78-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-78-9" name="__codelineno-78-9" href="#__codelineno-78-9"></a>
<a id="__codelineno-78-10" name="__codelineno-78-10" href="#__codelineno-78-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-78-11" name="__codelineno-78-11" href="#__codelineno-78-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-78-12" name="__codelineno-78-12" href="#__codelineno-78-12"></a>
<a id="__codelineno-78-13" name="__codelineno-78-13" href="#__codelineno-78-13"></a>
<a id="__codelineno-78-14" name="__codelineno-78-14" href="#__codelineno-78-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-78-15" name="__codelineno-78-15" href="#__codelineno-78-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-78-16" name="__codelineno-78-16" href="#__codelineno-78-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-78-17" name="__codelineno-78-17" href="#__codelineno-78-17"></a>
<a id="__codelineno-78-18" name="__codelineno-78-18" href="#__codelineno-78-18"></a>
<a id="__codelineno-78-19" name="__codelineno-78-19" href="#__codelineno-78-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-78-20" name="__codelineno-78-20" href="#__codelineno-78-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-78-21" name="__codelineno-78-21" href="#__codelineno-78-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-78-22" name="__codelineno-78-22" href="#__codelineno-78-22"></a>
<a id="__codelineno-78-23" name="__codelineno-78-23" href="#__codelineno-78-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-78-24" name="__codelineno-78-24" href="#__codelineno-78-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-78-25" name="__codelineno-78-25" href="#__codelineno-78-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>
<a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a>
<a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a>
<a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a>
<a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a>
<a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-79-20" name="__codelineno-79-20" href="#__codelineno-79-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-79-21" name="__codelineno-79-21" href="#__codelineno-79-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-79-22" name="__codelineno-79-22" href="#__codelineno-79-22"></a>
<a id="__codelineno-79-23" name="__codelineno-79-23" href="#__codelineno-79-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-79-24" name="__codelineno-79-24" href="#__codelineno-79-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-79-25" name="__codelineno-79-25" href="#__codelineno-79-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="11:10"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><input id="__tabbed_11_4" name="__tabbed_11" type="radio" /><input id="__tabbed_11_5" name="__tabbed_11" type="radio" /><input id="__tabbed_11_6" name="__tabbed_11" type="radio" /><input id="__tabbed_11_7" name="__tabbed_11" type="radio" /><input id="__tabbed_11_8" name="__tabbed_11" type="radio" /><input id="__tabbed_11_9" name="__tabbed_11" type="radio" /><input id="__tabbed_11_10" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">OpenAI</label><label for="__tabbed_11_2">Anthropic</label><label for="__tabbed_11_3">Google</label><label for="__tabbed_11_4">Groq</label><label for="__tabbed_11_5">xAI</label><label for="__tabbed_11_6">Mistral</label><label for="__tabbed_11_7">Cohere</label><label for="__tabbed_11_8">LiteLLM</label><label for="__tabbed_11_9">Azure AI</label><label for="__tabbed_11_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a>
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a>
<a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-80-9" name="__codelineno-80-9" href="#__codelineno-80-9"></a>
<a id="__codelineno-80-10" name="__codelineno-80-10" href="#__codelineno-80-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-80-11" name="__codelineno-80-11" href="#__codelineno-80-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-80-12" name="__codelineno-80-12" href="#__codelineno-80-12"></a>
<a id="__codelineno-80-13" name="__codelineno-80-13" href="#__codelineno-80-13"></a>
<a id="__codelineno-80-14" name="__codelineno-80-14" href="#__codelineno-80-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-80-15" name="__codelineno-80-15" href="#__codelineno-80-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-80-16" name="__codelineno-80-16" href="#__codelineno-80-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-80-17" name="__codelineno-80-17" href="#__codelineno-80-17"></a>
<a id="__codelineno-80-18" name="__codelineno-80-18" href="#__codelineno-80-18"></a>
<a id="__codelineno-80-19" name="__codelineno-80-19" href="#__codelineno-80-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-80-20" name="__codelineno-80-20" href="#__codelineno-80-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-80-21" name="__codelineno-80-21" href="#__codelineno-80-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-80-22" name="__codelineno-80-22" href="#__codelineno-80-22"></a>
<a id="__codelineno-80-23" name="__codelineno-80-23" href="#__codelineno-80-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-80-24" name="__codelineno-80-24" href="#__codelineno-80-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-80-25" name="__codelineno-80-25" href="#__codelineno-80-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a>
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>
<a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a>
<a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a>
<a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a>
<a id="__codelineno-81-18" name="__codelineno-81-18" href="#__codelineno-81-18"></a>
<a id="__codelineno-81-19" name="__codelineno-81-19" href="#__codelineno-81-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-81-20" name="__codelineno-81-20" href="#__codelineno-81-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-81-21" name="__codelineno-81-21" href="#__codelineno-81-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-81-22" name="__codelineno-81-22" href="#__codelineno-81-22"></a>
<a id="__codelineno-81-23" name="__codelineno-81-23" href="#__codelineno-81-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-81-24" name="__codelineno-81-24" href="#__codelineno-81-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-81-25" name="__codelineno-81-25" href="#__codelineno-81-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a>
<a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a>
<a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a>
<a id="__codelineno-82-10" name="__codelineno-82-10" href="#__codelineno-82-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-82-11" name="__codelineno-82-11" href="#__codelineno-82-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-82-12" name="__codelineno-82-12" href="#__codelineno-82-12"></a>
<a id="__codelineno-82-13" name="__codelineno-82-13" href="#__codelineno-82-13"></a>
<a id="__codelineno-82-14" name="__codelineno-82-14" href="#__codelineno-82-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-82-15" name="__codelineno-82-15" href="#__codelineno-82-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-82-16" name="__codelineno-82-16" href="#__codelineno-82-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-82-17" name="__codelineno-82-17" href="#__codelineno-82-17"></a>
<a id="__codelineno-82-18" name="__codelineno-82-18" href="#__codelineno-82-18"></a>
<a id="__codelineno-82-19" name="__codelineno-82-19" href="#__codelineno-82-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-82-20" name="__codelineno-82-20" href="#__codelineno-82-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-82-21" name="__codelineno-82-21" href="#__codelineno-82-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-82-22" name="__codelineno-82-22" href="#__codelineno-82-22"></a>
<a id="__codelineno-82-23" name="__codelineno-82-23" href="#__codelineno-82-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-82-24" name="__codelineno-82-24" href="#__codelineno-82-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-82-25" name="__codelineno-82-25" href="#__codelineno-82-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>
<a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>
<a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>
<a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a>
<a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a>
<a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-83-20" name="__codelineno-83-20" href="#__codelineno-83-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-83-21" name="__codelineno-83-21" href="#__codelineno-83-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-83-22" name="__codelineno-83-22" href="#__codelineno-83-22"></a>
<a id="__codelineno-83-23" name="__codelineno-83-23" href="#__codelineno-83-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-83-24" name="__codelineno-83-24" href="#__codelineno-83-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-83-25" name="__codelineno-83-25" href="#__codelineno-83-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a>
<a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a>
<a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a>
<a id="__codelineno-84-13" name="__codelineno-84-13" href="#__codelineno-84-13"></a>
<a id="__codelineno-84-14" name="__codelineno-84-14" href="#__codelineno-84-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-84-15" name="__codelineno-84-15" href="#__codelineno-84-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-84-16" name="__codelineno-84-16" href="#__codelineno-84-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-84-17" name="__codelineno-84-17" href="#__codelineno-84-17"></a>
<a id="__codelineno-84-18" name="__codelineno-84-18" href="#__codelineno-84-18"></a>
<a id="__codelineno-84-19" name="__codelineno-84-19" href="#__codelineno-84-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-84-20" name="__codelineno-84-20" href="#__codelineno-84-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-84-21" name="__codelineno-84-21" href="#__codelineno-84-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-84-22" name="__codelineno-84-22" href="#__codelineno-84-22"></a>
<a id="__codelineno-84-23" name="__codelineno-84-23" href="#__codelineno-84-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-84-24" name="__codelineno-84-24" href="#__codelineno-84-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-84-25" name="__codelineno-84-25" href="#__codelineno-84-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>
<a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a>
<a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a>
<a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a>
<a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a>
<a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a>
<a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a>
<a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a>
<a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a>
<a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a>
<a id="__codelineno-86-13" name="__codelineno-86-13" href="#__codelineno-86-13"></a>
<a id="__codelineno-86-14" name="__codelineno-86-14" href="#__codelineno-86-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-86-15" name="__codelineno-86-15" href="#__codelineno-86-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-86-16" name="__codelineno-86-16" href="#__codelineno-86-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-86-17" name="__codelineno-86-17" href="#__codelineno-86-17"></a>
<a id="__codelineno-86-18" name="__codelineno-86-18" href="#__codelineno-86-18"></a>
<a id="__codelineno-86-19" name="__codelineno-86-19" href="#__codelineno-86-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-86-20" name="__codelineno-86-20" href="#__codelineno-86-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-86-21" name="__codelineno-86-21" href="#__codelineno-86-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-86-22" name="__codelineno-86-22" href="#__codelineno-86-22"></a>
<a id="__codelineno-86-23" name="__codelineno-86-23" href="#__codelineno-86-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-86-24" name="__codelineno-86-24" href="#__codelineno-86-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-86-25" name="__codelineno-86-25" href="#__codelineno-86-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>
<a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a>
<a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a>
<a id="__codelineno-87-14" name="__codelineno-87-14" href="#__codelineno-87-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-87-15" name="__codelineno-87-15" href="#__codelineno-87-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-87-16" name="__codelineno-87-16" href="#__codelineno-87-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-87-17" name="__codelineno-87-17" href="#__codelineno-87-17"></a>
<a id="__codelineno-87-18" name="__codelineno-87-18" href="#__codelineno-87-18"></a>
<a id="__codelineno-87-19" name="__codelineno-87-19" href="#__codelineno-87-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-87-20" name="__codelineno-87-20" href="#__codelineno-87-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-87-21" name="__codelineno-87-21" href="#__codelineno-87-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-87-22" name="__codelineno-87-22" href="#__codelineno-87-22"></a>
<a id="__codelineno-87-23" name="__codelineno-87-23" href="#__codelineno-87-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-87-24" name="__codelineno-87-24" href="#__codelineno-87-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-87-25" name="__codelineno-87-25" href="#__codelineno-87-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>
<a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a>
<a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a>
<a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-88-15" name="__codelineno-88-15" href="#__codelineno-88-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-88-16" name="__codelineno-88-16" href="#__codelineno-88-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-88-17" name="__codelineno-88-17" href="#__codelineno-88-17"></a>
<a id="__codelineno-88-18" name="__codelineno-88-18" href="#__codelineno-88-18"></a>
<a id="__codelineno-88-19" name="__codelineno-88-19" href="#__codelineno-88-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-88-20" name="__codelineno-88-20" href="#__codelineno-88-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-88-21" name="__codelineno-88-21" href="#__codelineno-88-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-88-22" name="__codelineno-88-22" href="#__codelineno-88-22"></a>
<a id="__codelineno-88-23" name="__codelineno-88-23" href="#__codelineno-88-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-88-24" name="__codelineno-88-24" href="#__codelineno-88-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-88-25" name="__codelineno-88-25" href="#__codelineno-88-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>
</span><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a>
<a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a>
<a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-89-8" name="__codelineno-89-8" href="#__codelineno-89-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-89-9" name="__codelineno-89-9" href="#__codelineno-89-9"></a>
<a id="__codelineno-89-10" name="__codelineno-89-10" href="#__codelineno-89-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-89-11" name="__codelineno-89-11" href="#__codelineno-89-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-89-12" name="__codelineno-89-12" href="#__codelineno-89-12"></a>
<a id="__codelineno-89-13" name="__codelineno-89-13" href="#__codelineno-89-13"></a>
<a id="__codelineno-89-14" name="__codelineno-89-14" href="#__codelineno-89-14"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-89-15" name="__codelineno-89-15" href="#__codelineno-89-15"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-89-16" name="__codelineno-89-16" href="#__codelineno-89-16"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-89-17" name="__codelineno-89-17" href="#__codelineno-89-17"></a>
<a id="__codelineno-89-18" name="__codelineno-89-18" href="#__codelineno-89-18"></a>
<a id="__codelineno-89-19" name="__codelineno-89-19" href="#__codelineno-89-19"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-89-20" name="__codelineno-89-20" href="#__codelineno-89-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-89-21" name="__codelineno-89-21" href="#__codelineno-89-21"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-89-22" name="__codelineno-89-22" href="#__codelineno-89-22"></a>
<a id="__codelineno-89-23" name="__codelineno-89-23" href="#__codelineno-89-23"></a><span class="hll"><span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">book</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-89-24" name="__codelineno-89-24" href="#__codelineno-89-24"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-89-25" name="__codelineno-89-25" href="#__codelineno-89-25"></a><span class="hll"><span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h3 id="built-in-types">Built-In Types<a class="headerlink" href="#built-in-types" title="Permanent link">&para;</a></h3>
<p>For cases where you want to extract just a single built-in type, Mirascope provides a shorthand:</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="12:4"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Shorthand</label><label for="__tabbed_12_2">Messages</label><label for="__tabbed_12_3">String Template</label><label for="__tabbed_12_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="13:10"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><input id="__tabbed_13_3" name="__tabbed_13" type="radio" /><input id="__tabbed_13_4" name="__tabbed_13" type="radio" /><input id="__tabbed_13_5" name="__tabbed_13" type="radio" /><input id="__tabbed_13_6" name="__tabbed_13" type="radio" /><input id="__tabbed_13_7" name="__tabbed_13" type="radio" /><input id="__tabbed_13_8" name="__tabbed_13" type="radio" /><input id="__tabbed_13_9" name="__tabbed_13" type="radio" /><input id="__tabbed_13_10" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">OpenAI</label><label for="__tabbed_13_2">Anthropic</label><label for="__tabbed_13_3">Google</label><label for="__tabbed_13_4">Groq</label><label for="__tabbed_13_5">xAI</label><label for="__tabbed_13_6">Mistral</label><label for="__tabbed_13_7">Cohere</label><label for="__tabbed_13_8">LiteLLM</label><label for="__tabbed_13_9">Azure AI</label><label for="__tabbed_13_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a>
<a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a>
<a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a>    <span class="p">[</span>
<a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-90-13" name="__codelineno-90-13" href="#__codelineno-90-13"></a>    <span class="p">]</span>
<a id="__codelineno-90-14" name="__codelineno-90-14" href="#__codelineno-90-14"></a><span class="p">)</span>
<a id="__codelineno-90-15" name="__codelineno-90-15" href="#__codelineno-90-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-90-16" name="__codelineno-90-16" href="#__codelineno-90-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-91-7" name="__codelineno-91-7" href="#__codelineno-91-7"></a>
<a id="__codelineno-91-8" name="__codelineno-91-8" href="#__codelineno-91-8"></a>
<a id="__codelineno-91-9" name="__codelineno-91-9" href="#__codelineno-91-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-91-10" name="__codelineno-91-10" href="#__codelineno-91-10"></a>    <span class="p">[</span>
<a id="__codelineno-91-11" name="__codelineno-91-11" href="#__codelineno-91-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-91-12" name="__codelineno-91-12" href="#__codelineno-91-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-91-13" name="__codelineno-91-13" href="#__codelineno-91-13"></a>    <span class="p">]</span>
<a id="__codelineno-91-14" name="__codelineno-91-14" href="#__codelineno-91-14"></a><span class="p">)</span>
<a id="__codelineno-91-15" name="__codelineno-91-15" href="#__codelineno-91-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-91-16" name="__codelineno-91-16" href="#__codelineno-91-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a>    <span class="p">[</span>
<a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-92-12" name="__codelineno-92-12" href="#__codelineno-92-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-92-13" name="__codelineno-92-13" href="#__codelineno-92-13"></a>    <span class="p">]</span>
<a id="__codelineno-92-14" name="__codelineno-92-14" href="#__codelineno-92-14"></a><span class="p">)</span>
<a id="__codelineno-92-15" name="__codelineno-92-15" href="#__codelineno-92-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-92-16" name="__codelineno-92-16" href="#__codelineno-92-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>
<a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>
<a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>    <span class="p">[</span>
<a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a>    <span class="p">]</span>
<a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a><span class="p">)</span>
<a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-93-16" name="__codelineno-93-16" href="#__codelineno-93-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a>
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a>
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a>    <span class="p">[</span>
<a id="__codelineno-94-11" name="__codelineno-94-11" href="#__codelineno-94-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-94-12" name="__codelineno-94-12" href="#__codelineno-94-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-94-13" name="__codelineno-94-13" href="#__codelineno-94-13"></a>    <span class="p">]</span>
<a id="__codelineno-94-14" name="__codelineno-94-14" href="#__codelineno-94-14"></a><span class="p">)</span>
<a id="__codelineno-94-15" name="__codelineno-94-15" href="#__codelineno-94-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-94-16" name="__codelineno-94-16" href="#__codelineno-94-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>
<a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>    <span class="p">[</span>
<a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a>    <span class="p">]</span>
<a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a><span class="p">)</span>
<a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>
<a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>
<a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a>    <span class="p">[</span>
<a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a>    <span class="p">]</span>
<a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a><span class="p">)</span>
<a id="__codelineno-96-15" name="__codelineno-96-15" href="#__codelineno-96-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-96-16" name="__codelineno-96-16" href="#__codelineno-96-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>
<a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a>    <span class="p">[</span>
<a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a>    <span class="p">]</span>
<a id="__codelineno-97-14" name="__codelineno-97-14" href="#__codelineno-97-14"></a><span class="p">)</span>
<a id="__codelineno-97-15" name="__codelineno-97-15" href="#__codelineno-97-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-97-16" name="__codelineno-97-16" href="#__codelineno-97-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>
<a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a>
<a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>
<a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>    <span class="p">[</span>
<a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a>    <span class="p">]</span>
<a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a><span class="p">)</span>
<a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>
<a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>
<a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a>    <span class="p">[</span>
<a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-99-13" name="__codelineno-99-13" href="#__codelineno-99-13"></a>    <span class="p">]</span>
<a id="__codelineno-99-14" name="__codelineno-99-14" href="#__codelineno-99-14"></a><span class="p">)</span>
<a id="__codelineno-99-15" name="__codelineno-99-15" href="#__codelineno-99-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-99-16" name="__codelineno-99-16" href="#__codelineno-99-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="14:10"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><input id="__tabbed_14_4" name="__tabbed_14" type="radio" /><input id="__tabbed_14_5" name="__tabbed_14" type="radio" /><input id="__tabbed_14_6" name="__tabbed_14" type="radio" /><input id="__tabbed_14_7" name="__tabbed_14" type="radio" /><input id="__tabbed_14_8" name="__tabbed_14" type="radio" /><input id="__tabbed_14_9" name="__tabbed_14" type="radio" /><input id="__tabbed_14_10" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">OpenAI</label><label for="__tabbed_14_2">Anthropic</label><label for="__tabbed_14_3">Google</label><label for="__tabbed_14_4">Groq</label><label for="__tabbed_14_5">xAI</label><label for="__tabbed_14_6">Mistral</label><label for="__tabbed_14_7">Cohere</label><label for="__tabbed_14_8">LiteLLM</label><label for="__tabbed_14_9">Azure AI</label><label for="__tabbed_14_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>
<a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>
<a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a>    <span class="p">[</span>
<a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a>    <span class="p">]</span>
<a id="__codelineno-100-14" name="__codelineno-100-14" href="#__codelineno-100-14"></a><span class="p">)</span>
<a id="__codelineno-100-15" name="__codelineno-100-15" href="#__codelineno-100-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-100-16" name="__codelineno-100-16" href="#__codelineno-100-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>
<a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>
<a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>    <span class="p">[</span>
<a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>    <span class="p">]</span>
<a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a><span class="p">)</span>
<a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>
<a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>
<a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a>    <span class="p">[</span>
<a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a>    <span class="p">]</span>
<a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a><span class="p">)</span>
<a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>    <span class="p">[</span>
<a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>    <span class="p">]</span>
<a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a><span class="p">)</span>
<a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>
<a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>
<a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a>    <span class="p">[</span>
<a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a>    <span class="p">]</span>
<a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a><span class="p">)</span>
<a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>
<a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a>
<a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a>    <span class="p">[</span>
<a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a>    <span class="p">]</span>
<a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a><span class="p">)</span>
<a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>
<a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>
<a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>    <span class="p">[</span>
<a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>    <span class="p">]</span>
<a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a><span class="p">)</span>
<a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a>
<a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>
<a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>    <span class="p">[</span>
<a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-107-13" name="__codelineno-107-13" href="#__codelineno-107-13"></a>    <span class="p">]</span>
<a id="__codelineno-107-14" name="__codelineno-107-14" href="#__codelineno-107-14"></a><span class="p">)</span>
<a id="__codelineno-107-15" name="__codelineno-107-15" href="#__codelineno-107-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-107-16" name="__codelineno-107-16" href="#__codelineno-107-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>
<a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>
<a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>    <span class="p">[</span>
<a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a>    <span class="p">]</span>
<a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a><span class="p">)</span>
<a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
<a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
<a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
<a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a>
<a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-109-10" name="__codelineno-109-10" href="#__codelineno-109-10"></a>    <span class="p">[</span>
<a id="__codelineno-109-11" name="__codelineno-109-11" href="#__codelineno-109-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-109-12" name="__codelineno-109-12" href="#__codelineno-109-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-109-13" name="__codelineno-109-13" href="#__codelineno-109-13"></a>    <span class="p">]</span>
<a id="__codelineno-109-14" name="__codelineno-109-14" href="#__codelineno-109-14"></a><span class="p">)</span>
<a id="__codelineno-109-15" name="__codelineno-109-15" href="#__codelineno-109-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-109-16" name="__codelineno-109-16" href="#__codelineno-109-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="15:10"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><input id="__tabbed_15_4" name="__tabbed_15" type="radio" /><input id="__tabbed_15_5" name="__tabbed_15" type="radio" /><input id="__tabbed_15_6" name="__tabbed_15" type="radio" /><input id="__tabbed_15_7" name="__tabbed_15" type="radio" /><input id="__tabbed_15_8" name="__tabbed_15" type="radio" /><input id="__tabbed_15_9" name="__tabbed_15" type="radio" /><input id="__tabbed_15_10" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">OpenAI</label><label for="__tabbed_15_2">Anthropic</label><label for="__tabbed_15_3">Google</label><label for="__tabbed_15_4">Groq</label><label for="__tabbed_15_5">xAI</label><label for="__tabbed_15_6">Mistral</label><label for="__tabbed_15_7">Cohere</label><label for="__tabbed_15_8">LiteLLM</label><label for="__tabbed_15_9">Azure AI</label><label for="__tabbed_15_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
<a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>
<a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-110-7" name="__codelineno-110-7" href="#__codelineno-110-7"></a>
<a id="__codelineno-110-8" name="__codelineno-110-8" href="#__codelineno-110-8"></a>
<a id="__codelineno-110-9" name="__codelineno-110-9" href="#__codelineno-110-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-110-10" name="__codelineno-110-10" href="#__codelineno-110-10"></a>    <span class="p">[</span>
<a id="__codelineno-110-11" name="__codelineno-110-11" href="#__codelineno-110-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-110-12" name="__codelineno-110-12" href="#__codelineno-110-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-110-13" name="__codelineno-110-13" href="#__codelineno-110-13"></a>    <span class="p">]</span>
<a id="__codelineno-110-14" name="__codelineno-110-14" href="#__codelineno-110-14"></a><span class="p">)</span>
<a id="__codelineno-110-15" name="__codelineno-110-15" href="#__codelineno-110-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-110-16" name="__codelineno-110-16" href="#__codelineno-110-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>
<a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>
<a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-111-5" name="__codelineno-111-5" href="#__codelineno-111-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-111-6" name="__codelineno-111-6" href="#__codelineno-111-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-111-7" name="__codelineno-111-7" href="#__codelineno-111-7"></a>
<a id="__codelineno-111-8" name="__codelineno-111-8" href="#__codelineno-111-8"></a>
<a id="__codelineno-111-9" name="__codelineno-111-9" href="#__codelineno-111-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-111-10" name="__codelineno-111-10" href="#__codelineno-111-10"></a>    <span class="p">[</span>
<a id="__codelineno-111-11" name="__codelineno-111-11" href="#__codelineno-111-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-111-12" name="__codelineno-111-12" href="#__codelineno-111-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-111-13" name="__codelineno-111-13" href="#__codelineno-111-13"></a>    <span class="p">]</span>
<a id="__codelineno-111-14" name="__codelineno-111-14" href="#__codelineno-111-14"></a><span class="p">)</span>
<a id="__codelineno-111-15" name="__codelineno-111-15" href="#__codelineno-111-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-111-16" name="__codelineno-111-16" href="#__codelineno-111-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a>
<a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a>
<a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-112-7" name="__codelineno-112-7" href="#__codelineno-112-7"></a>
<a id="__codelineno-112-8" name="__codelineno-112-8" href="#__codelineno-112-8"></a>
<a id="__codelineno-112-9" name="__codelineno-112-9" href="#__codelineno-112-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-112-10" name="__codelineno-112-10" href="#__codelineno-112-10"></a>    <span class="p">[</span>
<a id="__codelineno-112-11" name="__codelineno-112-11" href="#__codelineno-112-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-112-12" name="__codelineno-112-12" href="#__codelineno-112-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-112-13" name="__codelineno-112-13" href="#__codelineno-112-13"></a>    <span class="p">]</span>
<a id="__codelineno-112-14" name="__codelineno-112-14" href="#__codelineno-112-14"></a><span class="p">)</span>
<a id="__codelineno-112-15" name="__codelineno-112-15" href="#__codelineno-112-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-112-16" name="__codelineno-112-16" href="#__codelineno-112-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>
<a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a>
<a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a>
<a id="__codelineno-113-8" name="__codelineno-113-8" href="#__codelineno-113-8"></a>
<a id="__codelineno-113-9" name="__codelineno-113-9" href="#__codelineno-113-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-113-10" name="__codelineno-113-10" href="#__codelineno-113-10"></a>    <span class="p">[</span>
<a id="__codelineno-113-11" name="__codelineno-113-11" href="#__codelineno-113-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-113-12" name="__codelineno-113-12" href="#__codelineno-113-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-113-13" name="__codelineno-113-13" href="#__codelineno-113-13"></a>    <span class="p">]</span>
<a id="__codelineno-113-14" name="__codelineno-113-14" href="#__codelineno-113-14"></a><span class="p">)</span>
<a id="__codelineno-113-15" name="__codelineno-113-15" href="#__codelineno-113-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-113-16" name="__codelineno-113-16" href="#__codelineno-113-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>
<a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a>
<a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-114-6" name="__codelineno-114-6" href="#__codelineno-114-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-114-7" name="__codelineno-114-7" href="#__codelineno-114-7"></a>
<a id="__codelineno-114-8" name="__codelineno-114-8" href="#__codelineno-114-8"></a>
<a id="__codelineno-114-9" name="__codelineno-114-9" href="#__codelineno-114-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-114-10" name="__codelineno-114-10" href="#__codelineno-114-10"></a>    <span class="p">[</span>
<a id="__codelineno-114-11" name="__codelineno-114-11" href="#__codelineno-114-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-114-12" name="__codelineno-114-12" href="#__codelineno-114-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-114-13" name="__codelineno-114-13" href="#__codelineno-114-13"></a>    <span class="p">]</span>
<a id="__codelineno-114-14" name="__codelineno-114-14" href="#__codelineno-114-14"></a><span class="p">)</span>
<a id="__codelineno-114-15" name="__codelineno-114-15" href="#__codelineno-114-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-114-16" name="__codelineno-114-16" href="#__codelineno-114-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a>
<a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-115-7" name="__codelineno-115-7" href="#__codelineno-115-7"></a>
<a id="__codelineno-115-8" name="__codelineno-115-8" href="#__codelineno-115-8"></a>
<a id="__codelineno-115-9" name="__codelineno-115-9" href="#__codelineno-115-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-115-10" name="__codelineno-115-10" href="#__codelineno-115-10"></a>    <span class="p">[</span>
<a id="__codelineno-115-11" name="__codelineno-115-11" href="#__codelineno-115-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-115-12" name="__codelineno-115-12" href="#__codelineno-115-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-115-13" name="__codelineno-115-13" href="#__codelineno-115-13"></a>    <span class="p">]</span>
<a id="__codelineno-115-14" name="__codelineno-115-14" href="#__codelineno-115-14"></a><span class="p">)</span>
<a id="__codelineno-115-15" name="__codelineno-115-15" href="#__codelineno-115-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-115-16" name="__codelineno-115-16" href="#__codelineno-115-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a>
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a>
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a>
<a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a>
<a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a>    <span class="p">[</span>
<a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-116-12" name="__codelineno-116-12" href="#__codelineno-116-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-116-13" name="__codelineno-116-13" href="#__codelineno-116-13"></a>    <span class="p">]</span>
<a id="__codelineno-116-14" name="__codelineno-116-14" href="#__codelineno-116-14"></a><span class="p">)</span>
<a id="__codelineno-116-15" name="__codelineno-116-15" href="#__codelineno-116-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-116-16" name="__codelineno-116-16" href="#__codelineno-116-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a>
<a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a>
<a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a>
<a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-117-10" name="__codelineno-117-10" href="#__codelineno-117-10"></a>    <span class="p">[</span>
<a id="__codelineno-117-11" name="__codelineno-117-11" href="#__codelineno-117-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-117-12" name="__codelineno-117-12" href="#__codelineno-117-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-117-13" name="__codelineno-117-13" href="#__codelineno-117-13"></a>    <span class="p">]</span>
<a id="__codelineno-117-14" name="__codelineno-117-14" href="#__codelineno-117-14"></a><span class="p">)</span>
<a id="__codelineno-117-15" name="__codelineno-117-15" href="#__codelineno-117-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-117-16" name="__codelineno-117-16" href="#__codelineno-117-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a>    <span class="p">[</span>
<a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>    <span class="p">]</span>
<a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a><span class="p">)</span>
<a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>
<a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>
<a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract book titles from </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a>
<a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a>
<a id="__codelineno-119-9" name="__codelineno-119-9" href="#__codelineno-119-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-119-10" name="__codelineno-119-10" href="#__codelineno-119-10"></a>    <span class="p">[</span>
<a id="__codelineno-119-11" name="__codelineno-119-11" href="#__codelineno-119-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-119-12" name="__codelineno-119-12" href="#__codelineno-119-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-119-13" name="__codelineno-119-13" href="#__codelineno-119-13"></a>    <span class="p">]</span>
<a id="__codelineno-119-14" name="__codelineno-119-14" href="#__codelineno-119-14"></a><span class="p">)</span>
<a id="__codelineno-119-15" name="__codelineno-119-15" href="#__codelineno-119-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-119-16" name="__codelineno-119-16" href="#__codelineno-119-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="16:10"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><input id="__tabbed_16_3" name="__tabbed_16" type="radio" /><input id="__tabbed_16_4" name="__tabbed_16" type="radio" /><input id="__tabbed_16_5" name="__tabbed_16" type="radio" /><input id="__tabbed_16_6" name="__tabbed_16" type="radio" /><input id="__tabbed_16_7" name="__tabbed_16" type="radio" /><input id="__tabbed_16_8" name="__tabbed_16" type="radio" /><input id="__tabbed_16_9" name="__tabbed_16" type="radio" /><input id="__tabbed_16_10" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">OpenAI</label><label for="__tabbed_16_2">Anthropic</label><label for="__tabbed_16_3">Google</label><label for="__tabbed_16_4">Groq</label><label for="__tabbed_16_5">xAI</label><label for="__tabbed_16_6">Mistral</label><label for="__tabbed_16_7">Cohere</label><label for="__tabbed_16_8">LiteLLM</label><label for="__tabbed_16_9">Azure AI</label><label for="__tabbed_16_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>
<a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>
<a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>    <span class="p">[</span>
<a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>    <span class="p">]</span>
<a id="__codelineno-120-14" name="__codelineno-120-14" href="#__codelineno-120-14"></a><span class="p">)</span>
<a id="__codelineno-120-15" name="__codelineno-120-15" href="#__codelineno-120-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-120-16" name="__codelineno-120-16" href="#__codelineno-120-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
<a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a>
<a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a>
<a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a>
<a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a>    <span class="p">[</span>
<a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-121-12" name="__codelineno-121-12" href="#__codelineno-121-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-121-13" name="__codelineno-121-13" href="#__codelineno-121-13"></a>    <span class="p">]</span>
<a id="__codelineno-121-14" name="__codelineno-121-14" href="#__codelineno-121-14"></a><span class="p">)</span>
<a id="__codelineno-121-15" name="__codelineno-121-15" href="#__codelineno-121-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-121-16" name="__codelineno-121-16" href="#__codelineno-121-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>
<a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>
<a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>
<a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a>
<a id="__codelineno-122-9" name="__codelineno-122-9" href="#__codelineno-122-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-122-10" name="__codelineno-122-10" href="#__codelineno-122-10"></a>    <span class="p">[</span>
<a id="__codelineno-122-11" name="__codelineno-122-11" href="#__codelineno-122-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-122-12" name="__codelineno-122-12" href="#__codelineno-122-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-122-13" name="__codelineno-122-13" href="#__codelineno-122-13"></a>    <span class="p">]</span>
<a id="__codelineno-122-14" name="__codelineno-122-14" href="#__codelineno-122-14"></a><span class="p">)</span>
<a id="__codelineno-122-15" name="__codelineno-122-15" href="#__codelineno-122-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-122-16" name="__codelineno-122-16" href="#__codelineno-122-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
<a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a>
<a id="__codelineno-123-8" name="__codelineno-123-8" href="#__codelineno-123-8"></a>
<a id="__codelineno-123-9" name="__codelineno-123-9" href="#__codelineno-123-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-123-10" name="__codelineno-123-10" href="#__codelineno-123-10"></a>    <span class="p">[</span>
<a id="__codelineno-123-11" name="__codelineno-123-11" href="#__codelineno-123-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-123-12" name="__codelineno-123-12" href="#__codelineno-123-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-123-13" name="__codelineno-123-13" href="#__codelineno-123-13"></a>    <span class="p">]</span>
<a id="__codelineno-123-14" name="__codelineno-123-14" href="#__codelineno-123-14"></a><span class="p">)</span>
<a id="__codelineno-123-15" name="__codelineno-123-15" href="#__codelineno-123-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-123-16" name="__codelineno-123-16" href="#__codelineno-123-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a>
<a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>
<a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-124-6" name="__codelineno-124-6" href="#__codelineno-124-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-124-7" name="__codelineno-124-7" href="#__codelineno-124-7"></a>
<a id="__codelineno-124-8" name="__codelineno-124-8" href="#__codelineno-124-8"></a>
<a id="__codelineno-124-9" name="__codelineno-124-9" href="#__codelineno-124-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-124-10" name="__codelineno-124-10" href="#__codelineno-124-10"></a>    <span class="p">[</span>
<a id="__codelineno-124-11" name="__codelineno-124-11" href="#__codelineno-124-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-124-12" name="__codelineno-124-12" href="#__codelineno-124-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-124-13" name="__codelineno-124-13" href="#__codelineno-124-13"></a>    <span class="p">]</span>
<a id="__codelineno-124-14" name="__codelineno-124-14" href="#__codelineno-124-14"></a><span class="p">)</span>
<a id="__codelineno-124-15" name="__codelineno-124-15" href="#__codelineno-124-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-124-16" name="__codelineno-124-16" href="#__codelineno-124-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>
<a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a>
<a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>    <span class="p">[</span>
<a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>    <span class="p">]</span>
<a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a><span class="p">)</span>
<a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>
<a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a>
<a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-126-6" name="__codelineno-126-6" href="#__codelineno-126-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-126-7" name="__codelineno-126-7" href="#__codelineno-126-7"></a>
<a id="__codelineno-126-8" name="__codelineno-126-8" href="#__codelineno-126-8"></a>
<a id="__codelineno-126-9" name="__codelineno-126-9" href="#__codelineno-126-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-126-10" name="__codelineno-126-10" href="#__codelineno-126-10"></a>    <span class="p">[</span>
<a id="__codelineno-126-11" name="__codelineno-126-11" href="#__codelineno-126-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-126-12" name="__codelineno-126-12" href="#__codelineno-126-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-126-13" name="__codelineno-126-13" href="#__codelineno-126-13"></a>    <span class="p">]</span>
<a id="__codelineno-126-14" name="__codelineno-126-14" href="#__codelineno-126-14"></a><span class="p">)</span>
<a id="__codelineno-126-15" name="__codelineno-126-15" href="#__codelineno-126-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-126-16" name="__codelineno-126-16" href="#__codelineno-126-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>
<a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>
<a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a>
<a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a>
<a id="__codelineno-127-9" name="__codelineno-127-9" href="#__codelineno-127-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-127-10" name="__codelineno-127-10" href="#__codelineno-127-10"></a>    <span class="p">[</span>
<a id="__codelineno-127-11" name="__codelineno-127-11" href="#__codelineno-127-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-127-12" name="__codelineno-127-12" href="#__codelineno-127-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-127-13" name="__codelineno-127-13" href="#__codelineno-127-13"></a>    <span class="p">]</span>
<a id="__codelineno-127-14" name="__codelineno-127-14" href="#__codelineno-127-14"></a><span class="p">)</span>
<a id="__codelineno-127-15" name="__codelineno-127-15" href="#__codelineno-127-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-127-16" name="__codelineno-127-16" href="#__codelineno-127-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>
<a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>
<a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-128-5" name="__codelineno-128-5" href="#__codelineno-128-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-128-6" name="__codelineno-128-6" href="#__codelineno-128-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-128-7" name="__codelineno-128-7" href="#__codelineno-128-7"></a>
<a id="__codelineno-128-8" name="__codelineno-128-8" href="#__codelineno-128-8"></a>
<a id="__codelineno-128-9" name="__codelineno-128-9" href="#__codelineno-128-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-128-10" name="__codelineno-128-10" href="#__codelineno-128-10"></a>    <span class="p">[</span>
<a id="__codelineno-128-11" name="__codelineno-128-11" href="#__codelineno-128-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-128-12" name="__codelineno-128-12" href="#__codelineno-128-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-128-13" name="__codelineno-128-13" href="#__codelineno-128-13"></a>    <span class="p">]</span>
<a id="__codelineno-128-14" name="__codelineno-128-14" href="#__codelineno-128-14"></a><span class="p">)</span>
<a id="__codelineno-128-15" name="__codelineno-128-15" href="#__codelineno-128-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-128-16" name="__codelineno-128-16" href="#__codelineno-128-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>
<a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>
<a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
</span><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract book titles from </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>
<a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>
<a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span>
<a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>    <span class="p">[</span>
<a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>        <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-129-12" name="__codelineno-129-12" href="#__codelineno-129-12"></a>        <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-129-13" name="__codelineno-129-13" href="#__codelineno-129-13"></a>    <span class="p">]</span>
<a id="__codelineno-129-14" name="__codelineno-129-14" href="#__codelineno-129-14"></a><span class="p">)</span>
<a id="__codelineno-129-15" name="__codelineno-129-15" href="#__codelineno-129-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-129-16" name="__codelineno-129-16" href="#__codelineno-129-16"></a><span class="hll"><span class="c1"># Output: [&quot;The Name of the Wind&quot;, &quot;Mistborn: The Final Empire&quot;]</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Here, we are using <code>list[str]</code> as the <code>response_model</code>, which Mirascope handles without needing to define a full <code>BaseModel</code>. You could of course set <code>response_model=list[Book]</code> as well.</p>
<p>Note that we have no way of attaching <code>BaseCallResponse</code> to built-in types, so using a Pydantic <code>BaseModel</code> is recommended if you anticipate needing access to the original call response.</p>
<h2 id="supported-field-types">Supported Field Types<a class="headerlink" href="#supported-field-types" title="Permanent link">&para;</a></h2>
<p>While Mirascope provides a consistent interface, type support varies among providers:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>OpenAI</th>
<th>Anthropic</th>
<th>Google</th>
<th>Groq</th>
<th>xAI</th>
<th>Mistral</th>
<th>Cohere</th>
</tr>
</thead>
<tbody>
<tr>
<td>str</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>int</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>float</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>bool</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>bytes</td>
<td>✓✓</td>
<td>✓✓</td>
<td>-✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>list</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>set</td>
<td>✓✓</td>
<td>✓✓</td>
<td>--</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>tuple</td>
<td>-✓</td>
<td>✓✓</td>
<td>-✓</td>
<td>✓✓</td>
<td>-✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>dict</td>
<td>-✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>-✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>Literal/Enum</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
</tr>
<tr>
<td>BaseModel</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>-✓</td>
</tr>
<tr>
<td>Nested ($def)</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>✓✓</td>
<td>--</td>
</tr>
</tbody>
</table>
<p>✓✓ : Fully Supported, -✓: Only JSON Mode Support, -- : Not supported</p>
<h2 id="validation-and-error-handling">Validation and Error Handling<a class="headerlink" href="#validation-and-error-handling" title="Permanent link">&para;</a></h2>
<p>While <code>response_model</code> significantly improves output structure and validation, it's important to handle potential errors.</p>
<p>Let's take a look at an example where we want to validate that all fields are uppercase:</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="17:4"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><input id="__tabbed_17_4" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Shorthand</label><label for="__tabbed_17_2">Messages</label><label for="__tabbed_17_3">String Template</label><label for="__tabbed_17_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="18:10"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><input id="__tabbed_18_4" name="__tabbed_18" type="radio" /><input id="__tabbed_18_5" name="__tabbed_18" type="radio" /><input id="__tabbed_18_6" name="__tabbed_18" type="radio" /><input id="__tabbed_18_7" name="__tabbed_18" type="radio" /><input id="__tabbed_18_8" name="__tabbed_18" type="radio" /><input id="__tabbed_18_9" name="__tabbed_18" type="radio" /><input id="__tabbed_18_10" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">OpenAI</label><label for="__tabbed_18_2">Anthropic</label><label for="__tabbed_18_3">Google</label><label for="__tabbed_18_4">Groq</label><label for="__tabbed_18_5">xAI</label><label for="__tabbed_18_6">Mistral</label><label for="__tabbed_18_7">Cohere</label><label for="__tabbed_18_8">LiteLLM</label><label for="__tabbed_18_9">Azure AI</label><label for="__tabbed_18_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>
<a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a>
<a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a>
<a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a>
<a id="__codelineno-130-11" name="__codelineno-130-11" href="#__codelineno-130-11"></a>
<a id="__codelineno-130-12" name="__codelineno-130-12" href="#__codelineno-130-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-130-13" name="__codelineno-130-13" href="#__codelineno-130-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-130-14" name="__codelineno-130-14" href="#__codelineno-130-14"></a>
<a id="__codelineno-130-15" name="__codelineno-130-15" href="#__codelineno-130-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-130-16" name="__codelineno-130-16" href="#__codelineno-130-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-130-17" name="__codelineno-130-17" href="#__codelineno-130-17"></a>
<a id="__codelineno-130-18" name="__codelineno-130-18" href="#__codelineno-130-18"></a>
<a id="__codelineno-130-19" name="__codelineno-130-19" href="#__codelineno-130-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-130-20" name="__codelineno-130-20" href="#__codelineno-130-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-130-21" name="__codelineno-130-21" href="#__codelineno-130-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-130-22" name="__codelineno-130-22" href="#__codelineno-130-22"></a>
<a id="__codelineno-130-23" name="__codelineno-130-23" href="#__codelineno-130-23"></a>
<a id="__codelineno-130-24" name="__codelineno-130-24" href="#__codelineno-130-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-130-25" name="__codelineno-130-25" href="#__codelineno-130-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-130-26" name="__codelineno-130-26" href="#__codelineno-130-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-130-27" name="__codelineno-130-27" href="#__codelineno-130-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-130-28" name="__codelineno-130-28" href="#__codelineno-130-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-130-29" name="__codelineno-130-29" href="#__codelineno-130-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-130-30" name="__codelineno-130-30" href="#__codelineno-130-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-130-31" name="__codelineno-130-31" href="#__codelineno-130-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-130-32" name="__codelineno-130-32" href="#__codelineno-130-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-130-33" name="__codelineno-130-33" href="#__codelineno-130-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-130-34" name="__codelineno-130-34" href="#__codelineno-130-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-130-35" name="__codelineno-130-35" href="#__codelineno-130-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-130-36" name="__codelineno-130-36" href="#__codelineno-130-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a>
<a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a>
<a id="__codelineno-131-6" name="__codelineno-131-6" href="#__codelineno-131-6"></a>
<a id="__codelineno-131-7" name="__codelineno-131-7" href="#__codelineno-131-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-131-8" name="__codelineno-131-8" href="#__codelineno-131-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-131-9" name="__codelineno-131-9" href="#__codelineno-131-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-131-10" name="__codelineno-131-10" href="#__codelineno-131-10"></a>
<a id="__codelineno-131-11" name="__codelineno-131-11" href="#__codelineno-131-11"></a>
<a id="__codelineno-131-12" name="__codelineno-131-12" href="#__codelineno-131-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-131-13" name="__codelineno-131-13" href="#__codelineno-131-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-131-14" name="__codelineno-131-14" href="#__codelineno-131-14"></a>
<a id="__codelineno-131-15" name="__codelineno-131-15" href="#__codelineno-131-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-131-16" name="__codelineno-131-16" href="#__codelineno-131-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-131-17" name="__codelineno-131-17" href="#__codelineno-131-17"></a>
<a id="__codelineno-131-18" name="__codelineno-131-18" href="#__codelineno-131-18"></a>
<a id="__codelineno-131-19" name="__codelineno-131-19" href="#__codelineno-131-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-131-20" name="__codelineno-131-20" href="#__codelineno-131-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-131-21" name="__codelineno-131-21" href="#__codelineno-131-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-131-22" name="__codelineno-131-22" href="#__codelineno-131-22"></a>
<a id="__codelineno-131-23" name="__codelineno-131-23" href="#__codelineno-131-23"></a>
<a id="__codelineno-131-24" name="__codelineno-131-24" href="#__codelineno-131-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-131-25" name="__codelineno-131-25" href="#__codelineno-131-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-131-26" name="__codelineno-131-26" href="#__codelineno-131-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-131-27" name="__codelineno-131-27" href="#__codelineno-131-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-131-28" name="__codelineno-131-28" href="#__codelineno-131-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-131-29" name="__codelineno-131-29" href="#__codelineno-131-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-131-30" name="__codelineno-131-30" href="#__codelineno-131-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-131-31" name="__codelineno-131-31" href="#__codelineno-131-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-131-32" name="__codelineno-131-32" href="#__codelineno-131-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-131-33" name="__codelineno-131-33" href="#__codelineno-131-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-131-34" name="__codelineno-131-34" href="#__codelineno-131-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-131-35" name="__codelineno-131-35" href="#__codelineno-131-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-131-36" name="__codelineno-131-36" href="#__codelineno-131-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>
<a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-132-5" name="__codelineno-132-5" href="#__codelineno-132-5"></a>
<a id="__codelineno-132-6" name="__codelineno-132-6" href="#__codelineno-132-6"></a>
<a id="__codelineno-132-7" name="__codelineno-132-7" href="#__codelineno-132-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-132-8" name="__codelineno-132-8" href="#__codelineno-132-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-132-9" name="__codelineno-132-9" href="#__codelineno-132-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-132-10" name="__codelineno-132-10" href="#__codelineno-132-10"></a>
<a id="__codelineno-132-11" name="__codelineno-132-11" href="#__codelineno-132-11"></a>
<a id="__codelineno-132-12" name="__codelineno-132-12" href="#__codelineno-132-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-132-13" name="__codelineno-132-13" href="#__codelineno-132-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-132-14" name="__codelineno-132-14" href="#__codelineno-132-14"></a>
<a id="__codelineno-132-15" name="__codelineno-132-15" href="#__codelineno-132-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-132-16" name="__codelineno-132-16" href="#__codelineno-132-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-132-17" name="__codelineno-132-17" href="#__codelineno-132-17"></a>
<a id="__codelineno-132-18" name="__codelineno-132-18" href="#__codelineno-132-18"></a>
<a id="__codelineno-132-19" name="__codelineno-132-19" href="#__codelineno-132-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-132-20" name="__codelineno-132-20" href="#__codelineno-132-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-132-21" name="__codelineno-132-21" href="#__codelineno-132-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-132-22" name="__codelineno-132-22" href="#__codelineno-132-22"></a>
<a id="__codelineno-132-23" name="__codelineno-132-23" href="#__codelineno-132-23"></a>
<a id="__codelineno-132-24" name="__codelineno-132-24" href="#__codelineno-132-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-132-25" name="__codelineno-132-25" href="#__codelineno-132-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-132-26" name="__codelineno-132-26" href="#__codelineno-132-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-132-27" name="__codelineno-132-27" href="#__codelineno-132-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-132-28" name="__codelineno-132-28" href="#__codelineno-132-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-132-29" name="__codelineno-132-29" href="#__codelineno-132-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-132-30" name="__codelineno-132-30" href="#__codelineno-132-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-132-31" name="__codelineno-132-31" href="#__codelineno-132-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-132-32" name="__codelineno-132-32" href="#__codelineno-132-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-132-33" name="__codelineno-132-33" href="#__codelineno-132-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-132-34" name="__codelineno-132-34" href="#__codelineno-132-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-132-35" name="__codelineno-132-35" href="#__codelineno-132-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-132-36" name="__codelineno-132-36" href="#__codelineno-132-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>
<a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a>
<a id="__codelineno-133-6" name="__codelineno-133-6" href="#__codelineno-133-6"></a>
<a id="__codelineno-133-7" name="__codelineno-133-7" href="#__codelineno-133-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-133-8" name="__codelineno-133-8" href="#__codelineno-133-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-133-9" name="__codelineno-133-9" href="#__codelineno-133-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-133-10" name="__codelineno-133-10" href="#__codelineno-133-10"></a>
<a id="__codelineno-133-11" name="__codelineno-133-11" href="#__codelineno-133-11"></a>
<a id="__codelineno-133-12" name="__codelineno-133-12" href="#__codelineno-133-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-133-13" name="__codelineno-133-13" href="#__codelineno-133-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-133-14" name="__codelineno-133-14" href="#__codelineno-133-14"></a>
<a id="__codelineno-133-15" name="__codelineno-133-15" href="#__codelineno-133-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-133-16" name="__codelineno-133-16" href="#__codelineno-133-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-133-17" name="__codelineno-133-17" href="#__codelineno-133-17"></a>
<a id="__codelineno-133-18" name="__codelineno-133-18" href="#__codelineno-133-18"></a>
<a id="__codelineno-133-19" name="__codelineno-133-19" href="#__codelineno-133-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-133-20" name="__codelineno-133-20" href="#__codelineno-133-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-133-21" name="__codelineno-133-21" href="#__codelineno-133-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-133-22" name="__codelineno-133-22" href="#__codelineno-133-22"></a>
<a id="__codelineno-133-23" name="__codelineno-133-23" href="#__codelineno-133-23"></a>
<a id="__codelineno-133-24" name="__codelineno-133-24" href="#__codelineno-133-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-133-25" name="__codelineno-133-25" href="#__codelineno-133-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-133-26" name="__codelineno-133-26" href="#__codelineno-133-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-133-27" name="__codelineno-133-27" href="#__codelineno-133-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-133-28" name="__codelineno-133-28" href="#__codelineno-133-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-133-29" name="__codelineno-133-29" href="#__codelineno-133-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-133-30" name="__codelineno-133-30" href="#__codelineno-133-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-133-31" name="__codelineno-133-31" href="#__codelineno-133-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-133-32" name="__codelineno-133-32" href="#__codelineno-133-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-133-33" name="__codelineno-133-33" href="#__codelineno-133-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-133-34" name="__codelineno-133-34" href="#__codelineno-133-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-133-35" name="__codelineno-133-35" href="#__codelineno-133-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-133-36" name="__codelineno-133-36" href="#__codelineno-133-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a>
<a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a>
<a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>
<a id="__codelineno-134-7" name="__codelineno-134-7" href="#__codelineno-134-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-134-8" name="__codelineno-134-8" href="#__codelineno-134-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-134-9" name="__codelineno-134-9" href="#__codelineno-134-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-134-10" name="__codelineno-134-10" href="#__codelineno-134-10"></a>
<a id="__codelineno-134-11" name="__codelineno-134-11" href="#__codelineno-134-11"></a>
<a id="__codelineno-134-12" name="__codelineno-134-12" href="#__codelineno-134-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-134-13" name="__codelineno-134-13" href="#__codelineno-134-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-134-14" name="__codelineno-134-14" href="#__codelineno-134-14"></a>
<a id="__codelineno-134-15" name="__codelineno-134-15" href="#__codelineno-134-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-134-16" name="__codelineno-134-16" href="#__codelineno-134-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-134-17" name="__codelineno-134-17" href="#__codelineno-134-17"></a>
<a id="__codelineno-134-18" name="__codelineno-134-18" href="#__codelineno-134-18"></a>
<a id="__codelineno-134-19" name="__codelineno-134-19" href="#__codelineno-134-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-134-20" name="__codelineno-134-20" href="#__codelineno-134-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-134-21" name="__codelineno-134-21" href="#__codelineno-134-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-134-22" name="__codelineno-134-22" href="#__codelineno-134-22"></a>
<a id="__codelineno-134-23" name="__codelineno-134-23" href="#__codelineno-134-23"></a>
<a id="__codelineno-134-24" name="__codelineno-134-24" href="#__codelineno-134-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-134-25" name="__codelineno-134-25" href="#__codelineno-134-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-134-26" name="__codelineno-134-26" href="#__codelineno-134-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-134-27" name="__codelineno-134-27" href="#__codelineno-134-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-134-28" name="__codelineno-134-28" href="#__codelineno-134-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-134-29" name="__codelineno-134-29" href="#__codelineno-134-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-134-30" name="__codelineno-134-30" href="#__codelineno-134-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-134-31" name="__codelineno-134-31" href="#__codelineno-134-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-134-32" name="__codelineno-134-32" href="#__codelineno-134-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-134-33" name="__codelineno-134-33" href="#__codelineno-134-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-134-34" name="__codelineno-134-34" href="#__codelineno-134-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-134-35" name="__codelineno-134-35" href="#__codelineno-134-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-134-36" name="__codelineno-134-36" href="#__codelineno-134-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>
<a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a>
<a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a>
<a id="__codelineno-135-7" name="__codelineno-135-7" href="#__codelineno-135-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-135-8" name="__codelineno-135-8" href="#__codelineno-135-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-135-9" name="__codelineno-135-9" href="#__codelineno-135-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-135-10" name="__codelineno-135-10" href="#__codelineno-135-10"></a>
<a id="__codelineno-135-11" name="__codelineno-135-11" href="#__codelineno-135-11"></a>
<a id="__codelineno-135-12" name="__codelineno-135-12" href="#__codelineno-135-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-135-13" name="__codelineno-135-13" href="#__codelineno-135-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-135-14" name="__codelineno-135-14" href="#__codelineno-135-14"></a>
<a id="__codelineno-135-15" name="__codelineno-135-15" href="#__codelineno-135-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-135-16" name="__codelineno-135-16" href="#__codelineno-135-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-135-17" name="__codelineno-135-17" href="#__codelineno-135-17"></a>
<a id="__codelineno-135-18" name="__codelineno-135-18" href="#__codelineno-135-18"></a>
<a id="__codelineno-135-19" name="__codelineno-135-19" href="#__codelineno-135-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-135-20" name="__codelineno-135-20" href="#__codelineno-135-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-135-21" name="__codelineno-135-21" href="#__codelineno-135-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-135-22" name="__codelineno-135-22" href="#__codelineno-135-22"></a>
<a id="__codelineno-135-23" name="__codelineno-135-23" href="#__codelineno-135-23"></a>
<a id="__codelineno-135-24" name="__codelineno-135-24" href="#__codelineno-135-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-135-25" name="__codelineno-135-25" href="#__codelineno-135-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-135-26" name="__codelineno-135-26" href="#__codelineno-135-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-135-27" name="__codelineno-135-27" href="#__codelineno-135-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-135-28" name="__codelineno-135-28" href="#__codelineno-135-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-135-29" name="__codelineno-135-29" href="#__codelineno-135-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-135-30" name="__codelineno-135-30" href="#__codelineno-135-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-135-31" name="__codelineno-135-31" href="#__codelineno-135-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-135-32" name="__codelineno-135-32" href="#__codelineno-135-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-135-33" name="__codelineno-135-33" href="#__codelineno-135-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-135-34" name="__codelineno-135-34" href="#__codelineno-135-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-135-35" name="__codelineno-135-35" href="#__codelineno-135-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-135-36" name="__codelineno-135-36" href="#__codelineno-135-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>
<a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a>
<a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a>
<a id="__codelineno-136-7" name="__codelineno-136-7" href="#__codelineno-136-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-136-8" name="__codelineno-136-8" href="#__codelineno-136-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-136-9" name="__codelineno-136-9" href="#__codelineno-136-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-136-10" name="__codelineno-136-10" href="#__codelineno-136-10"></a>
<a id="__codelineno-136-11" name="__codelineno-136-11" href="#__codelineno-136-11"></a>
<a id="__codelineno-136-12" name="__codelineno-136-12" href="#__codelineno-136-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-136-13" name="__codelineno-136-13" href="#__codelineno-136-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-136-14" name="__codelineno-136-14" href="#__codelineno-136-14"></a>
<a id="__codelineno-136-15" name="__codelineno-136-15" href="#__codelineno-136-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-136-16" name="__codelineno-136-16" href="#__codelineno-136-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-136-17" name="__codelineno-136-17" href="#__codelineno-136-17"></a>
<a id="__codelineno-136-18" name="__codelineno-136-18" href="#__codelineno-136-18"></a>
<a id="__codelineno-136-19" name="__codelineno-136-19" href="#__codelineno-136-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-136-20" name="__codelineno-136-20" href="#__codelineno-136-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-136-21" name="__codelineno-136-21" href="#__codelineno-136-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-136-22" name="__codelineno-136-22" href="#__codelineno-136-22"></a>
<a id="__codelineno-136-23" name="__codelineno-136-23" href="#__codelineno-136-23"></a>
<a id="__codelineno-136-24" name="__codelineno-136-24" href="#__codelineno-136-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-136-25" name="__codelineno-136-25" href="#__codelineno-136-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-136-26" name="__codelineno-136-26" href="#__codelineno-136-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-136-27" name="__codelineno-136-27" href="#__codelineno-136-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-136-28" name="__codelineno-136-28" href="#__codelineno-136-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-136-29" name="__codelineno-136-29" href="#__codelineno-136-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-136-30" name="__codelineno-136-30" href="#__codelineno-136-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-136-31" name="__codelineno-136-31" href="#__codelineno-136-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-136-32" name="__codelineno-136-32" href="#__codelineno-136-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-136-33" name="__codelineno-136-33" href="#__codelineno-136-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-136-34" name="__codelineno-136-34" href="#__codelineno-136-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-136-35" name="__codelineno-136-35" href="#__codelineno-136-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-136-36" name="__codelineno-136-36" href="#__codelineno-136-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a>
<a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a>
<a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a>
<a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a>
<a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a>
<a id="__codelineno-137-12" name="__codelineno-137-12" href="#__codelineno-137-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-137-13" name="__codelineno-137-13" href="#__codelineno-137-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-137-14" name="__codelineno-137-14" href="#__codelineno-137-14"></a>
<a id="__codelineno-137-15" name="__codelineno-137-15" href="#__codelineno-137-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-137-16" name="__codelineno-137-16" href="#__codelineno-137-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-137-17" name="__codelineno-137-17" href="#__codelineno-137-17"></a>
<a id="__codelineno-137-18" name="__codelineno-137-18" href="#__codelineno-137-18"></a>
<a id="__codelineno-137-19" name="__codelineno-137-19" href="#__codelineno-137-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-137-20" name="__codelineno-137-20" href="#__codelineno-137-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-137-21" name="__codelineno-137-21" href="#__codelineno-137-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-137-22" name="__codelineno-137-22" href="#__codelineno-137-22"></a>
<a id="__codelineno-137-23" name="__codelineno-137-23" href="#__codelineno-137-23"></a>
<a id="__codelineno-137-24" name="__codelineno-137-24" href="#__codelineno-137-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-137-25" name="__codelineno-137-25" href="#__codelineno-137-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-137-26" name="__codelineno-137-26" href="#__codelineno-137-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-137-27" name="__codelineno-137-27" href="#__codelineno-137-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-137-28" name="__codelineno-137-28" href="#__codelineno-137-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-137-29" name="__codelineno-137-29" href="#__codelineno-137-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-137-30" name="__codelineno-137-30" href="#__codelineno-137-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-137-31" name="__codelineno-137-31" href="#__codelineno-137-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-137-32" name="__codelineno-137-32" href="#__codelineno-137-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-137-33" name="__codelineno-137-33" href="#__codelineno-137-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-137-34" name="__codelineno-137-34" href="#__codelineno-137-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-137-35" name="__codelineno-137-35" href="#__codelineno-137-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-137-36" name="__codelineno-137-36" href="#__codelineno-137-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a>
<a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a>
<a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a>
<a id="__codelineno-138-7" name="__codelineno-138-7" href="#__codelineno-138-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-138-8" name="__codelineno-138-8" href="#__codelineno-138-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-138-9" name="__codelineno-138-9" href="#__codelineno-138-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-138-10" name="__codelineno-138-10" href="#__codelineno-138-10"></a>
<a id="__codelineno-138-11" name="__codelineno-138-11" href="#__codelineno-138-11"></a>
<a id="__codelineno-138-12" name="__codelineno-138-12" href="#__codelineno-138-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-138-13" name="__codelineno-138-13" href="#__codelineno-138-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-138-14" name="__codelineno-138-14" href="#__codelineno-138-14"></a>
<a id="__codelineno-138-15" name="__codelineno-138-15" href="#__codelineno-138-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-138-16" name="__codelineno-138-16" href="#__codelineno-138-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-138-17" name="__codelineno-138-17" href="#__codelineno-138-17"></a>
<a id="__codelineno-138-18" name="__codelineno-138-18" href="#__codelineno-138-18"></a>
<a id="__codelineno-138-19" name="__codelineno-138-19" href="#__codelineno-138-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-138-20" name="__codelineno-138-20" href="#__codelineno-138-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-138-21" name="__codelineno-138-21" href="#__codelineno-138-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-138-22" name="__codelineno-138-22" href="#__codelineno-138-22"></a>
<a id="__codelineno-138-23" name="__codelineno-138-23" href="#__codelineno-138-23"></a>
<a id="__codelineno-138-24" name="__codelineno-138-24" href="#__codelineno-138-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-138-25" name="__codelineno-138-25" href="#__codelineno-138-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-138-26" name="__codelineno-138-26" href="#__codelineno-138-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-138-27" name="__codelineno-138-27" href="#__codelineno-138-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-138-28" name="__codelineno-138-28" href="#__codelineno-138-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-138-29" name="__codelineno-138-29" href="#__codelineno-138-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-138-30" name="__codelineno-138-30" href="#__codelineno-138-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-138-31" name="__codelineno-138-31" href="#__codelineno-138-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-138-32" name="__codelineno-138-32" href="#__codelineno-138-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-138-33" name="__codelineno-138-33" href="#__codelineno-138-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-138-34" name="__codelineno-138-34" href="#__codelineno-138-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-138-35" name="__codelineno-138-35" href="#__codelineno-138-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-138-36" name="__codelineno-138-36" href="#__codelineno-138-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a>
<a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a>
<a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a>
<a id="__codelineno-139-7" name="__codelineno-139-7" href="#__codelineno-139-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-139-8" name="__codelineno-139-8" href="#__codelineno-139-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-139-9" name="__codelineno-139-9" href="#__codelineno-139-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-139-10" name="__codelineno-139-10" href="#__codelineno-139-10"></a>
<a id="__codelineno-139-11" name="__codelineno-139-11" href="#__codelineno-139-11"></a>
<a id="__codelineno-139-12" name="__codelineno-139-12" href="#__codelineno-139-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-139-13" name="__codelineno-139-13" href="#__codelineno-139-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-139-14" name="__codelineno-139-14" href="#__codelineno-139-14"></a>
<a id="__codelineno-139-15" name="__codelineno-139-15" href="#__codelineno-139-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-139-16" name="__codelineno-139-16" href="#__codelineno-139-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-139-17" name="__codelineno-139-17" href="#__codelineno-139-17"></a>
<a id="__codelineno-139-18" name="__codelineno-139-18" href="#__codelineno-139-18"></a>
<a id="__codelineno-139-19" name="__codelineno-139-19" href="#__codelineno-139-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-139-20" name="__codelineno-139-20" href="#__codelineno-139-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-139-21" name="__codelineno-139-21" href="#__codelineno-139-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-139-22" name="__codelineno-139-22" href="#__codelineno-139-22"></a>
<a id="__codelineno-139-23" name="__codelineno-139-23" href="#__codelineno-139-23"></a>
<a id="__codelineno-139-24" name="__codelineno-139-24" href="#__codelineno-139-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-139-25" name="__codelineno-139-25" href="#__codelineno-139-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-139-26" name="__codelineno-139-26" href="#__codelineno-139-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-139-27" name="__codelineno-139-27" href="#__codelineno-139-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-139-28" name="__codelineno-139-28" href="#__codelineno-139-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-139-29" name="__codelineno-139-29" href="#__codelineno-139-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-139-30" name="__codelineno-139-30" href="#__codelineno-139-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-139-31" name="__codelineno-139-31" href="#__codelineno-139-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-139-32" name="__codelineno-139-32" href="#__codelineno-139-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-139-33" name="__codelineno-139-33" href="#__codelineno-139-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-139-34" name="__codelineno-139-34" href="#__codelineno-139-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-139-35" name="__codelineno-139-35" href="#__codelineno-139-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-139-36" name="__codelineno-139-36" href="#__codelineno-139-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="19:10"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><input id="__tabbed_19_4" name="__tabbed_19" type="radio" /><input id="__tabbed_19_5" name="__tabbed_19" type="radio" /><input id="__tabbed_19_6" name="__tabbed_19" type="radio" /><input id="__tabbed_19_7" name="__tabbed_19" type="radio" /><input id="__tabbed_19_8" name="__tabbed_19" type="radio" /><input id="__tabbed_19_9" name="__tabbed_19" type="radio" /><input id="__tabbed_19_10" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">OpenAI</label><label for="__tabbed_19_2">Anthropic</label><label for="__tabbed_19_3">Google</label><label for="__tabbed_19_4">Groq</label><label for="__tabbed_19_5">xAI</label><label for="__tabbed_19_6">Mistral</label><label for="__tabbed_19_7">Cohere</label><label for="__tabbed_19_8">LiteLLM</label><label for="__tabbed_19_9">Azure AI</label><label for="__tabbed_19_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a>
<a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-140-5" name="__codelineno-140-5" href="#__codelineno-140-5"></a>
<a id="__codelineno-140-6" name="__codelineno-140-6" href="#__codelineno-140-6"></a>
<a id="__codelineno-140-7" name="__codelineno-140-7" href="#__codelineno-140-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-140-8" name="__codelineno-140-8" href="#__codelineno-140-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-140-9" name="__codelineno-140-9" href="#__codelineno-140-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-140-10" name="__codelineno-140-10" href="#__codelineno-140-10"></a>
<a id="__codelineno-140-11" name="__codelineno-140-11" href="#__codelineno-140-11"></a>
<a id="__codelineno-140-12" name="__codelineno-140-12" href="#__codelineno-140-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-140-13" name="__codelineno-140-13" href="#__codelineno-140-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-140-14" name="__codelineno-140-14" href="#__codelineno-140-14"></a>
<a id="__codelineno-140-15" name="__codelineno-140-15" href="#__codelineno-140-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-140-16" name="__codelineno-140-16" href="#__codelineno-140-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-140-17" name="__codelineno-140-17" href="#__codelineno-140-17"></a>
<a id="__codelineno-140-18" name="__codelineno-140-18" href="#__codelineno-140-18"></a>
<a id="__codelineno-140-19" name="__codelineno-140-19" href="#__codelineno-140-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-140-20" name="__codelineno-140-20" href="#__codelineno-140-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-140-21" name="__codelineno-140-21" href="#__codelineno-140-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-140-22" name="__codelineno-140-22" href="#__codelineno-140-22"></a>
<a id="__codelineno-140-23" name="__codelineno-140-23" href="#__codelineno-140-23"></a>
<a id="__codelineno-140-24" name="__codelineno-140-24" href="#__codelineno-140-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-140-25" name="__codelineno-140-25" href="#__codelineno-140-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-140-26" name="__codelineno-140-26" href="#__codelineno-140-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-140-27" name="__codelineno-140-27" href="#__codelineno-140-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-140-28" name="__codelineno-140-28" href="#__codelineno-140-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-140-29" name="__codelineno-140-29" href="#__codelineno-140-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-140-30" name="__codelineno-140-30" href="#__codelineno-140-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-140-31" name="__codelineno-140-31" href="#__codelineno-140-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-140-32" name="__codelineno-140-32" href="#__codelineno-140-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-140-33" name="__codelineno-140-33" href="#__codelineno-140-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-140-34" name="__codelineno-140-34" href="#__codelineno-140-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-140-35" name="__codelineno-140-35" href="#__codelineno-140-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-140-36" name="__codelineno-140-36" href="#__codelineno-140-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a>
<a id="__codelineno-141-3" name="__codelineno-141-3" href="#__codelineno-141-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-141-4" name="__codelineno-141-4" href="#__codelineno-141-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-141-5" name="__codelineno-141-5" href="#__codelineno-141-5"></a>
<a id="__codelineno-141-6" name="__codelineno-141-6" href="#__codelineno-141-6"></a>
<a id="__codelineno-141-7" name="__codelineno-141-7" href="#__codelineno-141-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-141-8" name="__codelineno-141-8" href="#__codelineno-141-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-141-9" name="__codelineno-141-9" href="#__codelineno-141-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-141-10" name="__codelineno-141-10" href="#__codelineno-141-10"></a>
<a id="__codelineno-141-11" name="__codelineno-141-11" href="#__codelineno-141-11"></a>
<a id="__codelineno-141-12" name="__codelineno-141-12" href="#__codelineno-141-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-141-13" name="__codelineno-141-13" href="#__codelineno-141-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-141-14" name="__codelineno-141-14" href="#__codelineno-141-14"></a>
<a id="__codelineno-141-15" name="__codelineno-141-15" href="#__codelineno-141-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-141-16" name="__codelineno-141-16" href="#__codelineno-141-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-141-17" name="__codelineno-141-17" href="#__codelineno-141-17"></a>
<a id="__codelineno-141-18" name="__codelineno-141-18" href="#__codelineno-141-18"></a>
<a id="__codelineno-141-19" name="__codelineno-141-19" href="#__codelineno-141-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-141-20" name="__codelineno-141-20" href="#__codelineno-141-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-141-21" name="__codelineno-141-21" href="#__codelineno-141-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-141-22" name="__codelineno-141-22" href="#__codelineno-141-22"></a>
<a id="__codelineno-141-23" name="__codelineno-141-23" href="#__codelineno-141-23"></a>
<a id="__codelineno-141-24" name="__codelineno-141-24" href="#__codelineno-141-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-141-25" name="__codelineno-141-25" href="#__codelineno-141-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-141-26" name="__codelineno-141-26" href="#__codelineno-141-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-141-27" name="__codelineno-141-27" href="#__codelineno-141-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-141-28" name="__codelineno-141-28" href="#__codelineno-141-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-141-29" name="__codelineno-141-29" href="#__codelineno-141-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-141-30" name="__codelineno-141-30" href="#__codelineno-141-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-141-31" name="__codelineno-141-31" href="#__codelineno-141-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-141-32" name="__codelineno-141-32" href="#__codelineno-141-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-141-33" name="__codelineno-141-33" href="#__codelineno-141-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-141-34" name="__codelineno-141-34" href="#__codelineno-141-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-141-35" name="__codelineno-141-35" href="#__codelineno-141-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-141-36" name="__codelineno-141-36" href="#__codelineno-141-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a>
<a id="__codelineno-142-3" name="__codelineno-142-3" href="#__codelineno-142-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-142-4" name="__codelineno-142-4" href="#__codelineno-142-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-142-5" name="__codelineno-142-5" href="#__codelineno-142-5"></a>
<a id="__codelineno-142-6" name="__codelineno-142-6" href="#__codelineno-142-6"></a>
<a id="__codelineno-142-7" name="__codelineno-142-7" href="#__codelineno-142-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-142-8" name="__codelineno-142-8" href="#__codelineno-142-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-142-9" name="__codelineno-142-9" href="#__codelineno-142-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-142-10" name="__codelineno-142-10" href="#__codelineno-142-10"></a>
<a id="__codelineno-142-11" name="__codelineno-142-11" href="#__codelineno-142-11"></a>
<a id="__codelineno-142-12" name="__codelineno-142-12" href="#__codelineno-142-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-142-13" name="__codelineno-142-13" href="#__codelineno-142-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-142-14" name="__codelineno-142-14" href="#__codelineno-142-14"></a>
<a id="__codelineno-142-15" name="__codelineno-142-15" href="#__codelineno-142-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-142-16" name="__codelineno-142-16" href="#__codelineno-142-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-142-17" name="__codelineno-142-17" href="#__codelineno-142-17"></a>
<a id="__codelineno-142-18" name="__codelineno-142-18" href="#__codelineno-142-18"></a>
<a id="__codelineno-142-19" name="__codelineno-142-19" href="#__codelineno-142-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-142-20" name="__codelineno-142-20" href="#__codelineno-142-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-142-21" name="__codelineno-142-21" href="#__codelineno-142-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-142-22" name="__codelineno-142-22" href="#__codelineno-142-22"></a>
<a id="__codelineno-142-23" name="__codelineno-142-23" href="#__codelineno-142-23"></a>
<a id="__codelineno-142-24" name="__codelineno-142-24" href="#__codelineno-142-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-142-25" name="__codelineno-142-25" href="#__codelineno-142-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-142-26" name="__codelineno-142-26" href="#__codelineno-142-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-142-27" name="__codelineno-142-27" href="#__codelineno-142-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-142-28" name="__codelineno-142-28" href="#__codelineno-142-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-142-29" name="__codelineno-142-29" href="#__codelineno-142-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-142-30" name="__codelineno-142-30" href="#__codelineno-142-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-142-31" name="__codelineno-142-31" href="#__codelineno-142-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-142-32" name="__codelineno-142-32" href="#__codelineno-142-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-142-33" name="__codelineno-142-33" href="#__codelineno-142-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-142-34" name="__codelineno-142-34" href="#__codelineno-142-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-142-35" name="__codelineno-142-35" href="#__codelineno-142-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-142-36" name="__codelineno-142-36" href="#__codelineno-142-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a>
<a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-143-4" name="__codelineno-143-4" href="#__codelineno-143-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-143-5" name="__codelineno-143-5" href="#__codelineno-143-5"></a>
<a id="__codelineno-143-6" name="__codelineno-143-6" href="#__codelineno-143-6"></a>
<a id="__codelineno-143-7" name="__codelineno-143-7" href="#__codelineno-143-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-143-8" name="__codelineno-143-8" href="#__codelineno-143-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-143-9" name="__codelineno-143-9" href="#__codelineno-143-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-143-10" name="__codelineno-143-10" href="#__codelineno-143-10"></a>
<a id="__codelineno-143-11" name="__codelineno-143-11" href="#__codelineno-143-11"></a>
<a id="__codelineno-143-12" name="__codelineno-143-12" href="#__codelineno-143-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-143-13" name="__codelineno-143-13" href="#__codelineno-143-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-143-14" name="__codelineno-143-14" href="#__codelineno-143-14"></a>
<a id="__codelineno-143-15" name="__codelineno-143-15" href="#__codelineno-143-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-143-16" name="__codelineno-143-16" href="#__codelineno-143-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-143-17" name="__codelineno-143-17" href="#__codelineno-143-17"></a>
<a id="__codelineno-143-18" name="__codelineno-143-18" href="#__codelineno-143-18"></a>
<a id="__codelineno-143-19" name="__codelineno-143-19" href="#__codelineno-143-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-143-20" name="__codelineno-143-20" href="#__codelineno-143-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-143-21" name="__codelineno-143-21" href="#__codelineno-143-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-143-22" name="__codelineno-143-22" href="#__codelineno-143-22"></a>
<a id="__codelineno-143-23" name="__codelineno-143-23" href="#__codelineno-143-23"></a>
<a id="__codelineno-143-24" name="__codelineno-143-24" href="#__codelineno-143-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-143-25" name="__codelineno-143-25" href="#__codelineno-143-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-143-26" name="__codelineno-143-26" href="#__codelineno-143-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-143-27" name="__codelineno-143-27" href="#__codelineno-143-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-143-28" name="__codelineno-143-28" href="#__codelineno-143-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-143-29" name="__codelineno-143-29" href="#__codelineno-143-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-143-30" name="__codelineno-143-30" href="#__codelineno-143-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-143-31" name="__codelineno-143-31" href="#__codelineno-143-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-143-32" name="__codelineno-143-32" href="#__codelineno-143-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-143-33" name="__codelineno-143-33" href="#__codelineno-143-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-143-34" name="__codelineno-143-34" href="#__codelineno-143-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-143-35" name="__codelineno-143-35" href="#__codelineno-143-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-143-36" name="__codelineno-143-36" href="#__codelineno-143-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a>
<a id="__codelineno-144-3" name="__codelineno-144-3" href="#__codelineno-144-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-144-4" name="__codelineno-144-4" href="#__codelineno-144-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-144-5" name="__codelineno-144-5" href="#__codelineno-144-5"></a>
<a id="__codelineno-144-6" name="__codelineno-144-6" href="#__codelineno-144-6"></a>
<a id="__codelineno-144-7" name="__codelineno-144-7" href="#__codelineno-144-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-144-8" name="__codelineno-144-8" href="#__codelineno-144-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-144-9" name="__codelineno-144-9" href="#__codelineno-144-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-144-10" name="__codelineno-144-10" href="#__codelineno-144-10"></a>
<a id="__codelineno-144-11" name="__codelineno-144-11" href="#__codelineno-144-11"></a>
<a id="__codelineno-144-12" name="__codelineno-144-12" href="#__codelineno-144-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-144-13" name="__codelineno-144-13" href="#__codelineno-144-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-144-14" name="__codelineno-144-14" href="#__codelineno-144-14"></a>
<a id="__codelineno-144-15" name="__codelineno-144-15" href="#__codelineno-144-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-144-16" name="__codelineno-144-16" href="#__codelineno-144-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-144-17" name="__codelineno-144-17" href="#__codelineno-144-17"></a>
<a id="__codelineno-144-18" name="__codelineno-144-18" href="#__codelineno-144-18"></a>
<a id="__codelineno-144-19" name="__codelineno-144-19" href="#__codelineno-144-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-144-20" name="__codelineno-144-20" href="#__codelineno-144-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-144-21" name="__codelineno-144-21" href="#__codelineno-144-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-144-22" name="__codelineno-144-22" href="#__codelineno-144-22"></a>
<a id="__codelineno-144-23" name="__codelineno-144-23" href="#__codelineno-144-23"></a>
<a id="__codelineno-144-24" name="__codelineno-144-24" href="#__codelineno-144-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-144-25" name="__codelineno-144-25" href="#__codelineno-144-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-144-26" name="__codelineno-144-26" href="#__codelineno-144-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-144-27" name="__codelineno-144-27" href="#__codelineno-144-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-144-28" name="__codelineno-144-28" href="#__codelineno-144-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-144-29" name="__codelineno-144-29" href="#__codelineno-144-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-144-30" name="__codelineno-144-30" href="#__codelineno-144-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-144-31" name="__codelineno-144-31" href="#__codelineno-144-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-144-32" name="__codelineno-144-32" href="#__codelineno-144-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-144-33" name="__codelineno-144-33" href="#__codelineno-144-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-144-34" name="__codelineno-144-34" href="#__codelineno-144-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-144-35" name="__codelineno-144-35" href="#__codelineno-144-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-144-36" name="__codelineno-144-36" href="#__codelineno-144-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-145-2" name="__codelineno-145-2" href="#__codelineno-145-2"></a>
<a id="__codelineno-145-3" name="__codelineno-145-3" href="#__codelineno-145-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-145-4" name="__codelineno-145-4" href="#__codelineno-145-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-145-5" name="__codelineno-145-5" href="#__codelineno-145-5"></a>
<a id="__codelineno-145-6" name="__codelineno-145-6" href="#__codelineno-145-6"></a>
<a id="__codelineno-145-7" name="__codelineno-145-7" href="#__codelineno-145-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-145-8" name="__codelineno-145-8" href="#__codelineno-145-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-145-9" name="__codelineno-145-9" href="#__codelineno-145-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-145-10" name="__codelineno-145-10" href="#__codelineno-145-10"></a>
<a id="__codelineno-145-11" name="__codelineno-145-11" href="#__codelineno-145-11"></a>
<a id="__codelineno-145-12" name="__codelineno-145-12" href="#__codelineno-145-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-145-13" name="__codelineno-145-13" href="#__codelineno-145-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-145-14" name="__codelineno-145-14" href="#__codelineno-145-14"></a>
<a id="__codelineno-145-15" name="__codelineno-145-15" href="#__codelineno-145-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-145-16" name="__codelineno-145-16" href="#__codelineno-145-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-145-17" name="__codelineno-145-17" href="#__codelineno-145-17"></a>
<a id="__codelineno-145-18" name="__codelineno-145-18" href="#__codelineno-145-18"></a>
<a id="__codelineno-145-19" name="__codelineno-145-19" href="#__codelineno-145-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-145-20" name="__codelineno-145-20" href="#__codelineno-145-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-145-21" name="__codelineno-145-21" href="#__codelineno-145-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-145-22" name="__codelineno-145-22" href="#__codelineno-145-22"></a>
<a id="__codelineno-145-23" name="__codelineno-145-23" href="#__codelineno-145-23"></a>
<a id="__codelineno-145-24" name="__codelineno-145-24" href="#__codelineno-145-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-145-25" name="__codelineno-145-25" href="#__codelineno-145-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-145-26" name="__codelineno-145-26" href="#__codelineno-145-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-145-27" name="__codelineno-145-27" href="#__codelineno-145-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-145-28" name="__codelineno-145-28" href="#__codelineno-145-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-145-29" name="__codelineno-145-29" href="#__codelineno-145-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-145-30" name="__codelineno-145-30" href="#__codelineno-145-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-145-31" name="__codelineno-145-31" href="#__codelineno-145-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-145-32" name="__codelineno-145-32" href="#__codelineno-145-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-145-33" name="__codelineno-145-33" href="#__codelineno-145-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-145-34" name="__codelineno-145-34" href="#__codelineno-145-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-145-35" name="__codelineno-145-35" href="#__codelineno-145-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-145-36" name="__codelineno-145-36" href="#__codelineno-145-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-146-2" name="__codelineno-146-2" href="#__codelineno-146-2"></a>
<a id="__codelineno-146-3" name="__codelineno-146-3" href="#__codelineno-146-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-146-4" name="__codelineno-146-4" href="#__codelineno-146-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-146-5" name="__codelineno-146-5" href="#__codelineno-146-5"></a>
<a id="__codelineno-146-6" name="__codelineno-146-6" href="#__codelineno-146-6"></a>
<a id="__codelineno-146-7" name="__codelineno-146-7" href="#__codelineno-146-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-146-8" name="__codelineno-146-8" href="#__codelineno-146-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-146-9" name="__codelineno-146-9" href="#__codelineno-146-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-146-10" name="__codelineno-146-10" href="#__codelineno-146-10"></a>
<a id="__codelineno-146-11" name="__codelineno-146-11" href="#__codelineno-146-11"></a>
<a id="__codelineno-146-12" name="__codelineno-146-12" href="#__codelineno-146-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-146-13" name="__codelineno-146-13" href="#__codelineno-146-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-146-14" name="__codelineno-146-14" href="#__codelineno-146-14"></a>
<a id="__codelineno-146-15" name="__codelineno-146-15" href="#__codelineno-146-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-146-16" name="__codelineno-146-16" href="#__codelineno-146-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-146-17" name="__codelineno-146-17" href="#__codelineno-146-17"></a>
<a id="__codelineno-146-18" name="__codelineno-146-18" href="#__codelineno-146-18"></a>
<a id="__codelineno-146-19" name="__codelineno-146-19" href="#__codelineno-146-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-146-20" name="__codelineno-146-20" href="#__codelineno-146-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-146-21" name="__codelineno-146-21" href="#__codelineno-146-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-146-22" name="__codelineno-146-22" href="#__codelineno-146-22"></a>
<a id="__codelineno-146-23" name="__codelineno-146-23" href="#__codelineno-146-23"></a>
<a id="__codelineno-146-24" name="__codelineno-146-24" href="#__codelineno-146-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-146-25" name="__codelineno-146-25" href="#__codelineno-146-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-146-26" name="__codelineno-146-26" href="#__codelineno-146-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-146-27" name="__codelineno-146-27" href="#__codelineno-146-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-146-28" name="__codelineno-146-28" href="#__codelineno-146-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-146-29" name="__codelineno-146-29" href="#__codelineno-146-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-146-30" name="__codelineno-146-30" href="#__codelineno-146-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-146-31" name="__codelineno-146-31" href="#__codelineno-146-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-146-32" name="__codelineno-146-32" href="#__codelineno-146-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-146-33" name="__codelineno-146-33" href="#__codelineno-146-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-146-34" name="__codelineno-146-34" href="#__codelineno-146-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-146-35" name="__codelineno-146-35" href="#__codelineno-146-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-146-36" name="__codelineno-146-36" href="#__codelineno-146-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-147-2" name="__codelineno-147-2" href="#__codelineno-147-2"></a>
<a id="__codelineno-147-3" name="__codelineno-147-3" href="#__codelineno-147-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-147-4" name="__codelineno-147-4" href="#__codelineno-147-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-147-5" name="__codelineno-147-5" href="#__codelineno-147-5"></a>
<a id="__codelineno-147-6" name="__codelineno-147-6" href="#__codelineno-147-6"></a>
<a id="__codelineno-147-7" name="__codelineno-147-7" href="#__codelineno-147-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-147-8" name="__codelineno-147-8" href="#__codelineno-147-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-147-9" name="__codelineno-147-9" href="#__codelineno-147-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-147-10" name="__codelineno-147-10" href="#__codelineno-147-10"></a>
<a id="__codelineno-147-11" name="__codelineno-147-11" href="#__codelineno-147-11"></a>
<a id="__codelineno-147-12" name="__codelineno-147-12" href="#__codelineno-147-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-147-13" name="__codelineno-147-13" href="#__codelineno-147-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-147-14" name="__codelineno-147-14" href="#__codelineno-147-14"></a>
<a id="__codelineno-147-15" name="__codelineno-147-15" href="#__codelineno-147-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-147-16" name="__codelineno-147-16" href="#__codelineno-147-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-147-17" name="__codelineno-147-17" href="#__codelineno-147-17"></a>
<a id="__codelineno-147-18" name="__codelineno-147-18" href="#__codelineno-147-18"></a>
<a id="__codelineno-147-19" name="__codelineno-147-19" href="#__codelineno-147-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-147-20" name="__codelineno-147-20" href="#__codelineno-147-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-147-21" name="__codelineno-147-21" href="#__codelineno-147-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-147-22" name="__codelineno-147-22" href="#__codelineno-147-22"></a>
<a id="__codelineno-147-23" name="__codelineno-147-23" href="#__codelineno-147-23"></a>
<a id="__codelineno-147-24" name="__codelineno-147-24" href="#__codelineno-147-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-147-25" name="__codelineno-147-25" href="#__codelineno-147-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-147-26" name="__codelineno-147-26" href="#__codelineno-147-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-147-27" name="__codelineno-147-27" href="#__codelineno-147-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-147-28" name="__codelineno-147-28" href="#__codelineno-147-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-147-29" name="__codelineno-147-29" href="#__codelineno-147-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-147-30" name="__codelineno-147-30" href="#__codelineno-147-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-147-31" name="__codelineno-147-31" href="#__codelineno-147-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-147-32" name="__codelineno-147-32" href="#__codelineno-147-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-147-33" name="__codelineno-147-33" href="#__codelineno-147-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-147-34" name="__codelineno-147-34" href="#__codelineno-147-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-147-35" name="__codelineno-147-35" href="#__codelineno-147-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-147-36" name="__codelineno-147-36" href="#__codelineno-147-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a>
<a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-148-4" name="__codelineno-148-4" href="#__codelineno-148-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-148-5" name="__codelineno-148-5" href="#__codelineno-148-5"></a>
<a id="__codelineno-148-6" name="__codelineno-148-6" href="#__codelineno-148-6"></a>
<a id="__codelineno-148-7" name="__codelineno-148-7" href="#__codelineno-148-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-148-8" name="__codelineno-148-8" href="#__codelineno-148-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-148-9" name="__codelineno-148-9" href="#__codelineno-148-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-148-10" name="__codelineno-148-10" href="#__codelineno-148-10"></a>
<a id="__codelineno-148-11" name="__codelineno-148-11" href="#__codelineno-148-11"></a>
<a id="__codelineno-148-12" name="__codelineno-148-12" href="#__codelineno-148-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-148-13" name="__codelineno-148-13" href="#__codelineno-148-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-148-14" name="__codelineno-148-14" href="#__codelineno-148-14"></a>
<a id="__codelineno-148-15" name="__codelineno-148-15" href="#__codelineno-148-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-148-16" name="__codelineno-148-16" href="#__codelineno-148-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-148-17" name="__codelineno-148-17" href="#__codelineno-148-17"></a>
<a id="__codelineno-148-18" name="__codelineno-148-18" href="#__codelineno-148-18"></a>
<a id="__codelineno-148-19" name="__codelineno-148-19" href="#__codelineno-148-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-148-20" name="__codelineno-148-20" href="#__codelineno-148-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-148-21" name="__codelineno-148-21" href="#__codelineno-148-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-148-22" name="__codelineno-148-22" href="#__codelineno-148-22"></a>
<a id="__codelineno-148-23" name="__codelineno-148-23" href="#__codelineno-148-23"></a>
<a id="__codelineno-148-24" name="__codelineno-148-24" href="#__codelineno-148-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-148-25" name="__codelineno-148-25" href="#__codelineno-148-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-148-26" name="__codelineno-148-26" href="#__codelineno-148-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-148-27" name="__codelineno-148-27" href="#__codelineno-148-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-148-28" name="__codelineno-148-28" href="#__codelineno-148-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-148-29" name="__codelineno-148-29" href="#__codelineno-148-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-148-30" name="__codelineno-148-30" href="#__codelineno-148-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-148-31" name="__codelineno-148-31" href="#__codelineno-148-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-148-32" name="__codelineno-148-32" href="#__codelineno-148-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-148-33" name="__codelineno-148-33" href="#__codelineno-148-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-148-34" name="__codelineno-148-34" href="#__codelineno-148-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-148-35" name="__codelineno-148-35" href="#__codelineno-148-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-148-36" name="__codelineno-148-36" href="#__codelineno-148-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a>
<a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-149-4" name="__codelineno-149-4" href="#__codelineno-149-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-149-5" name="__codelineno-149-5" href="#__codelineno-149-5"></a>
<a id="__codelineno-149-6" name="__codelineno-149-6" href="#__codelineno-149-6"></a>
<a id="__codelineno-149-7" name="__codelineno-149-7" href="#__codelineno-149-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-149-8" name="__codelineno-149-8" href="#__codelineno-149-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-149-9" name="__codelineno-149-9" href="#__codelineno-149-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-149-10" name="__codelineno-149-10" href="#__codelineno-149-10"></a>
<a id="__codelineno-149-11" name="__codelineno-149-11" href="#__codelineno-149-11"></a>
<a id="__codelineno-149-12" name="__codelineno-149-12" href="#__codelineno-149-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-149-13" name="__codelineno-149-13" href="#__codelineno-149-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-149-14" name="__codelineno-149-14" href="#__codelineno-149-14"></a>
<a id="__codelineno-149-15" name="__codelineno-149-15" href="#__codelineno-149-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-149-16" name="__codelineno-149-16" href="#__codelineno-149-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-149-17" name="__codelineno-149-17" href="#__codelineno-149-17"></a>
<a id="__codelineno-149-18" name="__codelineno-149-18" href="#__codelineno-149-18"></a>
<a id="__codelineno-149-19" name="__codelineno-149-19" href="#__codelineno-149-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-149-20" name="__codelineno-149-20" href="#__codelineno-149-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-149-21" name="__codelineno-149-21" href="#__codelineno-149-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-149-22" name="__codelineno-149-22" href="#__codelineno-149-22"></a>
<a id="__codelineno-149-23" name="__codelineno-149-23" href="#__codelineno-149-23"></a>
<a id="__codelineno-149-24" name="__codelineno-149-24" href="#__codelineno-149-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-149-25" name="__codelineno-149-25" href="#__codelineno-149-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-149-26" name="__codelineno-149-26" href="#__codelineno-149-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-149-27" name="__codelineno-149-27" href="#__codelineno-149-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-149-28" name="__codelineno-149-28" href="#__codelineno-149-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-149-29" name="__codelineno-149-29" href="#__codelineno-149-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-149-30" name="__codelineno-149-30" href="#__codelineno-149-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-149-31" name="__codelineno-149-31" href="#__codelineno-149-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-149-32" name="__codelineno-149-32" href="#__codelineno-149-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-149-33" name="__codelineno-149-33" href="#__codelineno-149-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-149-34" name="__codelineno-149-34" href="#__codelineno-149-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-149-35" name="__codelineno-149-35" href="#__codelineno-149-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-149-36" name="__codelineno-149-36" href="#__codelineno-149-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="20:10"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><input id="__tabbed_20_4" name="__tabbed_20" type="radio" /><input id="__tabbed_20_5" name="__tabbed_20" type="radio" /><input id="__tabbed_20_6" name="__tabbed_20" type="radio" /><input id="__tabbed_20_7" name="__tabbed_20" type="radio" /><input id="__tabbed_20_8" name="__tabbed_20" type="radio" /><input id="__tabbed_20_9" name="__tabbed_20" type="radio" /><input id="__tabbed_20_10" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">OpenAI</label><label for="__tabbed_20_2">Anthropic</label><label for="__tabbed_20_3">Google</label><label for="__tabbed_20_4">Groq</label><label for="__tabbed_20_5">xAI</label><label for="__tabbed_20_6">Mistral</label><label for="__tabbed_20_7">Cohere</label><label for="__tabbed_20_8">LiteLLM</label><label for="__tabbed_20_9">Azure AI</label><label for="__tabbed_20_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-150-1" name="__codelineno-150-1" href="#__codelineno-150-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-150-2" name="__codelineno-150-2" href="#__codelineno-150-2"></a>
<a id="__codelineno-150-3" name="__codelineno-150-3" href="#__codelineno-150-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-150-4" name="__codelineno-150-4" href="#__codelineno-150-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-150-5" name="__codelineno-150-5" href="#__codelineno-150-5"></a>
<a id="__codelineno-150-6" name="__codelineno-150-6" href="#__codelineno-150-6"></a>
<a id="__codelineno-150-7" name="__codelineno-150-7" href="#__codelineno-150-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-150-8" name="__codelineno-150-8" href="#__codelineno-150-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-150-9" name="__codelineno-150-9" href="#__codelineno-150-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-150-10" name="__codelineno-150-10" href="#__codelineno-150-10"></a>
<a id="__codelineno-150-11" name="__codelineno-150-11" href="#__codelineno-150-11"></a>
<a id="__codelineno-150-12" name="__codelineno-150-12" href="#__codelineno-150-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-150-13" name="__codelineno-150-13" href="#__codelineno-150-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-150-14" name="__codelineno-150-14" href="#__codelineno-150-14"></a>
<a id="__codelineno-150-15" name="__codelineno-150-15" href="#__codelineno-150-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-150-16" name="__codelineno-150-16" href="#__codelineno-150-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-150-17" name="__codelineno-150-17" href="#__codelineno-150-17"></a>
<a id="__codelineno-150-18" name="__codelineno-150-18" href="#__codelineno-150-18"></a>
<a id="__codelineno-150-19" name="__codelineno-150-19" href="#__codelineno-150-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-150-20" name="__codelineno-150-20" href="#__codelineno-150-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-150-21" name="__codelineno-150-21" href="#__codelineno-150-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-150-22" name="__codelineno-150-22" href="#__codelineno-150-22"></a>
<a id="__codelineno-150-23" name="__codelineno-150-23" href="#__codelineno-150-23"></a>
<a id="__codelineno-150-24" name="__codelineno-150-24" href="#__codelineno-150-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-150-25" name="__codelineno-150-25" href="#__codelineno-150-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-150-26" name="__codelineno-150-26" href="#__codelineno-150-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-150-27" name="__codelineno-150-27" href="#__codelineno-150-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-150-28" name="__codelineno-150-28" href="#__codelineno-150-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-150-29" name="__codelineno-150-29" href="#__codelineno-150-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-150-30" name="__codelineno-150-30" href="#__codelineno-150-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-150-31" name="__codelineno-150-31" href="#__codelineno-150-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-150-32" name="__codelineno-150-32" href="#__codelineno-150-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-150-33" name="__codelineno-150-33" href="#__codelineno-150-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-150-34" name="__codelineno-150-34" href="#__codelineno-150-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-150-35" name="__codelineno-150-35" href="#__codelineno-150-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-150-36" name="__codelineno-150-36" href="#__codelineno-150-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-151-1" name="__codelineno-151-1" href="#__codelineno-151-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-151-2" name="__codelineno-151-2" href="#__codelineno-151-2"></a>
<a id="__codelineno-151-3" name="__codelineno-151-3" href="#__codelineno-151-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-151-4" name="__codelineno-151-4" href="#__codelineno-151-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-151-5" name="__codelineno-151-5" href="#__codelineno-151-5"></a>
<a id="__codelineno-151-6" name="__codelineno-151-6" href="#__codelineno-151-6"></a>
<a id="__codelineno-151-7" name="__codelineno-151-7" href="#__codelineno-151-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-151-8" name="__codelineno-151-8" href="#__codelineno-151-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-151-9" name="__codelineno-151-9" href="#__codelineno-151-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-151-10" name="__codelineno-151-10" href="#__codelineno-151-10"></a>
<a id="__codelineno-151-11" name="__codelineno-151-11" href="#__codelineno-151-11"></a>
<a id="__codelineno-151-12" name="__codelineno-151-12" href="#__codelineno-151-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-151-13" name="__codelineno-151-13" href="#__codelineno-151-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-151-14" name="__codelineno-151-14" href="#__codelineno-151-14"></a>
<a id="__codelineno-151-15" name="__codelineno-151-15" href="#__codelineno-151-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-151-16" name="__codelineno-151-16" href="#__codelineno-151-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-151-17" name="__codelineno-151-17" href="#__codelineno-151-17"></a>
<a id="__codelineno-151-18" name="__codelineno-151-18" href="#__codelineno-151-18"></a>
<a id="__codelineno-151-19" name="__codelineno-151-19" href="#__codelineno-151-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-151-20" name="__codelineno-151-20" href="#__codelineno-151-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-151-21" name="__codelineno-151-21" href="#__codelineno-151-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-151-22" name="__codelineno-151-22" href="#__codelineno-151-22"></a>
<a id="__codelineno-151-23" name="__codelineno-151-23" href="#__codelineno-151-23"></a>
<a id="__codelineno-151-24" name="__codelineno-151-24" href="#__codelineno-151-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-151-25" name="__codelineno-151-25" href="#__codelineno-151-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-151-26" name="__codelineno-151-26" href="#__codelineno-151-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-151-27" name="__codelineno-151-27" href="#__codelineno-151-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-151-28" name="__codelineno-151-28" href="#__codelineno-151-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-151-29" name="__codelineno-151-29" href="#__codelineno-151-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-151-30" name="__codelineno-151-30" href="#__codelineno-151-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-151-31" name="__codelineno-151-31" href="#__codelineno-151-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-151-32" name="__codelineno-151-32" href="#__codelineno-151-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-151-33" name="__codelineno-151-33" href="#__codelineno-151-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-151-34" name="__codelineno-151-34" href="#__codelineno-151-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-151-35" name="__codelineno-151-35" href="#__codelineno-151-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-151-36" name="__codelineno-151-36" href="#__codelineno-151-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-152-1" name="__codelineno-152-1" href="#__codelineno-152-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-152-2" name="__codelineno-152-2" href="#__codelineno-152-2"></a>
<a id="__codelineno-152-3" name="__codelineno-152-3" href="#__codelineno-152-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-152-4" name="__codelineno-152-4" href="#__codelineno-152-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-152-5" name="__codelineno-152-5" href="#__codelineno-152-5"></a>
<a id="__codelineno-152-6" name="__codelineno-152-6" href="#__codelineno-152-6"></a>
<a id="__codelineno-152-7" name="__codelineno-152-7" href="#__codelineno-152-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-152-8" name="__codelineno-152-8" href="#__codelineno-152-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-152-9" name="__codelineno-152-9" href="#__codelineno-152-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-152-10" name="__codelineno-152-10" href="#__codelineno-152-10"></a>
<a id="__codelineno-152-11" name="__codelineno-152-11" href="#__codelineno-152-11"></a>
<a id="__codelineno-152-12" name="__codelineno-152-12" href="#__codelineno-152-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-152-13" name="__codelineno-152-13" href="#__codelineno-152-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-152-14" name="__codelineno-152-14" href="#__codelineno-152-14"></a>
<a id="__codelineno-152-15" name="__codelineno-152-15" href="#__codelineno-152-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-152-16" name="__codelineno-152-16" href="#__codelineno-152-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-152-17" name="__codelineno-152-17" href="#__codelineno-152-17"></a>
<a id="__codelineno-152-18" name="__codelineno-152-18" href="#__codelineno-152-18"></a>
<a id="__codelineno-152-19" name="__codelineno-152-19" href="#__codelineno-152-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-152-20" name="__codelineno-152-20" href="#__codelineno-152-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-152-21" name="__codelineno-152-21" href="#__codelineno-152-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-152-22" name="__codelineno-152-22" href="#__codelineno-152-22"></a>
<a id="__codelineno-152-23" name="__codelineno-152-23" href="#__codelineno-152-23"></a>
<a id="__codelineno-152-24" name="__codelineno-152-24" href="#__codelineno-152-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-152-25" name="__codelineno-152-25" href="#__codelineno-152-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-152-26" name="__codelineno-152-26" href="#__codelineno-152-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-152-27" name="__codelineno-152-27" href="#__codelineno-152-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-152-28" name="__codelineno-152-28" href="#__codelineno-152-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-152-29" name="__codelineno-152-29" href="#__codelineno-152-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-152-30" name="__codelineno-152-30" href="#__codelineno-152-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-152-31" name="__codelineno-152-31" href="#__codelineno-152-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-152-32" name="__codelineno-152-32" href="#__codelineno-152-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-152-33" name="__codelineno-152-33" href="#__codelineno-152-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-152-34" name="__codelineno-152-34" href="#__codelineno-152-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-152-35" name="__codelineno-152-35" href="#__codelineno-152-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-152-36" name="__codelineno-152-36" href="#__codelineno-152-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-153-1" name="__codelineno-153-1" href="#__codelineno-153-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-153-2" name="__codelineno-153-2" href="#__codelineno-153-2"></a>
<a id="__codelineno-153-3" name="__codelineno-153-3" href="#__codelineno-153-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-153-4" name="__codelineno-153-4" href="#__codelineno-153-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-153-5" name="__codelineno-153-5" href="#__codelineno-153-5"></a>
<a id="__codelineno-153-6" name="__codelineno-153-6" href="#__codelineno-153-6"></a>
<a id="__codelineno-153-7" name="__codelineno-153-7" href="#__codelineno-153-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-153-8" name="__codelineno-153-8" href="#__codelineno-153-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-153-9" name="__codelineno-153-9" href="#__codelineno-153-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-153-10" name="__codelineno-153-10" href="#__codelineno-153-10"></a>
<a id="__codelineno-153-11" name="__codelineno-153-11" href="#__codelineno-153-11"></a>
<a id="__codelineno-153-12" name="__codelineno-153-12" href="#__codelineno-153-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-153-13" name="__codelineno-153-13" href="#__codelineno-153-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-153-14" name="__codelineno-153-14" href="#__codelineno-153-14"></a>
<a id="__codelineno-153-15" name="__codelineno-153-15" href="#__codelineno-153-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-153-16" name="__codelineno-153-16" href="#__codelineno-153-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-153-17" name="__codelineno-153-17" href="#__codelineno-153-17"></a>
<a id="__codelineno-153-18" name="__codelineno-153-18" href="#__codelineno-153-18"></a>
<a id="__codelineno-153-19" name="__codelineno-153-19" href="#__codelineno-153-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-153-20" name="__codelineno-153-20" href="#__codelineno-153-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-153-21" name="__codelineno-153-21" href="#__codelineno-153-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-153-22" name="__codelineno-153-22" href="#__codelineno-153-22"></a>
<a id="__codelineno-153-23" name="__codelineno-153-23" href="#__codelineno-153-23"></a>
<a id="__codelineno-153-24" name="__codelineno-153-24" href="#__codelineno-153-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-153-25" name="__codelineno-153-25" href="#__codelineno-153-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-153-26" name="__codelineno-153-26" href="#__codelineno-153-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-153-27" name="__codelineno-153-27" href="#__codelineno-153-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-153-28" name="__codelineno-153-28" href="#__codelineno-153-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-153-29" name="__codelineno-153-29" href="#__codelineno-153-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-153-30" name="__codelineno-153-30" href="#__codelineno-153-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-153-31" name="__codelineno-153-31" href="#__codelineno-153-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-153-32" name="__codelineno-153-32" href="#__codelineno-153-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-153-33" name="__codelineno-153-33" href="#__codelineno-153-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-153-34" name="__codelineno-153-34" href="#__codelineno-153-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-153-35" name="__codelineno-153-35" href="#__codelineno-153-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-153-36" name="__codelineno-153-36" href="#__codelineno-153-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-154-1" name="__codelineno-154-1" href="#__codelineno-154-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-154-2" name="__codelineno-154-2" href="#__codelineno-154-2"></a>
<a id="__codelineno-154-3" name="__codelineno-154-3" href="#__codelineno-154-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-154-4" name="__codelineno-154-4" href="#__codelineno-154-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-154-5" name="__codelineno-154-5" href="#__codelineno-154-5"></a>
<a id="__codelineno-154-6" name="__codelineno-154-6" href="#__codelineno-154-6"></a>
<a id="__codelineno-154-7" name="__codelineno-154-7" href="#__codelineno-154-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-154-8" name="__codelineno-154-8" href="#__codelineno-154-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-154-9" name="__codelineno-154-9" href="#__codelineno-154-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-154-10" name="__codelineno-154-10" href="#__codelineno-154-10"></a>
<a id="__codelineno-154-11" name="__codelineno-154-11" href="#__codelineno-154-11"></a>
<a id="__codelineno-154-12" name="__codelineno-154-12" href="#__codelineno-154-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-154-13" name="__codelineno-154-13" href="#__codelineno-154-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-154-14" name="__codelineno-154-14" href="#__codelineno-154-14"></a>
<a id="__codelineno-154-15" name="__codelineno-154-15" href="#__codelineno-154-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-154-16" name="__codelineno-154-16" href="#__codelineno-154-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-154-17" name="__codelineno-154-17" href="#__codelineno-154-17"></a>
<a id="__codelineno-154-18" name="__codelineno-154-18" href="#__codelineno-154-18"></a>
<a id="__codelineno-154-19" name="__codelineno-154-19" href="#__codelineno-154-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-154-20" name="__codelineno-154-20" href="#__codelineno-154-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-154-21" name="__codelineno-154-21" href="#__codelineno-154-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-154-22" name="__codelineno-154-22" href="#__codelineno-154-22"></a>
<a id="__codelineno-154-23" name="__codelineno-154-23" href="#__codelineno-154-23"></a>
<a id="__codelineno-154-24" name="__codelineno-154-24" href="#__codelineno-154-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-154-25" name="__codelineno-154-25" href="#__codelineno-154-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-154-26" name="__codelineno-154-26" href="#__codelineno-154-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-154-27" name="__codelineno-154-27" href="#__codelineno-154-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-154-28" name="__codelineno-154-28" href="#__codelineno-154-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-154-29" name="__codelineno-154-29" href="#__codelineno-154-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-154-30" name="__codelineno-154-30" href="#__codelineno-154-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-154-31" name="__codelineno-154-31" href="#__codelineno-154-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-154-32" name="__codelineno-154-32" href="#__codelineno-154-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-154-33" name="__codelineno-154-33" href="#__codelineno-154-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-154-34" name="__codelineno-154-34" href="#__codelineno-154-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-154-35" name="__codelineno-154-35" href="#__codelineno-154-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-154-36" name="__codelineno-154-36" href="#__codelineno-154-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-155-1" name="__codelineno-155-1" href="#__codelineno-155-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-155-2" name="__codelineno-155-2" href="#__codelineno-155-2"></a>
<a id="__codelineno-155-3" name="__codelineno-155-3" href="#__codelineno-155-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-155-4" name="__codelineno-155-4" href="#__codelineno-155-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-155-5" name="__codelineno-155-5" href="#__codelineno-155-5"></a>
<a id="__codelineno-155-6" name="__codelineno-155-6" href="#__codelineno-155-6"></a>
<a id="__codelineno-155-7" name="__codelineno-155-7" href="#__codelineno-155-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-155-8" name="__codelineno-155-8" href="#__codelineno-155-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-155-9" name="__codelineno-155-9" href="#__codelineno-155-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-155-10" name="__codelineno-155-10" href="#__codelineno-155-10"></a>
<a id="__codelineno-155-11" name="__codelineno-155-11" href="#__codelineno-155-11"></a>
<a id="__codelineno-155-12" name="__codelineno-155-12" href="#__codelineno-155-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-155-13" name="__codelineno-155-13" href="#__codelineno-155-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-155-14" name="__codelineno-155-14" href="#__codelineno-155-14"></a>
<a id="__codelineno-155-15" name="__codelineno-155-15" href="#__codelineno-155-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-155-16" name="__codelineno-155-16" href="#__codelineno-155-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-155-17" name="__codelineno-155-17" href="#__codelineno-155-17"></a>
<a id="__codelineno-155-18" name="__codelineno-155-18" href="#__codelineno-155-18"></a>
<a id="__codelineno-155-19" name="__codelineno-155-19" href="#__codelineno-155-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-155-20" name="__codelineno-155-20" href="#__codelineno-155-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-155-21" name="__codelineno-155-21" href="#__codelineno-155-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-155-22" name="__codelineno-155-22" href="#__codelineno-155-22"></a>
<a id="__codelineno-155-23" name="__codelineno-155-23" href="#__codelineno-155-23"></a>
<a id="__codelineno-155-24" name="__codelineno-155-24" href="#__codelineno-155-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-155-25" name="__codelineno-155-25" href="#__codelineno-155-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-155-26" name="__codelineno-155-26" href="#__codelineno-155-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-155-27" name="__codelineno-155-27" href="#__codelineno-155-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-155-28" name="__codelineno-155-28" href="#__codelineno-155-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-155-29" name="__codelineno-155-29" href="#__codelineno-155-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-155-30" name="__codelineno-155-30" href="#__codelineno-155-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-155-31" name="__codelineno-155-31" href="#__codelineno-155-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-155-32" name="__codelineno-155-32" href="#__codelineno-155-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-155-33" name="__codelineno-155-33" href="#__codelineno-155-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-155-34" name="__codelineno-155-34" href="#__codelineno-155-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-155-35" name="__codelineno-155-35" href="#__codelineno-155-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-155-36" name="__codelineno-155-36" href="#__codelineno-155-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-156-1" name="__codelineno-156-1" href="#__codelineno-156-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-156-2" name="__codelineno-156-2" href="#__codelineno-156-2"></a>
<a id="__codelineno-156-3" name="__codelineno-156-3" href="#__codelineno-156-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-156-4" name="__codelineno-156-4" href="#__codelineno-156-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-156-5" name="__codelineno-156-5" href="#__codelineno-156-5"></a>
<a id="__codelineno-156-6" name="__codelineno-156-6" href="#__codelineno-156-6"></a>
<a id="__codelineno-156-7" name="__codelineno-156-7" href="#__codelineno-156-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-156-8" name="__codelineno-156-8" href="#__codelineno-156-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-156-9" name="__codelineno-156-9" href="#__codelineno-156-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-156-10" name="__codelineno-156-10" href="#__codelineno-156-10"></a>
<a id="__codelineno-156-11" name="__codelineno-156-11" href="#__codelineno-156-11"></a>
<a id="__codelineno-156-12" name="__codelineno-156-12" href="#__codelineno-156-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-156-13" name="__codelineno-156-13" href="#__codelineno-156-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-156-14" name="__codelineno-156-14" href="#__codelineno-156-14"></a>
<a id="__codelineno-156-15" name="__codelineno-156-15" href="#__codelineno-156-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-156-16" name="__codelineno-156-16" href="#__codelineno-156-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-156-17" name="__codelineno-156-17" href="#__codelineno-156-17"></a>
<a id="__codelineno-156-18" name="__codelineno-156-18" href="#__codelineno-156-18"></a>
<a id="__codelineno-156-19" name="__codelineno-156-19" href="#__codelineno-156-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-156-20" name="__codelineno-156-20" href="#__codelineno-156-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-156-21" name="__codelineno-156-21" href="#__codelineno-156-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-156-22" name="__codelineno-156-22" href="#__codelineno-156-22"></a>
<a id="__codelineno-156-23" name="__codelineno-156-23" href="#__codelineno-156-23"></a>
<a id="__codelineno-156-24" name="__codelineno-156-24" href="#__codelineno-156-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-156-25" name="__codelineno-156-25" href="#__codelineno-156-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-156-26" name="__codelineno-156-26" href="#__codelineno-156-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-156-27" name="__codelineno-156-27" href="#__codelineno-156-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-156-28" name="__codelineno-156-28" href="#__codelineno-156-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-156-29" name="__codelineno-156-29" href="#__codelineno-156-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-156-30" name="__codelineno-156-30" href="#__codelineno-156-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-156-31" name="__codelineno-156-31" href="#__codelineno-156-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-156-32" name="__codelineno-156-32" href="#__codelineno-156-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-156-33" name="__codelineno-156-33" href="#__codelineno-156-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-156-34" name="__codelineno-156-34" href="#__codelineno-156-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-156-35" name="__codelineno-156-35" href="#__codelineno-156-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-156-36" name="__codelineno-156-36" href="#__codelineno-156-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-157-1" name="__codelineno-157-1" href="#__codelineno-157-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-157-2" name="__codelineno-157-2" href="#__codelineno-157-2"></a>
<a id="__codelineno-157-3" name="__codelineno-157-3" href="#__codelineno-157-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-157-4" name="__codelineno-157-4" href="#__codelineno-157-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-157-5" name="__codelineno-157-5" href="#__codelineno-157-5"></a>
<a id="__codelineno-157-6" name="__codelineno-157-6" href="#__codelineno-157-6"></a>
<a id="__codelineno-157-7" name="__codelineno-157-7" href="#__codelineno-157-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-157-8" name="__codelineno-157-8" href="#__codelineno-157-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-157-9" name="__codelineno-157-9" href="#__codelineno-157-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-157-10" name="__codelineno-157-10" href="#__codelineno-157-10"></a>
<a id="__codelineno-157-11" name="__codelineno-157-11" href="#__codelineno-157-11"></a>
<a id="__codelineno-157-12" name="__codelineno-157-12" href="#__codelineno-157-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-157-13" name="__codelineno-157-13" href="#__codelineno-157-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-157-14" name="__codelineno-157-14" href="#__codelineno-157-14"></a>
<a id="__codelineno-157-15" name="__codelineno-157-15" href="#__codelineno-157-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-157-16" name="__codelineno-157-16" href="#__codelineno-157-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-157-17" name="__codelineno-157-17" href="#__codelineno-157-17"></a>
<a id="__codelineno-157-18" name="__codelineno-157-18" href="#__codelineno-157-18"></a>
<a id="__codelineno-157-19" name="__codelineno-157-19" href="#__codelineno-157-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-157-20" name="__codelineno-157-20" href="#__codelineno-157-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-157-21" name="__codelineno-157-21" href="#__codelineno-157-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-157-22" name="__codelineno-157-22" href="#__codelineno-157-22"></a>
<a id="__codelineno-157-23" name="__codelineno-157-23" href="#__codelineno-157-23"></a>
<a id="__codelineno-157-24" name="__codelineno-157-24" href="#__codelineno-157-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-157-25" name="__codelineno-157-25" href="#__codelineno-157-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-157-26" name="__codelineno-157-26" href="#__codelineno-157-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-157-27" name="__codelineno-157-27" href="#__codelineno-157-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-157-28" name="__codelineno-157-28" href="#__codelineno-157-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-157-29" name="__codelineno-157-29" href="#__codelineno-157-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-157-30" name="__codelineno-157-30" href="#__codelineno-157-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-157-31" name="__codelineno-157-31" href="#__codelineno-157-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-157-32" name="__codelineno-157-32" href="#__codelineno-157-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-157-33" name="__codelineno-157-33" href="#__codelineno-157-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-157-34" name="__codelineno-157-34" href="#__codelineno-157-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-157-35" name="__codelineno-157-35" href="#__codelineno-157-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-157-36" name="__codelineno-157-36" href="#__codelineno-157-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-158-1" name="__codelineno-158-1" href="#__codelineno-158-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-158-2" name="__codelineno-158-2" href="#__codelineno-158-2"></a>
<a id="__codelineno-158-3" name="__codelineno-158-3" href="#__codelineno-158-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-158-4" name="__codelineno-158-4" href="#__codelineno-158-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-158-5" name="__codelineno-158-5" href="#__codelineno-158-5"></a>
<a id="__codelineno-158-6" name="__codelineno-158-6" href="#__codelineno-158-6"></a>
<a id="__codelineno-158-7" name="__codelineno-158-7" href="#__codelineno-158-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-158-8" name="__codelineno-158-8" href="#__codelineno-158-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-158-9" name="__codelineno-158-9" href="#__codelineno-158-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-158-10" name="__codelineno-158-10" href="#__codelineno-158-10"></a>
<a id="__codelineno-158-11" name="__codelineno-158-11" href="#__codelineno-158-11"></a>
<a id="__codelineno-158-12" name="__codelineno-158-12" href="#__codelineno-158-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-158-13" name="__codelineno-158-13" href="#__codelineno-158-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-158-14" name="__codelineno-158-14" href="#__codelineno-158-14"></a>
<a id="__codelineno-158-15" name="__codelineno-158-15" href="#__codelineno-158-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-158-16" name="__codelineno-158-16" href="#__codelineno-158-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-158-17" name="__codelineno-158-17" href="#__codelineno-158-17"></a>
<a id="__codelineno-158-18" name="__codelineno-158-18" href="#__codelineno-158-18"></a>
<a id="__codelineno-158-19" name="__codelineno-158-19" href="#__codelineno-158-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-158-20" name="__codelineno-158-20" href="#__codelineno-158-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-158-21" name="__codelineno-158-21" href="#__codelineno-158-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-158-22" name="__codelineno-158-22" href="#__codelineno-158-22"></a>
<a id="__codelineno-158-23" name="__codelineno-158-23" href="#__codelineno-158-23"></a>
<a id="__codelineno-158-24" name="__codelineno-158-24" href="#__codelineno-158-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-158-25" name="__codelineno-158-25" href="#__codelineno-158-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-158-26" name="__codelineno-158-26" href="#__codelineno-158-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-158-27" name="__codelineno-158-27" href="#__codelineno-158-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-158-28" name="__codelineno-158-28" href="#__codelineno-158-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-158-29" name="__codelineno-158-29" href="#__codelineno-158-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-158-30" name="__codelineno-158-30" href="#__codelineno-158-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-158-31" name="__codelineno-158-31" href="#__codelineno-158-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-158-32" name="__codelineno-158-32" href="#__codelineno-158-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-158-33" name="__codelineno-158-33" href="#__codelineno-158-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-158-34" name="__codelineno-158-34" href="#__codelineno-158-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-158-35" name="__codelineno-158-35" href="#__codelineno-158-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-158-36" name="__codelineno-158-36" href="#__codelineno-158-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-159-1" name="__codelineno-159-1" href="#__codelineno-159-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-159-2" name="__codelineno-159-2" href="#__codelineno-159-2"></a>
<a id="__codelineno-159-3" name="__codelineno-159-3" href="#__codelineno-159-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-159-4" name="__codelineno-159-4" href="#__codelineno-159-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-159-5" name="__codelineno-159-5" href="#__codelineno-159-5"></a>
<a id="__codelineno-159-6" name="__codelineno-159-6" href="#__codelineno-159-6"></a>
<a id="__codelineno-159-7" name="__codelineno-159-7" href="#__codelineno-159-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-159-8" name="__codelineno-159-8" href="#__codelineno-159-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-159-9" name="__codelineno-159-9" href="#__codelineno-159-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-159-10" name="__codelineno-159-10" href="#__codelineno-159-10"></a>
<a id="__codelineno-159-11" name="__codelineno-159-11" href="#__codelineno-159-11"></a>
<a id="__codelineno-159-12" name="__codelineno-159-12" href="#__codelineno-159-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-159-13" name="__codelineno-159-13" href="#__codelineno-159-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-159-14" name="__codelineno-159-14" href="#__codelineno-159-14"></a>
<a id="__codelineno-159-15" name="__codelineno-159-15" href="#__codelineno-159-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-159-16" name="__codelineno-159-16" href="#__codelineno-159-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-159-17" name="__codelineno-159-17" href="#__codelineno-159-17"></a>
<a id="__codelineno-159-18" name="__codelineno-159-18" href="#__codelineno-159-18"></a>
<a id="__codelineno-159-19" name="__codelineno-159-19" href="#__codelineno-159-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-159-20" name="__codelineno-159-20" href="#__codelineno-159-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-159-21" name="__codelineno-159-21" href="#__codelineno-159-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-159-22" name="__codelineno-159-22" href="#__codelineno-159-22"></a>
<a id="__codelineno-159-23" name="__codelineno-159-23" href="#__codelineno-159-23"></a>
<a id="__codelineno-159-24" name="__codelineno-159-24" href="#__codelineno-159-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-159-25" name="__codelineno-159-25" href="#__codelineno-159-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-159-26" name="__codelineno-159-26" href="#__codelineno-159-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-159-27" name="__codelineno-159-27" href="#__codelineno-159-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-159-28" name="__codelineno-159-28" href="#__codelineno-159-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-159-29" name="__codelineno-159-29" href="#__codelineno-159-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-159-30" name="__codelineno-159-30" href="#__codelineno-159-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-159-31" name="__codelineno-159-31" href="#__codelineno-159-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-159-32" name="__codelineno-159-32" href="#__codelineno-159-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-159-33" name="__codelineno-159-33" href="#__codelineno-159-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-159-34" name="__codelineno-159-34" href="#__codelineno-159-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-159-35" name="__codelineno-159-35" href="#__codelineno-159-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-159-36" name="__codelineno-159-36" href="#__codelineno-159-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="21:10"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><input id="__tabbed_21_3" name="__tabbed_21" type="radio" /><input id="__tabbed_21_4" name="__tabbed_21" type="radio" /><input id="__tabbed_21_5" name="__tabbed_21" type="radio" /><input id="__tabbed_21_6" name="__tabbed_21" type="radio" /><input id="__tabbed_21_7" name="__tabbed_21" type="radio" /><input id="__tabbed_21_8" name="__tabbed_21" type="radio" /><input id="__tabbed_21_9" name="__tabbed_21" type="radio" /><input id="__tabbed_21_10" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">OpenAI</label><label for="__tabbed_21_2">Anthropic</label><label for="__tabbed_21_3">Google</label><label for="__tabbed_21_4">Groq</label><label for="__tabbed_21_5">xAI</label><label for="__tabbed_21_6">Mistral</label><label for="__tabbed_21_7">Cohere</label><label for="__tabbed_21_8">LiteLLM</label><label for="__tabbed_21_9">Azure AI</label><label for="__tabbed_21_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-160-1" name="__codelineno-160-1" href="#__codelineno-160-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-160-2" name="__codelineno-160-2" href="#__codelineno-160-2"></a>
<a id="__codelineno-160-3" name="__codelineno-160-3" href="#__codelineno-160-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-160-4" name="__codelineno-160-4" href="#__codelineno-160-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-160-5" name="__codelineno-160-5" href="#__codelineno-160-5"></a>
<a id="__codelineno-160-6" name="__codelineno-160-6" href="#__codelineno-160-6"></a>
<a id="__codelineno-160-7" name="__codelineno-160-7" href="#__codelineno-160-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-160-8" name="__codelineno-160-8" href="#__codelineno-160-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-160-9" name="__codelineno-160-9" href="#__codelineno-160-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-160-10" name="__codelineno-160-10" href="#__codelineno-160-10"></a>
<a id="__codelineno-160-11" name="__codelineno-160-11" href="#__codelineno-160-11"></a>
<a id="__codelineno-160-12" name="__codelineno-160-12" href="#__codelineno-160-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-160-13" name="__codelineno-160-13" href="#__codelineno-160-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-160-14" name="__codelineno-160-14" href="#__codelineno-160-14"></a>
<a id="__codelineno-160-15" name="__codelineno-160-15" href="#__codelineno-160-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-160-16" name="__codelineno-160-16" href="#__codelineno-160-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-160-17" name="__codelineno-160-17" href="#__codelineno-160-17"></a>
<a id="__codelineno-160-18" name="__codelineno-160-18" href="#__codelineno-160-18"></a>
<a id="__codelineno-160-19" name="__codelineno-160-19" href="#__codelineno-160-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-160-20" name="__codelineno-160-20" href="#__codelineno-160-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-160-21" name="__codelineno-160-21" href="#__codelineno-160-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-160-22" name="__codelineno-160-22" href="#__codelineno-160-22"></a>
<a id="__codelineno-160-23" name="__codelineno-160-23" href="#__codelineno-160-23"></a>
<a id="__codelineno-160-24" name="__codelineno-160-24" href="#__codelineno-160-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-160-25" name="__codelineno-160-25" href="#__codelineno-160-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-160-26" name="__codelineno-160-26" href="#__codelineno-160-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-160-27" name="__codelineno-160-27" href="#__codelineno-160-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-160-28" name="__codelineno-160-28" href="#__codelineno-160-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-160-29" name="__codelineno-160-29" href="#__codelineno-160-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-160-30" name="__codelineno-160-30" href="#__codelineno-160-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-160-31" name="__codelineno-160-31" href="#__codelineno-160-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-160-32" name="__codelineno-160-32" href="#__codelineno-160-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-160-33" name="__codelineno-160-33" href="#__codelineno-160-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-160-34" name="__codelineno-160-34" href="#__codelineno-160-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-160-35" name="__codelineno-160-35" href="#__codelineno-160-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-160-36" name="__codelineno-160-36" href="#__codelineno-160-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-161-1" name="__codelineno-161-1" href="#__codelineno-161-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-161-2" name="__codelineno-161-2" href="#__codelineno-161-2"></a>
<a id="__codelineno-161-3" name="__codelineno-161-3" href="#__codelineno-161-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-161-4" name="__codelineno-161-4" href="#__codelineno-161-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-161-5" name="__codelineno-161-5" href="#__codelineno-161-5"></a>
<a id="__codelineno-161-6" name="__codelineno-161-6" href="#__codelineno-161-6"></a>
<a id="__codelineno-161-7" name="__codelineno-161-7" href="#__codelineno-161-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-161-8" name="__codelineno-161-8" href="#__codelineno-161-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-161-9" name="__codelineno-161-9" href="#__codelineno-161-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-161-10" name="__codelineno-161-10" href="#__codelineno-161-10"></a>
<a id="__codelineno-161-11" name="__codelineno-161-11" href="#__codelineno-161-11"></a>
<a id="__codelineno-161-12" name="__codelineno-161-12" href="#__codelineno-161-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-161-13" name="__codelineno-161-13" href="#__codelineno-161-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-161-14" name="__codelineno-161-14" href="#__codelineno-161-14"></a>
<a id="__codelineno-161-15" name="__codelineno-161-15" href="#__codelineno-161-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-161-16" name="__codelineno-161-16" href="#__codelineno-161-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-161-17" name="__codelineno-161-17" href="#__codelineno-161-17"></a>
<a id="__codelineno-161-18" name="__codelineno-161-18" href="#__codelineno-161-18"></a>
<a id="__codelineno-161-19" name="__codelineno-161-19" href="#__codelineno-161-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-161-20" name="__codelineno-161-20" href="#__codelineno-161-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-161-21" name="__codelineno-161-21" href="#__codelineno-161-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-161-22" name="__codelineno-161-22" href="#__codelineno-161-22"></a>
<a id="__codelineno-161-23" name="__codelineno-161-23" href="#__codelineno-161-23"></a>
<a id="__codelineno-161-24" name="__codelineno-161-24" href="#__codelineno-161-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-161-25" name="__codelineno-161-25" href="#__codelineno-161-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-161-26" name="__codelineno-161-26" href="#__codelineno-161-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-161-27" name="__codelineno-161-27" href="#__codelineno-161-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-161-28" name="__codelineno-161-28" href="#__codelineno-161-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-161-29" name="__codelineno-161-29" href="#__codelineno-161-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-161-30" name="__codelineno-161-30" href="#__codelineno-161-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-161-31" name="__codelineno-161-31" href="#__codelineno-161-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-161-32" name="__codelineno-161-32" href="#__codelineno-161-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-161-33" name="__codelineno-161-33" href="#__codelineno-161-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-161-34" name="__codelineno-161-34" href="#__codelineno-161-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-161-35" name="__codelineno-161-35" href="#__codelineno-161-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-161-36" name="__codelineno-161-36" href="#__codelineno-161-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-162-1" name="__codelineno-162-1" href="#__codelineno-162-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-162-2" name="__codelineno-162-2" href="#__codelineno-162-2"></a>
<a id="__codelineno-162-3" name="__codelineno-162-3" href="#__codelineno-162-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-162-4" name="__codelineno-162-4" href="#__codelineno-162-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-162-5" name="__codelineno-162-5" href="#__codelineno-162-5"></a>
<a id="__codelineno-162-6" name="__codelineno-162-6" href="#__codelineno-162-6"></a>
<a id="__codelineno-162-7" name="__codelineno-162-7" href="#__codelineno-162-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-162-8" name="__codelineno-162-8" href="#__codelineno-162-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-162-9" name="__codelineno-162-9" href="#__codelineno-162-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-162-10" name="__codelineno-162-10" href="#__codelineno-162-10"></a>
<a id="__codelineno-162-11" name="__codelineno-162-11" href="#__codelineno-162-11"></a>
<a id="__codelineno-162-12" name="__codelineno-162-12" href="#__codelineno-162-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-162-13" name="__codelineno-162-13" href="#__codelineno-162-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-162-14" name="__codelineno-162-14" href="#__codelineno-162-14"></a>
<a id="__codelineno-162-15" name="__codelineno-162-15" href="#__codelineno-162-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-162-16" name="__codelineno-162-16" href="#__codelineno-162-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-162-17" name="__codelineno-162-17" href="#__codelineno-162-17"></a>
<a id="__codelineno-162-18" name="__codelineno-162-18" href="#__codelineno-162-18"></a>
<a id="__codelineno-162-19" name="__codelineno-162-19" href="#__codelineno-162-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-162-20" name="__codelineno-162-20" href="#__codelineno-162-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-162-21" name="__codelineno-162-21" href="#__codelineno-162-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-162-22" name="__codelineno-162-22" href="#__codelineno-162-22"></a>
<a id="__codelineno-162-23" name="__codelineno-162-23" href="#__codelineno-162-23"></a>
<a id="__codelineno-162-24" name="__codelineno-162-24" href="#__codelineno-162-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-162-25" name="__codelineno-162-25" href="#__codelineno-162-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-162-26" name="__codelineno-162-26" href="#__codelineno-162-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-162-27" name="__codelineno-162-27" href="#__codelineno-162-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-162-28" name="__codelineno-162-28" href="#__codelineno-162-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-162-29" name="__codelineno-162-29" href="#__codelineno-162-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-162-30" name="__codelineno-162-30" href="#__codelineno-162-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-162-31" name="__codelineno-162-31" href="#__codelineno-162-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-162-32" name="__codelineno-162-32" href="#__codelineno-162-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-162-33" name="__codelineno-162-33" href="#__codelineno-162-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-162-34" name="__codelineno-162-34" href="#__codelineno-162-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-162-35" name="__codelineno-162-35" href="#__codelineno-162-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-162-36" name="__codelineno-162-36" href="#__codelineno-162-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-163-1" name="__codelineno-163-1" href="#__codelineno-163-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-163-2" name="__codelineno-163-2" href="#__codelineno-163-2"></a>
<a id="__codelineno-163-3" name="__codelineno-163-3" href="#__codelineno-163-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-163-4" name="__codelineno-163-4" href="#__codelineno-163-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-163-5" name="__codelineno-163-5" href="#__codelineno-163-5"></a>
<a id="__codelineno-163-6" name="__codelineno-163-6" href="#__codelineno-163-6"></a>
<a id="__codelineno-163-7" name="__codelineno-163-7" href="#__codelineno-163-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-163-8" name="__codelineno-163-8" href="#__codelineno-163-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-163-9" name="__codelineno-163-9" href="#__codelineno-163-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-163-10" name="__codelineno-163-10" href="#__codelineno-163-10"></a>
<a id="__codelineno-163-11" name="__codelineno-163-11" href="#__codelineno-163-11"></a>
<a id="__codelineno-163-12" name="__codelineno-163-12" href="#__codelineno-163-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-163-13" name="__codelineno-163-13" href="#__codelineno-163-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-163-14" name="__codelineno-163-14" href="#__codelineno-163-14"></a>
<a id="__codelineno-163-15" name="__codelineno-163-15" href="#__codelineno-163-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-163-16" name="__codelineno-163-16" href="#__codelineno-163-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-163-17" name="__codelineno-163-17" href="#__codelineno-163-17"></a>
<a id="__codelineno-163-18" name="__codelineno-163-18" href="#__codelineno-163-18"></a>
<a id="__codelineno-163-19" name="__codelineno-163-19" href="#__codelineno-163-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-163-20" name="__codelineno-163-20" href="#__codelineno-163-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-163-21" name="__codelineno-163-21" href="#__codelineno-163-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-163-22" name="__codelineno-163-22" href="#__codelineno-163-22"></a>
<a id="__codelineno-163-23" name="__codelineno-163-23" href="#__codelineno-163-23"></a>
<a id="__codelineno-163-24" name="__codelineno-163-24" href="#__codelineno-163-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-163-25" name="__codelineno-163-25" href="#__codelineno-163-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-163-26" name="__codelineno-163-26" href="#__codelineno-163-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-163-27" name="__codelineno-163-27" href="#__codelineno-163-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-163-28" name="__codelineno-163-28" href="#__codelineno-163-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-163-29" name="__codelineno-163-29" href="#__codelineno-163-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-163-30" name="__codelineno-163-30" href="#__codelineno-163-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-163-31" name="__codelineno-163-31" href="#__codelineno-163-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-163-32" name="__codelineno-163-32" href="#__codelineno-163-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-163-33" name="__codelineno-163-33" href="#__codelineno-163-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-163-34" name="__codelineno-163-34" href="#__codelineno-163-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-163-35" name="__codelineno-163-35" href="#__codelineno-163-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-163-36" name="__codelineno-163-36" href="#__codelineno-163-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-164-1" name="__codelineno-164-1" href="#__codelineno-164-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-164-2" name="__codelineno-164-2" href="#__codelineno-164-2"></a>
<a id="__codelineno-164-3" name="__codelineno-164-3" href="#__codelineno-164-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-164-4" name="__codelineno-164-4" href="#__codelineno-164-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-164-5" name="__codelineno-164-5" href="#__codelineno-164-5"></a>
<a id="__codelineno-164-6" name="__codelineno-164-6" href="#__codelineno-164-6"></a>
<a id="__codelineno-164-7" name="__codelineno-164-7" href="#__codelineno-164-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-164-8" name="__codelineno-164-8" href="#__codelineno-164-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-164-9" name="__codelineno-164-9" href="#__codelineno-164-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-164-10" name="__codelineno-164-10" href="#__codelineno-164-10"></a>
<a id="__codelineno-164-11" name="__codelineno-164-11" href="#__codelineno-164-11"></a>
<a id="__codelineno-164-12" name="__codelineno-164-12" href="#__codelineno-164-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-164-13" name="__codelineno-164-13" href="#__codelineno-164-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-164-14" name="__codelineno-164-14" href="#__codelineno-164-14"></a>
<a id="__codelineno-164-15" name="__codelineno-164-15" href="#__codelineno-164-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-164-16" name="__codelineno-164-16" href="#__codelineno-164-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-164-17" name="__codelineno-164-17" href="#__codelineno-164-17"></a>
<a id="__codelineno-164-18" name="__codelineno-164-18" href="#__codelineno-164-18"></a>
<a id="__codelineno-164-19" name="__codelineno-164-19" href="#__codelineno-164-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-164-20" name="__codelineno-164-20" href="#__codelineno-164-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-164-21" name="__codelineno-164-21" href="#__codelineno-164-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-164-22" name="__codelineno-164-22" href="#__codelineno-164-22"></a>
<a id="__codelineno-164-23" name="__codelineno-164-23" href="#__codelineno-164-23"></a>
<a id="__codelineno-164-24" name="__codelineno-164-24" href="#__codelineno-164-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-164-25" name="__codelineno-164-25" href="#__codelineno-164-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-164-26" name="__codelineno-164-26" href="#__codelineno-164-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-164-27" name="__codelineno-164-27" href="#__codelineno-164-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-164-28" name="__codelineno-164-28" href="#__codelineno-164-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-164-29" name="__codelineno-164-29" href="#__codelineno-164-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-164-30" name="__codelineno-164-30" href="#__codelineno-164-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-164-31" name="__codelineno-164-31" href="#__codelineno-164-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-164-32" name="__codelineno-164-32" href="#__codelineno-164-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-164-33" name="__codelineno-164-33" href="#__codelineno-164-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-164-34" name="__codelineno-164-34" href="#__codelineno-164-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-164-35" name="__codelineno-164-35" href="#__codelineno-164-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-164-36" name="__codelineno-164-36" href="#__codelineno-164-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-165-1" name="__codelineno-165-1" href="#__codelineno-165-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-165-2" name="__codelineno-165-2" href="#__codelineno-165-2"></a>
<a id="__codelineno-165-3" name="__codelineno-165-3" href="#__codelineno-165-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-165-4" name="__codelineno-165-4" href="#__codelineno-165-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-165-5" name="__codelineno-165-5" href="#__codelineno-165-5"></a>
<a id="__codelineno-165-6" name="__codelineno-165-6" href="#__codelineno-165-6"></a>
<a id="__codelineno-165-7" name="__codelineno-165-7" href="#__codelineno-165-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-165-8" name="__codelineno-165-8" href="#__codelineno-165-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-165-9" name="__codelineno-165-9" href="#__codelineno-165-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-165-10" name="__codelineno-165-10" href="#__codelineno-165-10"></a>
<a id="__codelineno-165-11" name="__codelineno-165-11" href="#__codelineno-165-11"></a>
<a id="__codelineno-165-12" name="__codelineno-165-12" href="#__codelineno-165-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-165-13" name="__codelineno-165-13" href="#__codelineno-165-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-165-14" name="__codelineno-165-14" href="#__codelineno-165-14"></a>
<a id="__codelineno-165-15" name="__codelineno-165-15" href="#__codelineno-165-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-165-16" name="__codelineno-165-16" href="#__codelineno-165-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-165-17" name="__codelineno-165-17" href="#__codelineno-165-17"></a>
<a id="__codelineno-165-18" name="__codelineno-165-18" href="#__codelineno-165-18"></a>
<a id="__codelineno-165-19" name="__codelineno-165-19" href="#__codelineno-165-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-165-20" name="__codelineno-165-20" href="#__codelineno-165-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-165-21" name="__codelineno-165-21" href="#__codelineno-165-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-165-22" name="__codelineno-165-22" href="#__codelineno-165-22"></a>
<a id="__codelineno-165-23" name="__codelineno-165-23" href="#__codelineno-165-23"></a>
<a id="__codelineno-165-24" name="__codelineno-165-24" href="#__codelineno-165-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-165-25" name="__codelineno-165-25" href="#__codelineno-165-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-165-26" name="__codelineno-165-26" href="#__codelineno-165-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-165-27" name="__codelineno-165-27" href="#__codelineno-165-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-165-28" name="__codelineno-165-28" href="#__codelineno-165-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-165-29" name="__codelineno-165-29" href="#__codelineno-165-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-165-30" name="__codelineno-165-30" href="#__codelineno-165-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-165-31" name="__codelineno-165-31" href="#__codelineno-165-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-165-32" name="__codelineno-165-32" href="#__codelineno-165-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-165-33" name="__codelineno-165-33" href="#__codelineno-165-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-165-34" name="__codelineno-165-34" href="#__codelineno-165-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-165-35" name="__codelineno-165-35" href="#__codelineno-165-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-165-36" name="__codelineno-165-36" href="#__codelineno-165-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-166-1" name="__codelineno-166-1" href="#__codelineno-166-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-166-2" name="__codelineno-166-2" href="#__codelineno-166-2"></a>
<a id="__codelineno-166-3" name="__codelineno-166-3" href="#__codelineno-166-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-166-4" name="__codelineno-166-4" href="#__codelineno-166-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-166-5" name="__codelineno-166-5" href="#__codelineno-166-5"></a>
<a id="__codelineno-166-6" name="__codelineno-166-6" href="#__codelineno-166-6"></a>
<a id="__codelineno-166-7" name="__codelineno-166-7" href="#__codelineno-166-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-166-8" name="__codelineno-166-8" href="#__codelineno-166-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-166-9" name="__codelineno-166-9" href="#__codelineno-166-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-166-10" name="__codelineno-166-10" href="#__codelineno-166-10"></a>
<a id="__codelineno-166-11" name="__codelineno-166-11" href="#__codelineno-166-11"></a>
<a id="__codelineno-166-12" name="__codelineno-166-12" href="#__codelineno-166-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-166-13" name="__codelineno-166-13" href="#__codelineno-166-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-166-14" name="__codelineno-166-14" href="#__codelineno-166-14"></a>
<a id="__codelineno-166-15" name="__codelineno-166-15" href="#__codelineno-166-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-166-16" name="__codelineno-166-16" href="#__codelineno-166-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-166-17" name="__codelineno-166-17" href="#__codelineno-166-17"></a>
<a id="__codelineno-166-18" name="__codelineno-166-18" href="#__codelineno-166-18"></a>
<a id="__codelineno-166-19" name="__codelineno-166-19" href="#__codelineno-166-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-166-20" name="__codelineno-166-20" href="#__codelineno-166-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-166-21" name="__codelineno-166-21" href="#__codelineno-166-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-166-22" name="__codelineno-166-22" href="#__codelineno-166-22"></a>
<a id="__codelineno-166-23" name="__codelineno-166-23" href="#__codelineno-166-23"></a>
<a id="__codelineno-166-24" name="__codelineno-166-24" href="#__codelineno-166-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-166-25" name="__codelineno-166-25" href="#__codelineno-166-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-166-26" name="__codelineno-166-26" href="#__codelineno-166-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-166-27" name="__codelineno-166-27" href="#__codelineno-166-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-166-28" name="__codelineno-166-28" href="#__codelineno-166-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-166-29" name="__codelineno-166-29" href="#__codelineno-166-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-166-30" name="__codelineno-166-30" href="#__codelineno-166-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-166-31" name="__codelineno-166-31" href="#__codelineno-166-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-166-32" name="__codelineno-166-32" href="#__codelineno-166-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-166-33" name="__codelineno-166-33" href="#__codelineno-166-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-166-34" name="__codelineno-166-34" href="#__codelineno-166-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-166-35" name="__codelineno-166-35" href="#__codelineno-166-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-166-36" name="__codelineno-166-36" href="#__codelineno-166-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-167-1" name="__codelineno-167-1" href="#__codelineno-167-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-167-2" name="__codelineno-167-2" href="#__codelineno-167-2"></a>
<a id="__codelineno-167-3" name="__codelineno-167-3" href="#__codelineno-167-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-167-4" name="__codelineno-167-4" href="#__codelineno-167-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-167-5" name="__codelineno-167-5" href="#__codelineno-167-5"></a>
<a id="__codelineno-167-6" name="__codelineno-167-6" href="#__codelineno-167-6"></a>
<a id="__codelineno-167-7" name="__codelineno-167-7" href="#__codelineno-167-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-167-8" name="__codelineno-167-8" href="#__codelineno-167-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-167-9" name="__codelineno-167-9" href="#__codelineno-167-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-167-10" name="__codelineno-167-10" href="#__codelineno-167-10"></a>
<a id="__codelineno-167-11" name="__codelineno-167-11" href="#__codelineno-167-11"></a>
<a id="__codelineno-167-12" name="__codelineno-167-12" href="#__codelineno-167-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-167-13" name="__codelineno-167-13" href="#__codelineno-167-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-167-14" name="__codelineno-167-14" href="#__codelineno-167-14"></a>
<a id="__codelineno-167-15" name="__codelineno-167-15" href="#__codelineno-167-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-167-16" name="__codelineno-167-16" href="#__codelineno-167-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-167-17" name="__codelineno-167-17" href="#__codelineno-167-17"></a>
<a id="__codelineno-167-18" name="__codelineno-167-18" href="#__codelineno-167-18"></a>
<a id="__codelineno-167-19" name="__codelineno-167-19" href="#__codelineno-167-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-167-20" name="__codelineno-167-20" href="#__codelineno-167-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-167-21" name="__codelineno-167-21" href="#__codelineno-167-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-167-22" name="__codelineno-167-22" href="#__codelineno-167-22"></a>
<a id="__codelineno-167-23" name="__codelineno-167-23" href="#__codelineno-167-23"></a>
<a id="__codelineno-167-24" name="__codelineno-167-24" href="#__codelineno-167-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-167-25" name="__codelineno-167-25" href="#__codelineno-167-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-167-26" name="__codelineno-167-26" href="#__codelineno-167-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-167-27" name="__codelineno-167-27" href="#__codelineno-167-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-167-28" name="__codelineno-167-28" href="#__codelineno-167-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-167-29" name="__codelineno-167-29" href="#__codelineno-167-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-167-30" name="__codelineno-167-30" href="#__codelineno-167-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-167-31" name="__codelineno-167-31" href="#__codelineno-167-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-167-32" name="__codelineno-167-32" href="#__codelineno-167-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-167-33" name="__codelineno-167-33" href="#__codelineno-167-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-167-34" name="__codelineno-167-34" href="#__codelineno-167-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-167-35" name="__codelineno-167-35" href="#__codelineno-167-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-167-36" name="__codelineno-167-36" href="#__codelineno-167-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-168-1" name="__codelineno-168-1" href="#__codelineno-168-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-168-2" name="__codelineno-168-2" href="#__codelineno-168-2"></a>
<a id="__codelineno-168-3" name="__codelineno-168-3" href="#__codelineno-168-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-168-4" name="__codelineno-168-4" href="#__codelineno-168-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-168-5" name="__codelineno-168-5" href="#__codelineno-168-5"></a>
<a id="__codelineno-168-6" name="__codelineno-168-6" href="#__codelineno-168-6"></a>
<a id="__codelineno-168-7" name="__codelineno-168-7" href="#__codelineno-168-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-168-8" name="__codelineno-168-8" href="#__codelineno-168-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-168-9" name="__codelineno-168-9" href="#__codelineno-168-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-168-10" name="__codelineno-168-10" href="#__codelineno-168-10"></a>
<a id="__codelineno-168-11" name="__codelineno-168-11" href="#__codelineno-168-11"></a>
<a id="__codelineno-168-12" name="__codelineno-168-12" href="#__codelineno-168-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-168-13" name="__codelineno-168-13" href="#__codelineno-168-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-168-14" name="__codelineno-168-14" href="#__codelineno-168-14"></a>
<a id="__codelineno-168-15" name="__codelineno-168-15" href="#__codelineno-168-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-168-16" name="__codelineno-168-16" href="#__codelineno-168-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-168-17" name="__codelineno-168-17" href="#__codelineno-168-17"></a>
<a id="__codelineno-168-18" name="__codelineno-168-18" href="#__codelineno-168-18"></a>
<a id="__codelineno-168-19" name="__codelineno-168-19" href="#__codelineno-168-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-168-20" name="__codelineno-168-20" href="#__codelineno-168-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-168-21" name="__codelineno-168-21" href="#__codelineno-168-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-168-22" name="__codelineno-168-22" href="#__codelineno-168-22"></a>
<a id="__codelineno-168-23" name="__codelineno-168-23" href="#__codelineno-168-23"></a>
<a id="__codelineno-168-24" name="__codelineno-168-24" href="#__codelineno-168-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-168-25" name="__codelineno-168-25" href="#__codelineno-168-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-168-26" name="__codelineno-168-26" href="#__codelineno-168-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-168-27" name="__codelineno-168-27" href="#__codelineno-168-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-168-28" name="__codelineno-168-28" href="#__codelineno-168-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-168-29" name="__codelineno-168-29" href="#__codelineno-168-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-168-30" name="__codelineno-168-30" href="#__codelineno-168-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-168-31" name="__codelineno-168-31" href="#__codelineno-168-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-168-32" name="__codelineno-168-32" href="#__codelineno-168-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-168-33" name="__codelineno-168-33" href="#__codelineno-168-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-168-34" name="__codelineno-168-34" href="#__codelineno-168-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-168-35" name="__codelineno-168-35" href="#__codelineno-168-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-168-36" name="__codelineno-168-36" href="#__codelineno-168-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-169-1" name="__codelineno-169-1" href="#__codelineno-169-1"></a><span class="hll"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
</span><a id="__codelineno-169-2" name="__codelineno-169-2" href="#__codelineno-169-2"></a>
<a id="__codelineno-169-3" name="__codelineno-169-3" href="#__codelineno-169-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-169-4" name="__codelineno-169-4" href="#__codelineno-169-4"></a><span class="hll"><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
</span><a id="__codelineno-169-5" name="__codelineno-169-5" href="#__codelineno-169-5"></a>
<a id="__codelineno-169-6" name="__codelineno-169-6" href="#__codelineno-169-6"></a>
<a id="__codelineno-169-7" name="__codelineno-169-7" href="#__codelineno-169-7"></a><span class="hll"><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-169-8" name="__codelineno-169-8" href="#__codelineno-169-8"></a><span class="hll">    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
</span><a id="__codelineno-169-9" name="__codelineno-169-9" href="#__codelineno-169-9"></a><span class="hll">    <span class="k">return</span> <span class="n">v</span>
</span><a id="__codelineno-169-10" name="__codelineno-169-10" href="#__codelineno-169-10"></a>
<a id="__codelineno-169-11" name="__codelineno-169-11" href="#__codelineno-169-11"></a>
<a id="__codelineno-169-12" name="__codelineno-169-12" href="#__codelineno-169-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-169-13" name="__codelineno-169-13" href="#__codelineno-169-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-169-14" name="__codelineno-169-14" href="#__codelineno-169-14"></a>
<a id="__codelineno-169-15" name="__codelineno-169-15" href="#__codelineno-169-15"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-169-16" name="__codelineno-169-16" href="#__codelineno-169-16"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
</span><a id="__codelineno-169-17" name="__codelineno-169-17" href="#__codelineno-169-17"></a>
<a id="__codelineno-169-18" name="__codelineno-169-18" href="#__codelineno-169-18"></a>
<a id="__codelineno-169-19" name="__codelineno-169-19" href="#__codelineno-169-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-169-20" name="__codelineno-169-20" href="#__codelineno-169-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-169-21" name="__codelineno-169-21" href="#__codelineno-169-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-169-22" name="__codelineno-169-22" href="#__codelineno-169-22"></a>
<a id="__codelineno-169-23" name="__codelineno-169-23" href="#__codelineno-169-23"></a>
<a id="__codelineno-169-24" name="__codelineno-169-24" href="#__codelineno-169-24"></a><span class="hll"><span class="k">try</span><span class="p">:</span>
</span><a id="__codelineno-169-25" name="__codelineno-169-25" href="#__codelineno-169-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-169-26" name="__codelineno-169-26" href="#__codelineno-169-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-169-27" name="__codelineno-169-27" href="#__codelineno-169-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-169-28" name="__codelineno-169-28" href="#__codelineno-169-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-169-29" name="__codelineno-169-29" href="#__codelineno-169-29"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-169-30" name="__codelineno-169-30" href="#__codelineno-169-30"></a>    <span class="c1"># Error: 2 validation errors for Book</span>
<a id="__codelineno-169-31" name="__codelineno-169-31" href="#__codelineno-169-31"></a>    <span class="c1"># title</span>
<a id="__codelineno-169-32" name="__codelineno-169-32" href="#__codelineno-169-32"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;The Name of the Wind&#39;, input_type=str]</span>
<a id="__codelineno-169-33" name="__codelineno-169-33" href="#__codelineno-169-33"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
<a id="__codelineno-169-34" name="__codelineno-169-34" href="#__codelineno-169-34"></a>    <span class="c1"># author</span>
<a id="__codelineno-169-35" name="__codelineno-169-35" href="#__codelineno-169-35"></a>    <span class="c1">#   Assertion failed, Field must be uppercase [type=assertion_error, input_value=&#39;Patrick Rothfuss&#39;, input_type=str]</span>
<a id="__codelineno-169-36" name="__codelineno-169-36" href="#__codelineno-169-36"></a>    <span class="c1">#     For further information visit https://errors.pydantic.dev/2.7/v/assertion_error</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Without additional prompt engineering, this call will fail every single time. It's important to engineer your prompts to reduce errors, but LLMs are far from perfect, so always remember to catch and handle validation errors gracefully.</p>
<p>We highly recommend taking a look at our section on <a href="../retries/">retries</a> to learn more about automatically retrying and re-inserting validation errors, which enables retrying the call such that the LLM can learn from its previous mistakes.</p>
<h3 id="accessing-original-call-response-on-error">Accessing Original Call Response On Error<a class="headerlink" href="#accessing-original-call-response-on-error" title="Permanent link">&para;</a></h3>
<p>In case of a <code>ValidationError</code>, you can access the original response for debugging:</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="22:4"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><input id="__tabbed_22_3" name="__tabbed_22" type="radio" /><input id="__tabbed_22_4" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">Shorthand</label><label for="__tabbed_22_2">Messages</label><label for="__tabbed_22_3">String Template</label><label for="__tabbed_22_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="23:10"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><input id="__tabbed_23_4" name="__tabbed_23" type="radio" /><input id="__tabbed_23_5" name="__tabbed_23" type="radio" /><input id="__tabbed_23_6" name="__tabbed_23" type="radio" /><input id="__tabbed_23_7" name="__tabbed_23" type="radio" /><input id="__tabbed_23_8" name="__tabbed_23" type="radio" /><input id="__tabbed_23_9" name="__tabbed_23" type="radio" /><input id="__tabbed_23_10" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">OpenAI</label><label for="__tabbed_23_2">Anthropic</label><label for="__tabbed_23_3">Google</label><label for="__tabbed_23_4">Groq</label><label for="__tabbed_23_5">xAI</label><label for="__tabbed_23_6">Mistral</label><label for="__tabbed_23_7">Cohere</label><label for="__tabbed_23_8">LiteLLM</label><label for="__tabbed_23_9">Azure AI</label><label for="__tabbed_23_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-170-1" name="__codelineno-170-1" href="#__codelineno-170-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-170-2" name="__codelineno-170-2" href="#__codelineno-170-2"></a>
<a id="__codelineno-170-3" name="__codelineno-170-3" href="#__codelineno-170-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-170-4" name="__codelineno-170-4" href="#__codelineno-170-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-170-5" name="__codelineno-170-5" href="#__codelineno-170-5"></a>
<a id="__codelineno-170-6" name="__codelineno-170-6" href="#__codelineno-170-6"></a>
<a id="__codelineno-170-7" name="__codelineno-170-7" href="#__codelineno-170-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-170-8" name="__codelineno-170-8" href="#__codelineno-170-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-170-9" name="__codelineno-170-9" href="#__codelineno-170-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-170-10" name="__codelineno-170-10" href="#__codelineno-170-10"></a>
<a id="__codelineno-170-11" name="__codelineno-170-11" href="#__codelineno-170-11"></a>
<a id="__codelineno-170-12" name="__codelineno-170-12" href="#__codelineno-170-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-170-13" name="__codelineno-170-13" href="#__codelineno-170-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-170-14" name="__codelineno-170-14" href="#__codelineno-170-14"></a>
<a id="__codelineno-170-15" name="__codelineno-170-15" href="#__codelineno-170-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-170-16" name="__codelineno-170-16" href="#__codelineno-170-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-170-17" name="__codelineno-170-17" href="#__codelineno-170-17"></a>
<a id="__codelineno-170-18" name="__codelineno-170-18" href="#__codelineno-170-18"></a>
<a id="__codelineno-170-19" name="__codelineno-170-19" href="#__codelineno-170-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-170-20" name="__codelineno-170-20" href="#__codelineno-170-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-170-21" name="__codelineno-170-21" href="#__codelineno-170-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-170-22" name="__codelineno-170-22" href="#__codelineno-170-22"></a>
<a id="__codelineno-170-23" name="__codelineno-170-23" href="#__codelineno-170-23"></a>
<a id="__codelineno-170-24" name="__codelineno-170-24" href="#__codelineno-170-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-170-25" name="__codelineno-170-25" href="#__codelineno-170-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-170-26" name="__codelineno-170-26" href="#__codelineno-170-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-170-27" name="__codelineno-170-27" href="#__codelineno-170-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-170-28" name="__codelineno-170-28" href="#__codelineno-170-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-170-29" name="__codelineno-170-29" href="#__codelineno-170-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-170-30" name="__codelineno-170-30" href="#__codelineno-170-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-170-31" name="__codelineno-170-31" href="#__codelineno-170-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-171-1" name="__codelineno-171-1" href="#__codelineno-171-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-171-2" name="__codelineno-171-2" href="#__codelineno-171-2"></a>
<a id="__codelineno-171-3" name="__codelineno-171-3" href="#__codelineno-171-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-171-4" name="__codelineno-171-4" href="#__codelineno-171-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-171-5" name="__codelineno-171-5" href="#__codelineno-171-5"></a>
<a id="__codelineno-171-6" name="__codelineno-171-6" href="#__codelineno-171-6"></a>
<a id="__codelineno-171-7" name="__codelineno-171-7" href="#__codelineno-171-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-171-8" name="__codelineno-171-8" href="#__codelineno-171-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-171-9" name="__codelineno-171-9" href="#__codelineno-171-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-171-10" name="__codelineno-171-10" href="#__codelineno-171-10"></a>
<a id="__codelineno-171-11" name="__codelineno-171-11" href="#__codelineno-171-11"></a>
<a id="__codelineno-171-12" name="__codelineno-171-12" href="#__codelineno-171-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-171-13" name="__codelineno-171-13" href="#__codelineno-171-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-171-14" name="__codelineno-171-14" href="#__codelineno-171-14"></a>
<a id="__codelineno-171-15" name="__codelineno-171-15" href="#__codelineno-171-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-171-16" name="__codelineno-171-16" href="#__codelineno-171-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-171-17" name="__codelineno-171-17" href="#__codelineno-171-17"></a>
<a id="__codelineno-171-18" name="__codelineno-171-18" href="#__codelineno-171-18"></a>
<a id="__codelineno-171-19" name="__codelineno-171-19" href="#__codelineno-171-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-171-20" name="__codelineno-171-20" href="#__codelineno-171-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-171-21" name="__codelineno-171-21" href="#__codelineno-171-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-171-22" name="__codelineno-171-22" href="#__codelineno-171-22"></a>
<a id="__codelineno-171-23" name="__codelineno-171-23" href="#__codelineno-171-23"></a>
<a id="__codelineno-171-24" name="__codelineno-171-24" href="#__codelineno-171-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-171-25" name="__codelineno-171-25" href="#__codelineno-171-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-171-26" name="__codelineno-171-26" href="#__codelineno-171-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-171-27" name="__codelineno-171-27" href="#__codelineno-171-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-171-28" name="__codelineno-171-28" href="#__codelineno-171-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-171-29" name="__codelineno-171-29" href="#__codelineno-171-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-171-30" name="__codelineno-171-30" href="#__codelineno-171-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-171-31" name="__codelineno-171-31" href="#__codelineno-171-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-172-1" name="__codelineno-172-1" href="#__codelineno-172-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-172-2" name="__codelineno-172-2" href="#__codelineno-172-2"></a>
<a id="__codelineno-172-3" name="__codelineno-172-3" href="#__codelineno-172-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-172-4" name="__codelineno-172-4" href="#__codelineno-172-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-172-5" name="__codelineno-172-5" href="#__codelineno-172-5"></a>
<a id="__codelineno-172-6" name="__codelineno-172-6" href="#__codelineno-172-6"></a>
<a id="__codelineno-172-7" name="__codelineno-172-7" href="#__codelineno-172-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-172-8" name="__codelineno-172-8" href="#__codelineno-172-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-172-9" name="__codelineno-172-9" href="#__codelineno-172-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-172-10" name="__codelineno-172-10" href="#__codelineno-172-10"></a>
<a id="__codelineno-172-11" name="__codelineno-172-11" href="#__codelineno-172-11"></a>
<a id="__codelineno-172-12" name="__codelineno-172-12" href="#__codelineno-172-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-172-13" name="__codelineno-172-13" href="#__codelineno-172-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-172-14" name="__codelineno-172-14" href="#__codelineno-172-14"></a>
<a id="__codelineno-172-15" name="__codelineno-172-15" href="#__codelineno-172-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-172-16" name="__codelineno-172-16" href="#__codelineno-172-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-172-17" name="__codelineno-172-17" href="#__codelineno-172-17"></a>
<a id="__codelineno-172-18" name="__codelineno-172-18" href="#__codelineno-172-18"></a>
<a id="__codelineno-172-19" name="__codelineno-172-19" href="#__codelineno-172-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-172-20" name="__codelineno-172-20" href="#__codelineno-172-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-172-21" name="__codelineno-172-21" href="#__codelineno-172-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-172-22" name="__codelineno-172-22" href="#__codelineno-172-22"></a>
<a id="__codelineno-172-23" name="__codelineno-172-23" href="#__codelineno-172-23"></a>
<a id="__codelineno-172-24" name="__codelineno-172-24" href="#__codelineno-172-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-172-25" name="__codelineno-172-25" href="#__codelineno-172-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-172-26" name="__codelineno-172-26" href="#__codelineno-172-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-172-27" name="__codelineno-172-27" href="#__codelineno-172-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-172-28" name="__codelineno-172-28" href="#__codelineno-172-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-172-29" name="__codelineno-172-29" href="#__codelineno-172-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-172-30" name="__codelineno-172-30" href="#__codelineno-172-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-172-31" name="__codelineno-172-31" href="#__codelineno-172-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-173-1" name="__codelineno-173-1" href="#__codelineno-173-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-173-2" name="__codelineno-173-2" href="#__codelineno-173-2"></a>
<a id="__codelineno-173-3" name="__codelineno-173-3" href="#__codelineno-173-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-173-4" name="__codelineno-173-4" href="#__codelineno-173-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-173-5" name="__codelineno-173-5" href="#__codelineno-173-5"></a>
<a id="__codelineno-173-6" name="__codelineno-173-6" href="#__codelineno-173-6"></a>
<a id="__codelineno-173-7" name="__codelineno-173-7" href="#__codelineno-173-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-173-8" name="__codelineno-173-8" href="#__codelineno-173-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-173-9" name="__codelineno-173-9" href="#__codelineno-173-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-173-10" name="__codelineno-173-10" href="#__codelineno-173-10"></a>
<a id="__codelineno-173-11" name="__codelineno-173-11" href="#__codelineno-173-11"></a>
<a id="__codelineno-173-12" name="__codelineno-173-12" href="#__codelineno-173-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-173-13" name="__codelineno-173-13" href="#__codelineno-173-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-173-14" name="__codelineno-173-14" href="#__codelineno-173-14"></a>
<a id="__codelineno-173-15" name="__codelineno-173-15" href="#__codelineno-173-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-173-16" name="__codelineno-173-16" href="#__codelineno-173-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-173-17" name="__codelineno-173-17" href="#__codelineno-173-17"></a>
<a id="__codelineno-173-18" name="__codelineno-173-18" href="#__codelineno-173-18"></a>
<a id="__codelineno-173-19" name="__codelineno-173-19" href="#__codelineno-173-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-173-20" name="__codelineno-173-20" href="#__codelineno-173-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-173-21" name="__codelineno-173-21" href="#__codelineno-173-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-173-22" name="__codelineno-173-22" href="#__codelineno-173-22"></a>
<a id="__codelineno-173-23" name="__codelineno-173-23" href="#__codelineno-173-23"></a>
<a id="__codelineno-173-24" name="__codelineno-173-24" href="#__codelineno-173-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-173-25" name="__codelineno-173-25" href="#__codelineno-173-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-173-26" name="__codelineno-173-26" href="#__codelineno-173-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-173-27" name="__codelineno-173-27" href="#__codelineno-173-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-173-28" name="__codelineno-173-28" href="#__codelineno-173-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-173-29" name="__codelineno-173-29" href="#__codelineno-173-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-173-30" name="__codelineno-173-30" href="#__codelineno-173-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-173-31" name="__codelineno-173-31" href="#__codelineno-173-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-174-1" name="__codelineno-174-1" href="#__codelineno-174-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-174-2" name="__codelineno-174-2" href="#__codelineno-174-2"></a>
<a id="__codelineno-174-3" name="__codelineno-174-3" href="#__codelineno-174-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-174-4" name="__codelineno-174-4" href="#__codelineno-174-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-174-5" name="__codelineno-174-5" href="#__codelineno-174-5"></a>
<a id="__codelineno-174-6" name="__codelineno-174-6" href="#__codelineno-174-6"></a>
<a id="__codelineno-174-7" name="__codelineno-174-7" href="#__codelineno-174-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-174-8" name="__codelineno-174-8" href="#__codelineno-174-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-174-9" name="__codelineno-174-9" href="#__codelineno-174-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-174-10" name="__codelineno-174-10" href="#__codelineno-174-10"></a>
<a id="__codelineno-174-11" name="__codelineno-174-11" href="#__codelineno-174-11"></a>
<a id="__codelineno-174-12" name="__codelineno-174-12" href="#__codelineno-174-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-174-13" name="__codelineno-174-13" href="#__codelineno-174-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-174-14" name="__codelineno-174-14" href="#__codelineno-174-14"></a>
<a id="__codelineno-174-15" name="__codelineno-174-15" href="#__codelineno-174-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-174-16" name="__codelineno-174-16" href="#__codelineno-174-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-174-17" name="__codelineno-174-17" href="#__codelineno-174-17"></a>
<a id="__codelineno-174-18" name="__codelineno-174-18" href="#__codelineno-174-18"></a>
<a id="__codelineno-174-19" name="__codelineno-174-19" href="#__codelineno-174-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-174-20" name="__codelineno-174-20" href="#__codelineno-174-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-174-21" name="__codelineno-174-21" href="#__codelineno-174-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-174-22" name="__codelineno-174-22" href="#__codelineno-174-22"></a>
<a id="__codelineno-174-23" name="__codelineno-174-23" href="#__codelineno-174-23"></a>
<a id="__codelineno-174-24" name="__codelineno-174-24" href="#__codelineno-174-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-174-25" name="__codelineno-174-25" href="#__codelineno-174-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-174-26" name="__codelineno-174-26" href="#__codelineno-174-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-174-27" name="__codelineno-174-27" href="#__codelineno-174-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-174-28" name="__codelineno-174-28" href="#__codelineno-174-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-174-29" name="__codelineno-174-29" href="#__codelineno-174-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-174-30" name="__codelineno-174-30" href="#__codelineno-174-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-174-31" name="__codelineno-174-31" href="#__codelineno-174-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-175-1" name="__codelineno-175-1" href="#__codelineno-175-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-175-2" name="__codelineno-175-2" href="#__codelineno-175-2"></a>
<a id="__codelineno-175-3" name="__codelineno-175-3" href="#__codelineno-175-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-175-4" name="__codelineno-175-4" href="#__codelineno-175-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-175-5" name="__codelineno-175-5" href="#__codelineno-175-5"></a>
<a id="__codelineno-175-6" name="__codelineno-175-6" href="#__codelineno-175-6"></a>
<a id="__codelineno-175-7" name="__codelineno-175-7" href="#__codelineno-175-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-175-8" name="__codelineno-175-8" href="#__codelineno-175-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-175-9" name="__codelineno-175-9" href="#__codelineno-175-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-175-10" name="__codelineno-175-10" href="#__codelineno-175-10"></a>
<a id="__codelineno-175-11" name="__codelineno-175-11" href="#__codelineno-175-11"></a>
<a id="__codelineno-175-12" name="__codelineno-175-12" href="#__codelineno-175-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-175-13" name="__codelineno-175-13" href="#__codelineno-175-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-175-14" name="__codelineno-175-14" href="#__codelineno-175-14"></a>
<a id="__codelineno-175-15" name="__codelineno-175-15" href="#__codelineno-175-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-175-16" name="__codelineno-175-16" href="#__codelineno-175-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-175-17" name="__codelineno-175-17" href="#__codelineno-175-17"></a>
<a id="__codelineno-175-18" name="__codelineno-175-18" href="#__codelineno-175-18"></a>
<a id="__codelineno-175-19" name="__codelineno-175-19" href="#__codelineno-175-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-175-20" name="__codelineno-175-20" href="#__codelineno-175-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-175-21" name="__codelineno-175-21" href="#__codelineno-175-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-175-22" name="__codelineno-175-22" href="#__codelineno-175-22"></a>
<a id="__codelineno-175-23" name="__codelineno-175-23" href="#__codelineno-175-23"></a>
<a id="__codelineno-175-24" name="__codelineno-175-24" href="#__codelineno-175-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-175-25" name="__codelineno-175-25" href="#__codelineno-175-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-175-26" name="__codelineno-175-26" href="#__codelineno-175-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-175-27" name="__codelineno-175-27" href="#__codelineno-175-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-175-28" name="__codelineno-175-28" href="#__codelineno-175-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-175-29" name="__codelineno-175-29" href="#__codelineno-175-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-175-30" name="__codelineno-175-30" href="#__codelineno-175-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-175-31" name="__codelineno-175-31" href="#__codelineno-175-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-176-1" name="__codelineno-176-1" href="#__codelineno-176-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-176-2" name="__codelineno-176-2" href="#__codelineno-176-2"></a>
<a id="__codelineno-176-3" name="__codelineno-176-3" href="#__codelineno-176-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-176-4" name="__codelineno-176-4" href="#__codelineno-176-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-176-5" name="__codelineno-176-5" href="#__codelineno-176-5"></a>
<a id="__codelineno-176-6" name="__codelineno-176-6" href="#__codelineno-176-6"></a>
<a id="__codelineno-176-7" name="__codelineno-176-7" href="#__codelineno-176-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-176-8" name="__codelineno-176-8" href="#__codelineno-176-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-176-9" name="__codelineno-176-9" href="#__codelineno-176-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-176-10" name="__codelineno-176-10" href="#__codelineno-176-10"></a>
<a id="__codelineno-176-11" name="__codelineno-176-11" href="#__codelineno-176-11"></a>
<a id="__codelineno-176-12" name="__codelineno-176-12" href="#__codelineno-176-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-176-13" name="__codelineno-176-13" href="#__codelineno-176-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-176-14" name="__codelineno-176-14" href="#__codelineno-176-14"></a>
<a id="__codelineno-176-15" name="__codelineno-176-15" href="#__codelineno-176-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-176-16" name="__codelineno-176-16" href="#__codelineno-176-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-176-17" name="__codelineno-176-17" href="#__codelineno-176-17"></a>
<a id="__codelineno-176-18" name="__codelineno-176-18" href="#__codelineno-176-18"></a>
<a id="__codelineno-176-19" name="__codelineno-176-19" href="#__codelineno-176-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-176-20" name="__codelineno-176-20" href="#__codelineno-176-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-176-21" name="__codelineno-176-21" href="#__codelineno-176-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-176-22" name="__codelineno-176-22" href="#__codelineno-176-22"></a>
<a id="__codelineno-176-23" name="__codelineno-176-23" href="#__codelineno-176-23"></a>
<a id="__codelineno-176-24" name="__codelineno-176-24" href="#__codelineno-176-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-176-25" name="__codelineno-176-25" href="#__codelineno-176-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-176-26" name="__codelineno-176-26" href="#__codelineno-176-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-176-27" name="__codelineno-176-27" href="#__codelineno-176-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-176-28" name="__codelineno-176-28" href="#__codelineno-176-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-176-29" name="__codelineno-176-29" href="#__codelineno-176-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-176-30" name="__codelineno-176-30" href="#__codelineno-176-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-176-31" name="__codelineno-176-31" href="#__codelineno-176-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-177-1" name="__codelineno-177-1" href="#__codelineno-177-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-177-2" name="__codelineno-177-2" href="#__codelineno-177-2"></a>
<a id="__codelineno-177-3" name="__codelineno-177-3" href="#__codelineno-177-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-177-4" name="__codelineno-177-4" href="#__codelineno-177-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-177-5" name="__codelineno-177-5" href="#__codelineno-177-5"></a>
<a id="__codelineno-177-6" name="__codelineno-177-6" href="#__codelineno-177-6"></a>
<a id="__codelineno-177-7" name="__codelineno-177-7" href="#__codelineno-177-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-177-8" name="__codelineno-177-8" href="#__codelineno-177-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-177-9" name="__codelineno-177-9" href="#__codelineno-177-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-177-10" name="__codelineno-177-10" href="#__codelineno-177-10"></a>
<a id="__codelineno-177-11" name="__codelineno-177-11" href="#__codelineno-177-11"></a>
<a id="__codelineno-177-12" name="__codelineno-177-12" href="#__codelineno-177-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-177-13" name="__codelineno-177-13" href="#__codelineno-177-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-177-14" name="__codelineno-177-14" href="#__codelineno-177-14"></a>
<a id="__codelineno-177-15" name="__codelineno-177-15" href="#__codelineno-177-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-177-16" name="__codelineno-177-16" href="#__codelineno-177-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-177-17" name="__codelineno-177-17" href="#__codelineno-177-17"></a>
<a id="__codelineno-177-18" name="__codelineno-177-18" href="#__codelineno-177-18"></a>
<a id="__codelineno-177-19" name="__codelineno-177-19" href="#__codelineno-177-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-177-20" name="__codelineno-177-20" href="#__codelineno-177-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-177-21" name="__codelineno-177-21" href="#__codelineno-177-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-177-22" name="__codelineno-177-22" href="#__codelineno-177-22"></a>
<a id="__codelineno-177-23" name="__codelineno-177-23" href="#__codelineno-177-23"></a>
<a id="__codelineno-177-24" name="__codelineno-177-24" href="#__codelineno-177-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-177-25" name="__codelineno-177-25" href="#__codelineno-177-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-177-26" name="__codelineno-177-26" href="#__codelineno-177-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-177-27" name="__codelineno-177-27" href="#__codelineno-177-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-177-28" name="__codelineno-177-28" href="#__codelineno-177-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-177-29" name="__codelineno-177-29" href="#__codelineno-177-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-177-30" name="__codelineno-177-30" href="#__codelineno-177-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-177-31" name="__codelineno-177-31" href="#__codelineno-177-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-178-1" name="__codelineno-178-1" href="#__codelineno-178-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-178-2" name="__codelineno-178-2" href="#__codelineno-178-2"></a>
<a id="__codelineno-178-3" name="__codelineno-178-3" href="#__codelineno-178-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-178-4" name="__codelineno-178-4" href="#__codelineno-178-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-178-5" name="__codelineno-178-5" href="#__codelineno-178-5"></a>
<a id="__codelineno-178-6" name="__codelineno-178-6" href="#__codelineno-178-6"></a>
<a id="__codelineno-178-7" name="__codelineno-178-7" href="#__codelineno-178-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-178-8" name="__codelineno-178-8" href="#__codelineno-178-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-178-9" name="__codelineno-178-9" href="#__codelineno-178-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-178-10" name="__codelineno-178-10" href="#__codelineno-178-10"></a>
<a id="__codelineno-178-11" name="__codelineno-178-11" href="#__codelineno-178-11"></a>
<a id="__codelineno-178-12" name="__codelineno-178-12" href="#__codelineno-178-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-178-13" name="__codelineno-178-13" href="#__codelineno-178-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-178-14" name="__codelineno-178-14" href="#__codelineno-178-14"></a>
<a id="__codelineno-178-15" name="__codelineno-178-15" href="#__codelineno-178-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-178-16" name="__codelineno-178-16" href="#__codelineno-178-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-178-17" name="__codelineno-178-17" href="#__codelineno-178-17"></a>
<a id="__codelineno-178-18" name="__codelineno-178-18" href="#__codelineno-178-18"></a>
<a id="__codelineno-178-19" name="__codelineno-178-19" href="#__codelineno-178-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-178-20" name="__codelineno-178-20" href="#__codelineno-178-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-178-21" name="__codelineno-178-21" href="#__codelineno-178-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-178-22" name="__codelineno-178-22" href="#__codelineno-178-22"></a>
<a id="__codelineno-178-23" name="__codelineno-178-23" href="#__codelineno-178-23"></a>
<a id="__codelineno-178-24" name="__codelineno-178-24" href="#__codelineno-178-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-178-25" name="__codelineno-178-25" href="#__codelineno-178-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-178-26" name="__codelineno-178-26" href="#__codelineno-178-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-178-27" name="__codelineno-178-27" href="#__codelineno-178-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-178-28" name="__codelineno-178-28" href="#__codelineno-178-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-178-29" name="__codelineno-178-29" href="#__codelineno-178-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-178-30" name="__codelineno-178-30" href="#__codelineno-178-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-178-31" name="__codelineno-178-31" href="#__codelineno-178-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-179-1" name="__codelineno-179-1" href="#__codelineno-179-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-179-2" name="__codelineno-179-2" href="#__codelineno-179-2"></a>
<a id="__codelineno-179-3" name="__codelineno-179-3" href="#__codelineno-179-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-179-4" name="__codelineno-179-4" href="#__codelineno-179-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-179-5" name="__codelineno-179-5" href="#__codelineno-179-5"></a>
<a id="__codelineno-179-6" name="__codelineno-179-6" href="#__codelineno-179-6"></a>
<a id="__codelineno-179-7" name="__codelineno-179-7" href="#__codelineno-179-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-179-8" name="__codelineno-179-8" href="#__codelineno-179-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-179-9" name="__codelineno-179-9" href="#__codelineno-179-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-179-10" name="__codelineno-179-10" href="#__codelineno-179-10"></a>
<a id="__codelineno-179-11" name="__codelineno-179-11" href="#__codelineno-179-11"></a>
<a id="__codelineno-179-12" name="__codelineno-179-12" href="#__codelineno-179-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-179-13" name="__codelineno-179-13" href="#__codelineno-179-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-179-14" name="__codelineno-179-14" href="#__codelineno-179-14"></a>
<a id="__codelineno-179-15" name="__codelineno-179-15" href="#__codelineno-179-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-179-16" name="__codelineno-179-16" href="#__codelineno-179-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-179-17" name="__codelineno-179-17" href="#__codelineno-179-17"></a>
<a id="__codelineno-179-18" name="__codelineno-179-18" href="#__codelineno-179-18"></a>
<a id="__codelineno-179-19" name="__codelineno-179-19" href="#__codelineno-179-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-179-20" name="__codelineno-179-20" href="#__codelineno-179-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-179-21" name="__codelineno-179-21" href="#__codelineno-179-21"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-179-22" name="__codelineno-179-22" href="#__codelineno-179-22"></a>
<a id="__codelineno-179-23" name="__codelineno-179-23" href="#__codelineno-179-23"></a>
<a id="__codelineno-179-24" name="__codelineno-179-24" href="#__codelineno-179-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-179-25" name="__codelineno-179-25" href="#__codelineno-179-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-179-26" name="__codelineno-179-26" href="#__codelineno-179-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-179-27" name="__codelineno-179-27" href="#__codelineno-179-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-179-28" name="__codelineno-179-28" href="#__codelineno-179-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-179-29" name="__codelineno-179-29" href="#__codelineno-179-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-179-30" name="__codelineno-179-30" href="#__codelineno-179-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-179-31" name="__codelineno-179-31" href="#__codelineno-179-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="24:10"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><input id="__tabbed_24_2" name="__tabbed_24" type="radio" /><input id="__tabbed_24_3" name="__tabbed_24" type="radio" /><input id="__tabbed_24_4" name="__tabbed_24" type="radio" /><input id="__tabbed_24_5" name="__tabbed_24" type="radio" /><input id="__tabbed_24_6" name="__tabbed_24" type="radio" /><input id="__tabbed_24_7" name="__tabbed_24" type="radio" /><input id="__tabbed_24_8" name="__tabbed_24" type="radio" /><input id="__tabbed_24_9" name="__tabbed_24" type="radio" /><input id="__tabbed_24_10" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">OpenAI</label><label for="__tabbed_24_2">Anthropic</label><label for="__tabbed_24_3">Google</label><label for="__tabbed_24_4">Groq</label><label for="__tabbed_24_5">xAI</label><label for="__tabbed_24_6">Mistral</label><label for="__tabbed_24_7">Cohere</label><label for="__tabbed_24_8">LiteLLM</label><label for="__tabbed_24_9">Azure AI</label><label for="__tabbed_24_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-180-1" name="__codelineno-180-1" href="#__codelineno-180-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-180-2" name="__codelineno-180-2" href="#__codelineno-180-2"></a>
<a id="__codelineno-180-3" name="__codelineno-180-3" href="#__codelineno-180-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-180-4" name="__codelineno-180-4" href="#__codelineno-180-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-180-5" name="__codelineno-180-5" href="#__codelineno-180-5"></a>
<a id="__codelineno-180-6" name="__codelineno-180-6" href="#__codelineno-180-6"></a>
<a id="__codelineno-180-7" name="__codelineno-180-7" href="#__codelineno-180-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-180-8" name="__codelineno-180-8" href="#__codelineno-180-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-180-9" name="__codelineno-180-9" href="#__codelineno-180-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-180-10" name="__codelineno-180-10" href="#__codelineno-180-10"></a>
<a id="__codelineno-180-11" name="__codelineno-180-11" href="#__codelineno-180-11"></a>
<a id="__codelineno-180-12" name="__codelineno-180-12" href="#__codelineno-180-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-180-13" name="__codelineno-180-13" href="#__codelineno-180-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-180-14" name="__codelineno-180-14" href="#__codelineno-180-14"></a>
<a id="__codelineno-180-15" name="__codelineno-180-15" href="#__codelineno-180-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-180-16" name="__codelineno-180-16" href="#__codelineno-180-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-180-17" name="__codelineno-180-17" href="#__codelineno-180-17"></a>
<a id="__codelineno-180-18" name="__codelineno-180-18" href="#__codelineno-180-18"></a>
<a id="__codelineno-180-19" name="__codelineno-180-19" href="#__codelineno-180-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-180-20" name="__codelineno-180-20" href="#__codelineno-180-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-180-21" name="__codelineno-180-21" href="#__codelineno-180-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-180-22" name="__codelineno-180-22" href="#__codelineno-180-22"></a>
<a id="__codelineno-180-23" name="__codelineno-180-23" href="#__codelineno-180-23"></a>
<a id="__codelineno-180-24" name="__codelineno-180-24" href="#__codelineno-180-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-180-25" name="__codelineno-180-25" href="#__codelineno-180-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-180-26" name="__codelineno-180-26" href="#__codelineno-180-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-180-27" name="__codelineno-180-27" href="#__codelineno-180-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-180-28" name="__codelineno-180-28" href="#__codelineno-180-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-180-29" name="__codelineno-180-29" href="#__codelineno-180-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-180-30" name="__codelineno-180-30" href="#__codelineno-180-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-180-31" name="__codelineno-180-31" href="#__codelineno-180-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-181-1" name="__codelineno-181-1" href="#__codelineno-181-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-181-2" name="__codelineno-181-2" href="#__codelineno-181-2"></a>
<a id="__codelineno-181-3" name="__codelineno-181-3" href="#__codelineno-181-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-181-4" name="__codelineno-181-4" href="#__codelineno-181-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-181-5" name="__codelineno-181-5" href="#__codelineno-181-5"></a>
<a id="__codelineno-181-6" name="__codelineno-181-6" href="#__codelineno-181-6"></a>
<a id="__codelineno-181-7" name="__codelineno-181-7" href="#__codelineno-181-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-181-8" name="__codelineno-181-8" href="#__codelineno-181-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-181-9" name="__codelineno-181-9" href="#__codelineno-181-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-181-10" name="__codelineno-181-10" href="#__codelineno-181-10"></a>
<a id="__codelineno-181-11" name="__codelineno-181-11" href="#__codelineno-181-11"></a>
<a id="__codelineno-181-12" name="__codelineno-181-12" href="#__codelineno-181-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-181-13" name="__codelineno-181-13" href="#__codelineno-181-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-181-14" name="__codelineno-181-14" href="#__codelineno-181-14"></a>
<a id="__codelineno-181-15" name="__codelineno-181-15" href="#__codelineno-181-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-181-16" name="__codelineno-181-16" href="#__codelineno-181-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-181-17" name="__codelineno-181-17" href="#__codelineno-181-17"></a>
<a id="__codelineno-181-18" name="__codelineno-181-18" href="#__codelineno-181-18"></a>
<a id="__codelineno-181-19" name="__codelineno-181-19" href="#__codelineno-181-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-181-20" name="__codelineno-181-20" href="#__codelineno-181-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-181-21" name="__codelineno-181-21" href="#__codelineno-181-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-181-22" name="__codelineno-181-22" href="#__codelineno-181-22"></a>
<a id="__codelineno-181-23" name="__codelineno-181-23" href="#__codelineno-181-23"></a>
<a id="__codelineno-181-24" name="__codelineno-181-24" href="#__codelineno-181-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-181-25" name="__codelineno-181-25" href="#__codelineno-181-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-181-26" name="__codelineno-181-26" href="#__codelineno-181-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-181-27" name="__codelineno-181-27" href="#__codelineno-181-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-181-28" name="__codelineno-181-28" href="#__codelineno-181-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-181-29" name="__codelineno-181-29" href="#__codelineno-181-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-181-30" name="__codelineno-181-30" href="#__codelineno-181-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-181-31" name="__codelineno-181-31" href="#__codelineno-181-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-182-1" name="__codelineno-182-1" href="#__codelineno-182-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-182-2" name="__codelineno-182-2" href="#__codelineno-182-2"></a>
<a id="__codelineno-182-3" name="__codelineno-182-3" href="#__codelineno-182-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-182-4" name="__codelineno-182-4" href="#__codelineno-182-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-182-5" name="__codelineno-182-5" href="#__codelineno-182-5"></a>
<a id="__codelineno-182-6" name="__codelineno-182-6" href="#__codelineno-182-6"></a>
<a id="__codelineno-182-7" name="__codelineno-182-7" href="#__codelineno-182-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-182-8" name="__codelineno-182-8" href="#__codelineno-182-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-182-9" name="__codelineno-182-9" href="#__codelineno-182-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-182-10" name="__codelineno-182-10" href="#__codelineno-182-10"></a>
<a id="__codelineno-182-11" name="__codelineno-182-11" href="#__codelineno-182-11"></a>
<a id="__codelineno-182-12" name="__codelineno-182-12" href="#__codelineno-182-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-182-13" name="__codelineno-182-13" href="#__codelineno-182-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-182-14" name="__codelineno-182-14" href="#__codelineno-182-14"></a>
<a id="__codelineno-182-15" name="__codelineno-182-15" href="#__codelineno-182-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-182-16" name="__codelineno-182-16" href="#__codelineno-182-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-182-17" name="__codelineno-182-17" href="#__codelineno-182-17"></a>
<a id="__codelineno-182-18" name="__codelineno-182-18" href="#__codelineno-182-18"></a>
<a id="__codelineno-182-19" name="__codelineno-182-19" href="#__codelineno-182-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-182-20" name="__codelineno-182-20" href="#__codelineno-182-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-182-21" name="__codelineno-182-21" href="#__codelineno-182-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-182-22" name="__codelineno-182-22" href="#__codelineno-182-22"></a>
<a id="__codelineno-182-23" name="__codelineno-182-23" href="#__codelineno-182-23"></a>
<a id="__codelineno-182-24" name="__codelineno-182-24" href="#__codelineno-182-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-182-25" name="__codelineno-182-25" href="#__codelineno-182-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-182-26" name="__codelineno-182-26" href="#__codelineno-182-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-182-27" name="__codelineno-182-27" href="#__codelineno-182-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-182-28" name="__codelineno-182-28" href="#__codelineno-182-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-182-29" name="__codelineno-182-29" href="#__codelineno-182-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-182-30" name="__codelineno-182-30" href="#__codelineno-182-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-182-31" name="__codelineno-182-31" href="#__codelineno-182-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-183-1" name="__codelineno-183-1" href="#__codelineno-183-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-183-2" name="__codelineno-183-2" href="#__codelineno-183-2"></a>
<a id="__codelineno-183-3" name="__codelineno-183-3" href="#__codelineno-183-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-183-4" name="__codelineno-183-4" href="#__codelineno-183-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-183-5" name="__codelineno-183-5" href="#__codelineno-183-5"></a>
<a id="__codelineno-183-6" name="__codelineno-183-6" href="#__codelineno-183-6"></a>
<a id="__codelineno-183-7" name="__codelineno-183-7" href="#__codelineno-183-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-183-8" name="__codelineno-183-8" href="#__codelineno-183-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-183-9" name="__codelineno-183-9" href="#__codelineno-183-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-183-10" name="__codelineno-183-10" href="#__codelineno-183-10"></a>
<a id="__codelineno-183-11" name="__codelineno-183-11" href="#__codelineno-183-11"></a>
<a id="__codelineno-183-12" name="__codelineno-183-12" href="#__codelineno-183-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-183-13" name="__codelineno-183-13" href="#__codelineno-183-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-183-14" name="__codelineno-183-14" href="#__codelineno-183-14"></a>
<a id="__codelineno-183-15" name="__codelineno-183-15" href="#__codelineno-183-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-183-16" name="__codelineno-183-16" href="#__codelineno-183-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-183-17" name="__codelineno-183-17" href="#__codelineno-183-17"></a>
<a id="__codelineno-183-18" name="__codelineno-183-18" href="#__codelineno-183-18"></a>
<a id="__codelineno-183-19" name="__codelineno-183-19" href="#__codelineno-183-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-183-20" name="__codelineno-183-20" href="#__codelineno-183-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-183-21" name="__codelineno-183-21" href="#__codelineno-183-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-183-22" name="__codelineno-183-22" href="#__codelineno-183-22"></a>
<a id="__codelineno-183-23" name="__codelineno-183-23" href="#__codelineno-183-23"></a>
<a id="__codelineno-183-24" name="__codelineno-183-24" href="#__codelineno-183-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-183-25" name="__codelineno-183-25" href="#__codelineno-183-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-183-26" name="__codelineno-183-26" href="#__codelineno-183-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-183-27" name="__codelineno-183-27" href="#__codelineno-183-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-183-28" name="__codelineno-183-28" href="#__codelineno-183-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-183-29" name="__codelineno-183-29" href="#__codelineno-183-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-183-30" name="__codelineno-183-30" href="#__codelineno-183-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-183-31" name="__codelineno-183-31" href="#__codelineno-183-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-184-1" name="__codelineno-184-1" href="#__codelineno-184-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-184-2" name="__codelineno-184-2" href="#__codelineno-184-2"></a>
<a id="__codelineno-184-3" name="__codelineno-184-3" href="#__codelineno-184-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-184-4" name="__codelineno-184-4" href="#__codelineno-184-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-184-5" name="__codelineno-184-5" href="#__codelineno-184-5"></a>
<a id="__codelineno-184-6" name="__codelineno-184-6" href="#__codelineno-184-6"></a>
<a id="__codelineno-184-7" name="__codelineno-184-7" href="#__codelineno-184-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-184-8" name="__codelineno-184-8" href="#__codelineno-184-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-184-9" name="__codelineno-184-9" href="#__codelineno-184-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-184-10" name="__codelineno-184-10" href="#__codelineno-184-10"></a>
<a id="__codelineno-184-11" name="__codelineno-184-11" href="#__codelineno-184-11"></a>
<a id="__codelineno-184-12" name="__codelineno-184-12" href="#__codelineno-184-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-184-13" name="__codelineno-184-13" href="#__codelineno-184-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-184-14" name="__codelineno-184-14" href="#__codelineno-184-14"></a>
<a id="__codelineno-184-15" name="__codelineno-184-15" href="#__codelineno-184-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-184-16" name="__codelineno-184-16" href="#__codelineno-184-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-184-17" name="__codelineno-184-17" href="#__codelineno-184-17"></a>
<a id="__codelineno-184-18" name="__codelineno-184-18" href="#__codelineno-184-18"></a>
<a id="__codelineno-184-19" name="__codelineno-184-19" href="#__codelineno-184-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-184-20" name="__codelineno-184-20" href="#__codelineno-184-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-184-21" name="__codelineno-184-21" href="#__codelineno-184-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-184-22" name="__codelineno-184-22" href="#__codelineno-184-22"></a>
<a id="__codelineno-184-23" name="__codelineno-184-23" href="#__codelineno-184-23"></a>
<a id="__codelineno-184-24" name="__codelineno-184-24" href="#__codelineno-184-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-184-25" name="__codelineno-184-25" href="#__codelineno-184-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-184-26" name="__codelineno-184-26" href="#__codelineno-184-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-184-27" name="__codelineno-184-27" href="#__codelineno-184-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-184-28" name="__codelineno-184-28" href="#__codelineno-184-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-184-29" name="__codelineno-184-29" href="#__codelineno-184-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-184-30" name="__codelineno-184-30" href="#__codelineno-184-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-184-31" name="__codelineno-184-31" href="#__codelineno-184-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-185-1" name="__codelineno-185-1" href="#__codelineno-185-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-185-2" name="__codelineno-185-2" href="#__codelineno-185-2"></a>
<a id="__codelineno-185-3" name="__codelineno-185-3" href="#__codelineno-185-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-185-4" name="__codelineno-185-4" href="#__codelineno-185-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-185-5" name="__codelineno-185-5" href="#__codelineno-185-5"></a>
<a id="__codelineno-185-6" name="__codelineno-185-6" href="#__codelineno-185-6"></a>
<a id="__codelineno-185-7" name="__codelineno-185-7" href="#__codelineno-185-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-185-8" name="__codelineno-185-8" href="#__codelineno-185-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-185-9" name="__codelineno-185-9" href="#__codelineno-185-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-185-10" name="__codelineno-185-10" href="#__codelineno-185-10"></a>
<a id="__codelineno-185-11" name="__codelineno-185-11" href="#__codelineno-185-11"></a>
<a id="__codelineno-185-12" name="__codelineno-185-12" href="#__codelineno-185-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-185-13" name="__codelineno-185-13" href="#__codelineno-185-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-185-14" name="__codelineno-185-14" href="#__codelineno-185-14"></a>
<a id="__codelineno-185-15" name="__codelineno-185-15" href="#__codelineno-185-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-185-16" name="__codelineno-185-16" href="#__codelineno-185-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-185-17" name="__codelineno-185-17" href="#__codelineno-185-17"></a>
<a id="__codelineno-185-18" name="__codelineno-185-18" href="#__codelineno-185-18"></a>
<a id="__codelineno-185-19" name="__codelineno-185-19" href="#__codelineno-185-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-185-20" name="__codelineno-185-20" href="#__codelineno-185-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-185-21" name="__codelineno-185-21" href="#__codelineno-185-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-185-22" name="__codelineno-185-22" href="#__codelineno-185-22"></a>
<a id="__codelineno-185-23" name="__codelineno-185-23" href="#__codelineno-185-23"></a>
<a id="__codelineno-185-24" name="__codelineno-185-24" href="#__codelineno-185-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-185-25" name="__codelineno-185-25" href="#__codelineno-185-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-185-26" name="__codelineno-185-26" href="#__codelineno-185-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-185-27" name="__codelineno-185-27" href="#__codelineno-185-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-185-28" name="__codelineno-185-28" href="#__codelineno-185-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-185-29" name="__codelineno-185-29" href="#__codelineno-185-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-185-30" name="__codelineno-185-30" href="#__codelineno-185-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-185-31" name="__codelineno-185-31" href="#__codelineno-185-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-186-1" name="__codelineno-186-1" href="#__codelineno-186-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-186-2" name="__codelineno-186-2" href="#__codelineno-186-2"></a>
<a id="__codelineno-186-3" name="__codelineno-186-3" href="#__codelineno-186-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-186-4" name="__codelineno-186-4" href="#__codelineno-186-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-186-5" name="__codelineno-186-5" href="#__codelineno-186-5"></a>
<a id="__codelineno-186-6" name="__codelineno-186-6" href="#__codelineno-186-6"></a>
<a id="__codelineno-186-7" name="__codelineno-186-7" href="#__codelineno-186-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-186-8" name="__codelineno-186-8" href="#__codelineno-186-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-186-9" name="__codelineno-186-9" href="#__codelineno-186-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-186-10" name="__codelineno-186-10" href="#__codelineno-186-10"></a>
<a id="__codelineno-186-11" name="__codelineno-186-11" href="#__codelineno-186-11"></a>
<a id="__codelineno-186-12" name="__codelineno-186-12" href="#__codelineno-186-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-186-13" name="__codelineno-186-13" href="#__codelineno-186-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-186-14" name="__codelineno-186-14" href="#__codelineno-186-14"></a>
<a id="__codelineno-186-15" name="__codelineno-186-15" href="#__codelineno-186-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-186-16" name="__codelineno-186-16" href="#__codelineno-186-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-186-17" name="__codelineno-186-17" href="#__codelineno-186-17"></a>
<a id="__codelineno-186-18" name="__codelineno-186-18" href="#__codelineno-186-18"></a>
<a id="__codelineno-186-19" name="__codelineno-186-19" href="#__codelineno-186-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-186-20" name="__codelineno-186-20" href="#__codelineno-186-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-186-21" name="__codelineno-186-21" href="#__codelineno-186-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-186-22" name="__codelineno-186-22" href="#__codelineno-186-22"></a>
<a id="__codelineno-186-23" name="__codelineno-186-23" href="#__codelineno-186-23"></a>
<a id="__codelineno-186-24" name="__codelineno-186-24" href="#__codelineno-186-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-186-25" name="__codelineno-186-25" href="#__codelineno-186-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-186-26" name="__codelineno-186-26" href="#__codelineno-186-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-186-27" name="__codelineno-186-27" href="#__codelineno-186-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-186-28" name="__codelineno-186-28" href="#__codelineno-186-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-186-29" name="__codelineno-186-29" href="#__codelineno-186-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-186-30" name="__codelineno-186-30" href="#__codelineno-186-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-186-31" name="__codelineno-186-31" href="#__codelineno-186-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-187-1" name="__codelineno-187-1" href="#__codelineno-187-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-187-2" name="__codelineno-187-2" href="#__codelineno-187-2"></a>
<a id="__codelineno-187-3" name="__codelineno-187-3" href="#__codelineno-187-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-187-4" name="__codelineno-187-4" href="#__codelineno-187-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-187-5" name="__codelineno-187-5" href="#__codelineno-187-5"></a>
<a id="__codelineno-187-6" name="__codelineno-187-6" href="#__codelineno-187-6"></a>
<a id="__codelineno-187-7" name="__codelineno-187-7" href="#__codelineno-187-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-187-8" name="__codelineno-187-8" href="#__codelineno-187-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-187-9" name="__codelineno-187-9" href="#__codelineno-187-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-187-10" name="__codelineno-187-10" href="#__codelineno-187-10"></a>
<a id="__codelineno-187-11" name="__codelineno-187-11" href="#__codelineno-187-11"></a>
<a id="__codelineno-187-12" name="__codelineno-187-12" href="#__codelineno-187-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-187-13" name="__codelineno-187-13" href="#__codelineno-187-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-187-14" name="__codelineno-187-14" href="#__codelineno-187-14"></a>
<a id="__codelineno-187-15" name="__codelineno-187-15" href="#__codelineno-187-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-187-16" name="__codelineno-187-16" href="#__codelineno-187-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-187-17" name="__codelineno-187-17" href="#__codelineno-187-17"></a>
<a id="__codelineno-187-18" name="__codelineno-187-18" href="#__codelineno-187-18"></a>
<a id="__codelineno-187-19" name="__codelineno-187-19" href="#__codelineno-187-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-187-20" name="__codelineno-187-20" href="#__codelineno-187-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-187-21" name="__codelineno-187-21" href="#__codelineno-187-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-187-22" name="__codelineno-187-22" href="#__codelineno-187-22"></a>
<a id="__codelineno-187-23" name="__codelineno-187-23" href="#__codelineno-187-23"></a>
<a id="__codelineno-187-24" name="__codelineno-187-24" href="#__codelineno-187-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-187-25" name="__codelineno-187-25" href="#__codelineno-187-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-187-26" name="__codelineno-187-26" href="#__codelineno-187-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-187-27" name="__codelineno-187-27" href="#__codelineno-187-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-187-28" name="__codelineno-187-28" href="#__codelineno-187-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-187-29" name="__codelineno-187-29" href="#__codelineno-187-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-187-30" name="__codelineno-187-30" href="#__codelineno-187-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-187-31" name="__codelineno-187-31" href="#__codelineno-187-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-188-1" name="__codelineno-188-1" href="#__codelineno-188-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-188-2" name="__codelineno-188-2" href="#__codelineno-188-2"></a>
<a id="__codelineno-188-3" name="__codelineno-188-3" href="#__codelineno-188-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-188-4" name="__codelineno-188-4" href="#__codelineno-188-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-188-5" name="__codelineno-188-5" href="#__codelineno-188-5"></a>
<a id="__codelineno-188-6" name="__codelineno-188-6" href="#__codelineno-188-6"></a>
<a id="__codelineno-188-7" name="__codelineno-188-7" href="#__codelineno-188-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-188-8" name="__codelineno-188-8" href="#__codelineno-188-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-188-9" name="__codelineno-188-9" href="#__codelineno-188-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-188-10" name="__codelineno-188-10" href="#__codelineno-188-10"></a>
<a id="__codelineno-188-11" name="__codelineno-188-11" href="#__codelineno-188-11"></a>
<a id="__codelineno-188-12" name="__codelineno-188-12" href="#__codelineno-188-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-188-13" name="__codelineno-188-13" href="#__codelineno-188-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-188-14" name="__codelineno-188-14" href="#__codelineno-188-14"></a>
<a id="__codelineno-188-15" name="__codelineno-188-15" href="#__codelineno-188-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-188-16" name="__codelineno-188-16" href="#__codelineno-188-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-188-17" name="__codelineno-188-17" href="#__codelineno-188-17"></a>
<a id="__codelineno-188-18" name="__codelineno-188-18" href="#__codelineno-188-18"></a>
<a id="__codelineno-188-19" name="__codelineno-188-19" href="#__codelineno-188-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-188-20" name="__codelineno-188-20" href="#__codelineno-188-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-188-21" name="__codelineno-188-21" href="#__codelineno-188-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-188-22" name="__codelineno-188-22" href="#__codelineno-188-22"></a>
<a id="__codelineno-188-23" name="__codelineno-188-23" href="#__codelineno-188-23"></a>
<a id="__codelineno-188-24" name="__codelineno-188-24" href="#__codelineno-188-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-188-25" name="__codelineno-188-25" href="#__codelineno-188-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-188-26" name="__codelineno-188-26" href="#__codelineno-188-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-188-27" name="__codelineno-188-27" href="#__codelineno-188-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-188-28" name="__codelineno-188-28" href="#__codelineno-188-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-188-29" name="__codelineno-188-29" href="#__codelineno-188-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-188-30" name="__codelineno-188-30" href="#__codelineno-188-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-188-31" name="__codelineno-188-31" href="#__codelineno-188-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-189-1" name="__codelineno-189-1" href="#__codelineno-189-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-189-2" name="__codelineno-189-2" href="#__codelineno-189-2"></a>
<a id="__codelineno-189-3" name="__codelineno-189-3" href="#__codelineno-189-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-189-4" name="__codelineno-189-4" href="#__codelineno-189-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-189-5" name="__codelineno-189-5" href="#__codelineno-189-5"></a>
<a id="__codelineno-189-6" name="__codelineno-189-6" href="#__codelineno-189-6"></a>
<a id="__codelineno-189-7" name="__codelineno-189-7" href="#__codelineno-189-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-189-8" name="__codelineno-189-8" href="#__codelineno-189-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-189-9" name="__codelineno-189-9" href="#__codelineno-189-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-189-10" name="__codelineno-189-10" href="#__codelineno-189-10"></a>
<a id="__codelineno-189-11" name="__codelineno-189-11" href="#__codelineno-189-11"></a>
<a id="__codelineno-189-12" name="__codelineno-189-12" href="#__codelineno-189-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-189-13" name="__codelineno-189-13" href="#__codelineno-189-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-189-14" name="__codelineno-189-14" href="#__codelineno-189-14"></a>
<a id="__codelineno-189-15" name="__codelineno-189-15" href="#__codelineno-189-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-189-16" name="__codelineno-189-16" href="#__codelineno-189-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-189-17" name="__codelineno-189-17" href="#__codelineno-189-17"></a>
<a id="__codelineno-189-18" name="__codelineno-189-18" href="#__codelineno-189-18"></a>
<a id="__codelineno-189-19" name="__codelineno-189-19" href="#__codelineno-189-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-189-20" name="__codelineno-189-20" href="#__codelineno-189-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-189-21" name="__codelineno-189-21" href="#__codelineno-189-21"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-189-22" name="__codelineno-189-22" href="#__codelineno-189-22"></a>
<a id="__codelineno-189-23" name="__codelineno-189-23" href="#__codelineno-189-23"></a>
<a id="__codelineno-189-24" name="__codelineno-189-24" href="#__codelineno-189-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-189-25" name="__codelineno-189-25" href="#__codelineno-189-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-189-26" name="__codelineno-189-26" href="#__codelineno-189-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-189-27" name="__codelineno-189-27" href="#__codelineno-189-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-189-28" name="__codelineno-189-28" href="#__codelineno-189-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-189-29" name="__codelineno-189-29" href="#__codelineno-189-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-189-30" name="__codelineno-189-30" href="#__codelineno-189-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-189-31" name="__codelineno-189-31" href="#__codelineno-189-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="25:10"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><input id="__tabbed_25_3" name="__tabbed_25" type="radio" /><input id="__tabbed_25_4" name="__tabbed_25" type="radio" /><input id="__tabbed_25_5" name="__tabbed_25" type="radio" /><input id="__tabbed_25_6" name="__tabbed_25" type="radio" /><input id="__tabbed_25_7" name="__tabbed_25" type="radio" /><input id="__tabbed_25_8" name="__tabbed_25" type="radio" /><input id="__tabbed_25_9" name="__tabbed_25" type="radio" /><input id="__tabbed_25_10" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">OpenAI</label><label for="__tabbed_25_2">Anthropic</label><label for="__tabbed_25_3">Google</label><label for="__tabbed_25_4">Groq</label><label for="__tabbed_25_5">xAI</label><label for="__tabbed_25_6">Mistral</label><label for="__tabbed_25_7">Cohere</label><label for="__tabbed_25_8">LiteLLM</label><label for="__tabbed_25_9">Azure AI</label><label for="__tabbed_25_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-190-1" name="__codelineno-190-1" href="#__codelineno-190-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-190-2" name="__codelineno-190-2" href="#__codelineno-190-2"></a>
<a id="__codelineno-190-3" name="__codelineno-190-3" href="#__codelineno-190-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-190-4" name="__codelineno-190-4" href="#__codelineno-190-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-190-5" name="__codelineno-190-5" href="#__codelineno-190-5"></a>
<a id="__codelineno-190-6" name="__codelineno-190-6" href="#__codelineno-190-6"></a>
<a id="__codelineno-190-7" name="__codelineno-190-7" href="#__codelineno-190-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-190-8" name="__codelineno-190-8" href="#__codelineno-190-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-190-9" name="__codelineno-190-9" href="#__codelineno-190-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-190-10" name="__codelineno-190-10" href="#__codelineno-190-10"></a>
<a id="__codelineno-190-11" name="__codelineno-190-11" href="#__codelineno-190-11"></a>
<a id="__codelineno-190-12" name="__codelineno-190-12" href="#__codelineno-190-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-190-13" name="__codelineno-190-13" href="#__codelineno-190-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-190-14" name="__codelineno-190-14" href="#__codelineno-190-14"></a>
<a id="__codelineno-190-15" name="__codelineno-190-15" href="#__codelineno-190-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-190-16" name="__codelineno-190-16" href="#__codelineno-190-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-190-17" name="__codelineno-190-17" href="#__codelineno-190-17"></a>
<a id="__codelineno-190-18" name="__codelineno-190-18" href="#__codelineno-190-18"></a>
<a id="__codelineno-190-19" name="__codelineno-190-19" href="#__codelineno-190-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-190-20" name="__codelineno-190-20" href="#__codelineno-190-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-190-21" name="__codelineno-190-21" href="#__codelineno-190-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-190-22" name="__codelineno-190-22" href="#__codelineno-190-22"></a>
<a id="__codelineno-190-23" name="__codelineno-190-23" href="#__codelineno-190-23"></a>
<a id="__codelineno-190-24" name="__codelineno-190-24" href="#__codelineno-190-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-190-25" name="__codelineno-190-25" href="#__codelineno-190-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-190-26" name="__codelineno-190-26" href="#__codelineno-190-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-190-27" name="__codelineno-190-27" href="#__codelineno-190-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-190-28" name="__codelineno-190-28" href="#__codelineno-190-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-190-29" name="__codelineno-190-29" href="#__codelineno-190-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-190-30" name="__codelineno-190-30" href="#__codelineno-190-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-190-31" name="__codelineno-190-31" href="#__codelineno-190-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-191-1" name="__codelineno-191-1" href="#__codelineno-191-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-191-2" name="__codelineno-191-2" href="#__codelineno-191-2"></a>
<a id="__codelineno-191-3" name="__codelineno-191-3" href="#__codelineno-191-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-191-4" name="__codelineno-191-4" href="#__codelineno-191-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-191-5" name="__codelineno-191-5" href="#__codelineno-191-5"></a>
<a id="__codelineno-191-6" name="__codelineno-191-6" href="#__codelineno-191-6"></a>
<a id="__codelineno-191-7" name="__codelineno-191-7" href="#__codelineno-191-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-191-8" name="__codelineno-191-8" href="#__codelineno-191-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-191-9" name="__codelineno-191-9" href="#__codelineno-191-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-191-10" name="__codelineno-191-10" href="#__codelineno-191-10"></a>
<a id="__codelineno-191-11" name="__codelineno-191-11" href="#__codelineno-191-11"></a>
<a id="__codelineno-191-12" name="__codelineno-191-12" href="#__codelineno-191-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-191-13" name="__codelineno-191-13" href="#__codelineno-191-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-191-14" name="__codelineno-191-14" href="#__codelineno-191-14"></a>
<a id="__codelineno-191-15" name="__codelineno-191-15" href="#__codelineno-191-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-191-16" name="__codelineno-191-16" href="#__codelineno-191-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-191-17" name="__codelineno-191-17" href="#__codelineno-191-17"></a>
<a id="__codelineno-191-18" name="__codelineno-191-18" href="#__codelineno-191-18"></a>
<a id="__codelineno-191-19" name="__codelineno-191-19" href="#__codelineno-191-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-191-20" name="__codelineno-191-20" href="#__codelineno-191-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-191-21" name="__codelineno-191-21" href="#__codelineno-191-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-191-22" name="__codelineno-191-22" href="#__codelineno-191-22"></a>
<a id="__codelineno-191-23" name="__codelineno-191-23" href="#__codelineno-191-23"></a>
<a id="__codelineno-191-24" name="__codelineno-191-24" href="#__codelineno-191-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-191-25" name="__codelineno-191-25" href="#__codelineno-191-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-191-26" name="__codelineno-191-26" href="#__codelineno-191-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-191-27" name="__codelineno-191-27" href="#__codelineno-191-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-191-28" name="__codelineno-191-28" href="#__codelineno-191-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-191-29" name="__codelineno-191-29" href="#__codelineno-191-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-191-30" name="__codelineno-191-30" href="#__codelineno-191-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-191-31" name="__codelineno-191-31" href="#__codelineno-191-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-192-1" name="__codelineno-192-1" href="#__codelineno-192-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-192-2" name="__codelineno-192-2" href="#__codelineno-192-2"></a>
<a id="__codelineno-192-3" name="__codelineno-192-3" href="#__codelineno-192-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-192-4" name="__codelineno-192-4" href="#__codelineno-192-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-192-5" name="__codelineno-192-5" href="#__codelineno-192-5"></a>
<a id="__codelineno-192-6" name="__codelineno-192-6" href="#__codelineno-192-6"></a>
<a id="__codelineno-192-7" name="__codelineno-192-7" href="#__codelineno-192-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-192-8" name="__codelineno-192-8" href="#__codelineno-192-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-192-9" name="__codelineno-192-9" href="#__codelineno-192-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-192-10" name="__codelineno-192-10" href="#__codelineno-192-10"></a>
<a id="__codelineno-192-11" name="__codelineno-192-11" href="#__codelineno-192-11"></a>
<a id="__codelineno-192-12" name="__codelineno-192-12" href="#__codelineno-192-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-192-13" name="__codelineno-192-13" href="#__codelineno-192-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-192-14" name="__codelineno-192-14" href="#__codelineno-192-14"></a>
<a id="__codelineno-192-15" name="__codelineno-192-15" href="#__codelineno-192-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-192-16" name="__codelineno-192-16" href="#__codelineno-192-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-192-17" name="__codelineno-192-17" href="#__codelineno-192-17"></a>
<a id="__codelineno-192-18" name="__codelineno-192-18" href="#__codelineno-192-18"></a>
<a id="__codelineno-192-19" name="__codelineno-192-19" href="#__codelineno-192-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-192-20" name="__codelineno-192-20" href="#__codelineno-192-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-192-21" name="__codelineno-192-21" href="#__codelineno-192-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-192-22" name="__codelineno-192-22" href="#__codelineno-192-22"></a>
<a id="__codelineno-192-23" name="__codelineno-192-23" href="#__codelineno-192-23"></a>
<a id="__codelineno-192-24" name="__codelineno-192-24" href="#__codelineno-192-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-192-25" name="__codelineno-192-25" href="#__codelineno-192-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-192-26" name="__codelineno-192-26" href="#__codelineno-192-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-192-27" name="__codelineno-192-27" href="#__codelineno-192-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-192-28" name="__codelineno-192-28" href="#__codelineno-192-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-192-29" name="__codelineno-192-29" href="#__codelineno-192-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-192-30" name="__codelineno-192-30" href="#__codelineno-192-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-192-31" name="__codelineno-192-31" href="#__codelineno-192-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-193-1" name="__codelineno-193-1" href="#__codelineno-193-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-193-2" name="__codelineno-193-2" href="#__codelineno-193-2"></a>
<a id="__codelineno-193-3" name="__codelineno-193-3" href="#__codelineno-193-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-193-4" name="__codelineno-193-4" href="#__codelineno-193-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-193-5" name="__codelineno-193-5" href="#__codelineno-193-5"></a>
<a id="__codelineno-193-6" name="__codelineno-193-6" href="#__codelineno-193-6"></a>
<a id="__codelineno-193-7" name="__codelineno-193-7" href="#__codelineno-193-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-193-8" name="__codelineno-193-8" href="#__codelineno-193-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-193-9" name="__codelineno-193-9" href="#__codelineno-193-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-193-10" name="__codelineno-193-10" href="#__codelineno-193-10"></a>
<a id="__codelineno-193-11" name="__codelineno-193-11" href="#__codelineno-193-11"></a>
<a id="__codelineno-193-12" name="__codelineno-193-12" href="#__codelineno-193-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-193-13" name="__codelineno-193-13" href="#__codelineno-193-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-193-14" name="__codelineno-193-14" href="#__codelineno-193-14"></a>
<a id="__codelineno-193-15" name="__codelineno-193-15" href="#__codelineno-193-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-193-16" name="__codelineno-193-16" href="#__codelineno-193-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-193-17" name="__codelineno-193-17" href="#__codelineno-193-17"></a>
<a id="__codelineno-193-18" name="__codelineno-193-18" href="#__codelineno-193-18"></a>
<a id="__codelineno-193-19" name="__codelineno-193-19" href="#__codelineno-193-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-193-20" name="__codelineno-193-20" href="#__codelineno-193-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-193-21" name="__codelineno-193-21" href="#__codelineno-193-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-193-22" name="__codelineno-193-22" href="#__codelineno-193-22"></a>
<a id="__codelineno-193-23" name="__codelineno-193-23" href="#__codelineno-193-23"></a>
<a id="__codelineno-193-24" name="__codelineno-193-24" href="#__codelineno-193-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-193-25" name="__codelineno-193-25" href="#__codelineno-193-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-193-26" name="__codelineno-193-26" href="#__codelineno-193-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-193-27" name="__codelineno-193-27" href="#__codelineno-193-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-193-28" name="__codelineno-193-28" href="#__codelineno-193-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-193-29" name="__codelineno-193-29" href="#__codelineno-193-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-193-30" name="__codelineno-193-30" href="#__codelineno-193-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-193-31" name="__codelineno-193-31" href="#__codelineno-193-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-194-1" name="__codelineno-194-1" href="#__codelineno-194-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-194-2" name="__codelineno-194-2" href="#__codelineno-194-2"></a>
<a id="__codelineno-194-3" name="__codelineno-194-3" href="#__codelineno-194-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-194-4" name="__codelineno-194-4" href="#__codelineno-194-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-194-5" name="__codelineno-194-5" href="#__codelineno-194-5"></a>
<a id="__codelineno-194-6" name="__codelineno-194-6" href="#__codelineno-194-6"></a>
<a id="__codelineno-194-7" name="__codelineno-194-7" href="#__codelineno-194-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-194-8" name="__codelineno-194-8" href="#__codelineno-194-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-194-9" name="__codelineno-194-9" href="#__codelineno-194-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-194-10" name="__codelineno-194-10" href="#__codelineno-194-10"></a>
<a id="__codelineno-194-11" name="__codelineno-194-11" href="#__codelineno-194-11"></a>
<a id="__codelineno-194-12" name="__codelineno-194-12" href="#__codelineno-194-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-194-13" name="__codelineno-194-13" href="#__codelineno-194-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-194-14" name="__codelineno-194-14" href="#__codelineno-194-14"></a>
<a id="__codelineno-194-15" name="__codelineno-194-15" href="#__codelineno-194-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-194-16" name="__codelineno-194-16" href="#__codelineno-194-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-194-17" name="__codelineno-194-17" href="#__codelineno-194-17"></a>
<a id="__codelineno-194-18" name="__codelineno-194-18" href="#__codelineno-194-18"></a>
<a id="__codelineno-194-19" name="__codelineno-194-19" href="#__codelineno-194-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-194-20" name="__codelineno-194-20" href="#__codelineno-194-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-194-21" name="__codelineno-194-21" href="#__codelineno-194-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-194-22" name="__codelineno-194-22" href="#__codelineno-194-22"></a>
<a id="__codelineno-194-23" name="__codelineno-194-23" href="#__codelineno-194-23"></a>
<a id="__codelineno-194-24" name="__codelineno-194-24" href="#__codelineno-194-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-194-25" name="__codelineno-194-25" href="#__codelineno-194-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-194-26" name="__codelineno-194-26" href="#__codelineno-194-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-194-27" name="__codelineno-194-27" href="#__codelineno-194-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-194-28" name="__codelineno-194-28" href="#__codelineno-194-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-194-29" name="__codelineno-194-29" href="#__codelineno-194-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-194-30" name="__codelineno-194-30" href="#__codelineno-194-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-194-31" name="__codelineno-194-31" href="#__codelineno-194-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-195-1" name="__codelineno-195-1" href="#__codelineno-195-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-195-2" name="__codelineno-195-2" href="#__codelineno-195-2"></a>
<a id="__codelineno-195-3" name="__codelineno-195-3" href="#__codelineno-195-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-195-4" name="__codelineno-195-4" href="#__codelineno-195-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-195-5" name="__codelineno-195-5" href="#__codelineno-195-5"></a>
<a id="__codelineno-195-6" name="__codelineno-195-6" href="#__codelineno-195-6"></a>
<a id="__codelineno-195-7" name="__codelineno-195-7" href="#__codelineno-195-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-195-8" name="__codelineno-195-8" href="#__codelineno-195-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-195-9" name="__codelineno-195-9" href="#__codelineno-195-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-195-10" name="__codelineno-195-10" href="#__codelineno-195-10"></a>
<a id="__codelineno-195-11" name="__codelineno-195-11" href="#__codelineno-195-11"></a>
<a id="__codelineno-195-12" name="__codelineno-195-12" href="#__codelineno-195-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-195-13" name="__codelineno-195-13" href="#__codelineno-195-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-195-14" name="__codelineno-195-14" href="#__codelineno-195-14"></a>
<a id="__codelineno-195-15" name="__codelineno-195-15" href="#__codelineno-195-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-195-16" name="__codelineno-195-16" href="#__codelineno-195-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-195-17" name="__codelineno-195-17" href="#__codelineno-195-17"></a>
<a id="__codelineno-195-18" name="__codelineno-195-18" href="#__codelineno-195-18"></a>
<a id="__codelineno-195-19" name="__codelineno-195-19" href="#__codelineno-195-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-195-20" name="__codelineno-195-20" href="#__codelineno-195-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-195-21" name="__codelineno-195-21" href="#__codelineno-195-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-195-22" name="__codelineno-195-22" href="#__codelineno-195-22"></a>
<a id="__codelineno-195-23" name="__codelineno-195-23" href="#__codelineno-195-23"></a>
<a id="__codelineno-195-24" name="__codelineno-195-24" href="#__codelineno-195-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-195-25" name="__codelineno-195-25" href="#__codelineno-195-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-195-26" name="__codelineno-195-26" href="#__codelineno-195-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-195-27" name="__codelineno-195-27" href="#__codelineno-195-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-195-28" name="__codelineno-195-28" href="#__codelineno-195-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-195-29" name="__codelineno-195-29" href="#__codelineno-195-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-195-30" name="__codelineno-195-30" href="#__codelineno-195-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-195-31" name="__codelineno-195-31" href="#__codelineno-195-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-196-1" name="__codelineno-196-1" href="#__codelineno-196-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-196-2" name="__codelineno-196-2" href="#__codelineno-196-2"></a>
<a id="__codelineno-196-3" name="__codelineno-196-3" href="#__codelineno-196-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-196-4" name="__codelineno-196-4" href="#__codelineno-196-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-196-5" name="__codelineno-196-5" href="#__codelineno-196-5"></a>
<a id="__codelineno-196-6" name="__codelineno-196-6" href="#__codelineno-196-6"></a>
<a id="__codelineno-196-7" name="__codelineno-196-7" href="#__codelineno-196-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-196-8" name="__codelineno-196-8" href="#__codelineno-196-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-196-9" name="__codelineno-196-9" href="#__codelineno-196-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-196-10" name="__codelineno-196-10" href="#__codelineno-196-10"></a>
<a id="__codelineno-196-11" name="__codelineno-196-11" href="#__codelineno-196-11"></a>
<a id="__codelineno-196-12" name="__codelineno-196-12" href="#__codelineno-196-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-196-13" name="__codelineno-196-13" href="#__codelineno-196-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-196-14" name="__codelineno-196-14" href="#__codelineno-196-14"></a>
<a id="__codelineno-196-15" name="__codelineno-196-15" href="#__codelineno-196-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-196-16" name="__codelineno-196-16" href="#__codelineno-196-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-196-17" name="__codelineno-196-17" href="#__codelineno-196-17"></a>
<a id="__codelineno-196-18" name="__codelineno-196-18" href="#__codelineno-196-18"></a>
<a id="__codelineno-196-19" name="__codelineno-196-19" href="#__codelineno-196-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-196-20" name="__codelineno-196-20" href="#__codelineno-196-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-196-21" name="__codelineno-196-21" href="#__codelineno-196-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-196-22" name="__codelineno-196-22" href="#__codelineno-196-22"></a>
<a id="__codelineno-196-23" name="__codelineno-196-23" href="#__codelineno-196-23"></a>
<a id="__codelineno-196-24" name="__codelineno-196-24" href="#__codelineno-196-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-196-25" name="__codelineno-196-25" href="#__codelineno-196-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-196-26" name="__codelineno-196-26" href="#__codelineno-196-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-196-27" name="__codelineno-196-27" href="#__codelineno-196-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-196-28" name="__codelineno-196-28" href="#__codelineno-196-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-196-29" name="__codelineno-196-29" href="#__codelineno-196-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-196-30" name="__codelineno-196-30" href="#__codelineno-196-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-196-31" name="__codelineno-196-31" href="#__codelineno-196-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-197-1" name="__codelineno-197-1" href="#__codelineno-197-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-197-2" name="__codelineno-197-2" href="#__codelineno-197-2"></a>
<a id="__codelineno-197-3" name="__codelineno-197-3" href="#__codelineno-197-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-197-4" name="__codelineno-197-4" href="#__codelineno-197-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-197-5" name="__codelineno-197-5" href="#__codelineno-197-5"></a>
<a id="__codelineno-197-6" name="__codelineno-197-6" href="#__codelineno-197-6"></a>
<a id="__codelineno-197-7" name="__codelineno-197-7" href="#__codelineno-197-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-197-8" name="__codelineno-197-8" href="#__codelineno-197-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-197-9" name="__codelineno-197-9" href="#__codelineno-197-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-197-10" name="__codelineno-197-10" href="#__codelineno-197-10"></a>
<a id="__codelineno-197-11" name="__codelineno-197-11" href="#__codelineno-197-11"></a>
<a id="__codelineno-197-12" name="__codelineno-197-12" href="#__codelineno-197-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-197-13" name="__codelineno-197-13" href="#__codelineno-197-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-197-14" name="__codelineno-197-14" href="#__codelineno-197-14"></a>
<a id="__codelineno-197-15" name="__codelineno-197-15" href="#__codelineno-197-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-197-16" name="__codelineno-197-16" href="#__codelineno-197-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-197-17" name="__codelineno-197-17" href="#__codelineno-197-17"></a>
<a id="__codelineno-197-18" name="__codelineno-197-18" href="#__codelineno-197-18"></a>
<a id="__codelineno-197-19" name="__codelineno-197-19" href="#__codelineno-197-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-197-20" name="__codelineno-197-20" href="#__codelineno-197-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-197-21" name="__codelineno-197-21" href="#__codelineno-197-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-197-22" name="__codelineno-197-22" href="#__codelineno-197-22"></a>
<a id="__codelineno-197-23" name="__codelineno-197-23" href="#__codelineno-197-23"></a>
<a id="__codelineno-197-24" name="__codelineno-197-24" href="#__codelineno-197-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-197-25" name="__codelineno-197-25" href="#__codelineno-197-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-197-26" name="__codelineno-197-26" href="#__codelineno-197-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-197-27" name="__codelineno-197-27" href="#__codelineno-197-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-197-28" name="__codelineno-197-28" href="#__codelineno-197-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-197-29" name="__codelineno-197-29" href="#__codelineno-197-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-197-30" name="__codelineno-197-30" href="#__codelineno-197-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-197-31" name="__codelineno-197-31" href="#__codelineno-197-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-198-1" name="__codelineno-198-1" href="#__codelineno-198-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-198-2" name="__codelineno-198-2" href="#__codelineno-198-2"></a>
<a id="__codelineno-198-3" name="__codelineno-198-3" href="#__codelineno-198-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-198-4" name="__codelineno-198-4" href="#__codelineno-198-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-198-5" name="__codelineno-198-5" href="#__codelineno-198-5"></a>
<a id="__codelineno-198-6" name="__codelineno-198-6" href="#__codelineno-198-6"></a>
<a id="__codelineno-198-7" name="__codelineno-198-7" href="#__codelineno-198-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-198-8" name="__codelineno-198-8" href="#__codelineno-198-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-198-9" name="__codelineno-198-9" href="#__codelineno-198-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-198-10" name="__codelineno-198-10" href="#__codelineno-198-10"></a>
<a id="__codelineno-198-11" name="__codelineno-198-11" href="#__codelineno-198-11"></a>
<a id="__codelineno-198-12" name="__codelineno-198-12" href="#__codelineno-198-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-198-13" name="__codelineno-198-13" href="#__codelineno-198-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-198-14" name="__codelineno-198-14" href="#__codelineno-198-14"></a>
<a id="__codelineno-198-15" name="__codelineno-198-15" href="#__codelineno-198-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-198-16" name="__codelineno-198-16" href="#__codelineno-198-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-198-17" name="__codelineno-198-17" href="#__codelineno-198-17"></a>
<a id="__codelineno-198-18" name="__codelineno-198-18" href="#__codelineno-198-18"></a>
<a id="__codelineno-198-19" name="__codelineno-198-19" href="#__codelineno-198-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-198-20" name="__codelineno-198-20" href="#__codelineno-198-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-198-21" name="__codelineno-198-21" href="#__codelineno-198-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-198-22" name="__codelineno-198-22" href="#__codelineno-198-22"></a>
<a id="__codelineno-198-23" name="__codelineno-198-23" href="#__codelineno-198-23"></a>
<a id="__codelineno-198-24" name="__codelineno-198-24" href="#__codelineno-198-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-198-25" name="__codelineno-198-25" href="#__codelineno-198-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-198-26" name="__codelineno-198-26" href="#__codelineno-198-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-198-27" name="__codelineno-198-27" href="#__codelineno-198-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-198-28" name="__codelineno-198-28" href="#__codelineno-198-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-198-29" name="__codelineno-198-29" href="#__codelineno-198-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-198-30" name="__codelineno-198-30" href="#__codelineno-198-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-198-31" name="__codelineno-198-31" href="#__codelineno-198-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-199-1" name="__codelineno-199-1" href="#__codelineno-199-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-199-2" name="__codelineno-199-2" href="#__codelineno-199-2"></a>
<a id="__codelineno-199-3" name="__codelineno-199-3" href="#__codelineno-199-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-199-4" name="__codelineno-199-4" href="#__codelineno-199-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-199-5" name="__codelineno-199-5" href="#__codelineno-199-5"></a>
<a id="__codelineno-199-6" name="__codelineno-199-6" href="#__codelineno-199-6"></a>
<a id="__codelineno-199-7" name="__codelineno-199-7" href="#__codelineno-199-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-199-8" name="__codelineno-199-8" href="#__codelineno-199-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-199-9" name="__codelineno-199-9" href="#__codelineno-199-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-199-10" name="__codelineno-199-10" href="#__codelineno-199-10"></a>
<a id="__codelineno-199-11" name="__codelineno-199-11" href="#__codelineno-199-11"></a>
<a id="__codelineno-199-12" name="__codelineno-199-12" href="#__codelineno-199-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-199-13" name="__codelineno-199-13" href="#__codelineno-199-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-199-14" name="__codelineno-199-14" href="#__codelineno-199-14"></a>
<a id="__codelineno-199-15" name="__codelineno-199-15" href="#__codelineno-199-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-199-16" name="__codelineno-199-16" href="#__codelineno-199-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-199-17" name="__codelineno-199-17" href="#__codelineno-199-17"></a>
<a id="__codelineno-199-18" name="__codelineno-199-18" href="#__codelineno-199-18"></a>
<a id="__codelineno-199-19" name="__codelineno-199-19" href="#__codelineno-199-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-199-20" name="__codelineno-199-20" href="#__codelineno-199-20"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-199-21" name="__codelineno-199-21" href="#__codelineno-199-21"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-199-22" name="__codelineno-199-22" href="#__codelineno-199-22"></a>
<a id="__codelineno-199-23" name="__codelineno-199-23" href="#__codelineno-199-23"></a>
<a id="__codelineno-199-24" name="__codelineno-199-24" href="#__codelineno-199-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-199-25" name="__codelineno-199-25" href="#__codelineno-199-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-199-26" name="__codelineno-199-26" href="#__codelineno-199-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-199-27" name="__codelineno-199-27" href="#__codelineno-199-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-199-28" name="__codelineno-199-28" href="#__codelineno-199-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-199-29" name="__codelineno-199-29" href="#__codelineno-199-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-199-30" name="__codelineno-199-30" href="#__codelineno-199-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-199-31" name="__codelineno-199-31" href="#__codelineno-199-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="26:10"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><input id="__tabbed_26_2" name="__tabbed_26" type="radio" /><input id="__tabbed_26_3" name="__tabbed_26" type="radio" /><input id="__tabbed_26_4" name="__tabbed_26" type="radio" /><input id="__tabbed_26_5" name="__tabbed_26" type="radio" /><input id="__tabbed_26_6" name="__tabbed_26" type="radio" /><input id="__tabbed_26_7" name="__tabbed_26" type="radio" /><input id="__tabbed_26_8" name="__tabbed_26" type="radio" /><input id="__tabbed_26_9" name="__tabbed_26" type="radio" /><input id="__tabbed_26_10" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">OpenAI</label><label for="__tabbed_26_2">Anthropic</label><label for="__tabbed_26_3">Google</label><label for="__tabbed_26_4">Groq</label><label for="__tabbed_26_5">xAI</label><label for="__tabbed_26_6">Mistral</label><label for="__tabbed_26_7">Cohere</label><label for="__tabbed_26_8">LiteLLM</label><label for="__tabbed_26_9">Azure AI</label><label for="__tabbed_26_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-200-1" name="__codelineno-200-1" href="#__codelineno-200-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-200-2" name="__codelineno-200-2" href="#__codelineno-200-2"></a>
<a id="__codelineno-200-3" name="__codelineno-200-3" href="#__codelineno-200-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-200-4" name="__codelineno-200-4" href="#__codelineno-200-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-200-5" name="__codelineno-200-5" href="#__codelineno-200-5"></a>
<a id="__codelineno-200-6" name="__codelineno-200-6" href="#__codelineno-200-6"></a>
<a id="__codelineno-200-7" name="__codelineno-200-7" href="#__codelineno-200-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-200-8" name="__codelineno-200-8" href="#__codelineno-200-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-200-9" name="__codelineno-200-9" href="#__codelineno-200-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-200-10" name="__codelineno-200-10" href="#__codelineno-200-10"></a>
<a id="__codelineno-200-11" name="__codelineno-200-11" href="#__codelineno-200-11"></a>
<a id="__codelineno-200-12" name="__codelineno-200-12" href="#__codelineno-200-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-200-13" name="__codelineno-200-13" href="#__codelineno-200-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-200-14" name="__codelineno-200-14" href="#__codelineno-200-14"></a>
<a id="__codelineno-200-15" name="__codelineno-200-15" href="#__codelineno-200-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-200-16" name="__codelineno-200-16" href="#__codelineno-200-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-200-17" name="__codelineno-200-17" href="#__codelineno-200-17"></a>
<a id="__codelineno-200-18" name="__codelineno-200-18" href="#__codelineno-200-18"></a>
<a id="__codelineno-200-19" name="__codelineno-200-19" href="#__codelineno-200-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-200-20" name="__codelineno-200-20" href="#__codelineno-200-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-200-21" name="__codelineno-200-21" href="#__codelineno-200-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-200-22" name="__codelineno-200-22" href="#__codelineno-200-22"></a>
<a id="__codelineno-200-23" name="__codelineno-200-23" href="#__codelineno-200-23"></a>
<a id="__codelineno-200-24" name="__codelineno-200-24" href="#__codelineno-200-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-200-25" name="__codelineno-200-25" href="#__codelineno-200-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-200-26" name="__codelineno-200-26" href="#__codelineno-200-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-200-27" name="__codelineno-200-27" href="#__codelineno-200-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-200-28" name="__codelineno-200-28" href="#__codelineno-200-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-200-29" name="__codelineno-200-29" href="#__codelineno-200-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-200-30" name="__codelineno-200-30" href="#__codelineno-200-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-200-31" name="__codelineno-200-31" href="#__codelineno-200-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-201-1" name="__codelineno-201-1" href="#__codelineno-201-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-201-2" name="__codelineno-201-2" href="#__codelineno-201-2"></a>
<a id="__codelineno-201-3" name="__codelineno-201-3" href="#__codelineno-201-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-201-4" name="__codelineno-201-4" href="#__codelineno-201-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-201-5" name="__codelineno-201-5" href="#__codelineno-201-5"></a>
<a id="__codelineno-201-6" name="__codelineno-201-6" href="#__codelineno-201-6"></a>
<a id="__codelineno-201-7" name="__codelineno-201-7" href="#__codelineno-201-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-201-8" name="__codelineno-201-8" href="#__codelineno-201-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-201-9" name="__codelineno-201-9" href="#__codelineno-201-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-201-10" name="__codelineno-201-10" href="#__codelineno-201-10"></a>
<a id="__codelineno-201-11" name="__codelineno-201-11" href="#__codelineno-201-11"></a>
<a id="__codelineno-201-12" name="__codelineno-201-12" href="#__codelineno-201-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-201-13" name="__codelineno-201-13" href="#__codelineno-201-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-201-14" name="__codelineno-201-14" href="#__codelineno-201-14"></a>
<a id="__codelineno-201-15" name="__codelineno-201-15" href="#__codelineno-201-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-201-16" name="__codelineno-201-16" href="#__codelineno-201-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-201-17" name="__codelineno-201-17" href="#__codelineno-201-17"></a>
<a id="__codelineno-201-18" name="__codelineno-201-18" href="#__codelineno-201-18"></a>
<a id="__codelineno-201-19" name="__codelineno-201-19" href="#__codelineno-201-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-201-20" name="__codelineno-201-20" href="#__codelineno-201-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-201-21" name="__codelineno-201-21" href="#__codelineno-201-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-201-22" name="__codelineno-201-22" href="#__codelineno-201-22"></a>
<a id="__codelineno-201-23" name="__codelineno-201-23" href="#__codelineno-201-23"></a>
<a id="__codelineno-201-24" name="__codelineno-201-24" href="#__codelineno-201-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-201-25" name="__codelineno-201-25" href="#__codelineno-201-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-201-26" name="__codelineno-201-26" href="#__codelineno-201-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-201-27" name="__codelineno-201-27" href="#__codelineno-201-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-201-28" name="__codelineno-201-28" href="#__codelineno-201-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-201-29" name="__codelineno-201-29" href="#__codelineno-201-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-201-30" name="__codelineno-201-30" href="#__codelineno-201-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-201-31" name="__codelineno-201-31" href="#__codelineno-201-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-202-1" name="__codelineno-202-1" href="#__codelineno-202-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-202-2" name="__codelineno-202-2" href="#__codelineno-202-2"></a>
<a id="__codelineno-202-3" name="__codelineno-202-3" href="#__codelineno-202-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-202-4" name="__codelineno-202-4" href="#__codelineno-202-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-202-5" name="__codelineno-202-5" href="#__codelineno-202-5"></a>
<a id="__codelineno-202-6" name="__codelineno-202-6" href="#__codelineno-202-6"></a>
<a id="__codelineno-202-7" name="__codelineno-202-7" href="#__codelineno-202-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-202-8" name="__codelineno-202-8" href="#__codelineno-202-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-202-9" name="__codelineno-202-9" href="#__codelineno-202-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-202-10" name="__codelineno-202-10" href="#__codelineno-202-10"></a>
<a id="__codelineno-202-11" name="__codelineno-202-11" href="#__codelineno-202-11"></a>
<a id="__codelineno-202-12" name="__codelineno-202-12" href="#__codelineno-202-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-202-13" name="__codelineno-202-13" href="#__codelineno-202-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-202-14" name="__codelineno-202-14" href="#__codelineno-202-14"></a>
<a id="__codelineno-202-15" name="__codelineno-202-15" href="#__codelineno-202-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-202-16" name="__codelineno-202-16" href="#__codelineno-202-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-202-17" name="__codelineno-202-17" href="#__codelineno-202-17"></a>
<a id="__codelineno-202-18" name="__codelineno-202-18" href="#__codelineno-202-18"></a>
<a id="__codelineno-202-19" name="__codelineno-202-19" href="#__codelineno-202-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-202-20" name="__codelineno-202-20" href="#__codelineno-202-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-202-21" name="__codelineno-202-21" href="#__codelineno-202-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-202-22" name="__codelineno-202-22" href="#__codelineno-202-22"></a>
<a id="__codelineno-202-23" name="__codelineno-202-23" href="#__codelineno-202-23"></a>
<a id="__codelineno-202-24" name="__codelineno-202-24" href="#__codelineno-202-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-202-25" name="__codelineno-202-25" href="#__codelineno-202-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-202-26" name="__codelineno-202-26" href="#__codelineno-202-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-202-27" name="__codelineno-202-27" href="#__codelineno-202-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-202-28" name="__codelineno-202-28" href="#__codelineno-202-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-202-29" name="__codelineno-202-29" href="#__codelineno-202-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-202-30" name="__codelineno-202-30" href="#__codelineno-202-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-202-31" name="__codelineno-202-31" href="#__codelineno-202-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-203-1" name="__codelineno-203-1" href="#__codelineno-203-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-203-2" name="__codelineno-203-2" href="#__codelineno-203-2"></a>
<a id="__codelineno-203-3" name="__codelineno-203-3" href="#__codelineno-203-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-203-4" name="__codelineno-203-4" href="#__codelineno-203-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-203-5" name="__codelineno-203-5" href="#__codelineno-203-5"></a>
<a id="__codelineno-203-6" name="__codelineno-203-6" href="#__codelineno-203-6"></a>
<a id="__codelineno-203-7" name="__codelineno-203-7" href="#__codelineno-203-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-203-8" name="__codelineno-203-8" href="#__codelineno-203-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-203-9" name="__codelineno-203-9" href="#__codelineno-203-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-203-10" name="__codelineno-203-10" href="#__codelineno-203-10"></a>
<a id="__codelineno-203-11" name="__codelineno-203-11" href="#__codelineno-203-11"></a>
<a id="__codelineno-203-12" name="__codelineno-203-12" href="#__codelineno-203-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-203-13" name="__codelineno-203-13" href="#__codelineno-203-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-203-14" name="__codelineno-203-14" href="#__codelineno-203-14"></a>
<a id="__codelineno-203-15" name="__codelineno-203-15" href="#__codelineno-203-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-203-16" name="__codelineno-203-16" href="#__codelineno-203-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-203-17" name="__codelineno-203-17" href="#__codelineno-203-17"></a>
<a id="__codelineno-203-18" name="__codelineno-203-18" href="#__codelineno-203-18"></a>
<a id="__codelineno-203-19" name="__codelineno-203-19" href="#__codelineno-203-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-203-20" name="__codelineno-203-20" href="#__codelineno-203-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-203-21" name="__codelineno-203-21" href="#__codelineno-203-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-203-22" name="__codelineno-203-22" href="#__codelineno-203-22"></a>
<a id="__codelineno-203-23" name="__codelineno-203-23" href="#__codelineno-203-23"></a>
<a id="__codelineno-203-24" name="__codelineno-203-24" href="#__codelineno-203-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-203-25" name="__codelineno-203-25" href="#__codelineno-203-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-203-26" name="__codelineno-203-26" href="#__codelineno-203-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-203-27" name="__codelineno-203-27" href="#__codelineno-203-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-203-28" name="__codelineno-203-28" href="#__codelineno-203-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-203-29" name="__codelineno-203-29" href="#__codelineno-203-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-203-30" name="__codelineno-203-30" href="#__codelineno-203-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-203-31" name="__codelineno-203-31" href="#__codelineno-203-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-204-1" name="__codelineno-204-1" href="#__codelineno-204-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-204-2" name="__codelineno-204-2" href="#__codelineno-204-2"></a>
<a id="__codelineno-204-3" name="__codelineno-204-3" href="#__codelineno-204-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-204-4" name="__codelineno-204-4" href="#__codelineno-204-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-204-5" name="__codelineno-204-5" href="#__codelineno-204-5"></a>
<a id="__codelineno-204-6" name="__codelineno-204-6" href="#__codelineno-204-6"></a>
<a id="__codelineno-204-7" name="__codelineno-204-7" href="#__codelineno-204-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-204-8" name="__codelineno-204-8" href="#__codelineno-204-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-204-9" name="__codelineno-204-9" href="#__codelineno-204-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-204-10" name="__codelineno-204-10" href="#__codelineno-204-10"></a>
<a id="__codelineno-204-11" name="__codelineno-204-11" href="#__codelineno-204-11"></a>
<a id="__codelineno-204-12" name="__codelineno-204-12" href="#__codelineno-204-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-204-13" name="__codelineno-204-13" href="#__codelineno-204-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-204-14" name="__codelineno-204-14" href="#__codelineno-204-14"></a>
<a id="__codelineno-204-15" name="__codelineno-204-15" href="#__codelineno-204-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-204-16" name="__codelineno-204-16" href="#__codelineno-204-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-204-17" name="__codelineno-204-17" href="#__codelineno-204-17"></a>
<a id="__codelineno-204-18" name="__codelineno-204-18" href="#__codelineno-204-18"></a>
<a id="__codelineno-204-19" name="__codelineno-204-19" href="#__codelineno-204-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-204-20" name="__codelineno-204-20" href="#__codelineno-204-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-204-21" name="__codelineno-204-21" href="#__codelineno-204-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-204-22" name="__codelineno-204-22" href="#__codelineno-204-22"></a>
<a id="__codelineno-204-23" name="__codelineno-204-23" href="#__codelineno-204-23"></a>
<a id="__codelineno-204-24" name="__codelineno-204-24" href="#__codelineno-204-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-204-25" name="__codelineno-204-25" href="#__codelineno-204-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-204-26" name="__codelineno-204-26" href="#__codelineno-204-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-204-27" name="__codelineno-204-27" href="#__codelineno-204-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-204-28" name="__codelineno-204-28" href="#__codelineno-204-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-204-29" name="__codelineno-204-29" href="#__codelineno-204-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-204-30" name="__codelineno-204-30" href="#__codelineno-204-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-204-31" name="__codelineno-204-31" href="#__codelineno-204-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-205-1" name="__codelineno-205-1" href="#__codelineno-205-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-205-2" name="__codelineno-205-2" href="#__codelineno-205-2"></a>
<a id="__codelineno-205-3" name="__codelineno-205-3" href="#__codelineno-205-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-205-4" name="__codelineno-205-4" href="#__codelineno-205-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-205-5" name="__codelineno-205-5" href="#__codelineno-205-5"></a>
<a id="__codelineno-205-6" name="__codelineno-205-6" href="#__codelineno-205-6"></a>
<a id="__codelineno-205-7" name="__codelineno-205-7" href="#__codelineno-205-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-205-8" name="__codelineno-205-8" href="#__codelineno-205-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-205-9" name="__codelineno-205-9" href="#__codelineno-205-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-205-10" name="__codelineno-205-10" href="#__codelineno-205-10"></a>
<a id="__codelineno-205-11" name="__codelineno-205-11" href="#__codelineno-205-11"></a>
<a id="__codelineno-205-12" name="__codelineno-205-12" href="#__codelineno-205-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-205-13" name="__codelineno-205-13" href="#__codelineno-205-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-205-14" name="__codelineno-205-14" href="#__codelineno-205-14"></a>
<a id="__codelineno-205-15" name="__codelineno-205-15" href="#__codelineno-205-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-205-16" name="__codelineno-205-16" href="#__codelineno-205-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-205-17" name="__codelineno-205-17" href="#__codelineno-205-17"></a>
<a id="__codelineno-205-18" name="__codelineno-205-18" href="#__codelineno-205-18"></a>
<a id="__codelineno-205-19" name="__codelineno-205-19" href="#__codelineno-205-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-205-20" name="__codelineno-205-20" href="#__codelineno-205-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-205-21" name="__codelineno-205-21" href="#__codelineno-205-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-205-22" name="__codelineno-205-22" href="#__codelineno-205-22"></a>
<a id="__codelineno-205-23" name="__codelineno-205-23" href="#__codelineno-205-23"></a>
<a id="__codelineno-205-24" name="__codelineno-205-24" href="#__codelineno-205-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-205-25" name="__codelineno-205-25" href="#__codelineno-205-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-205-26" name="__codelineno-205-26" href="#__codelineno-205-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-205-27" name="__codelineno-205-27" href="#__codelineno-205-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-205-28" name="__codelineno-205-28" href="#__codelineno-205-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-205-29" name="__codelineno-205-29" href="#__codelineno-205-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-205-30" name="__codelineno-205-30" href="#__codelineno-205-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-205-31" name="__codelineno-205-31" href="#__codelineno-205-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-206-1" name="__codelineno-206-1" href="#__codelineno-206-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-206-2" name="__codelineno-206-2" href="#__codelineno-206-2"></a>
<a id="__codelineno-206-3" name="__codelineno-206-3" href="#__codelineno-206-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-206-4" name="__codelineno-206-4" href="#__codelineno-206-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-206-5" name="__codelineno-206-5" href="#__codelineno-206-5"></a>
<a id="__codelineno-206-6" name="__codelineno-206-6" href="#__codelineno-206-6"></a>
<a id="__codelineno-206-7" name="__codelineno-206-7" href="#__codelineno-206-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-206-8" name="__codelineno-206-8" href="#__codelineno-206-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-206-9" name="__codelineno-206-9" href="#__codelineno-206-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-206-10" name="__codelineno-206-10" href="#__codelineno-206-10"></a>
<a id="__codelineno-206-11" name="__codelineno-206-11" href="#__codelineno-206-11"></a>
<a id="__codelineno-206-12" name="__codelineno-206-12" href="#__codelineno-206-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-206-13" name="__codelineno-206-13" href="#__codelineno-206-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-206-14" name="__codelineno-206-14" href="#__codelineno-206-14"></a>
<a id="__codelineno-206-15" name="__codelineno-206-15" href="#__codelineno-206-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-206-16" name="__codelineno-206-16" href="#__codelineno-206-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-206-17" name="__codelineno-206-17" href="#__codelineno-206-17"></a>
<a id="__codelineno-206-18" name="__codelineno-206-18" href="#__codelineno-206-18"></a>
<a id="__codelineno-206-19" name="__codelineno-206-19" href="#__codelineno-206-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-206-20" name="__codelineno-206-20" href="#__codelineno-206-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-206-21" name="__codelineno-206-21" href="#__codelineno-206-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-206-22" name="__codelineno-206-22" href="#__codelineno-206-22"></a>
<a id="__codelineno-206-23" name="__codelineno-206-23" href="#__codelineno-206-23"></a>
<a id="__codelineno-206-24" name="__codelineno-206-24" href="#__codelineno-206-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-206-25" name="__codelineno-206-25" href="#__codelineno-206-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-206-26" name="__codelineno-206-26" href="#__codelineno-206-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-206-27" name="__codelineno-206-27" href="#__codelineno-206-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-206-28" name="__codelineno-206-28" href="#__codelineno-206-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-206-29" name="__codelineno-206-29" href="#__codelineno-206-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-206-30" name="__codelineno-206-30" href="#__codelineno-206-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-206-31" name="__codelineno-206-31" href="#__codelineno-206-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-207-1" name="__codelineno-207-1" href="#__codelineno-207-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-207-2" name="__codelineno-207-2" href="#__codelineno-207-2"></a>
<a id="__codelineno-207-3" name="__codelineno-207-3" href="#__codelineno-207-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-207-4" name="__codelineno-207-4" href="#__codelineno-207-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-207-5" name="__codelineno-207-5" href="#__codelineno-207-5"></a>
<a id="__codelineno-207-6" name="__codelineno-207-6" href="#__codelineno-207-6"></a>
<a id="__codelineno-207-7" name="__codelineno-207-7" href="#__codelineno-207-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-207-8" name="__codelineno-207-8" href="#__codelineno-207-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-207-9" name="__codelineno-207-9" href="#__codelineno-207-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-207-10" name="__codelineno-207-10" href="#__codelineno-207-10"></a>
<a id="__codelineno-207-11" name="__codelineno-207-11" href="#__codelineno-207-11"></a>
<a id="__codelineno-207-12" name="__codelineno-207-12" href="#__codelineno-207-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-207-13" name="__codelineno-207-13" href="#__codelineno-207-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-207-14" name="__codelineno-207-14" href="#__codelineno-207-14"></a>
<a id="__codelineno-207-15" name="__codelineno-207-15" href="#__codelineno-207-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-207-16" name="__codelineno-207-16" href="#__codelineno-207-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-207-17" name="__codelineno-207-17" href="#__codelineno-207-17"></a>
<a id="__codelineno-207-18" name="__codelineno-207-18" href="#__codelineno-207-18"></a>
<a id="__codelineno-207-19" name="__codelineno-207-19" href="#__codelineno-207-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-207-20" name="__codelineno-207-20" href="#__codelineno-207-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-207-21" name="__codelineno-207-21" href="#__codelineno-207-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-207-22" name="__codelineno-207-22" href="#__codelineno-207-22"></a>
<a id="__codelineno-207-23" name="__codelineno-207-23" href="#__codelineno-207-23"></a>
<a id="__codelineno-207-24" name="__codelineno-207-24" href="#__codelineno-207-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-207-25" name="__codelineno-207-25" href="#__codelineno-207-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-207-26" name="__codelineno-207-26" href="#__codelineno-207-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-207-27" name="__codelineno-207-27" href="#__codelineno-207-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-207-28" name="__codelineno-207-28" href="#__codelineno-207-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-207-29" name="__codelineno-207-29" href="#__codelineno-207-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-207-30" name="__codelineno-207-30" href="#__codelineno-207-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-207-31" name="__codelineno-207-31" href="#__codelineno-207-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-208-1" name="__codelineno-208-1" href="#__codelineno-208-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-208-2" name="__codelineno-208-2" href="#__codelineno-208-2"></a>
<a id="__codelineno-208-3" name="__codelineno-208-3" href="#__codelineno-208-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-208-4" name="__codelineno-208-4" href="#__codelineno-208-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-208-5" name="__codelineno-208-5" href="#__codelineno-208-5"></a>
<a id="__codelineno-208-6" name="__codelineno-208-6" href="#__codelineno-208-6"></a>
<a id="__codelineno-208-7" name="__codelineno-208-7" href="#__codelineno-208-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-208-8" name="__codelineno-208-8" href="#__codelineno-208-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-208-9" name="__codelineno-208-9" href="#__codelineno-208-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-208-10" name="__codelineno-208-10" href="#__codelineno-208-10"></a>
<a id="__codelineno-208-11" name="__codelineno-208-11" href="#__codelineno-208-11"></a>
<a id="__codelineno-208-12" name="__codelineno-208-12" href="#__codelineno-208-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-208-13" name="__codelineno-208-13" href="#__codelineno-208-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-208-14" name="__codelineno-208-14" href="#__codelineno-208-14"></a>
<a id="__codelineno-208-15" name="__codelineno-208-15" href="#__codelineno-208-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-208-16" name="__codelineno-208-16" href="#__codelineno-208-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-208-17" name="__codelineno-208-17" href="#__codelineno-208-17"></a>
<a id="__codelineno-208-18" name="__codelineno-208-18" href="#__codelineno-208-18"></a>
<a id="__codelineno-208-19" name="__codelineno-208-19" href="#__codelineno-208-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-208-20" name="__codelineno-208-20" href="#__codelineno-208-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-208-21" name="__codelineno-208-21" href="#__codelineno-208-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-208-22" name="__codelineno-208-22" href="#__codelineno-208-22"></a>
<a id="__codelineno-208-23" name="__codelineno-208-23" href="#__codelineno-208-23"></a>
<a id="__codelineno-208-24" name="__codelineno-208-24" href="#__codelineno-208-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-208-25" name="__codelineno-208-25" href="#__codelineno-208-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-208-26" name="__codelineno-208-26" href="#__codelineno-208-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-208-27" name="__codelineno-208-27" href="#__codelineno-208-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-208-28" name="__codelineno-208-28" href="#__codelineno-208-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-208-29" name="__codelineno-208-29" href="#__codelineno-208-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-208-30" name="__codelineno-208-30" href="#__codelineno-208-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-208-31" name="__codelineno-208-31" href="#__codelineno-208-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-209-1" name="__codelineno-209-1" href="#__codelineno-209-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">cast</span>
<a id="__codelineno-209-2" name="__codelineno-209-2" href="#__codelineno-209-2"></a>
<a id="__codelineno-209-3" name="__codelineno-209-3" href="#__codelineno-209-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-209-4" name="__codelineno-209-4" href="#__codelineno-209-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>
<a id="__codelineno-209-5" name="__codelineno-209-5" href="#__codelineno-209-5"></a>
<a id="__codelineno-209-6" name="__codelineno-209-6" href="#__codelineno-209-6"></a>
<a id="__codelineno-209-7" name="__codelineno-209-7" href="#__codelineno-209-7"></a><span class="k">def</span> <span class="nf">validate_upper</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-209-8" name="__codelineno-209-8" href="#__codelineno-209-8"></a>    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isupper</span><span class="p">(),</span> <span class="s2">&quot;Field must be uppercase&quot;</span>
<a id="__codelineno-209-9" name="__codelineno-209-9" href="#__codelineno-209-9"></a>    <span class="k">return</span> <span class="n">v</span>
<a id="__codelineno-209-10" name="__codelineno-209-10" href="#__codelineno-209-10"></a>
<a id="__codelineno-209-11" name="__codelineno-209-11" href="#__codelineno-209-11"></a>
<a id="__codelineno-209-12" name="__codelineno-209-12" href="#__codelineno-209-12"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-209-13" name="__codelineno-209-13" href="#__codelineno-209-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-209-14" name="__codelineno-209-14" href="#__codelineno-209-14"></a>
<a id="__codelineno-209-15" name="__codelineno-209-15" href="#__codelineno-209-15"></a>    <span class="n">title</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-209-16" name="__codelineno-209-16" href="#__codelineno-209-16"></a>    <span class="n">author</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">validate_upper</span><span class="p">)]</span>
<a id="__codelineno-209-17" name="__codelineno-209-17" href="#__codelineno-209-17"></a>
<a id="__codelineno-209-18" name="__codelineno-209-18" href="#__codelineno-209-18"></a>
<a id="__codelineno-209-19" name="__codelineno-209-19" href="#__codelineno-209-19"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">)</span>
<a id="__codelineno-209-20" name="__codelineno-209-20" href="#__codelineno-209-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-209-21" name="__codelineno-209-21" href="#__codelineno-209-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-209-22" name="__codelineno-209-22" href="#__codelineno-209-22"></a>
<a id="__codelineno-209-23" name="__codelineno-209-23" href="#__codelineno-209-23"></a>
<a id="__codelineno-209-24" name="__codelineno-209-24" href="#__codelineno-209-24"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-209-25" name="__codelineno-209-25" href="#__codelineno-209-25"></a>    <span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-209-26" name="__codelineno-209-26" href="#__codelineno-209-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-209-27" name="__codelineno-209-27" href="#__codelineno-209-27"></a>    <span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
<a id="__codelineno-209-28" name="__codelineno-209-28" href="#__codelineno-209-28"></a><span class="hll"><span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><a id="__codelineno-209-29" name="__codelineno-209-29" href="#__codelineno-209-29"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">CallResponse</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
</span><a id="__codelineno-209-30" name="__codelineno-209-30" href="#__codelineno-209-30"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</span><a id="__codelineno-209-31" name="__codelineno-209-31" href="#__codelineno-209-31"></a><span class="hll">    <span class="c1"># &gt; {&#39;metadata&#39;: {}, &#39;response&#39;: {&#39;id&#39;: ...}, ...}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>This allows you to gracefully handle errors as well as inspect the original LLM response when validation fails.</p>
<h2 id="json-mode">JSON Mode<a class="headerlink" href="#json-mode" title="Permanent link">&para;</a></h2>
<p>By default, <code>response_model</code> uses <a href="../tools/">Tools</a> under the hood. You can instead use <a href="../json_mode/">JSON Mode</a> in conjunction with <code>response_model</code> by setting <code>json_mode=True</code>:</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="27:4"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><input id="__tabbed_27_3" name="__tabbed_27" type="radio" /><input id="__tabbed_27_4" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Shorthand</label><label for="__tabbed_27_2">Messages</label><label for="__tabbed_27_3">String Template</label><label for="__tabbed_27_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="28:10"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><input id="__tabbed_28_4" name="__tabbed_28" type="radio" /><input id="__tabbed_28_5" name="__tabbed_28" type="radio" /><input id="__tabbed_28_6" name="__tabbed_28" type="radio" /><input id="__tabbed_28_7" name="__tabbed_28" type="radio" /><input id="__tabbed_28_8" name="__tabbed_28" type="radio" /><input id="__tabbed_28_9" name="__tabbed_28" type="radio" /><input id="__tabbed_28_10" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">OpenAI</label><label for="__tabbed_28_2">Anthropic</label><label for="__tabbed_28_3">Google</label><label for="__tabbed_28_4">Groq</label><label for="__tabbed_28_5">xAI</label><label for="__tabbed_28_6">Mistral</label><label for="__tabbed_28_7">Cohere</label><label for="__tabbed_28_8">LiteLLM</label><label for="__tabbed_28_9">Azure AI</label><label for="__tabbed_28_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-210-1" name="__codelineno-210-1" href="#__codelineno-210-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-210-2" name="__codelineno-210-2" href="#__codelineno-210-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-210-3" name="__codelineno-210-3" href="#__codelineno-210-3"></a>
<a id="__codelineno-210-4" name="__codelineno-210-4" href="#__codelineno-210-4"></a>
<a id="__codelineno-210-5" name="__codelineno-210-5" href="#__codelineno-210-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-210-6" name="__codelineno-210-6" href="#__codelineno-210-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-210-7" name="__codelineno-210-7" href="#__codelineno-210-7"></a>
<a id="__codelineno-210-8" name="__codelineno-210-8" href="#__codelineno-210-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-210-9" name="__codelineno-210-9" href="#__codelineno-210-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-210-10" name="__codelineno-210-10" href="#__codelineno-210-10"></a>
<a id="__codelineno-210-11" name="__codelineno-210-11" href="#__codelineno-210-11"></a>
<a id="__codelineno-210-12" name="__codelineno-210-12" href="#__codelineno-210-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-210-13" name="__codelineno-210-13" href="#__codelineno-210-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-210-14" name="__codelineno-210-14" href="#__codelineno-210-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-210-15" name="__codelineno-210-15" href="#__codelineno-210-15"></a>
<a id="__codelineno-210-16" name="__codelineno-210-16" href="#__codelineno-210-16"></a>
<a id="__codelineno-210-17" name="__codelineno-210-17" href="#__codelineno-210-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-210-18" name="__codelineno-210-18" href="#__codelineno-210-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-210-19" name="__codelineno-210-19" href="#__codelineno-210-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-211-1" name="__codelineno-211-1" href="#__codelineno-211-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-211-2" name="__codelineno-211-2" href="#__codelineno-211-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-211-3" name="__codelineno-211-3" href="#__codelineno-211-3"></a>
<a id="__codelineno-211-4" name="__codelineno-211-4" href="#__codelineno-211-4"></a>
<a id="__codelineno-211-5" name="__codelineno-211-5" href="#__codelineno-211-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-211-6" name="__codelineno-211-6" href="#__codelineno-211-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-211-7" name="__codelineno-211-7" href="#__codelineno-211-7"></a>
<a id="__codelineno-211-8" name="__codelineno-211-8" href="#__codelineno-211-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-211-9" name="__codelineno-211-9" href="#__codelineno-211-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-211-10" name="__codelineno-211-10" href="#__codelineno-211-10"></a>
<a id="__codelineno-211-11" name="__codelineno-211-11" href="#__codelineno-211-11"></a>
<a id="__codelineno-211-12" name="__codelineno-211-12" href="#__codelineno-211-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-211-13" name="__codelineno-211-13" href="#__codelineno-211-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-211-14" name="__codelineno-211-14" href="#__codelineno-211-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-211-15" name="__codelineno-211-15" href="#__codelineno-211-15"></a>
<a id="__codelineno-211-16" name="__codelineno-211-16" href="#__codelineno-211-16"></a>
<a id="__codelineno-211-17" name="__codelineno-211-17" href="#__codelineno-211-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-211-18" name="__codelineno-211-18" href="#__codelineno-211-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-211-19" name="__codelineno-211-19" href="#__codelineno-211-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-212-1" name="__codelineno-212-1" href="#__codelineno-212-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-212-2" name="__codelineno-212-2" href="#__codelineno-212-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-212-3" name="__codelineno-212-3" href="#__codelineno-212-3"></a>
<a id="__codelineno-212-4" name="__codelineno-212-4" href="#__codelineno-212-4"></a>
<a id="__codelineno-212-5" name="__codelineno-212-5" href="#__codelineno-212-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-212-6" name="__codelineno-212-6" href="#__codelineno-212-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-212-7" name="__codelineno-212-7" href="#__codelineno-212-7"></a>
<a id="__codelineno-212-8" name="__codelineno-212-8" href="#__codelineno-212-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-212-9" name="__codelineno-212-9" href="#__codelineno-212-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-212-10" name="__codelineno-212-10" href="#__codelineno-212-10"></a>
<a id="__codelineno-212-11" name="__codelineno-212-11" href="#__codelineno-212-11"></a>
<a id="__codelineno-212-12" name="__codelineno-212-12" href="#__codelineno-212-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-212-13" name="__codelineno-212-13" href="#__codelineno-212-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-212-14" name="__codelineno-212-14" href="#__codelineno-212-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-212-15" name="__codelineno-212-15" href="#__codelineno-212-15"></a>
<a id="__codelineno-212-16" name="__codelineno-212-16" href="#__codelineno-212-16"></a>
<a id="__codelineno-212-17" name="__codelineno-212-17" href="#__codelineno-212-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-212-18" name="__codelineno-212-18" href="#__codelineno-212-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-212-19" name="__codelineno-212-19" href="#__codelineno-212-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-213-1" name="__codelineno-213-1" href="#__codelineno-213-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-213-2" name="__codelineno-213-2" href="#__codelineno-213-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-213-3" name="__codelineno-213-3" href="#__codelineno-213-3"></a>
<a id="__codelineno-213-4" name="__codelineno-213-4" href="#__codelineno-213-4"></a>
<a id="__codelineno-213-5" name="__codelineno-213-5" href="#__codelineno-213-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-213-6" name="__codelineno-213-6" href="#__codelineno-213-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-213-7" name="__codelineno-213-7" href="#__codelineno-213-7"></a>
<a id="__codelineno-213-8" name="__codelineno-213-8" href="#__codelineno-213-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-213-9" name="__codelineno-213-9" href="#__codelineno-213-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-213-10" name="__codelineno-213-10" href="#__codelineno-213-10"></a>
<a id="__codelineno-213-11" name="__codelineno-213-11" href="#__codelineno-213-11"></a>
<a id="__codelineno-213-12" name="__codelineno-213-12" href="#__codelineno-213-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-213-13" name="__codelineno-213-13" href="#__codelineno-213-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-213-14" name="__codelineno-213-14" href="#__codelineno-213-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-213-15" name="__codelineno-213-15" href="#__codelineno-213-15"></a>
<a id="__codelineno-213-16" name="__codelineno-213-16" href="#__codelineno-213-16"></a>
<a id="__codelineno-213-17" name="__codelineno-213-17" href="#__codelineno-213-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-213-18" name="__codelineno-213-18" href="#__codelineno-213-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-213-19" name="__codelineno-213-19" href="#__codelineno-213-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-214-1" name="__codelineno-214-1" href="#__codelineno-214-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-214-2" name="__codelineno-214-2" href="#__codelineno-214-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-214-3" name="__codelineno-214-3" href="#__codelineno-214-3"></a>
<a id="__codelineno-214-4" name="__codelineno-214-4" href="#__codelineno-214-4"></a>
<a id="__codelineno-214-5" name="__codelineno-214-5" href="#__codelineno-214-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-214-6" name="__codelineno-214-6" href="#__codelineno-214-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-214-7" name="__codelineno-214-7" href="#__codelineno-214-7"></a>
<a id="__codelineno-214-8" name="__codelineno-214-8" href="#__codelineno-214-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-214-9" name="__codelineno-214-9" href="#__codelineno-214-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-214-10" name="__codelineno-214-10" href="#__codelineno-214-10"></a>
<a id="__codelineno-214-11" name="__codelineno-214-11" href="#__codelineno-214-11"></a>
<a id="__codelineno-214-12" name="__codelineno-214-12" href="#__codelineno-214-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-214-13" name="__codelineno-214-13" href="#__codelineno-214-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-214-14" name="__codelineno-214-14" href="#__codelineno-214-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-214-15" name="__codelineno-214-15" href="#__codelineno-214-15"></a>
<a id="__codelineno-214-16" name="__codelineno-214-16" href="#__codelineno-214-16"></a>
<a id="__codelineno-214-17" name="__codelineno-214-17" href="#__codelineno-214-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-214-18" name="__codelineno-214-18" href="#__codelineno-214-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-214-19" name="__codelineno-214-19" href="#__codelineno-214-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-215-1" name="__codelineno-215-1" href="#__codelineno-215-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-215-2" name="__codelineno-215-2" href="#__codelineno-215-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-215-3" name="__codelineno-215-3" href="#__codelineno-215-3"></a>
<a id="__codelineno-215-4" name="__codelineno-215-4" href="#__codelineno-215-4"></a>
<a id="__codelineno-215-5" name="__codelineno-215-5" href="#__codelineno-215-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-215-6" name="__codelineno-215-6" href="#__codelineno-215-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-215-7" name="__codelineno-215-7" href="#__codelineno-215-7"></a>
<a id="__codelineno-215-8" name="__codelineno-215-8" href="#__codelineno-215-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-215-9" name="__codelineno-215-9" href="#__codelineno-215-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-215-10" name="__codelineno-215-10" href="#__codelineno-215-10"></a>
<a id="__codelineno-215-11" name="__codelineno-215-11" href="#__codelineno-215-11"></a>
<a id="__codelineno-215-12" name="__codelineno-215-12" href="#__codelineno-215-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-215-13" name="__codelineno-215-13" href="#__codelineno-215-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-215-14" name="__codelineno-215-14" href="#__codelineno-215-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-215-15" name="__codelineno-215-15" href="#__codelineno-215-15"></a>
<a id="__codelineno-215-16" name="__codelineno-215-16" href="#__codelineno-215-16"></a>
<a id="__codelineno-215-17" name="__codelineno-215-17" href="#__codelineno-215-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-215-18" name="__codelineno-215-18" href="#__codelineno-215-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-215-19" name="__codelineno-215-19" href="#__codelineno-215-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-216-1" name="__codelineno-216-1" href="#__codelineno-216-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-216-2" name="__codelineno-216-2" href="#__codelineno-216-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-216-3" name="__codelineno-216-3" href="#__codelineno-216-3"></a>
<a id="__codelineno-216-4" name="__codelineno-216-4" href="#__codelineno-216-4"></a>
<a id="__codelineno-216-5" name="__codelineno-216-5" href="#__codelineno-216-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-216-6" name="__codelineno-216-6" href="#__codelineno-216-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-216-7" name="__codelineno-216-7" href="#__codelineno-216-7"></a>
<a id="__codelineno-216-8" name="__codelineno-216-8" href="#__codelineno-216-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-216-9" name="__codelineno-216-9" href="#__codelineno-216-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-216-10" name="__codelineno-216-10" href="#__codelineno-216-10"></a>
<a id="__codelineno-216-11" name="__codelineno-216-11" href="#__codelineno-216-11"></a>
<a id="__codelineno-216-12" name="__codelineno-216-12" href="#__codelineno-216-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-216-13" name="__codelineno-216-13" href="#__codelineno-216-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-216-14" name="__codelineno-216-14" href="#__codelineno-216-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-216-15" name="__codelineno-216-15" href="#__codelineno-216-15"></a>
<a id="__codelineno-216-16" name="__codelineno-216-16" href="#__codelineno-216-16"></a>
<a id="__codelineno-216-17" name="__codelineno-216-17" href="#__codelineno-216-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-216-18" name="__codelineno-216-18" href="#__codelineno-216-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-216-19" name="__codelineno-216-19" href="#__codelineno-216-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-217-1" name="__codelineno-217-1" href="#__codelineno-217-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-217-2" name="__codelineno-217-2" href="#__codelineno-217-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-217-3" name="__codelineno-217-3" href="#__codelineno-217-3"></a>
<a id="__codelineno-217-4" name="__codelineno-217-4" href="#__codelineno-217-4"></a>
<a id="__codelineno-217-5" name="__codelineno-217-5" href="#__codelineno-217-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-217-6" name="__codelineno-217-6" href="#__codelineno-217-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-217-7" name="__codelineno-217-7" href="#__codelineno-217-7"></a>
<a id="__codelineno-217-8" name="__codelineno-217-8" href="#__codelineno-217-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-217-9" name="__codelineno-217-9" href="#__codelineno-217-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-217-10" name="__codelineno-217-10" href="#__codelineno-217-10"></a>
<a id="__codelineno-217-11" name="__codelineno-217-11" href="#__codelineno-217-11"></a>
<a id="__codelineno-217-12" name="__codelineno-217-12" href="#__codelineno-217-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-217-13" name="__codelineno-217-13" href="#__codelineno-217-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-217-14" name="__codelineno-217-14" href="#__codelineno-217-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-217-15" name="__codelineno-217-15" href="#__codelineno-217-15"></a>
<a id="__codelineno-217-16" name="__codelineno-217-16" href="#__codelineno-217-16"></a>
<a id="__codelineno-217-17" name="__codelineno-217-17" href="#__codelineno-217-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-217-18" name="__codelineno-217-18" href="#__codelineno-217-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-217-19" name="__codelineno-217-19" href="#__codelineno-217-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-218-1" name="__codelineno-218-1" href="#__codelineno-218-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-218-2" name="__codelineno-218-2" href="#__codelineno-218-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-218-3" name="__codelineno-218-3" href="#__codelineno-218-3"></a>
<a id="__codelineno-218-4" name="__codelineno-218-4" href="#__codelineno-218-4"></a>
<a id="__codelineno-218-5" name="__codelineno-218-5" href="#__codelineno-218-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-218-6" name="__codelineno-218-6" href="#__codelineno-218-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-218-7" name="__codelineno-218-7" href="#__codelineno-218-7"></a>
<a id="__codelineno-218-8" name="__codelineno-218-8" href="#__codelineno-218-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-218-9" name="__codelineno-218-9" href="#__codelineno-218-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-218-10" name="__codelineno-218-10" href="#__codelineno-218-10"></a>
<a id="__codelineno-218-11" name="__codelineno-218-11" href="#__codelineno-218-11"></a>
<a id="__codelineno-218-12" name="__codelineno-218-12" href="#__codelineno-218-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-218-13" name="__codelineno-218-13" href="#__codelineno-218-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-218-14" name="__codelineno-218-14" href="#__codelineno-218-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-218-15" name="__codelineno-218-15" href="#__codelineno-218-15"></a>
<a id="__codelineno-218-16" name="__codelineno-218-16" href="#__codelineno-218-16"></a>
<a id="__codelineno-218-17" name="__codelineno-218-17" href="#__codelineno-218-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-218-18" name="__codelineno-218-18" href="#__codelineno-218-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-218-19" name="__codelineno-218-19" href="#__codelineno-218-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-219-1" name="__codelineno-219-1" href="#__codelineno-219-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-219-2" name="__codelineno-219-2" href="#__codelineno-219-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-219-3" name="__codelineno-219-3" href="#__codelineno-219-3"></a>
<a id="__codelineno-219-4" name="__codelineno-219-4" href="#__codelineno-219-4"></a>
<a id="__codelineno-219-5" name="__codelineno-219-5" href="#__codelineno-219-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-219-6" name="__codelineno-219-6" href="#__codelineno-219-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-219-7" name="__codelineno-219-7" href="#__codelineno-219-7"></a>
<a id="__codelineno-219-8" name="__codelineno-219-8" href="#__codelineno-219-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-219-9" name="__codelineno-219-9" href="#__codelineno-219-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-219-10" name="__codelineno-219-10" href="#__codelineno-219-10"></a>
<a id="__codelineno-219-11" name="__codelineno-219-11" href="#__codelineno-219-11"></a>
<a id="__codelineno-219-12" name="__codelineno-219-12" href="#__codelineno-219-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-219-13" name="__codelineno-219-13" href="#__codelineno-219-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-219-14" name="__codelineno-219-14" href="#__codelineno-219-14"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-219-15" name="__codelineno-219-15" href="#__codelineno-219-15"></a>
<a id="__codelineno-219-16" name="__codelineno-219-16" href="#__codelineno-219-16"></a>
<a id="__codelineno-219-17" name="__codelineno-219-17" href="#__codelineno-219-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-219-18" name="__codelineno-219-18" href="#__codelineno-219-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-219-19" name="__codelineno-219-19" href="#__codelineno-219-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="29:10"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><input id="__tabbed_29_3" name="__tabbed_29" type="radio" /><input id="__tabbed_29_4" name="__tabbed_29" type="radio" /><input id="__tabbed_29_5" name="__tabbed_29" type="radio" /><input id="__tabbed_29_6" name="__tabbed_29" type="radio" /><input id="__tabbed_29_7" name="__tabbed_29" type="radio" /><input id="__tabbed_29_8" name="__tabbed_29" type="radio" /><input id="__tabbed_29_9" name="__tabbed_29" type="radio" /><input id="__tabbed_29_10" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">OpenAI</label><label for="__tabbed_29_2">Anthropic</label><label for="__tabbed_29_3">Google</label><label for="__tabbed_29_4">Groq</label><label for="__tabbed_29_5">xAI</label><label for="__tabbed_29_6">Mistral</label><label for="__tabbed_29_7">Cohere</label><label for="__tabbed_29_8">LiteLLM</label><label for="__tabbed_29_9">Azure AI</label><label for="__tabbed_29_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-220-1" name="__codelineno-220-1" href="#__codelineno-220-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-220-2" name="__codelineno-220-2" href="#__codelineno-220-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-220-3" name="__codelineno-220-3" href="#__codelineno-220-3"></a>
<a id="__codelineno-220-4" name="__codelineno-220-4" href="#__codelineno-220-4"></a>
<a id="__codelineno-220-5" name="__codelineno-220-5" href="#__codelineno-220-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-220-6" name="__codelineno-220-6" href="#__codelineno-220-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-220-7" name="__codelineno-220-7" href="#__codelineno-220-7"></a>
<a id="__codelineno-220-8" name="__codelineno-220-8" href="#__codelineno-220-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-220-9" name="__codelineno-220-9" href="#__codelineno-220-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-220-10" name="__codelineno-220-10" href="#__codelineno-220-10"></a>
<a id="__codelineno-220-11" name="__codelineno-220-11" href="#__codelineno-220-11"></a>
<a id="__codelineno-220-12" name="__codelineno-220-12" href="#__codelineno-220-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-220-13" name="__codelineno-220-13" href="#__codelineno-220-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-220-14" name="__codelineno-220-14" href="#__codelineno-220-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-220-15" name="__codelineno-220-15" href="#__codelineno-220-15"></a>
<a id="__codelineno-220-16" name="__codelineno-220-16" href="#__codelineno-220-16"></a>
<a id="__codelineno-220-17" name="__codelineno-220-17" href="#__codelineno-220-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-220-18" name="__codelineno-220-18" href="#__codelineno-220-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-220-19" name="__codelineno-220-19" href="#__codelineno-220-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-221-1" name="__codelineno-221-1" href="#__codelineno-221-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-221-2" name="__codelineno-221-2" href="#__codelineno-221-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-221-3" name="__codelineno-221-3" href="#__codelineno-221-3"></a>
<a id="__codelineno-221-4" name="__codelineno-221-4" href="#__codelineno-221-4"></a>
<a id="__codelineno-221-5" name="__codelineno-221-5" href="#__codelineno-221-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-221-6" name="__codelineno-221-6" href="#__codelineno-221-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-221-7" name="__codelineno-221-7" href="#__codelineno-221-7"></a>
<a id="__codelineno-221-8" name="__codelineno-221-8" href="#__codelineno-221-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-221-9" name="__codelineno-221-9" href="#__codelineno-221-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-221-10" name="__codelineno-221-10" href="#__codelineno-221-10"></a>
<a id="__codelineno-221-11" name="__codelineno-221-11" href="#__codelineno-221-11"></a>
<a id="__codelineno-221-12" name="__codelineno-221-12" href="#__codelineno-221-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-221-13" name="__codelineno-221-13" href="#__codelineno-221-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-221-14" name="__codelineno-221-14" href="#__codelineno-221-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-221-15" name="__codelineno-221-15" href="#__codelineno-221-15"></a>
<a id="__codelineno-221-16" name="__codelineno-221-16" href="#__codelineno-221-16"></a>
<a id="__codelineno-221-17" name="__codelineno-221-17" href="#__codelineno-221-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-221-18" name="__codelineno-221-18" href="#__codelineno-221-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-221-19" name="__codelineno-221-19" href="#__codelineno-221-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-222-1" name="__codelineno-222-1" href="#__codelineno-222-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-222-2" name="__codelineno-222-2" href="#__codelineno-222-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-222-3" name="__codelineno-222-3" href="#__codelineno-222-3"></a>
<a id="__codelineno-222-4" name="__codelineno-222-4" href="#__codelineno-222-4"></a>
<a id="__codelineno-222-5" name="__codelineno-222-5" href="#__codelineno-222-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-222-6" name="__codelineno-222-6" href="#__codelineno-222-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-222-7" name="__codelineno-222-7" href="#__codelineno-222-7"></a>
<a id="__codelineno-222-8" name="__codelineno-222-8" href="#__codelineno-222-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-222-9" name="__codelineno-222-9" href="#__codelineno-222-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-222-10" name="__codelineno-222-10" href="#__codelineno-222-10"></a>
<a id="__codelineno-222-11" name="__codelineno-222-11" href="#__codelineno-222-11"></a>
<a id="__codelineno-222-12" name="__codelineno-222-12" href="#__codelineno-222-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-222-13" name="__codelineno-222-13" href="#__codelineno-222-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-222-14" name="__codelineno-222-14" href="#__codelineno-222-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-222-15" name="__codelineno-222-15" href="#__codelineno-222-15"></a>
<a id="__codelineno-222-16" name="__codelineno-222-16" href="#__codelineno-222-16"></a>
<a id="__codelineno-222-17" name="__codelineno-222-17" href="#__codelineno-222-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-222-18" name="__codelineno-222-18" href="#__codelineno-222-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-222-19" name="__codelineno-222-19" href="#__codelineno-222-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-223-1" name="__codelineno-223-1" href="#__codelineno-223-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-223-2" name="__codelineno-223-2" href="#__codelineno-223-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-223-3" name="__codelineno-223-3" href="#__codelineno-223-3"></a>
<a id="__codelineno-223-4" name="__codelineno-223-4" href="#__codelineno-223-4"></a>
<a id="__codelineno-223-5" name="__codelineno-223-5" href="#__codelineno-223-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-223-6" name="__codelineno-223-6" href="#__codelineno-223-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-223-7" name="__codelineno-223-7" href="#__codelineno-223-7"></a>
<a id="__codelineno-223-8" name="__codelineno-223-8" href="#__codelineno-223-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-223-9" name="__codelineno-223-9" href="#__codelineno-223-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-223-10" name="__codelineno-223-10" href="#__codelineno-223-10"></a>
<a id="__codelineno-223-11" name="__codelineno-223-11" href="#__codelineno-223-11"></a>
<a id="__codelineno-223-12" name="__codelineno-223-12" href="#__codelineno-223-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-223-13" name="__codelineno-223-13" href="#__codelineno-223-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-223-14" name="__codelineno-223-14" href="#__codelineno-223-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-223-15" name="__codelineno-223-15" href="#__codelineno-223-15"></a>
<a id="__codelineno-223-16" name="__codelineno-223-16" href="#__codelineno-223-16"></a>
<a id="__codelineno-223-17" name="__codelineno-223-17" href="#__codelineno-223-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-223-18" name="__codelineno-223-18" href="#__codelineno-223-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-223-19" name="__codelineno-223-19" href="#__codelineno-223-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-224-1" name="__codelineno-224-1" href="#__codelineno-224-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-224-2" name="__codelineno-224-2" href="#__codelineno-224-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-224-3" name="__codelineno-224-3" href="#__codelineno-224-3"></a>
<a id="__codelineno-224-4" name="__codelineno-224-4" href="#__codelineno-224-4"></a>
<a id="__codelineno-224-5" name="__codelineno-224-5" href="#__codelineno-224-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-224-6" name="__codelineno-224-6" href="#__codelineno-224-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-224-7" name="__codelineno-224-7" href="#__codelineno-224-7"></a>
<a id="__codelineno-224-8" name="__codelineno-224-8" href="#__codelineno-224-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-224-9" name="__codelineno-224-9" href="#__codelineno-224-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-224-10" name="__codelineno-224-10" href="#__codelineno-224-10"></a>
<a id="__codelineno-224-11" name="__codelineno-224-11" href="#__codelineno-224-11"></a>
<a id="__codelineno-224-12" name="__codelineno-224-12" href="#__codelineno-224-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-224-13" name="__codelineno-224-13" href="#__codelineno-224-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-224-14" name="__codelineno-224-14" href="#__codelineno-224-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-224-15" name="__codelineno-224-15" href="#__codelineno-224-15"></a>
<a id="__codelineno-224-16" name="__codelineno-224-16" href="#__codelineno-224-16"></a>
<a id="__codelineno-224-17" name="__codelineno-224-17" href="#__codelineno-224-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-224-18" name="__codelineno-224-18" href="#__codelineno-224-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-224-19" name="__codelineno-224-19" href="#__codelineno-224-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-225-1" name="__codelineno-225-1" href="#__codelineno-225-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-225-2" name="__codelineno-225-2" href="#__codelineno-225-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-225-3" name="__codelineno-225-3" href="#__codelineno-225-3"></a>
<a id="__codelineno-225-4" name="__codelineno-225-4" href="#__codelineno-225-4"></a>
<a id="__codelineno-225-5" name="__codelineno-225-5" href="#__codelineno-225-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-225-6" name="__codelineno-225-6" href="#__codelineno-225-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-225-7" name="__codelineno-225-7" href="#__codelineno-225-7"></a>
<a id="__codelineno-225-8" name="__codelineno-225-8" href="#__codelineno-225-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-225-9" name="__codelineno-225-9" href="#__codelineno-225-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-225-10" name="__codelineno-225-10" href="#__codelineno-225-10"></a>
<a id="__codelineno-225-11" name="__codelineno-225-11" href="#__codelineno-225-11"></a>
<a id="__codelineno-225-12" name="__codelineno-225-12" href="#__codelineno-225-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-225-13" name="__codelineno-225-13" href="#__codelineno-225-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-225-14" name="__codelineno-225-14" href="#__codelineno-225-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-225-15" name="__codelineno-225-15" href="#__codelineno-225-15"></a>
<a id="__codelineno-225-16" name="__codelineno-225-16" href="#__codelineno-225-16"></a>
<a id="__codelineno-225-17" name="__codelineno-225-17" href="#__codelineno-225-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-225-18" name="__codelineno-225-18" href="#__codelineno-225-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-225-19" name="__codelineno-225-19" href="#__codelineno-225-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-226-1" name="__codelineno-226-1" href="#__codelineno-226-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-226-2" name="__codelineno-226-2" href="#__codelineno-226-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-226-3" name="__codelineno-226-3" href="#__codelineno-226-3"></a>
<a id="__codelineno-226-4" name="__codelineno-226-4" href="#__codelineno-226-4"></a>
<a id="__codelineno-226-5" name="__codelineno-226-5" href="#__codelineno-226-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-226-6" name="__codelineno-226-6" href="#__codelineno-226-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-226-7" name="__codelineno-226-7" href="#__codelineno-226-7"></a>
<a id="__codelineno-226-8" name="__codelineno-226-8" href="#__codelineno-226-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-226-9" name="__codelineno-226-9" href="#__codelineno-226-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-226-10" name="__codelineno-226-10" href="#__codelineno-226-10"></a>
<a id="__codelineno-226-11" name="__codelineno-226-11" href="#__codelineno-226-11"></a>
<a id="__codelineno-226-12" name="__codelineno-226-12" href="#__codelineno-226-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-226-13" name="__codelineno-226-13" href="#__codelineno-226-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-226-14" name="__codelineno-226-14" href="#__codelineno-226-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-226-15" name="__codelineno-226-15" href="#__codelineno-226-15"></a>
<a id="__codelineno-226-16" name="__codelineno-226-16" href="#__codelineno-226-16"></a>
<a id="__codelineno-226-17" name="__codelineno-226-17" href="#__codelineno-226-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-226-18" name="__codelineno-226-18" href="#__codelineno-226-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-226-19" name="__codelineno-226-19" href="#__codelineno-226-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-227-1" name="__codelineno-227-1" href="#__codelineno-227-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-227-2" name="__codelineno-227-2" href="#__codelineno-227-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-227-3" name="__codelineno-227-3" href="#__codelineno-227-3"></a>
<a id="__codelineno-227-4" name="__codelineno-227-4" href="#__codelineno-227-4"></a>
<a id="__codelineno-227-5" name="__codelineno-227-5" href="#__codelineno-227-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-227-6" name="__codelineno-227-6" href="#__codelineno-227-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-227-7" name="__codelineno-227-7" href="#__codelineno-227-7"></a>
<a id="__codelineno-227-8" name="__codelineno-227-8" href="#__codelineno-227-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-227-9" name="__codelineno-227-9" href="#__codelineno-227-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-227-10" name="__codelineno-227-10" href="#__codelineno-227-10"></a>
<a id="__codelineno-227-11" name="__codelineno-227-11" href="#__codelineno-227-11"></a>
<a id="__codelineno-227-12" name="__codelineno-227-12" href="#__codelineno-227-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-227-13" name="__codelineno-227-13" href="#__codelineno-227-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-227-14" name="__codelineno-227-14" href="#__codelineno-227-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-227-15" name="__codelineno-227-15" href="#__codelineno-227-15"></a>
<a id="__codelineno-227-16" name="__codelineno-227-16" href="#__codelineno-227-16"></a>
<a id="__codelineno-227-17" name="__codelineno-227-17" href="#__codelineno-227-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-227-18" name="__codelineno-227-18" href="#__codelineno-227-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-227-19" name="__codelineno-227-19" href="#__codelineno-227-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-228-1" name="__codelineno-228-1" href="#__codelineno-228-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-228-2" name="__codelineno-228-2" href="#__codelineno-228-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-228-3" name="__codelineno-228-3" href="#__codelineno-228-3"></a>
<a id="__codelineno-228-4" name="__codelineno-228-4" href="#__codelineno-228-4"></a>
<a id="__codelineno-228-5" name="__codelineno-228-5" href="#__codelineno-228-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-228-6" name="__codelineno-228-6" href="#__codelineno-228-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-228-7" name="__codelineno-228-7" href="#__codelineno-228-7"></a>
<a id="__codelineno-228-8" name="__codelineno-228-8" href="#__codelineno-228-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-228-9" name="__codelineno-228-9" href="#__codelineno-228-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-228-10" name="__codelineno-228-10" href="#__codelineno-228-10"></a>
<a id="__codelineno-228-11" name="__codelineno-228-11" href="#__codelineno-228-11"></a>
<a id="__codelineno-228-12" name="__codelineno-228-12" href="#__codelineno-228-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-228-13" name="__codelineno-228-13" href="#__codelineno-228-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-228-14" name="__codelineno-228-14" href="#__codelineno-228-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-228-15" name="__codelineno-228-15" href="#__codelineno-228-15"></a>
<a id="__codelineno-228-16" name="__codelineno-228-16" href="#__codelineno-228-16"></a>
<a id="__codelineno-228-17" name="__codelineno-228-17" href="#__codelineno-228-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-228-18" name="__codelineno-228-18" href="#__codelineno-228-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-228-19" name="__codelineno-228-19" href="#__codelineno-228-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-229-1" name="__codelineno-229-1" href="#__codelineno-229-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-229-2" name="__codelineno-229-2" href="#__codelineno-229-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-229-3" name="__codelineno-229-3" href="#__codelineno-229-3"></a>
<a id="__codelineno-229-4" name="__codelineno-229-4" href="#__codelineno-229-4"></a>
<a id="__codelineno-229-5" name="__codelineno-229-5" href="#__codelineno-229-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-229-6" name="__codelineno-229-6" href="#__codelineno-229-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-229-7" name="__codelineno-229-7" href="#__codelineno-229-7"></a>
<a id="__codelineno-229-8" name="__codelineno-229-8" href="#__codelineno-229-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-229-9" name="__codelineno-229-9" href="#__codelineno-229-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-229-10" name="__codelineno-229-10" href="#__codelineno-229-10"></a>
<a id="__codelineno-229-11" name="__codelineno-229-11" href="#__codelineno-229-11"></a>
<a id="__codelineno-229-12" name="__codelineno-229-12" href="#__codelineno-229-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-229-13" name="__codelineno-229-13" href="#__codelineno-229-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-229-14" name="__codelineno-229-14" href="#__codelineno-229-14"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-229-15" name="__codelineno-229-15" href="#__codelineno-229-15"></a>
<a id="__codelineno-229-16" name="__codelineno-229-16" href="#__codelineno-229-16"></a>
<a id="__codelineno-229-17" name="__codelineno-229-17" href="#__codelineno-229-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-229-18" name="__codelineno-229-18" href="#__codelineno-229-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-229-19" name="__codelineno-229-19" href="#__codelineno-229-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="30:10"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><input id="__tabbed_30_3" name="__tabbed_30" type="radio" /><input id="__tabbed_30_4" name="__tabbed_30" type="radio" /><input id="__tabbed_30_5" name="__tabbed_30" type="radio" /><input id="__tabbed_30_6" name="__tabbed_30" type="radio" /><input id="__tabbed_30_7" name="__tabbed_30" type="radio" /><input id="__tabbed_30_8" name="__tabbed_30" type="radio" /><input id="__tabbed_30_9" name="__tabbed_30" type="radio" /><input id="__tabbed_30_10" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">OpenAI</label><label for="__tabbed_30_2">Anthropic</label><label for="__tabbed_30_3">Google</label><label for="__tabbed_30_4">Groq</label><label for="__tabbed_30_5">xAI</label><label for="__tabbed_30_6">Mistral</label><label for="__tabbed_30_7">Cohere</label><label for="__tabbed_30_8">LiteLLM</label><label for="__tabbed_30_9">Azure AI</label><label for="__tabbed_30_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-230-1" name="__codelineno-230-1" href="#__codelineno-230-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-230-2" name="__codelineno-230-2" href="#__codelineno-230-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-230-3" name="__codelineno-230-3" href="#__codelineno-230-3"></a>
<a id="__codelineno-230-4" name="__codelineno-230-4" href="#__codelineno-230-4"></a>
<a id="__codelineno-230-5" name="__codelineno-230-5" href="#__codelineno-230-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-230-6" name="__codelineno-230-6" href="#__codelineno-230-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-230-7" name="__codelineno-230-7" href="#__codelineno-230-7"></a>
<a id="__codelineno-230-8" name="__codelineno-230-8" href="#__codelineno-230-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-230-9" name="__codelineno-230-9" href="#__codelineno-230-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-230-10" name="__codelineno-230-10" href="#__codelineno-230-10"></a>
<a id="__codelineno-230-11" name="__codelineno-230-11" href="#__codelineno-230-11"></a>
<a id="__codelineno-230-12" name="__codelineno-230-12" href="#__codelineno-230-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-230-13" name="__codelineno-230-13" href="#__codelineno-230-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-230-14" name="__codelineno-230-14" href="#__codelineno-230-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-230-15" name="__codelineno-230-15" href="#__codelineno-230-15"></a>
<a id="__codelineno-230-16" name="__codelineno-230-16" href="#__codelineno-230-16"></a>
<a id="__codelineno-230-17" name="__codelineno-230-17" href="#__codelineno-230-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-230-18" name="__codelineno-230-18" href="#__codelineno-230-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-230-19" name="__codelineno-230-19" href="#__codelineno-230-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-231-1" name="__codelineno-231-1" href="#__codelineno-231-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-231-2" name="__codelineno-231-2" href="#__codelineno-231-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-231-3" name="__codelineno-231-3" href="#__codelineno-231-3"></a>
<a id="__codelineno-231-4" name="__codelineno-231-4" href="#__codelineno-231-4"></a>
<a id="__codelineno-231-5" name="__codelineno-231-5" href="#__codelineno-231-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-231-6" name="__codelineno-231-6" href="#__codelineno-231-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-231-7" name="__codelineno-231-7" href="#__codelineno-231-7"></a>
<a id="__codelineno-231-8" name="__codelineno-231-8" href="#__codelineno-231-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-231-9" name="__codelineno-231-9" href="#__codelineno-231-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-231-10" name="__codelineno-231-10" href="#__codelineno-231-10"></a>
<a id="__codelineno-231-11" name="__codelineno-231-11" href="#__codelineno-231-11"></a>
<a id="__codelineno-231-12" name="__codelineno-231-12" href="#__codelineno-231-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-231-13" name="__codelineno-231-13" href="#__codelineno-231-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-231-14" name="__codelineno-231-14" href="#__codelineno-231-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-231-15" name="__codelineno-231-15" href="#__codelineno-231-15"></a>
<a id="__codelineno-231-16" name="__codelineno-231-16" href="#__codelineno-231-16"></a>
<a id="__codelineno-231-17" name="__codelineno-231-17" href="#__codelineno-231-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-231-18" name="__codelineno-231-18" href="#__codelineno-231-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-231-19" name="__codelineno-231-19" href="#__codelineno-231-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-232-1" name="__codelineno-232-1" href="#__codelineno-232-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-232-2" name="__codelineno-232-2" href="#__codelineno-232-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-232-3" name="__codelineno-232-3" href="#__codelineno-232-3"></a>
<a id="__codelineno-232-4" name="__codelineno-232-4" href="#__codelineno-232-4"></a>
<a id="__codelineno-232-5" name="__codelineno-232-5" href="#__codelineno-232-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-232-6" name="__codelineno-232-6" href="#__codelineno-232-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-232-7" name="__codelineno-232-7" href="#__codelineno-232-7"></a>
<a id="__codelineno-232-8" name="__codelineno-232-8" href="#__codelineno-232-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-232-9" name="__codelineno-232-9" href="#__codelineno-232-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-232-10" name="__codelineno-232-10" href="#__codelineno-232-10"></a>
<a id="__codelineno-232-11" name="__codelineno-232-11" href="#__codelineno-232-11"></a>
<a id="__codelineno-232-12" name="__codelineno-232-12" href="#__codelineno-232-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-232-13" name="__codelineno-232-13" href="#__codelineno-232-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-232-14" name="__codelineno-232-14" href="#__codelineno-232-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-232-15" name="__codelineno-232-15" href="#__codelineno-232-15"></a>
<a id="__codelineno-232-16" name="__codelineno-232-16" href="#__codelineno-232-16"></a>
<a id="__codelineno-232-17" name="__codelineno-232-17" href="#__codelineno-232-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-232-18" name="__codelineno-232-18" href="#__codelineno-232-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-232-19" name="__codelineno-232-19" href="#__codelineno-232-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-233-1" name="__codelineno-233-1" href="#__codelineno-233-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-233-2" name="__codelineno-233-2" href="#__codelineno-233-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-233-3" name="__codelineno-233-3" href="#__codelineno-233-3"></a>
<a id="__codelineno-233-4" name="__codelineno-233-4" href="#__codelineno-233-4"></a>
<a id="__codelineno-233-5" name="__codelineno-233-5" href="#__codelineno-233-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-233-6" name="__codelineno-233-6" href="#__codelineno-233-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-233-7" name="__codelineno-233-7" href="#__codelineno-233-7"></a>
<a id="__codelineno-233-8" name="__codelineno-233-8" href="#__codelineno-233-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-233-9" name="__codelineno-233-9" href="#__codelineno-233-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-233-10" name="__codelineno-233-10" href="#__codelineno-233-10"></a>
<a id="__codelineno-233-11" name="__codelineno-233-11" href="#__codelineno-233-11"></a>
<a id="__codelineno-233-12" name="__codelineno-233-12" href="#__codelineno-233-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-233-13" name="__codelineno-233-13" href="#__codelineno-233-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-233-14" name="__codelineno-233-14" href="#__codelineno-233-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-233-15" name="__codelineno-233-15" href="#__codelineno-233-15"></a>
<a id="__codelineno-233-16" name="__codelineno-233-16" href="#__codelineno-233-16"></a>
<a id="__codelineno-233-17" name="__codelineno-233-17" href="#__codelineno-233-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-233-18" name="__codelineno-233-18" href="#__codelineno-233-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-233-19" name="__codelineno-233-19" href="#__codelineno-233-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-234-1" name="__codelineno-234-1" href="#__codelineno-234-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-234-2" name="__codelineno-234-2" href="#__codelineno-234-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-234-3" name="__codelineno-234-3" href="#__codelineno-234-3"></a>
<a id="__codelineno-234-4" name="__codelineno-234-4" href="#__codelineno-234-4"></a>
<a id="__codelineno-234-5" name="__codelineno-234-5" href="#__codelineno-234-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-234-6" name="__codelineno-234-6" href="#__codelineno-234-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-234-7" name="__codelineno-234-7" href="#__codelineno-234-7"></a>
<a id="__codelineno-234-8" name="__codelineno-234-8" href="#__codelineno-234-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-234-9" name="__codelineno-234-9" href="#__codelineno-234-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-234-10" name="__codelineno-234-10" href="#__codelineno-234-10"></a>
<a id="__codelineno-234-11" name="__codelineno-234-11" href="#__codelineno-234-11"></a>
<a id="__codelineno-234-12" name="__codelineno-234-12" href="#__codelineno-234-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-234-13" name="__codelineno-234-13" href="#__codelineno-234-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-234-14" name="__codelineno-234-14" href="#__codelineno-234-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-234-15" name="__codelineno-234-15" href="#__codelineno-234-15"></a>
<a id="__codelineno-234-16" name="__codelineno-234-16" href="#__codelineno-234-16"></a>
<a id="__codelineno-234-17" name="__codelineno-234-17" href="#__codelineno-234-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-234-18" name="__codelineno-234-18" href="#__codelineno-234-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-234-19" name="__codelineno-234-19" href="#__codelineno-234-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-235-1" name="__codelineno-235-1" href="#__codelineno-235-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-235-2" name="__codelineno-235-2" href="#__codelineno-235-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-235-3" name="__codelineno-235-3" href="#__codelineno-235-3"></a>
<a id="__codelineno-235-4" name="__codelineno-235-4" href="#__codelineno-235-4"></a>
<a id="__codelineno-235-5" name="__codelineno-235-5" href="#__codelineno-235-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-235-6" name="__codelineno-235-6" href="#__codelineno-235-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-235-7" name="__codelineno-235-7" href="#__codelineno-235-7"></a>
<a id="__codelineno-235-8" name="__codelineno-235-8" href="#__codelineno-235-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-235-9" name="__codelineno-235-9" href="#__codelineno-235-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-235-10" name="__codelineno-235-10" href="#__codelineno-235-10"></a>
<a id="__codelineno-235-11" name="__codelineno-235-11" href="#__codelineno-235-11"></a>
<a id="__codelineno-235-12" name="__codelineno-235-12" href="#__codelineno-235-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-235-13" name="__codelineno-235-13" href="#__codelineno-235-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-235-14" name="__codelineno-235-14" href="#__codelineno-235-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-235-15" name="__codelineno-235-15" href="#__codelineno-235-15"></a>
<a id="__codelineno-235-16" name="__codelineno-235-16" href="#__codelineno-235-16"></a>
<a id="__codelineno-235-17" name="__codelineno-235-17" href="#__codelineno-235-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-235-18" name="__codelineno-235-18" href="#__codelineno-235-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-235-19" name="__codelineno-235-19" href="#__codelineno-235-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-236-1" name="__codelineno-236-1" href="#__codelineno-236-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-236-2" name="__codelineno-236-2" href="#__codelineno-236-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-236-3" name="__codelineno-236-3" href="#__codelineno-236-3"></a>
<a id="__codelineno-236-4" name="__codelineno-236-4" href="#__codelineno-236-4"></a>
<a id="__codelineno-236-5" name="__codelineno-236-5" href="#__codelineno-236-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-236-6" name="__codelineno-236-6" href="#__codelineno-236-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-236-7" name="__codelineno-236-7" href="#__codelineno-236-7"></a>
<a id="__codelineno-236-8" name="__codelineno-236-8" href="#__codelineno-236-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-236-9" name="__codelineno-236-9" href="#__codelineno-236-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-236-10" name="__codelineno-236-10" href="#__codelineno-236-10"></a>
<a id="__codelineno-236-11" name="__codelineno-236-11" href="#__codelineno-236-11"></a>
<a id="__codelineno-236-12" name="__codelineno-236-12" href="#__codelineno-236-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-236-13" name="__codelineno-236-13" href="#__codelineno-236-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-236-14" name="__codelineno-236-14" href="#__codelineno-236-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-236-15" name="__codelineno-236-15" href="#__codelineno-236-15"></a>
<a id="__codelineno-236-16" name="__codelineno-236-16" href="#__codelineno-236-16"></a>
<a id="__codelineno-236-17" name="__codelineno-236-17" href="#__codelineno-236-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-236-18" name="__codelineno-236-18" href="#__codelineno-236-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-236-19" name="__codelineno-236-19" href="#__codelineno-236-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-237-1" name="__codelineno-237-1" href="#__codelineno-237-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-237-2" name="__codelineno-237-2" href="#__codelineno-237-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-237-3" name="__codelineno-237-3" href="#__codelineno-237-3"></a>
<a id="__codelineno-237-4" name="__codelineno-237-4" href="#__codelineno-237-4"></a>
<a id="__codelineno-237-5" name="__codelineno-237-5" href="#__codelineno-237-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-237-6" name="__codelineno-237-6" href="#__codelineno-237-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-237-7" name="__codelineno-237-7" href="#__codelineno-237-7"></a>
<a id="__codelineno-237-8" name="__codelineno-237-8" href="#__codelineno-237-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-237-9" name="__codelineno-237-9" href="#__codelineno-237-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-237-10" name="__codelineno-237-10" href="#__codelineno-237-10"></a>
<a id="__codelineno-237-11" name="__codelineno-237-11" href="#__codelineno-237-11"></a>
<a id="__codelineno-237-12" name="__codelineno-237-12" href="#__codelineno-237-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-237-13" name="__codelineno-237-13" href="#__codelineno-237-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-237-14" name="__codelineno-237-14" href="#__codelineno-237-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-237-15" name="__codelineno-237-15" href="#__codelineno-237-15"></a>
<a id="__codelineno-237-16" name="__codelineno-237-16" href="#__codelineno-237-16"></a>
<a id="__codelineno-237-17" name="__codelineno-237-17" href="#__codelineno-237-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-237-18" name="__codelineno-237-18" href="#__codelineno-237-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-237-19" name="__codelineno-237-19" href="#__codelineno-237-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-238-1" name="__codelineno-238-1" href="#__codelineno-238-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-238-2" name="__codelineno-238-2" href="#__codelineno-238-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-238-3" name="__codelineno-238-3" href="#__codelineno-238-3"></a>
<a id="__codelineno-238-4" name="__codelineno-238-4" href="#__codelineno-238-4"></a>
<a id="__codelineno-238-5" name="__codelineno-238-5" href="#__codelineno-238-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-238-6" name="__codelineno-238-6" href="#__codelineno-238-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-238-7" name="__codelineno-238-7" href="#__codelineno-238-7"></a>
<a id="__codelineno-238-8" name="__codelineno-238-8" href="#__codelineno-238-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-238-9" name="__codelineno-238-9" href="#__codelineno-238-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-238-10" name="__codelineno-238-10" href="#__codelineno-238-10"></a>
<a id="__codelineno-238-11" name="__codelineno-238-11" href="#__codelineno-238-11"></a>
<a id="__codelineno-238-12" name="__codelineno-238-12" href="#__codelineno-238-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-238-13" name="__codelineno-238-13" href="#__codelineno-238-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-238-14" name="__codelineno-238-14" href="#__codelineno-238-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-238-15" name="__codelineno-238-15" href="#__codelineno-238-15"></a>
<a id="__codelineno-238-16" name="__codelineno-238-16" href="#__codelineno-238-16"></a>
<a id="__codelineno-238-17" name="__codelineno-238-17" href="#__codelineno-238-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-238-18" name="__codelineno-238-18" href="#__codelineno-238-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-238-19" name="__codelineno-238-19" href="#__codelineno-238-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-239-1" name="__codelineno-239-1" href="#__codelineno-239-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-239-2" name="__codelineno-239-2" href="#__codelineno-239-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-239-3" name="__codelineno-239-3" href="#__codelineno-239-3"></a>
<a id="__codelineno-239-4" name="__codelineno-239-4" href="#__codelineno-239-4"></a>
<a id="__codelineno-239-5" name="__codelineno-239-5" href="#__codelineno-239-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-239-6" name="__codelineno-239-6" href="#__codelineno-239-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-239-7" name="__codelineno-239-7" href="#__codelineno-239-7"></a>
<a id="__codelineno-239-8" name="__codelineno-239-8" href="#__codelineno-239-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-239-9" name="__codelineno-239-9" href="#__codelineno-239-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-239-10" name="__codelineno-239-10" href="#__codelineno-239-10"></a>
<a id="__codelineno-239-11" name="__codelineno-239-11" href="#__codelineno-239-11"></a>
<a id="__codelineno-239-12" name="__codelineno-239-12" href="#__codelineno-239-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-239-13" name="__codelineno-239-13" href="#__codelineno-239-13"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-239-14" name="__codelineno-239-14" href="#__codelineno-239-14"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-239-15" name="__codelineno-239-15" href="#__codelineno-239-15"></a>
<a id="__codelineno-239-16" name="__codelineno-239-16" href="#__codelineno-239-16"></a>
<a id="__codelineno-239-17" name="__codelineno-239-17" href="#__codelineno-239-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-239-18" name="__codelineno-239-18" href="#__codelineno-239-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-239-19" name="__codelineno-239-19" href="#__codelineno-239-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="31:10"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><input id="__tabbed_31_2" name="__tabbed_31" type="radio" /><input id="__tabbed_31_3" name="__tabbed_31" type="radio" /><input id="__tabbed_31_4" name="__tabbed_31" type="radio" /><input id="__tabbed_31_5" name="__tabbed_31" type="radio" /><input id="__tabbed_31_6" name="__tabbed_31" type="radio" /><input id="__tabbed_31_7" name="__tabbed_31" type="radio" /><input id="__tabbed_31_8" name="__tabbed_31" type="radio" /><input id="__tabbed_31_9" name="__tabbed_31" type="radio" /><input id="__tabbed_31_10" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">OpenAI</label><label for="__tabbed_31_2">Anthropic</label><label for="__tabbed_31_3">Google</label><label for="__tabbed_31_4">Groq</label><label for="__tabbed_31_5">xAI</label><label for="__tabbed_31_6">Mistral</label><label for="__tabbed_31_7">Cohere</label><label for="__tabbed_31_8">LiteLLM</label><label for="__tabbed_31_9">Azure AI</label><label for="__tabbed_31_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-240-1" name="__codelineno-240-1" href="#__codelineno-240-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-240-2" name="__codelineno-240-2" href="#__codelineno-240-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-240-3" name="__codelineno-240-3" href="#__codelineno-240-3"></a>
<a id="__codelineno-240-4" name="__codelineno-240-4" href="#__codelineno-240-4"></a>
<a id="__codelineno-240-5" name="__codelineno-240-5" href="#__codelineno-240-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-240-6" name="__codelineno-240-6" href="#__codelineno-240-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-240-7" name="__codelineno-240-7" href="#__codelineno-240-7"></a>
<a id="__codelineno-240-8" name="__codelineno-240-8" href="#__codelineno-240-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-240-9" name="__codelineno-240-9" href="#__codelineno-240-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-240-10" name="__codelineno-240-10" href="#__codelineno-240-10"></a>
<a id="__codelineno-240-11" name="__codelineno-240-11" href="#__codelineno-240-11"></a>
<a id="__codelineno-240-12" name="__codelineno-240-12" href="#__codelineno-240-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-240-13" name="__codelineno-240-13" href="#__codelineno-240-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-240-14" name="__codelineno-240-14" href="#__codelineno-240-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-240-15" name="__codelineno-240-15" href="#__codelineno-240-15"></a>
<a id="__codelineno-240-16" name="__codelineno-240-16" href="#__codelineno-240-16"></a>
<a id="__codelineno-240-17" name="__codelineno-240-17" href="#__codelineno-240-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-240-18" name="__codelineno-240-18" href="#__codelineno-240-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-240-19" name="__codelineno-240-19" href="#__codelineno-240-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-241-1" name="__codelineno-241-1" href="#__codelineno-241-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-241-2" name="__codelineno-241-2" href="#__codelineno-241-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-241-3" name="__codelineno-241-3" href="#__codelineno-241-3"></a>
<a id="__codelineno-241-4" name="__codelineno-241-4" href="#__codelineno-241-4"></a>
<a id="__codelineno-241-5" name="__codelineno-241-5" href="#__codelineno-241-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-241-6" name="__codelineno-241-6" href="#__codelineno-241-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-241-7" name="__codelineno-241-7" href="#__codelineno-241-7"></a>
<a id="__codelineno-241-8" name="__codelineno-241-8" href="#__codelineno-241-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-241-9" name="__codelineno-241-9" href="#__codelineno-241-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-241-10" name="__codelineno-241-10" href="#__codelineno-241-10"></a>
<a id="__codelineno-241-11" name="__codelineno-241-11" href="#__codelineno-241-11"></a>
<a id="__codelineno-241-12" name="__codelineno-241-12" href="#__codelineno-241-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-241-13" name="__codelineno-241-13" href="#__codelineno-241-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-241-14" name="__codelineno-241-14" href="#__codelineno-241-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-241-15" name="__codelineno-241-15" href="#__codelineno-241-15"></a>
<a id="__codelineno-241-16" name="__codelineno-241-16" href="#__codelineno-241-16"></a>
<a id="__codelineno-241-17" name="__codelineno-241-17" href="#__codelineno-241-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-241-18" name="__codelineno-241-18" href="#__codelineno-241-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-241-19" name="__codelineno-241-19" href="#__codelineno-241-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-242-1" name="__codelineno-242-1" href="#__codelineno-242-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-242-2" name="__codelineno-242-2" href="#__codelineno-242-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-242-3" name="__codelineno-242-3" href="#__codelineno-242-3"></a>
<a id="__codelineno-242-4" name="__codelineno-242-4" href="#__codelineno-242-4"></a>
<a id="__codelineno-242-5" name="__codelineno-242-5" href="#__codelineno-242-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-242-6" name="__codelineno-242-6" href="#__codelineno-242-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-242-7" name="__codelineno-242-7" href="#__codelineno-242-7"></a>
<a id="__codelineno-242-8" name="__codelineno-242-8" href="#__codelineno-242-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-242-9" name="__codelineno-242-9" href="#__codelineno-242-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-242-10" name="__codelineno-242-10" href="#__codelineno-242-10"></a>
<a id="__codelineno-242-11" name="__codelineno-242-11" href="#__codelineno-242-11"></a>
<a id="__codelineno-242-12" name="__codelineno-242-12" href="#__codelineno-242-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-242-13" name="__codelineno-242-13" href="#__codelineno-242-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-242-14" name="__codelineno-242-14" href="#__codelineno-242-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-242-15" name="__codelineno-242-15" href="#__codelineno-242-15"></a>
<a id="__codelineno-242-16" name="__codelineno-242-16" href="#__codelineno-242-16"></a>
<a id="__codelineno-242-17" name="__codelineno-242-17" href="#__codelineno-242-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-242-18" name="__codelineno-242-18" href="#__codelineno-242-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-242-19" name="__codelineno-242-19" href="#__codelineno-242-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-243-1" name="__codelineno-243-1" href="#__codelineno-243-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-243-2" name="__codelineno-243-2" href="#__codelineno-243-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-243-3" name="__codelineno-243-3" href="#__codelineno-243-3"></a>
<a id="__codelineno-243-4" name="__codelineno-243-4" href="#__codelineno-243-4"></a>
<a id="__codelineno-243-5" name="__codelineno-243-5" href="#__codelineno-243-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-243-6" name="__codelineno-243-6" href="#__codelineno-243-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-243-7" name="__codelineno-243-7" href="#__codelineno-243-7"></a>
<a id="__codelineno-243-8" name="__codelineno-243-8" href="#__codelineno-243-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-243-9" name="__codelineno-243-9" href="#__codelineno-243-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-243-10" name="__codelineno-243-10" href="#__codelineno-243-10"></a>
<a id="__codelineno-243-11" name="__codelineno-243-11" href="#__codelineno-243-11"></a>
<a id="__codelineno-243-12" name="__codelineno-243-12" href="#__codelineno-243-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-243-13" name="__codelineno-243-13" href="#__codelineno-243-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-243-14" name="__codelineno-243-14" href="#__codelineno-243-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-243-15" name="__codelineno-243-15" href="#__codelineno-243-15"></a>
<a id="__codelineno-243-16" name="__codelineno-243-16" href="#__codelineno-243-16"></a>
<a id="__codelineno-243-17" name="__codelineno-243-17" href="#__codelineno-243-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-243-18" name="__codelineno-243-18" href="#__codelineno-243-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-243-19" name="__codelineno-243-19" href="#__codelineno-243-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-244-1" name="__codelineno-244-1" href="#__codelineno-244-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-244-2" name="__codelineno-244-2" href="#__codelineno-244-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-244-3" name="__codelineno-244-3" href="#__codelineno-244-3"></a>
<a id="__codelineno-244-4" name="__codelineno-244-4" href="#__codelineno-244-4"></a>
<a id="__codelineno-244-5" name="__codelineno-244-5" href="#__codelineno-244-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-244-6" name="__codelineno-244-6" href="#__codelineno-244-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-244-7" name="__codelineno-244-7" href="#__codelineno-244-7"></a>
<a id="__codelineno-244-8" name="__codelineno-244-8" href="#__codelineno-244-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-244-9" name="__codelineno-244-9" href="#__codelineno-244-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-244-10" name="__codelineno-244-10" href="#__codelineno-244-10"></a>
<a id="__codelineno-244-11" name="__codelineno-244-11" href="#__codelineno-244-11"></a>
<a id="__codelineno-244-12" name="__codelineno-244-12" href="#__codelineno-244-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-244-13" name="__codelineno-244-13" href="#__codelineno-244-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-244-14" name="__codelineno-244-14" href="#__codelineno-244-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-244-15" name="__codelineno-244-15" href="#__codelineno-244-15"></a>
<a id="__codelineno-244-16" name="__codelineno-244-16" href="#__codelineno-244-16"></a>
<a id="__codelineno-244-17" name="__codelineno-244-17" href="#__codelineno-244-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-244-18" name="__codelineno-244-18" href="#__codelineno-244-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-244-19" name="__codelineno-244-19" href="#__codelineno-244-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-245-1" name="__codelineno-245-1" href="#__codelineno-245-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-245-2" name="__codelineno-245-2" href="#__codelineno-245-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-245-3" name="__codelineno-245-3" href="#__codelineno-245-3"></a>
<a id="__codelineno-245-4" name="__codelineno-245-4" href="#__codelineno-245-4"></a>
<a id="__codelineno-245-5" name="__codelineno-245-5" href="#__codelineno-245-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-245-6" name="__codelineno-245-6" href="#__codelineno-245-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-245-7" name="__codelineno-245-7" href="#__codelineno-245-7"></a>
<a id="__codelineno-245-8" name="__codelineno-245-8" href="#__codelineno-245-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-245-9" name="__codelineno-245-9" href="#__codelineno-245-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-245-10" name="__codelineno-245-10" href="#__codelineno-245-10"></a>
<a id="__codelineno-245-11" name="__codelineno-245-11" href="#__codelineno-245-11"></a>
<a id="__codelineno-245-12" name="__codelineno-245-12" href="#__codelineno-245-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-245-13" name="__codelineno-245-13" href="#__codelineno-245-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-245-14" name="__codelineno-245-14" href="#__codelineno-245-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-245-15" name="__codelineno-245-15" href="#__codelineno-245-15"></a>
<a id="__codelineno-245-16" name="__codelineno-245-16" href="#__codelineno-245-16"></a>
<a id="__codelineno-245-17" name="__codelineno-245-17" href="#__codelineno-245-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-245-18" name="__codelineno-245-18" href="#__codelineno-245-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-245-19" name="__codelineno-245-19" href="#__codelineno-245-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-246-1" name="__codelineno-246-1" href="#__codelineno-246-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-246-2" name="__codelineno-246-2" href="#__codelineno-246-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-246-3" name="__codelineno-246-3" href="#__codelineno-246-3"></a>
<a id="__codelineno-246-4" name="__codelineno-246-4" href="#__codelineno-246-4"></a>
<a id="__codelineno-246-5" name="__codelineno-246-5" href="#__codelineno-246-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-246-6" name="__codelineno-246-6" href="#__codelineno-246-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-246-7" name="__codelineno-246-7" href="#__codelineno-246-7"></a>
<a id="__codelineno-246-8" name="__codelineno-246-8" href="#__codelineno-246-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-246-9" name="__codelineno-246-9" href="#__codelineno-246-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-246-10" name="__codelineno-246-10" href="#__codelineno-246-10"></a>
<a id="__codelineno-246-11" name="__codelineno-246-11" href="#__codelineno-246-11"></a>
<a id="__codelineno-246-12" name="__codelineno-246-12" href="#__codelineno-246-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-246-13" name="__codelineno-246-13" href="#__codelineno-246-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-246-14" name="__codelineno-246-14" href="#__codelineno-246-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-246-15" name="__codelineno-246-15" href="#__codelineno-246-15"></a>
<a id="__codelineno-246-16" name="__codelineno-246-16" href="#__codelineno-246-16"></a>
<a id="__codelineno-246-17" name="__codelineno-246-17" href="#__codelineno-246-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-246-18" name="__codelineno-246-18" href="#__codelineno-246-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-246-19" name="__codelineno-246-19" href="#__codelineno-246-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-247-1" name="__codelineno-247-1" href="#__codelineno-247-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-247-2" name="__codelineno-247-2" href="#__codelineno-247-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-247-3" name="__codelineno-247-3" href="#__codelineno-247-3"></a>
<a id="__codelineno-247-4" name="__codelineno-247-4" href="#__codelineno-247-4"></a>
<a id="__codelineno-247-5" name="__codelineno-247-5" href="#__codelineno-247-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-247-6" name="__codelineno-247-6" href="#__codelineno-247-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-247-7" name="__codelineno-247-7" href="#__codelineno-247-7"></a>
<a id="__codelineno-247-8" name="__codelineno-247-8" href="#__codelineno-247-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-247-9" name="__codelineno-247-9" href="#__codelineno-247-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-247-10" name="__codelineno-247-10" href="#__codelineno-247-10"></a>
<a id="__codelineno-247-11" name="__codelineno-247-11" href="#__codelineno-247-11"></a>
<a id="__codelineno-247-12" name="__codelineno-247-12" href="#__codelineno-247-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-247-13" name="__codelineno-247-13" href="#__codelineno-247-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-247-14" name="__codelineno-247-14" href="#__codelineno-247-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-247-15" name="__codelineno-247-15" href="#__codelineno-247-15"></a>
<a id="__codelineno-247-16" name="__codelineno-247-16" href="#__codelineno-247-16"></a>
<a id="__codelineno-247-17" name="__codelineno-247-17" href="#__codelineno-247-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-247-18" name="__codelineno-247-18" href="#__codelineno-247-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-247-19" name="__codelineno-247-19" href="#__codelineno-247-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-248-1" name="__codelineno-248-1" href="#__codelineno-248-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-248-2" name="__codelineno-248-2" href="#__codelineno-248-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-248-3" name="__codelineno-248-3" href="#__codelineno-248-3"></a>
<a id="__codelineno-248-4" name="__codelineno-248-4" href="#__codelineno-248-4"></a>
<a id="__codelineno-248-5" name="__codelineno-248-5" href="#__codelineno-248-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-248-6" name="__codelineno-248-6" href="#__codelineno-248-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-248-7" name="__codelineno-248-7" href="#__codelineno-248-7"></a>
<a id="__codelineno-248-8" name="__codelineno-248-8" href="#__codelineno-248-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-248-9" name="__codelineno-248-9" href="#__codelineno-248-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-248-10" name="__codelineno-248-10" href="#__codelineno-248-10"></a>
<a id="__codelineno-248-11" name="__codelineno-248-11" href="#__codelineno-248-11"></a>
<a id="__codelineno-248-12" name="__codelineno-248-12" href="#__codelineno-248-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-248-13" name="__codelineno-248-13" href="#__codelineno-248-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-248-14" name="__codelineno-248-14" href="#__codelineno-248-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-248-15" name="__codelineno-248-15" href="#__codelineno-248-15"></a>
<a id="__codelineno-248-16" name="__codelineno-248-16" href="#__codelineno-248-16"></a>
<a id="__codelineno-248-17" name="__codelineno-248-17" href="#__codelineno-248-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-248-18" name="__codelineno-248-18" href="#__codelineno-248-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-248-19" name="__codelineno-248-19" href="#__codelineno-248-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-249-1" name="__codelineno-249-1" href="#__codelineno-249-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-249-2" name="__codelineno-249-2" href="#__codelineno-249-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-249-3" name="__codelineno-249-3" href="#__codelineno-249-3"></a>
<a id="__codelineno-249-4" name="__codelineno-249-4" href="#__codelineno-249-4"></a>
<a id="__codelineno-249-5" name="__codelineno-249-5" href="#__codelineno-249-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-249-6" name="__codelineno-249-6" href="#__codelineno-249-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An extracted book.&quot;&quot;&quot;</span>
<a id="__codelineno-249-7" name="__codelineno-249-7" href="#__codelineno-249-7"></a>
<a id="__codelineno-249-8" name="__codelineno-249-8" href="#__codelineno-249-8"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-249-9" name="__codelineno-249-9" href="#__codelineno-249-9"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-249-10" name="__codelineno-249-10" href="#__codelineno-249-10"></a>
<a id="__codelineno-249-11" name="__codelineno-249-11" href="#__codelineno-249-11"></a>
<a id="__codelineno-249-12" name="__codelineno-249-12" href="#__codelineno-249-12"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-249-13" name="__codelineno-249-13" href="#__codelineno-249-13"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-249-14" name="__codelineno-249-14" href="#__codelineno-249-14"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-249-15" name="__codelineno-249-15" href="#__codelineno-249-15"></a>
<a id="__codelineno-249-16" name="__codelineno-249-16" href="#__codelineno-249-16"></a>
<a id="__codelineno-249-17" name="__codelineno-249-17" href="#__codelineno-249-17"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-249-18" name="__codelineno-249-18" href="#__codelineno-249-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-249-19" name="__codelineno-249-19" href="#__codelineno-249-19"></a><span class="c1"># Output: title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="few-shot-examples">Few-Shot Examples<a class="headerlink" href="#few-shot-examples" title="Permanent link">&para;</a></h2>
<p>Adding few-shot examples to your response model can improve results by demonstrating exactly how to adhere to your desired output.</p>
<p>We take advantage of Pydantic's <a href="https://docs.pydantic.dev/latest/concepts/fields/"><code>Field</code></a> and <a href="https://docs.pydantic.dev/latest/concepts/config/"><code>ConfigDict</code></a> to add these examples to response models:</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="32:4"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><input id="__tabbed_32_2" name="__tabbed_32" type="radio" /><input id="__tabbed_32_3" name="__tabbed_32" type="radio" /><input id="__tabbed_32_4" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">Shorthand</label><label for="__tabbed_32_2">Messages</label><label for="__tabbed_32_3">String Template</label><label for="__tabbed_32_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="33:10"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><input id="__tabbed_33_3" name="__tabbed_33" type="radio" /><input id="__tabbed_33_4" name="__tabbed_33" type="radio" /><input id="__tabbed_33_5" name="__tabbed_33" type="radio" /><input id="__tabbed_33_6" name="__tabbed_33" type="radio" /><input id="__tabbed_33_7" name="__tabbed_33" type="radio" /><input id="__tabbed_33_8" name="__tabbed_33" type="radio" /><input id="__tabbed_33_9" name="__tabbed_33" type="radio" /><input id="__tabbed_33_10" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">OpenAI</label><label for="__tabbed_33_2">Anthropic</label><label for="__tabbed_33_3">Google</label><label for="__tabbed_33_4">Groq</label><label for="__tabbed_33_5">xAI</label><label for="__tabbed_33_6">Mistral</label><label for="__tabbed_33_7">Cohere</label><label for="__tabbed_33_8">LiteLLM</label><label for="__tabbed_33_9">Azure AI</label><label for="__tabbed_33_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-250-1" name="__codelineno-250-1" href="#__codelineno-250-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-250-2" name="__codelineno-250-2" href="#__codelineno-250-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-250-3" name="__codelineno-250-3" href="#__codelineno-250-3"></a>
<a id="__codelineno-250-4" name="__codelineno-250-4" href="#__codelineno-250-4"></a>
<a id="__codelineno-250-5" name="__codelineno-250-5" href="#__codelineno-250-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-250-6" name="__codelineno-250-6" href="#__codelineno-250-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-250-7" name="__codelineno-250-7" href="#__codelineno-250-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-250-8" name="__codelineno-250-8" href="#__codelineno-250-8"></a>
<a id="__codelineno-250-9" name="__codelineno-250-9" href="#__codelineno-250-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-250-10" name="__codelineno-250-10" href="#__codelineno-250-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-250-11" name="__codelineno-250-11" href="#__codelineno-250-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-250-12" name="__codelineno-250-12" href="#__codelineno-250-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-250-13" name="__codelineno-250-13" href="#__codelineno-250-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-250-14" name="__codelineno-250-14" href="#__codelineno-250-14"></a>        <span class="p">}</span>
<a id="__codelineno-250-15" name="__codelineno-250-15" href="#__codelineno-250-15"></a>    <span class="p">)</span>
<a id="__codelineno-250-16" name="__codelineno-250-16" href="#__codelineno-250-16"></a>
<a id="__codelineno-250-17" name="__codelineno-250-17" href="#__codelineno-250-17"></a>
<a id="__codelineno-250-18" name="__codelineno-250-18" href="#__codelineno-250-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-250-19" name="__codelineno-250-19" href="#__codelineno-250-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-250-20" name="__codelineno-250-20" href="#__codelineno-250-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-250-21" name="__codelineno-250-21" href="#__codelineno-250-21"></a>
<a id="__codelineno-250-22" name="__codelineno-250-22" href="#__codelineno-250-22"></a>
<a id="__codelineno-250-23" name="__codelineno-250-23" href="#__codelineno-250-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-250-24" name="__codelineno-250-24" href="#__codelineno-250-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-250-25" name="__codelineno-250-25" href="#__codelineno-250-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-251-1" name="__codelineno-251-1" href="#__codelineno-251-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-251-2" name="__codelineno-251-2" href="#__codelineno-251-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-251-3" name="__codelineno-251-3" href="#__codelineno-251-3"></a>
<a id="__codelineno-251-4" name="__codelineno-251-4" href="#__codelineno-251-4"></a>
<a id="__codelineno-251-5" name="__codelineno-251-5" href="#__codelineno-251-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-251-6" name="__codelineno-251-6" href="#__codelineno-251-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-251-7" name="__codelineno-251-7" href="#__codelineno-251-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-251-8" name="__codelineno-251-8" href="#__codelineno-251-8"></a>
<a id="__codelineno-251-9" name="__codelineno-251-9" href="#__codelineno-251-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-251-10" name="__codelineno-251-10" href="#__codelineno-251-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-251-11" name="__codelineno-251-11" href="#__codelineno-251-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-251-12" name="__codelineno-251-12" href="#__codelineno-251-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-251-13" name="__codelineno-251-13" href="#__codelineno-251-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-251-14" name="__codelineno-251-14" href="#__codelineno-251-14"></a>        <span class="p">}</span>
<a id="__codelineno-251-15" name="__codelineno-251-15" href="#__codelineno-251-15"></a>    <span class="p">)</span>
<a id="__codelineno-251-16" name="__codelineno-251-16" href="#__codelineno-251-16"></a>
<a id="__codelineno-251-17" name="__codelineno-251-17" href="#__codelineno-251-17"></a>
<a id="__codelineno-251-18" name="__codelineno-251-18" href="#__codelineno-251-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-251-19" name="__codelineno-251-19" href="#__codelineno-251-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-251-20" name="__codelineno-251-20" href="#__codelineno-251-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-251-21" name="__codelineno-251-21" href="#__codelineno-251-21"></a>
<a id="__codelineno-251-22" name="__codelineno-251-22" href="#__codelineno-251-22"></a>
<a id="__codelineno-251-23" name="__codelineno-251-23" href="#__codelineno-251-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-251-24" name="__codelineno-251-24" href="#__codelineno-251-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-251-25" name="__codelineno-251-25" href="#__codelineno-251-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-252-1" name="__codelineno-252-1" href="#__codelineno-252-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-252-2" name="__codelineno-252-2" href="#__codelineno-252-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-252-3" name="__codelineno-252-3" href="#__codelineno-252-3"></a>
<a id="__codelineno-252-4" name="__codelineno-252-4" href="#__codelineno-252-4"></a>
<a id="__codelineno-252-5" name="__codelineno-252-5" href="#__codelineno-252-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-252-6" name="__codelineno-252-6" href="#__codelineno-252-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-252-7" name="__codelineno-252-7" href="#__codelineno-252-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-252-8" name="__codelineno-252-8" href="#__codelineno-252-8"></a>
<a id="__codelineno-252-9" name="__codelineno-252-9" href="#__codelineno-252-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-252-10" name="__codelineno-252-10" href="#__codelineno-252-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-252-11" name="__codelineno-252-11" href="#__codelineno-252-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-252-12" name="__codelineno-252-12" href="#__codelineno-252-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-252-13" name="__codelineno-252-13" href="#__codelineno-252-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-252-14" name="__codelineno-252-14" href="#__codelineno-252-14"></a>        <span class="p">}</span>
<a id="__codelineno-252-15" name="__codelineno-252-15" href="#__codelineno-252-15"></a>    <span class="p">)</span>
<a id="__codelineno-252-16" name="__codelineno-252-16" href="#__codelineno-252-16"></a>
<a id="__codelineno-252-17" name="__codelineno-252-17" href="#__codelineno-252-17"></a>
<a id="__codelineno-252-18" name="__codelineno-252-18" href="#__codelineno-252-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-252-19" name="__codelineno-252-19" href="#__codelineno-252-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-252-20" name="__codelineno-252-20" href="#__codelineno-252-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-252-21" name="__codelineno-252-21" href="#__codelineno-252-21"></a>
<a id="__codelineno-252-22" name="__codelineno-252-22" href="#__codelineno-252-22"></a>
<a id="__codelineno-252-23" name="__codelineno-252-23" href="#__codelineno-252-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-252-24" name="__codelineno-252-24" href="#__codelineno-252-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-252-25" name="__codelineno-252-25" href="#__codelineno-252-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-253-1" name="__codelineno-253-1" href="#__codelineno-253-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-253-2" name="__codelineno-253-2" href="#__codelineno-253-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-253-3" name="__codelineno-253-3" href="#__codelineno-253-3"></a>
<a id="__codelineno-253-4" name="__codelineno-253-4" href="#__codelineno-253-4"></a>
<a id="__codelineno-253-5" name="__codelineno-253-5" href="#__codelineno-253-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-253-6" name="__codelineno-253-6" href="#__codelineno-253-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-253-7" name="__codelineno-253-7" href="#__codelineno-253-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-253-8" name="__codelineno-253-8" href="#__codelineno-253-8"></a>
<a id="__codelineno-253-9" name="__codelineno-253-9" href="#__codelineno-253-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-253-10" name="__codelineno-253-10" href="#__codelineno-253-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-253-11" name="__codelineno-253-11" href="#__codelineno-253-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-253-12" name="__codelineno-253-12" href="#__codelineno-253-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-253-13" name="__codelineno-253-13" href="#__codelineno-253-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-253-14" name="__codelineno-253-14" href="#__codelineno-253-14"></a>        <span class="p">}</span>
<a id="__codelineno-253-15" name="__codelineno-253-15" href="#__codelineno-253-15"></a>    <span class="p">)</span>
<a id="__codelineno-253-16" name="__codelineno-253-16" href="#__codelineno-253-16"></a>
<a id="__codelineno-253-17" name="__codelineno-253-17" href="#__codelineno-253-17"></a>
<a id="__codelineno-253-18" name="__codelineno-253-18" href="#__codelineno-253-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-253-19" name="__codelineno-253-19" href="#__codelineno-253-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-253-20" name="__codelineno-253-20" href="#__codelineno-253-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-253-21" name="__codelineno-253-21" href="#__codelineno-253-21"></a>
<a id="__codelineno-253-22" name="__codelineno-253-22" href="#__codelineno-253-22"></a>
<a id="__codelineno-253-23" name="__codelineno-253-23" href="#__codelineno-253-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-253-24" name="__codelineno-253-24" href="#__codelineno-253-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-253-25" name="__codelineno-253-25" href="#__codelineno-253-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-254-1" name="__codelineno-254-1" href="#__codelineno-254-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-254-2" name="__codelineno-254-2" href="#__codelineno-254-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-254-3" name="__codelineno-254-3" href="#__codelineno-254-3"></a>
<a id="__codelineno-254-4" name="__codelineno-254-4" href="#__codelineno-254-4"></a>
<a id="__codelineno-254-5" name="__codelineno-254-5" href="#__codelineno-254-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-254-6" name="__codelineno-254-6" href="#__codelineno-254-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-254-7" name="__codelineno-254-7" href="#__codelineno-254-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-254-8" name="__codelineno-254-8" href="#__codelineno-254-8"></a>
<a id="__codelineno-254-9" name="__codelineno-254-9" href="#__codelineno-254-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-254-10" name="__codelineno-254-10" href="#__codelineno-254-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-254-11" name="__codelineno-254-11" href="#__codelineno-254-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-254-12" name="__codelineno-254-12" href="#__codelineno-254-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-254-13" name="__codelineno-254-13" href="#__codelineno-254-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-254-14" name="__codelineno-254-14" href="#__codelineno-254-14"></a>        <span class="p">}</span>
<a id="__codelineno-254-15" name="__codelineno-254-15" href="#__codelineno-254-15"></a>    <span class="p">)</span>
<a id="__codelineno-254-16" name="__codelineno-254-16" href="#__codelineno-254-16"></a>
<a id="__codelineno-254-17" name="__codelineno-254-17" href="#__codelineno-254-17"></a>
<a id="__codelineno-254-18" name="__codelineno-254-18" href="#__codelineno-254-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-254-19" name="__codelineno-254-19" href="#__codelineno-254-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-254-20" name="__codelineno-254-20" href="#__codelineno-254-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-254-21" name="__codelineno-254-21" href="#__codelineno-254-21"></a>
<a id="__codelineno-254-22" name="__codelineno-254-22" href="#__codelineno-254-22"></a>
<a id="__codelineno-254-23" name="__codelineno-254-23" href="#__codelineno-254-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-254-24" name="__codelineno-254-24" href="#__codelineno-254-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-254-25" name="__codelineno-254-25" href="#__codelineno-254-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-255-1" name="__codelineno-255-1" href="#__codelineno-255-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-255-2" name="__codelineno-255-2" href="#__codelineno-255-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-255-3" name="__codelineno-255-3" href="#__codelineno-255-3"></a>
<a id="__codelineno-255-4" name="__codelineno-255-4" href="#__codelineno-255-4"></a>
<a id="__codelineno-255-5" name="__codelineno-255-5" href="#__codelineno-255-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-255-6" name="__codelineno-255-6" href="#__codelineno-255-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-255-7" name="__codelineno-255-7" href="#__codelineno-255-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-255-8" name="__codelineno-255-8" href="#__codelineno-255-8"></a>
<a id="__codelineno-255-9" name="__codelineno-255-9" href="#__codelineno-255-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-255-10" name="__codelineno-255-10" href="#__codelineno-255-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-255-11" name="__codelineno-255-11" href="#__codelineno-255-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-255-12" name="__codelineno-255-12" href="#__codelineno-255-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-255-13" name="__codelineno-255-13" href="#__codelineno-255-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-255-14" name="__codelineno-255-14" href="#__codelineno-255-14"></a>        <span class="p">}</span>
<a id="__codelineno-255-15" name="__codelineno-255-15" href="#__codelineno-255-15"></a>    <span class="p">)</span>
<a id="__codelineno-255-16" name="__codelineno-255-16" href="#__codelineno-255-16"></a>
<a id="__codelineno-255-17" name="__codelineno-255-17" href="#__codelineno-255-17"></a>
<a id="__codelineno-255-18" name="__codelineno-255-18" href="#__codelineno-255-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-255-19" name="__codelineno-255-19" href="#__codelineno-255-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-255-20" name="__codelineno-255-20" href="#__codelineno-255-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-255-21" name="__codelineno-255-21" href="#__codelineno-255-21"></a>
<a id="__codelineno-255-22" name="__codelineno-255-22" href="#__codelineno-255-22"></a>
<a id="__codelineno-255-23" name="__codelineno-255-23" href="#__codelineno-255-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-255-24" name="__codelineno-255-24" href="#__codelineno-255-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-255-25" name="__codelineno-255-25" href="#__codelineno-255-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-256-1" name="__codelineno-256-1" href="#__codelineno-256-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-256-2" name="__codelineno-256-2" href="#__codelineno-256-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-256-3" name="__codelineno-256-3" href="#__codelineno-256-3"></a>
<a id="__codelineno-256-4" name="__codelineno-256-4" href="#__codelineno-256-4"></a>
<a id="__codelineno-256-5" name="__codelineno-256-5" href="#__codelineno-256-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-256-6" name="__codelineno-256-6" href="#__codelineno-256-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-256-7" name="__codelineno-256-7" href="#__codelineno-256-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-256-8" name="__codelineno-256-8" href="#__codelineno-256-8"></a>
<a id="__codelineno-256-9" name="__codelineno-256-9" href="#__codelineno-256-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-256-10" name="__codelineno-256-10" href="#__codelineno-256-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-256-11" name="__codelineno-256-11" href="#__codelineno-256-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-256-12" name="__codelineno-256-12" href="#__codelineno-256-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-256-13" name="__codelineno-256-13" href="#__codelineno-256-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-256-14" name="__codelineno-256-14" href="#__codelineno-256-14"></a>        <span class="p">}</span>
<a id="__codelineno-256-15" name="__codelineno-256-15" href="#__codelineno-256-15"></a>    <span class="p">)</span>
<a id="__codelineno-256-16" name="__codelineno-256-16" href="#__codelineno-256-16"></a>
<a id="__codelineno-256-17" name="__codelineno-256-17" href="#__codelineno-256-17"></a>
<a id="__codelineno-256-18" name="__codelineno-256-18" href="#__codelineno-256-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-256-19" name="__codelineno-256-19" href="#__codelineno-256-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-256-20" name="__codelineno-256-20" href="#__codelineno-256-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-256-21" name="__codelineno-256-21" href="#__codelineno-256-21"></a>
<a id="__codelineno-256-22" name="__codelineno-256-22" href="#__codelineno-256-22"></a>
<a id="__codelineno-256-23" name="__codelineno-256-23" href="#__codelineno-256-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-256-24" name="__codelineno-256-24" href="#__codelineno-256-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-256-25" name="__codelineno-256-25" href="#__codelineno-256-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-257-1" name="__codelineno-257-1" href="#__codelineno-257-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-257-2" name="__codelineno-257-2" href="#__codelineno-257-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-257-3" name="__codelineno-257-3" href="#__codelineno-257-3"></a>
<a id="__codelineno-257-4" name="__codelineno-257-4" href="#__codelineno-257-4"></a>
<a id="__codelineno-257-5" name="__codelineno-257-5" href="#__codelineno-257-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-257-6" name="__codelineno-257-6" href="#__codelineno-257-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-257-7" name="__codelineno-257-7" href="#__codelineno-257-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-257-8" name="__codelineno-257-8" href="#__codelineno-257-8"></a>
<a id="__codelineno-257-9" name="__codelineno-257-9" href="#__codelineno-257-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-257-10" name="__codelineno-257-10" href="#__codelineno-257-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-257-11" name="__codelineno-257-11" href="#__codelineno-257-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-257-12" name="__codelineno-257-12" href="#__codelineno-257-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-257-13" name="__codelineno-257-13" href="#__codelineno-257-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-257-14" name="__codelineno-257-14" href="#__codelineno-257-14"></a>        <span class="p">}</span>
<a id="__codelineno-257-15" name="__codelineno-257-15" href="#__codelineno-257-15"></a>    <span class="p">)</span>
<a id="__codelineno-257-16" name="__codelineno-257-16" href="#__codelineno-257-16"></a>
<a id="__codelineno-257-17" name="__codelineno-257-17" href="#__codelineno-257-17"></a>
<a id="__codelineno-257-18" name="__codelineno-257-18" href="#__codelineno-257-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-257-19" name="__codelineno-257-19" href="#__codelineno-257-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-257-20" name="__codelineno-257-20" href="#__codelineno-257-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-257-21" name="__codelineno-257-21" href="#__codelineno-257-21"></a>
<a id="__codelineno-257-22" name="__codelineno-257-22" href="#__codelineno-257-22"></a>
<a id="__codelineno-257-23" name="__codelineno-257-23" href="#__codelineno-257-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-257-24" name="__codelineno-257-24" href="#__codelineno-257-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-257-25" name="__codelineno-257-25" href="#__codelineno-257-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-258-1" name="__codelineno-258-1" href="#__codelineno-258-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-258-2" name="__codelineno-258-2" href="#__codelineno-258-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-258-3" name="__codelineno-258-3" href="#__codelineno-258-3"></a>
<a id="__codelineno-258-4" name="__codelineno-258-4" href="#__codelineno-258-4"></a>
<a id="__codelineno-258-5" name="__codelineno-258-5" href="#__codelineno-258-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-258-6" name="__codelineno-258-6" href="#__codelineno-258-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-258-7" name="__codelineno-258-7" href="#__codelineno-258-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-258-8" name="__codelineno-258-8" href="#__codelineno-258-8"></a>
<a id="__codelineno-258-9" name="__codelineno-258-9" href="#__codelineno-258-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-258-10" name="__codelineno-258-10" href="#__codelineno-258-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-258-11" name="__codelineno-258-11" href="#__codelineno-258-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-258-12" name="__codelineno-258-12" href="#__codelineno-258-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-258-13" name="__codelineno-258-13" href="#__codelineno-258-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-258-14" name="__codelineno-258-14" href="#__codelineno-258-14"></a>        <span class="p">}</span>
<a id="__codelineno-258-15" name="__codelineno-258-15" href="#__codelineno-258-15"></a>    <span class="p">)</span>
<a id="__codelineno-258-16" name="__codelineno-258-16" href="#__codelineno-258-16"></a>
<a id="__codelineno-258-17" name="__codelineno-258-17" href="#__codelineno-258-17"></a>
<a id="__codelineno-258-18" name="__codelineno-258-18" href="#__codelineno-258-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-258-19" name="__codelineno-258-19" href="#__codelineno-258-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-258-20" name="__codelineno-258-20" href="#__codelineno-258-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-258-21" name="__codelineno-258-21" href="#__codelineno-258-21"></a>
<a id="__codelineno-258-22" name="__codelineno-258-22" href="#__codelineno-258-22"></a>
<a id="__codelineno-258-23" name="__codelineno-258-23" href="#__codelineno-258-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-258-24" name="__codelineno-258-24" href="#__codelineno-258-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-258-25" name="__codelineno-258-25" href="#__codelineno-258-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-259-1" name="__codelineno-259-1" href="#__codelineno-259-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-259-2" name="__codelineno-259-2" href="#__codelineno-259-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-259-3" name="__codelineno-259-3" href="#__codelineno-259-3"></a>
<a id="__codelineno-259-4" name="__codelineno-259-4" href="#__codelineno-259-4"></a>
<a id="__codelineno-259-5" name="__codelineno-259-5" href="#__codelineno-259-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-259-6" name="__codelineno-259-6" href="#__codelineno-259-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-259-7" name="__codelineno-259-7" href="#__codelineno-259-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-259-8" name="__codelineno-259-8" href="#__codelineno-259-8"></a>
<a id="__codelineno-259-9" name="__codelineno-259-9" href="#__codelineno-259-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-259-10" name="__codelineno-259-10" href="#__codelineno-259-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-259-11" name="__codelineno-259-11" href="#__codelineno-259-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-259-12" name="__codelineno-259-12" href="#__codelineno-259-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-259-13" name="__codelineno-259-13" href="#__codelineno-259-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-259-14" name="__codelineno-259-14" href="#__codelineno-259-14"></a>        <span class="p">}</span>
<a id="__codelineno-259-15" name="__codelineno-259-15" href="#__codelineno-259-15"></a>    <span class="p">)</span>
<a id="__codelineno-259-16" name="__codelineno-259-16" href="#__codelineno-259-16"></a>
<a id="__codelineno-259-17" name="__codelineno-259-17" href="#__codelineno-259-17"></a>
<a id="__codelineno-259-18" name="__codelineno-259-18" href="#__codelineno-259-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-259-19" name="__codelineno-259-19" href="#__codelineno-259-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-259-20" name="__codelineno-259-20" href="#__codelineno-259-20"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-259-21" name="__codelineno-259-21" href="#__codelineno-259-21"></a>
<a id="__codelineno-259-22" name="__codelineno-259-22" href="#__codelineno-259-22"></a>
<a id="__codelineno-259-23" name="__codelineno-259-23" href="#__codelineno-259-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-259-24" name="__codelineno-259-24" href="#__codelineno-259-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-259-25" name="__codelineno-259-25" href="#__codelineno-259-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="34:10"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><input id="__tabbed_34_2" name="__tabbed_34" type="radio" /><input id="__tabbed_34_3" name="__tabbed_34" type="radio" /><input id="__tabbed_34_4" name="__tabbed_34" type="radio" /><input id="__tabbed_34_5" name="__tabbed_34" type="radio" /><input id="__tabbed_34_6" name="__tabbed_34" type="radio" /><input id="__tabbed_34_7" name="__tabbed_34" type="radio" /><input id="__tabbed_34_8" name="__tabbed_34" type="radio" /><input id="__tabbed_34_9" name="__tabbed_34" type="radio" /><input id="__tabbed_34_10" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">OpenAI</label><label for="__tabbed_34_2">Anthropic</label><label for="__tabbed_34_3">Google</label><label for="__tabbed_34_4">Groq</label><label for="__tabbed_34_5">xAI</label><label for="__tabbed_34_6">Mistral</label><label for="__tabbed_34_7">Cohere</label><label for="__tabbed_34_8">LiteLLM</label><label for="__tabbed_34_9">Azure AI</label><label for="__tabbed_34_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-260-1" name="__codelineno-260-1" href="#__codelineno-260-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-260-2" name="__codelineno-260-2" href="#__codelineno-260-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-260-3" name="__codelineno-260-3" href="#__codelineno-260-3"></a>
<a id="__codelineno-260-4" name="__codelineno-260-4" href="#__codelineno-260-4"></a>
<a id="__codelineno-260-5" name="__codelineno-260-5" href="#__codelineno-260-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-260-6" name="__codelineno-260-6" href="#__codelineno-260-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-260-7" name="__codelineno-260-7" href="#__codelineno-260-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-260-8" name="__codelineno-260-8" href="#__codelineno-260-8"></a>
<a id="__codelineno-260-9" name="__codelineno-260-9" href="#__codelineno-260-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-260-10" name="__codelineno-260-10" href="#__codelineno-260-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-260-11" name="__codelineno-260-11" href="#__codelineno-260-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-260-12" name="__codelineno-260-12" href="#__codelineno-260-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-260-13" name="__codelineno-260-13" href="#__codelineno-260-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-260-14" name="__codelineno-260-14" href="#__codelineno-260-14"></a>        <span class="p">}</span>
<a id="__codelineno-260-15" name="__codelineno-260-15" href="#__codelineno-260-15"></a>    <span class="p">)</span>
<a id="__codelineno-260-16" name="__codelineno-260-16" href="#__codelineno-260-16"></a>
<a id="__codelineno-260-17" name="__codelineno-260-17" href="#__codelineno-260-17"></a>
<a id="__codelineno-260-18" name="__codelineno-260-18" href="#__codelineno-260-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-260-19" name="__codelineno-260-19" href="#__codelineno-260-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-260-20" name="__codelineno-260-20" href="#__codelineno-260-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-260-21" name="__codelineno-260-21" href="#__codelineno-260-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-260-22" name="__codelineno-260-22" href="#__codelineno-260-22"></a>    <span class="p">)</span>
<a id="__codelineno-260-23" name="__codelineno-260-23" href="#__codelineno-260-23"></a>
<a id="__codelineno-260-24" name="__codelineno-260-24" href="#__codelineno-260-24"></a>
<a id="__codelineno-260-25" name="__codelineno-260-25" href="#__codelineno-260-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-260-26" name="__codelineno-260-26" href="#__codelineno-260-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-260-27" name="__codelineno-260-27" href="#__codelineno-260-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-261-1" name="__codelineno-261-1" href="#__codelineno-261-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-261-2" name="__codelineno-261-2" href="#__codelineno-261-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-261-3" name="__codelineno-261-3" href="#__codelineno-261-3"></a>
<a id="__codelineno-261-4" name="__codelineno-261-4" href="#__codelineno-261-4"></a>
<a id="__codelineno-261-5" name="__codelineno-261-5" href="#__codelineno-261-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-261-6" name="__codelineno-261-6" href="#__codelineno-261-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-261-7" name="__codelineno-261-7" href="#__codelineno-261-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-261-8" name="__codelineno-261-8" href="#__codelineno-261-8"></a>
<a id="__codelineno-261-9" name="__codelineno-261-9" href="#__codelineno-261-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-261-10" name="__codelineno-261-10" href="#__codelineno-261-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-261-11" name="__codelineno-261-11" href="#__codelineno-261-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-261-12" name="__codelineno-261-12" href="#__codelineno-261-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-261-13" name="__codelineno-261-13" href="#__codelineno-261-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-261-14" name="__codelineno-261-14" href="#__codelineno-261-14"></a>        <span class="p">}</span>
<a id="__codelineno-261-15" name="__codelineno-261-15" href="#__codelineno-261-15"></a>    <span class="p">)</span>
<a id="__codelineno-261-16" name="__codelineno-261-16" href="#__codelineno-261-16"></a>
<a id="__codelineno-261-17" name="__codelineno-261-17" href="#__codelineno-261-17"></a>
<a id="__codelineno-261-18" name="__codelineno-261-18" href="#__codelineno-261-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-261-19" name="__codelineno-261-19" href="#__codelineno-261-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-261-20" name="__codelineno-261-20" href="#__codelineno-261-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-261-21" name="__codelineno-261-21" href="#__codelineno-261-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-261-22" name="__codelineno-261-22" href="#__codelineno-261-22"></a>    <span class="p">)</span>
<a id="__codelineno-261-23" name="__codelineno-261-23" href="#__codelineno-261-23"></a>
<a id="__codelineno-261-24" name="__codelineno-261-24" href="#__codelineno-261-24"></a>
<a id="__codelineno-261-25" name="__codelineno-261-25" href="#__codelineno-261-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-261-26" name="__codelineno-261-26" href="#__codelineno-261-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-261-27" name="__codelineno-261-27" href="#__codelineno-261-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-262-1" name="__codelineno-262-1" href="#__codelineno-262-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-262-2" name="__codelineno-262-2" href="#__codelineno-262-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-262-3" name="__codelineno-262-3" href="#__codelineno-262-3"></a>
<a id="__codelineno-262-4" name="__codelineno-262-4" href="#__codelineno-262-4"></a>
<a id="__codelineno-262-5" name="__codelineno-262-5" href="#__codelineno-262-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-262-6" name="__codelineno-262-6" href="#__codelineno-262-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-262-7" name="__codelineno-262-7" href="#__codelineno-262-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-262-8" name="__codelineno-262-8" href="#__codelineno-262-8"></a>
<a id="__codelineno-262-9" name="__codelineno-262-9" href="#__codelineno-262-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-262-10" name="__codelineno-262-10" href="#__codelineno-262-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-262-11" name="__codelineno-262-11" href="#__codelineno-262-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-262-12" name="__codelineno-262-12" href="#__codelineno-262-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-262-13" name="__codelineno-262-13" href="#__codelineno-262-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-262-14" name="__codelineno-262-14" href="#__codelineno-262-14"></a>        <span class="p">}</span>
<a id="__codelineno-262-15" name="__codelineno-262-15" href="#__codelineno-262-15"></a>    <span class="p">)</span>
<a id="__codelineno-262-16" name="__codelineno-262-16" href="#__codelineno-262-16"></a>
<a id="__codelineno-262-17" name="__codelineno-262-17" href="#__codelineno-262-17"></a>
<a id="__codelineno-262-18" name="__codelineno-262-18" href="#__codelineno-262-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-262-19" name="__codelineno-262-19" href="#__codelineno-262-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-262-20" name="__codelineno-262-20" href="#__codelineno-262-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-262-21" name="__codelineno-262-21" href="#__codelineno-262-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-262-22" name="__codelineno-262-22" href="#__codelineno-262-22"></a>    <span class="p">)</span>
<a id="__codelineno-262-23" name="__codelineno-262-23" href="#__codelineno-262-23"></a>
<a id="__codelineno-262-24" name="__codelineno-262-24" href="#__codelineno-262-24"></a>
<a id="__codelineno-262-25" name="__codelineno-262-25" href="#__codelineno-262-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-262-26" name="__codelineno-262-26" href="#__codelineno-262-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-262-27" name="__codelineno-262-27" href="#__codelineno-262-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-263-1" name="__codelineno-263-1" href="#__codelineno-263-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-263-2" name="__codelineno-263-2" href="#__codelineno-263-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-263-3" name="__codelineno-263-3" href="#__codelineno-263-3"></a>
<a id="__codelineno-263-4" name="__codelineno-263-4" href="#__codelineno-263-4"></a>
<a id="__codelineno-263-5" name="__codelineno-263-5" href="#__codelineno-263-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-263-6" name="__codelineno-263-6" href="#__codelineno-263-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-263-7" name="__codelineno-263-7" href="#__codelineno-263-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-263-8" name="__codelineno-263-8" href="#__codelineno-263-8"></a>
<a id="__codelineno-263-9" name="__codelineno-263-9" href="#__codelineno-263-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-263-10" name="__codelineno-263-10" href="#__codelineno-263-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-263-11" name="__codelineno-263-11" href="#__codelineno-263-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-263-12" name="__codelineno-263-12" href="#__codelineno-263-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-263-13" name="__codelineno-263-13" href="#__codelineno-263-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-263-14" name="__codelineno-263-14" href="#__codelineno-263-14"></a>        <span class="p">}</span>
<a id="__codelineno-263-15" name="__codelineno-263-15" href="#__codelineno-263-15"></a>    <span class="p">)</span>
<a id="__codelineno-263-16" name="__codelineno-263-16" href="#__codelineno-263-16"></a>
<a id="__codelineno-263-17" name="__codelineno-263-17" href="#__codelineno-263-17"></a>
<a id="__codelineno-263-18" name="__codelineno-263-18" href="#__codelineno-263-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-263-19" name="__codelineno-263-19" href="#__codelineno-263-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-263-20" name="__codelineno-263-20" href="#__codelineno-263-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-263-21" name="__codelineno-263-21" href="#__codelineno-263-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-263-22" name="__codelineno-263-22" href="#__codelineno-263-22"></a>    <span class="p">)</span>
<a id="__codelineno-263-23" name="__codelineno-263-23" href="#__codelineno-263-23"></a>
<a id="__codelineno-263-24" name="__codelineno-263-24" href="#__codelineno-263-24"></a>
<a id="__codelineno-263-25" name="__codelineno-263-25" href="#__codelineno-263-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-263-26" name="__codelineno-263-26" href="#__codelineno-263-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-263-27" name="__codelineno-263-27" href="#__codelineno-263-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-264-1" name="__codelineno-264-1" href="#__codelineno-264-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-264-2" name="__codelineno-264-2" href="#__codelineno-264-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-264-3" name="__codelineno-264-3" href="#__codelineno-264-3"></a>
<a id="__codelineno-264-4" name="__codelineno-264-4" href="#__codelineno-264-4"></a>
<a id="__codelineno-264-5" name="__codelineno-264-5" href="#__codelineno-264-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-264-6" name="__codelineno-264-6" href="#__codelineno-264-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-264-7" name="__codelineno-264-7" href="#__codelineno-264-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-264-8" name="__codelineno-264-8" href="#__codelineno-264-8"></a>
<a id="__codelineno-264-9" name="__codelineno-264-9" href="#__codelineno-264-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-264-10" name="__codelineno-264-10" href="#__codelineno-264-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-264-11" name="__codelineno-264-11" href="#__codelineno-264-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-264-12" name="__codelineno-264-12" href="#__codelineno-264-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-264-13" name="__codelineno-264-13" href="#__codelineno-264-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-264-14" name="__codelineno-264-14" href="#__codelineno-264-14"></a>        <span class="p">}</span>
<a id="__codelineno-264-15" name="__codelineno-264-15" href="#__codelineno-264-15"></a>    <span class="p">)</span>
<a id="__codelineno-264-16" name="__codelineno-264-16" href="#__codelineno-264-16"></a>
<a id="__codelineno-264-17" name="__codelineno-264-17" href="#__codelineno-264-17"></a>
<a id="__codelineno-264-18" name="__codelineno-264-18" href="#__codelineno-264-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-264-19" name="__codelineno-264-19" href="#__codelineno-264-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-264-20" name="__codelineno-264-20" href="#__codelineno-264-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-264-21" name="__codelineno-264-21" href="#__codelineno-264-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-264-22" name="__codelineno-264-22" href="#__codelineno-264-22"></a>    <span class="p">)</span>
<a id="__codelineno-264-23" name="__codelineno-264-23" href="#__codelineno-264-23"></a>
<a id="__codelineno-264-24" name="__codelineno-264-24" href="#__codelineno-264-24"></a>
<a id="__codelineno-264-25" name="__codelineno-264-25" href="#__codelineno-264-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-264-26" name="__codelineno-264-26" href="#__codelineno-264-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-264-27" name="__codelineno-264-27" href="#__codelineno-264-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-265-1" name="__codelineno-265-1" href="#__codelineno-265-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-265-2" name="__codelineno-265-2" href="#__codelineno-265-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-265-3" name="__codelineno-265-3" href="#__codelineno-265-3"></a>
<a id="__codelineno-265-4" name="__codelineno-265-4" href="#__codelineno-265-4"></a>
<a id="__codelineno-265-5" name="__codelineno-265-5" href="#__codelineno-265-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-265-6" name="__codelineno-265-6" href="#__codelineno-265-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-265-7" name="__codelineno-265-7" href="#__codelineno-265-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-265-8" name="__codelineno-265-8" href="#__codelineno-265-8"></a>
<a id="__codelineno-265-9" name="__codelineno-265-9" href="#__codelineno-265-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-265-10" name="__codelineno-265-10" href="#__codelineno-265-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-265-11" name="__codelineno-265-11" href="#__codelineno-265-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-265-12" name="__codelineno-265-12" href="#__codelineno-265-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-265-13" name="__codelineno-265-13" href="#__codelineno-265-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-265-14" name="__codelineno-265-14" href="#__codelineno-265-14"></a>        <span class="p">}</span>
<a id="__codelineno-265-15" name="__codelineno-265-15" href="#__codelineno-265-15"></a>    <span class="p">)</span>
<a id="__codelineno-265-16" name="__codelineno-265-16" href="#__codelineno-265-16"></a>
<a id="__codelineno-265-17" name="__codelineno-265-17" href="#__codelineno-265-17"></a>
<a id="__codelineno-265-18" name="__codelineno-265-18" href="#__codelineno-265-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-265-19" name="__codelineno-265-19" href="#__codelineno-265-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-265-20" name="__codelineno-265-20" href="#__codelineno-265-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-265-21" name="__codelineno-265-21" href="#__codelineno-265-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-265-22" name="__codelineno-265-22" href="#__codelineno-265-22"></a>    <span class="p">)</span>
<a id="__codelineno-265-23" name="__codelineno-265-23" href="#__codelineno-265-23"></a>
<a id="__codelineno-265-24" name="__codelineno-265-24" href="#__codelineno-265-24"></a>
<a id="__codelineno-265-25" name="__codelineno-265-25" href="#__codelineno-265-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-265-26" name="__codelineno-265-26" href="#__codelineno-265-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-265-27" name="__codelineno-265-27" href="#__codelineno-265-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-266-1" name="__codelineno-266-1" href="#__codelineno-266-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-266-2" name="__codelineno-266-2" href="#__codelineno-266-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-266-3" name="__codelineno-266-3" href="#__codelineno-266-3"></a>
<a id="__codelineno-266-4" name="__codelineno-266-4" href="#__codelineno-266-4"></a>
<a id="__codelineno-266-5" name="__codelineno-266-5" href="#__codelineno-266-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-266-6" name="__codelineno-266-6" href="#__codelineno-266-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-266-7" name="__codelineno-266-7" href="#__codelineno-266-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-266-8" name="__codelineno-266-8" href="#__codelineno-266-8"></a>
<a id="__codelineno-266-9" name="__codelineno-266-9" href="#__codelineno-266-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-266-10" name="__codelineno-266-10" href="#__codelineno-266-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-266-11" name="__codelineno-266-11" href="#__codelineno-266-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-266-12" name="__codelineno-266-12" href="#__codelineno-266-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-266-13" name="__codelineno-266-13" href="#__codelineno-266-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-266-14" name="__codelineno-266-14" href="#__codelineno-266-14"></a>        <span class="p">}</span>
<a id="__codelineno-266-15" name="__codelineno-266-15" href="#__codelineno-266-15"></a>    <span class="p">)</span>
<a id="__codelineno-266-16" name="__codelineno-266-16" href="#__codelineno-266-16"></a>
<a id="__codelineno-266-17" name="__codelineno-266-17" href="#__codelineno-266-17"></a>
<a id="__codelineno-266-18" name="__codelineno-266-18" href="#__codelineno-266-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-266-19" name="__codelineno-266-19" href="#__codelineno-266-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-266-20" name="__codelineno-266-20" href="#__codelineno-266-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-266-21" name="__codelineno-266-21" href="#__codelineno-266-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-266-22" name="__codelineno-266-22" href="#__codelineno-266-22"></a>    <span class="p">)</span>
<a id="__codelineno-266-23" name="__codelineno-266-23" href="#__codelineno-266-23"></a>
<a id="__codelineno-266-24" name="__codelineno-266-24" href="#__codelineno-266-24"></a>
<a id="__codelineno-266-25" name="__codelineno-266-25" href="#__codelineno-266-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-266-26" name="__codelineno-266-26" href="#__codelineno-266-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-266-27" name="__codelineno-266-27" href="#__codelineno-266-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-267-1" name="__codelineno-267-1" href="#__codelineno-267-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-267-2" name="__codelineno-267-2" href="#__codelineno-267-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-267-3" name="__codelineno-267-3" href="#__codelineno-267-3"></a>
<a id="__codelineno-267-4" name="__codelineno-267-4" href="#__codelineno-267-4"></a>
<a id="__codelineno-267-5" name="__codelineno-267-5" href="#__codelineno-267-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-267-6" name="__codelineno-267-6" href="#__codelineno-267-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-267-7" name="__codelineno-267-7" href="#__codelineno-267-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-267-8" name="__codelineno-267-8" href="#__codelineno-267-8"></a>
<a id="__codelineno-267-9" name="__codelineno-267-9" href="#__codelineno-267-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-267-10" name="__codelineno-267-10" href="#__codelineno-267-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-267-11" name="__codelineno-267-11" href="#__codelineno-267-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-267-12" name="__codelineno-267-12" href="#__codelineno-267-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-267-13" name="__codelineno-267-13" href="#__codelineno-267-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-267-14" name="__codelineno-267-14" href="#__codelineno-267-14"></a>        <span class="p">}</span>
<a id="__codelineno-267-15" name="__codelineno-267-15" href="#__codelineno-267-15"></a>    <span class="p">)</span>
<a id="__codelineno-267-16" name="__codelineno-267-16" href="#__codelineno-267-16"></a>
<a id="__codelineno-267-17" name="__codelineno-267-17" href="#__codelineno-267-17"></a>
<a id="__codelineno-267-18" name="__codelineno-267-18" href="#__codelineno-267-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-267-19" name="__codelineno-267-19" href="#__codelineno-267-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-267-20" name="__codelineno-267-20" href="#__codelineno-267-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-267-21" name="__codelineno-267-21" href="#__codelineno-267-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-267-22" name="__codelineno-267-22" href="#__codelineno-267-22"></a>    <span class="p">)</span>
<a id="__codelineno-267-23" name="__codelineno-267-23" href="#__codelineno-267-23"></a>
<a id="__codelineno-267-24" name="__codelineno-267-24" href="#__codelineno-267-24"></a>
<a id="__codelineno-267-25" name="__codelineno-267-25" href="#__codelineno-267-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-267-26" name="__codelineno-267-26" href="#__codelineno-267-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-267-27" name="__codelineno-267-27" href="#__codelineno-267-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-268-1" name="__codelineno-268-1" href="#__codelineno-268-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-268-2" name="__codelineno-268-2" href="#__codelineno-268-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-268-3" name="__codelineno-268-3" href="#__codelineno-268-3"></a>
<a id="__codelineno-268-4" name="__codelineno-268-4" href="#__codelineno-268-4"></a>
<a id="__codelineno-268-5" name="__codelineno-268-5" href="#__codelineno-268-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-268-6" name="__codelineno-268-6" href="#__codelineno-268-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-268-7" name="__codelineno-268-7" href="#__codelineno-268-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-268-8" name="__codelineno-268-8" href="#__codelineno-268-8"></a>
<a id="__codelineno-268-9" name="__codelineno-268-9" href="#__codelineno-268-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-268-10" name="__codelineno-268-10" href="#__codelineno-268-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-268-11" name="__codelineno-268-11" href="#__codelineno-268-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-268-12" name="__codelineno-268-12" href="#__codelineno-268-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-268-13" name="__codelineno-268-13" href="#__codelineno-268-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-268-14" name="__codelineno-268-14" href="#__codelineno-268-14"></a>        <span class="p">}</span>
<a id="__codelineno-268-15" name="__codelineno-268-15" href="#__codelineno-268-15"></a>    <span class="p">)</span>
<a id="__codelineno-268-16" name="__codelineno-268-16" href="#__codelineno-268-16"></a>
<a id="__codelineno-268-17" name="__codelineno-268-17" href="#__codelineno-268-17"></a>
<a id="__codelineno-268-18" name="__codelineno-268-18" href="#__codelineno-268-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-268-19" name="__codelineno-268-19" href="#__codelineno-268-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-268-20" name="__codelineno-268-20" href="#__codelineno-268-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-268-21" name="__codelineno-268-21" href="#__codelineno-268-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-268-22" name="__codelineno-268-22" href="#__codelineno-268-22"></a>    <span class="p">)</span>
<a id="__codelineno-268-23" name="__codelineno-268-23" href="#__codelineno-268-23"></a>
<a id="__codelineno-268-24" name="__codelineno-268-24" href="#__codelineno-268-24"></a>
<a id="__codelineno-268-25" name="__codelineno-268-25" href="#__codelineno-268-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-268-26" name="__codelineno-268-26" href="#__codelineno-268-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-268-27" name="__codelineno-268-27" href="#__codelineno-268-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-269-1" name="__codelineno-269-1" href="#__codelineno-269-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-269-2" name="__codelineno-269-2" href="#__codelineno-269-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-269-3" name="__codelineno-269-3" href="#__codelineno-269-3"></a>
<a id="__codelineno-269-4" name="__codelineno-269-4" href="#__codelineno-269-4"></a>
<a id="__codelineno-269-5" name="__codelineno-269-5" href="#__codelineno-269-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-269-6" name="__codelineno-269-6" href="#__codelineno-269-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-269-7" name="__codelineno-269-7" href="#__codelineno-269-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-269-8" name="__codelineno-269-8" href="#__codelineno-269-8"></a>
<a id="__codelineno-269-9" name="__codelineno-269-9" href="#__codelineno-269-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-269-10" name="__codelineno-269-10" href="#__codelineno-269-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-269-11" name="__codelineno-269-11" href="#__codelineno-269-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-269-12" name="__codelineno-269-12" href="#__codelineno-269-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-269-13" name="__codelineno-269-13" href="#__codelineno-269-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-269-14" name="__codelineno-269-14" href="#__codelineno-269-14"></a>        <span class="p">}</span>
<a id="__codelineno-269-15" name="__codelineno-269-15" href="#__codelineno-269-15"></a>    <span class="p">)</span>
<a id="__codelineno-269-16" name="__codelineno-269-16" href="#__codelineno-269-16"></a>
<a id="__codelineno-269-17" name="__codelineno-269-17" href="#__codelineno-269-17"></a>
<a id="__codelineno-269-18" name="__codelineno-269-18" href="#__codelineno-269-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-269-19" name="__codelineno-269-19" href="#__codelineno-269-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-269-20" name="__codelineno-269-20" href="#__codelineno-269-20"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span>
<a id="__codelineno-269-21" name="__codelineno-269-21" href="#__codelineno-269-21"></a>        <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span>
<a id="__codelineno-269-22" name="__codelineno-269-22" href="#__codelineno-269-22"></a>    <span class="p">)</span>
<a id="__codelineno-269-23" name="__codelineno-269-23" href="#__codelineno-269-23"></a>
<a id="__codelineno-269-24" name="__codelineno-269-24" href="#__codelineno-269-24"></a>
<a id="__codelineno-269-25" name="__codelineno-269-25" href="#__codelineno-269-25"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-269-26" name="__codelineno-269-26" href="#__codelineno-269-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-269-27" name="__codelineno-269-27" href="#__codelineno-269-27"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="35:10"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><input id="__tabbed_35_2" name="__tabbed_35" type="radio" /><input id="__tabbed_35_3" name="__tabbed_35" type="radio" /><input id="__tabbed_35_4" name="__tabbed_35" type="radio" /><input id="__tabbed_35_5" name="__tabbed_35" type="radio" /><input id="__tabbed_35_6" name="__tabbed_35" type="radio" /><input id="__tabbed_35_7" name="__tabbed_35" type="radio" /><input id="__tabbed_35_8" name="__tabbed_35" type="radio" /><input id="__tabbed_35_9" name="__tabbed_35" type="radio" /><input id="__tabbed_35_10" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">OpenAI</label><label for="__tabbed_35_2">Anthropic</label><label for="__tabbed_35_3">Google</label><label for="__tabbed_35_4">Groq</label><label for="__tabbed_35_5">xAI</label><label for="__tabbed_35_6">Mistral</label><label for="__tabbed_35_7">Cohere</label><label for="__tabbed_35_8">LiteLLM</label><label for="__tabbed_35_9">Azure AI</label><label for="__tabbed_35_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-270-1" name="__codelineno-270-1" href="#__codelineno-270-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-270-2" name="__codelineno-270-2" href="#__codelineno-270-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-270-3" name="__codelineno-270-3" href="#__codelineno-270-3"></a>
<a id="__codelineno-270-4" name="__codelineno-270-4" href="#__codelineno-270-4"></a>
<a id="__codelineno-270-5" name="__codelineno-270-5" href="#__codelineno-270-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-270-6" name="__codelineno-270-6" href="#__codelineno-270-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-270-7" name="__codelineno-270-7" href="#__codelineno-270-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-270-8" name="__codelineno-270-8" href="#__codelineno-270-8"></a>
<a id="__codelineno-270-9" name="__codelineno-270-9" href="#__codelineno-270-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-270-10" name="__codelineno-270-10" href="#__codelineno-270-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-270-11" name="__codelineno-270-11" href="#__codelineno-270-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-270-12" name="__codelineno-270-12" href="#__codelineno-270-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-270-13" name="__codelineno-270-13" href="#__codelineno-270-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-270-14" name="__codelineno-270-14" href="#__codelineno-270-14"></a>        <span class="p">}</span>
<a id="__codelineno-270-15" name="__codelineno-270-15" href="#__codelineno-270-15"></a>    <span class="p">)</span>
<a id="__codelineno-270-16" name="__codelineno-270-16" href="#__codelineno-270-16"></a>
<a id="__codelineno-270-17" name="__codelineno-270-17" href="#__codelineno-270-17"></a>
<a id="__codelineno-270-18" name="__codelineno-270-18" href="#__codelineno-270-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-270-19" name="__codelineno-270-19" href="#__codelineno-270-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-270-20" name="__codelineno-270-20" href="#__codelineno-270-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-270-21" name="__codelineno-270-21" href="#__codelineno-270-21"></a>
<a id="__codelineno-270-22" name="__codelineno-270-22" href="#__codelineno-270-22"></a>
<a id="__codelineno-270-23" name="__codelineno-270-23" href="#__codelineno-270-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-270-24" name="__codelineno-270-24" href="#__codelineno-270-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-270-25" name="__codelineno-270-25" href="#__codelineno-270-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-271-1" name="__codelineno-271-1" href="#__codelineno-271-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-271-2" name="__codelineno-271-2" href="#__codelineno-271-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-271-3" name="__codelineno-271-3" href="#__codelineno-271-3"></a>
<a id="__codelineno-271-4" name="__codelineno-271-4" href="#__codelineno-271-4"></a>
<a id="__codelineno-271-5" name="__codelineno-271-5" href="#__codelineno-271-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-271-6" name="__codelineno-271-6" href="#__codelineno-271-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-271-7" name="__codelineno-271-7" href="#__codelineno-271-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-271-8" name="__codelineno-271-8" href="#__codelineno-271-8"></a>
<a id="__codelineno-271-9" name="__codelineno-271-9" href="#__codelineno-271-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-271-10" name="__codelineno-271-10" href="#__codelineno-271-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-271-11" name="__codelineno-271-11" href="#__codelineno-271-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-271-12" name="__codelineno-271-12" href="#__codelineno-271-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-271-13" name="__codelineno-271-13" href="#__codelineno-271-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-271-14" name="__codelineno-271-14" href="#__codelineno-271-14"></a>        <span class="p">}</span>
<a id="__codelineno-271-15" name="__codelineno-271-15" href="#__codelineno-271-15"></a>    <span class="p">)</span>
<a id="__codelineno-271-16" name="__codelineno-271-16" href="#__codelineno-271-16"></a>
<a id="__codelineno-271-17" name="__codelineno-271-17" href="#__codelineno-271-17"></a>
<a id="__codelineno-271-18" name="__codelineno-271-18" href="#__codelineno-271-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-271-19" name="__codelineno-271-19" href="#__codelineno-271-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-271-20" name="__codelineno-271-20" href="#__codelineno-271-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-271-21" name="__codelineno-271-21" href="#__codelineno-271-21"></a>
<a id="__codelineno-271-22" name="__codelineno-271-22" href="#__codelineno-271-22"></a>
<a id="__codelineno-271-23" name="__codelineno-271-23" href="#__codelineno-271-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-271-24" name="__codelineno-271-24" href="#__codelineno-271-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-271-25" name="__codelineno-271-25" href="#__codelineno-271-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-272-1" name="__codelineno-272-1" href="#__codelineno-272-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-272-2" name="__codelineno-272-2" href="#__codelineno-272-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-272-3" name="__codelineno-272-3" href="#__codelineno-272-3"></a>
<a id="__codelineno-272-4" name="__codelineno-272-4" href="#__codelineno-272-4"></a>
<a id="__codelineno-272-5" name="__codelineno-272-5" href="#__codelineno-272-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-272-6" name="__codelineno-272-6" href="#__codelineno-272-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-272-7" name="__codelineno-272-7" href="#__codelineno-272-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-272-8" name="__codelineno-272-8" href="#__codelineno-272-8"></a>
<a id="__codelineno-272-9" name="__codelineno-272-9" href="#__codelineno-272-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-272-10" name="__codelineno-272-10" href="#__codelineno-272-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-272-11" name="__codelineno-272-11" href="#__codelineno-272-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-272-12" name="__codelineno-272-12" href="#__codelineno-272-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-272-13" name="__codelineno-272-13" href="#__codelineno-272-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-272-14" name="__codelineno-272-14" href="#__codelineno-272-14"></a>        <span class="p">}</span>
<a id="__codelineno-272-15" name="__codelineno-272-15" href="#__codelineno-272-15"></a>    <span class="p">)</span>
<a id="__codelineno-272-16" name="__codelineno-272-16" href="#__codelineno-272-16"></a>
<a id="__codelineno-272-17" name="__codelineno-272-17" href="#__codelineno-272-17"></a>
<a id="__codelineno-272-18" name="__codelineno-272-18" href="#__codelineno-272-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-272-19" name="__codelineno-272-19" href="#__codelineno-272-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-272-20" name="__codelineno-272-20" href="#__codelineno-272-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-272-21" name="__codelineno-272-21" href="#__codelineno-272-21"></a>
<a id="__codelineno-272-22" name="__codelineno-272-22" href="#__codelineno-272-22"></a>
<a id="__codelineno-272-23" name="__codelineno-272-23" href="#__codelineno-272-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-272-24" name="__codelineno-272-24" href="#__codelineno-272-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-272-25" name="__codelineno-272-25" href="#__codelineno-272-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-273-1" name="__codelineno-273-1" href="#__codelineno-273-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-273-2" name="__codelineno-273-2" href="#__codelineno-273-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-273-3" name="__codelineno-273-3" href="#__codelineno-273-3"></a>
<a id="__codelineno-273-4" name="__codelineno-273-4" href="#__codelineno-273-4"></a>
<a id="__codelineno-273-5" name="__codelineno-273-5" href="#__codelineno-273-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-273-6" name="__codelineno-273-6" href="#__codelineno-273-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-273-7" name="__codelineno-273-7" href="#__codelineno-273-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-273-8" name="__codelineno-273-8" href="#__codelineno-273-8"></a>
<a id="__codelineno-273-9" name="__codelineno-273-9" href="#__codelineno-273-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-273-10" name="__codelineno-273-10" href="#__codelineno-273-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-273-11" name="__codelineno-273-11" href="#__codelineno-273-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-273-12" name="__codelineno-273-12" href="#__codelineno-273-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-273-13" name="__codelineno-273-13" href="#__codelineno-273-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-273-14" name="__codelineno-273-14" href="#__codelineno-273-14"></a>        <span class="p">}</span>
<a id="__codelineno-273-15" name="__codelineno-273-15" href="#__codelineno-273-15"></a>    <span class="p">)</span>
<a id="__codelineno-273-16" name="__codelineno-273-16" href="#__codelineno-273-16"></a>
<a id="__codelineno-273-17" name="__codelineno-273-17" href="#__codelineno-273-17"></a>
<a id="__codelineno-273-18" name="__codelineno-273-18" href="#__codelineno-273-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-273-19" name="__codelineno-273-19" href="#__codelineno-273-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-273-20" name="__codelineno-273-20" href="#__codelineno-273-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-273-21" name="__codelineno-273-21" href="#__codelineno-273-21"></a>
<a id="__codelineno-273-22" name="__codelineno-273-22" href="#__codelineno-273-22"></a>
<a id="__codelineno-273-23" name="__codelineno-273-23" href="#__codelineno-273-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-273-24" name="__codelineno-273-24" href="#__codelineno-273-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-273-25" name="__codelineno-273-25" href="#__codelineno-273-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-274-1" name="__codelineno-274-1" href="#__codelineno-274-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-274-2" name="__codelineno-274-2" href="#__codelineno-274-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-274-3" name="__codelineno-274-3" href="#__codelineno-274-3"></a>
<a id="__codelineno-274-4" name="__codelineno-274-4" href="#__codelineno-274-4"></a>
<a id="__codelineno-274-5" name="__codelineno-274-5" href="#__codelineno-274-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-274-6" name="__codelineno-274-6" href="#__codelineno-274-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-274-7" name="__codelineno-274-7" href="#__codelineno-274-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-274-8" name="__codelineno-274-8" href="#__codelineno-274-8"></a>
<a id="__codelineno-274-9" name="__codelineno-274-9" href="#__codelineno-274-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-274-10" name="__codelineno-274-10" href="#__codelineno-274-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-274-11" name="__codelineno-274-11" href="#__codelineno-274-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-274-12" name="__codelineno-274-12" href="#__codelineno-274-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-274-13" name="__codelineno-274-13" href="#__codelineno-274-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-274-14" name="__codelineno-274-14" href="#__codelineno-274-14"></a>        <span class="p">}</span>
<a id="__codelineno-274-15" name="__codelineno-274-15" href="#__codelineno-274-15"></a>    <span class="p">)</span>
<a id="__codelineno-274-16" name="__codelineno-274-16" href="#__codelineno-274-16"></a>
<a id="__codelineno-274-17" name="__codelineno-274-17" href="#__codelineno-274-17"></a>
<a id="__codelineno-274-18" name="__codelineno-274-18" href="#__codelineno-274-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-274-19" name="__codelineno-274-19" href="#__codelineno-274-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-274-20" name="__codelineno-274-20" href="#__codelineno-274-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-274-21" name="__codelineno-274-21" href="#__codelineno-274-21"></a>
<a id="__codelineno-274-22" name="__codelineno-274-22" href="#__codelineno-274-22"></a>
<a id="__codelineno-274-23" name="__codelineno-274-23" href="#__codelineno-274-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-274-24" name="__codelineno-274-24" href="#__codelineno-274-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-274-25" name="__codelineno-274-25" href="#__codelineno-274-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-275-1" name="__codelineno-275-1" href="#__codelineno-275-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-275-2" name="__codelineno-275-2" href="#__codelineno-275-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-275-3" name="__codelineno-275-3" href="#__codelineno-275-3"></a>
<a id="__codelineno-275-4" name="__codelineno-275-4" href="#__codelineno-275-4"></a>
<a id="__codelineno-275-5" name="__codelineno-275-5" href="#__codelineno-275-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-275-6" name="__codelineno-275-6" href="#__codelineno-275-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-275-7" name="__codelineno-275-7" href="#__codelineno-275-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-275-8" name="__codelineno-275-8" href="#__codelineno-275-8"></a>
<a id="__codelineno-275-9" name="__codelineno-275-9" href="#__codelineno-275-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-275-10" name="__codelineno-275-10" href="#__codelineno-275-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-275-11" name="__codelineno-275-11" href="#__codelineno-275-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-275-12" name="__codelineno-275-12" href="#__codelineno-275-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-275-13" name="__codelineno-275-13" href="#__codelineno-275-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-275-14" name="__codelineno-275-14" href="#__codelineno-275-14"></a>        <span class="p">}</span>
<a id="__codelineno-275-15" name="__codelineno-275-15" href="#__codelineno-275-15"></a>    <span class="p">)</span>
<a id="__codelineno-275-16" name="__codelineno-275-16" href="#__codelineno-275-16"></a>
<a id="__codelineno-275-17" name="__codelineno-275-17" href="#__codelineno-275-17"></a>
<a id="__codelineno-275-18" name="__codelineno-275-18" href="#__codelineno-275-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-275-19" name="__codelineno-275-19" href="#__codelineno-275-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-275-20" name="__codelineno-275-20" href="#__codelineno-275-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-275-21" name="__codelineno-275-21" href="#__codelineno-275-21"></a>
<a id="__codelineno-275-22" name="__codelineno-275-22" href="#__codelineno-275-22"></a>
<a id="__codelineno-275-23" name="__codelineno-275-23" href="#__codelineno-275-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-275-24" name="__codelineno-275-24" href="#__codelineno-275-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-275-25" name="__codelineno-275-25" href="#__codelineno-275-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-276-1" name="__codelineno-276-1" href="#__codelineno-276-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-276-2" name="__codelineno-276-2" href="#__codelineno-276-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-276-3" name="__codelineno-276-3" href="#__codelineno-276-3"></a>
<a id="__codelineno-276-4" name="__codelineno-276-4" href="#__codelineno-276-4"></a>
<a id="__codelineno-276-5" name="__codelineno-276-5" href="#__codelineno-276-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-276-6" name="__codelineno-276-6" href="#__codelineno-276-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-276-7" name="__codelineno-276-7" href="#__codelineno-276-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-276-8" name="__codelineno-276-8" href="#__codelineno-276-8"></a>
<a id="__codelineno-276-9" name="__codelineno-276-9" href="#__codelineno-276-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-276-10" name="__codelineno-276-10" href="#__codelineno-276-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-276-11" name="__codelineno-276-11" href="#__codelineno-276-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-276-12" name="__codelineno-276-12" href="#__codelineno-276-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-276-13" name="__codelineno-276-13" href="#__codelineno-276-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-276-14" name="__codelineno-276-14" href="#__codelineno-276-14"></a>        <span class="p">}</span>
<a id="__codelineno-276-15" name="__codelineno-276-15" href="#__codelineno-276-15"></a>    <span class="p">)</span>
<a id="__codelineno-276-16" name="__codelineno-276-16" href="#__codelineno-276-16"></a>
<a id="__codelineno-276-17" name="__codelineno-276-17" href="#__codelineno-276-17"></a>
<a id="__codelineno-276-18" name="__codelineno-276-18" href="#__codelineno-276-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-276-19" name="__codelineno-276-19" href="#__codelineno-276-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-276-20" name="__codelineno-276-20" href="#__codelineno-276-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-276-21" name="__codelineno-276-21" href="#__codelineno-276-21"></a>
<a id="__codelineno-276-22" name="__codelineno-276-22" href="#__codelineno-276-22"></a>
<a id="__codelineno-276-23" name="__codelineno-276-23" href="#__codelineno-276-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-276-24" name="__codelineno-276-24" href="#__codelineno-276-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-276-25" name="__codelineno-276-25" href="#__codelineno-276-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-277-1" name="__codelineno-277-1" href="#__codelineno-277-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-277-2" name="__codelineno-277-2" href="#__codelineno-277-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-277-3" name="__codelineno-277-3" href="#__codelineno-277-3"></a>
<a id="__codelineno-277-4" name="__codelineno-277-4" href="#__codelineno-277-4"></a>
<a id="__codelineno-277-5" name="__codelineno-277-5" href="#__codelineno-277-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-277-6" name="__codelineno-277-6" href="#__codelineno-277-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-277-7" name="__codelineno-277-7" href="#__codelineno-277-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-277-8" name="__codelineno-277-8" href="#__codelineno-277-8"></a>
<a id="__codelineno-277-9" name="__codelineno-277-9" href="#__codelineno-277-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-277-10" name="__codelineno-277-10" href="#__codelineno-277-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-277-11" name="__codelineno-277-11" href="#__codelineno-277-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-277-12" name="__codelineno-277-12" href="#__codelineno-277-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-277-13" name="__codelineno-277-13" href="#__codelineno-277-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-277-14" name="__codelineno-277-14" href="#__codelineno-277-14"></a>        <span class="p">}</span>
<a id="__codelineno-277-15" name="__codelineno-277-15" href="#__codelineno-277-15"></a>    <span class="p">)</span>
<a id="__codelineno-277-16" name="__codelineno-277-16" href="#__codelineno-277-16"></a>
<a id="__codelineno-277-17" name="__codelineno-277-17" href="#__codelineno-277-17"></a>
<a id="__codelineno-277-18" name="__codelineno-277-18" href="#__codelineno-277-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-277-19" name="__codelineno-277-19" href="#__codelineno-277-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-277-20" name="__codelineno-277-20" href="#__codelineno-277-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-277-21" name="__codelineno-277-21" href="#__codelineno-277-21"></a>
<a id="__codelineno-277-22" name="__codelineno-277-22" href="#__codelineno-277-22"></a>
<a id="__codelineno-277-23" name="__codelineno-277-23" href="#__codelineno-277-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-277-24" name="__codelineno-277-24" href="#__codelineno-277-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-277-25" name="__codelineno-277-25" href="#__codelineno-277-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-278-1" name="__codelineno-278-1" href="#__codelineno-278-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-278-2" name="__codelineno-278-2" href="#__codelineno-278-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-278-3" name="__codelineno-278-3" href="#__codelineno-278-3"></a>
<a id="__codelineno-278-4" name="__codelineno-278-4" href="#__codelineno-278-4"></a>
<a id="__codelineno-278-5" name="__codelineno-278-5" href="#__codelineno-278-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-278-6" name="__codelineno-278-6" href="#__codelineno-278-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-278-7" name="__codelineno-278-7" href="#__codelineno-278-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-278-8" name="__codelineno-278-8" href="#__codelineno-278-8"></a>
<a id="__codelineno-278-9" name="__codelineno-278-9" href="#__codelineno-278-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-278-10" name="__codelineno-278-10" href="#__codelineno-278-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-278-11" name="__codelineno-278-11" href="#__codelineno-278-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-278-12" name="__codelineno-278-12" href="#__codelineno-278-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-278-13" name="__codelineno-278-13" href="#__codelineno-278-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-278-14" name="__codelineno-278-14" href="#__codelineno-278-14"></a>        <span class="p">}</span>
<a id="__codelineno-278-15" name="__codelineno-278-15" href="#__codelineno-278-15"></a>    <span class="p">)</span>
<a id="__codelineno-278-16" name="__codelineno-278-16" href="#__codelineno-278-16"></a>
<a id="__codelineno-278-17" name="__codelineno-278-17" href="#__codelineno-278-17"></a>
<a id="__codelineno-278-18" name="__codelineno-278-18" href="#__codelineno-278-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-278-19" name="__codelineno-278-19" href="#__codelineno-278-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-278-20" name="__codelineno-278-20" href="#__codelineno-278-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-278-21" name="__codelineno-278-21" href="#__codelineno-278-21"></a>
<a id="__codelineno-278-22" name="__codelineno-278-22" href="#__codelineno-278-22"></a>
<a id="__codelineno-278-23" name="__codelineno-278-23" href="#__codelineno-278-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-278-24" name="__codelineno-278-24" href="#__codelineno-278-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-278-25" name="__codelineno-278-25" href="#__codelineno-278-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-279-1" name="__codelineno-279-1" href="#__codelineno-279-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-279-2" name="__codelineno-279-2" href="#__codelineno-279-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-279-3" name="__codelineno-279-3" href="#__codelineno-279-3"></a>
<a id="__codelineno-279-4" name="__codelineno-279-4" href="#__codelineno-279-4"></a>
<a id="__codelineno-279-5" name="__codelineno-279-5" href="#__codelineno-279-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-279-6" name="__codelineno-279-6" href="#__codelineno-279-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-279-7" name="__codelineno-279-7" href="#__codelineno-279-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-279-8" name="__codelineno-279-8" href="#__codelineno-279-8"></a>
<a id="__codelineno-279-9" name="__codelineno-279-9" href="#__codelineno-279-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-279-10" name="__codelineno-279-10" href="#__codelineno-279-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-279-11" name="__codelineno-279-11" href="#__codelineno-279-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-279-12" name="__codelineno-279-12" href="#__codelineno-279-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-279-13" name="__codelineno-279-13" href="#__codelineno-279-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-279-14" name="__codelineno-279-14" href="#__codelineno-279-14"></a>        <span class="p">}</span>
<a id="__codelineno-279-15" name="__codelineno-279-15" href="#__codelineno-279-15"></a>    <span class="p">)</span>
<a id="__codelineno-279-16" name="__codelineno-279-16" href="#__codelineno-279-16"></a>
<a id="__codelineno-279-17" name="__codelineno-279-17" href="#__codelineno-279-17"></a>
<a id="__codelineno-279-18" name="__codelineno-279-18" href="#__codelineno-279-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-279-19" name="__codelineno-279-19" href="#__codelineno-279-19"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">)</span>
<a id="__codelineno-279-20" name="__codelineno-279-20" href="#__codelineno-279-20"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-279-21" name="__codelineno-279-21" href="#__codelineno-279-21"></a>
<a id="__codelineno-279-22" name="__codelineno-279-22" href="#__codelineno-279-22"></a>
<a id="__codelineno-279-23" name="__codelineno-279-23" href="#__codelineno-279-23"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-279-24" name="__codelineno-279-24" href="#__codelineno-279-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-279-25" name="__codelineno-279-25" href="#__codelineno-279-25"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="36:10"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><input id="__tabbed_36_2" name="__tabbed_36" type="radio" /><input id="__tabbed_36_3" name="__tabbed_36" type="radio" /><input id="__tabbed_36_4" name="__tabbed_36" type="radio" /><input id="__tabbed_36_5" name="__tabbed_36" type="radio" /><input id="__tabbed_36_6" name="__tabbed_36" type="radio" /><input id="__tabbed_36_7" name="__tabbed_36" type="radio" /><input id="__tabbed_36_8" name="__tabbed_36" type="radio" /><input id="__tabbed_36_9" name="__tabbed_36" type="radio" /><input id="__tabbed_36_10" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">OpenAI</label><label for="__tabbed_36_2">Anthropic</label><label for="__tabbed_36_3">Google</label><label for="__tabbed_36_4">Groq</label><label for="__tabbed_36_5">xAI</label><label for="__tabbed_36_6">Mistral</label><label for="__tabbed_36_7">Cohere</label><label for="__tabbed_36_8">LiteLLM</label><label for="__tabbed_36_9">Azure AI</label><label for="__tabbed_36_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-280-1" name="__codelineno-280-1" href="#__codelineno-280-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-280-2" name="__codelineno-280-2" href="#__codelineno-280-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-280-3" name="__codelineno-280-3" href="#__codelineno-280-3"></a>
<a id="__codelineno-280-4" name="__codelineno-280-4" href="#__codelineno-280-4"></a>
<a id="__codelineno-280-5" name="__codelineno-280-5" href="#__codelineno-280-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-280-6" name="__codelineno-280-6" href="#__codelineno-280-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-280-7" name="__codelineno-280-7" href="#__codelineno-280-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-280-8" name="__codelineno-280-8" href="#__codelineno-280-8"></a>
<a id="__codelineno-280-9" name="__codelineno-280-9" href="#__codelineno-280-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-280-10" name="__codelineno-280-10" href="#__codelineno-280-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-280-11" name="__codelineno-280-11" href="#__codelineno-280-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-280-12" name="__codelineno-280-12" href="#__codelineno-280-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-280-13" name="__codelineno-280-13" href="#__codelineno-280-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-280-14" name="__codelineno-280-14" href="#__codelineno-280-14"></a>        <span class="p">}</span>
<a id="__codelineno-280-15" name="__codelineno-280-15" href="#__codelineno-280-15"></a>    <span class="p">)</span>
<a id="__codelineno-280-16" name="__codelineno-280-16" href="#__codelineno-280-16"></a>
<a id="__codelineno-280-17" name="__codelineno-280-17" href="#__codelineno-280-17"></a>
<a id="__codelineno-280-18" name="__codelineno-280-18" href="#__codelineno-280-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-280-19" name="__codelineno-280-19" href="#__codelineno-280-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-280-20" name="__codelineno-280-20" href="#__codelineno-280-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-280-21" name="__codelineno-280-21" href="#__codelineno-280-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-280-22" name="__codelineno-280-22" href="#__codelineno-280-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-280-23" name="__codelineno-280-23" href="#__codelineno-280-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-280-24" name="__codelineno-280-24" href="#__codelineno-280-24"></a>        <span class="p">)</span>
<a id="__codelineno-280-25" name="__codelineno-280-25" href="#__codelineno-280-25"></a>    <span class="p">]</span>
<a id="__codelineno-280-26" name="__codelineno-280-26" href="#__codelineno-280-26"></a>
<a id="__codelineno-280-27" name="__codelineno-280-27" href="#__codelineno-280-27"></a>
<a id="__codelineno-280-28" name="__codelineno-280-28" href="#__codelineno-280-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-280-29" name="__codelineno-280-29" href="#__codelineno-280-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-280-30" name="__codelineno-280-30" href="#__codelineno-280-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-281-1" name="__codelineno-281-1" href="#__codelineno-281-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-281-2" name="__codelineno-281-2" href="#__codelineno-281-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-281-3" name="__codelineno-281-3" href="#__codelineno-281-3"></a>
<a id="__codelineno-281-4" name="__codelineno-281-4" href="#__codelineno-281-4"></a>
<a id="__codelineno-281-5" name="__codelineno-281-5" href="#__codelineno-281-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-281-6" name="__codelineno-281-6" href="#__codelineno-281-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-281-7" name="__codelineno-281-7" href="#__codelineno-281-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-281-8" name="__codelineno-281-8" href="#__codelineno-281-8"></a>
<a id="__codelineno-281-9" name="__codelineno-281-9" href="#__codelineno-281-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-281-10" name="__codelineno-281-10" href="#__codelineno-281-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-281-11" name="__codelineno-281-11" href="#__codelineno-281-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-281-12" name="__codelineno-281-12" href="#__codelineno-281-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-281-13" name="__codelineno-281-13" href="#__codelineno-281-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-281-14" name="__codelineno-281-14" href="#__codelineno-281-14"></a>        <span class="p">}</span>
<a id="__codelineno-281-15" name="__codelineno-281-15" href="#__codelineno-281-15"></a>    <span class="p">)</span>
<a id="__codelineno-281-16" name="__codelineno-281-16" href="#__codelineno-281-16"></a>
<a id="__codelineno-281-17" name="__codelineno-281-17" href="#__codelineno-281-17"></a>
<a id="__codelineno-281-18" name="__codelineno-281-18" href="#__codelineno-281-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-281-19" name="__codelineno-281-19" href="#__codelineno-281-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-281-20" name="__codelineno-281-20" href="#__codelineno-281-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-281-21" name="__codelineno-281-21" href="#__codelineno-281-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-281-22" name="__codelineno-281-22" href="#__codelineno-281-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-281-23" name="__codelineno-281-23" href="#__codelineno-281-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-281-24" name="__codelineno-281-24" href="#__codelineno-281-24"></a>        <span class="p">)</span>
<a id="__codelineno-281-25" name="__codelineno-281-25" href="#__codelineno-281-25"></a>    <span class="p">]</span>
<a id="__codelineno-281-26" name="__codelineno-281-26" href="#__codelineno-281-26"></a>
<a id="__codelineno-281-27" name="__codelineno-281-27" href="#__codelineno-281-27"></a>
<a id="__codelineno-281-28" name="__codelineno-281-28" href="#__codelineno-281-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-281-29" name="__codelineno-281-29" href="#__codelineno-281-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-281-30" name="__codelineno-281-30" href="#__codelineno-281-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-282-1" name="__codelineno-282-1" href="#__codelineno-282-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-282-2" name="__codelineno-282-2" href="#__codelineno-282-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-282-3" name="__codelineno-282-3" href="#__codelineno-282-3"></a>
<a id="__codelineno-282-4" name="__codelineno-282-4" href="#__codelineno-282-4"></a>
<a id="__codelineno-282-5" name="__codelineno-282-5" href="#__codelineno-282-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-282-6" name="__codelineno-282-6" href="#__codelineno-282-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-282-7" name="__codelineno-282-7" href="#__codelineno-282-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-282-8" name="__codelineno-282-8" href="#__codelineno-282-8"></a>
<a id="__codelineno-282-9" name="__codelineno-282-9" href="#__codelineno-282-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-282-10" name="__codelineno-282-10" href="#__codelineno-282-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-282-11" name="__codelineno-282-11" href="#__codelineno-282-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-282-12" name="__codelineno-282-12" href="#__codelineno-282-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-282-13" name="__codelineno-282-13" href="#__codelineno-282-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-282-14" name="__codelineno-282-14" href="#__codelineno-282-14"></a>        <span class="p">}</span>
<a id="__codelineno-282-15" name="__codelineno-282-15" href="#__codelineno-282-15"></a>    <span class="p">)</span>
<a id="__codelineno-282-16" name="__codelineno-282-16" href="#__codelineno-282-16"></a>
<a id="__codelineno-282-17" name="__codelineno-282-17" href="#__codelineno-282-17"></a>
<a id="__codelineno-282-18" name="__codelineno-282-18" href="#__codelineno-282-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-282-19" name="__codelineno-282-19" href="#__codelineno-282-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-282-20" name="__codelineno-282-20" href="#__codelineno-282-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-282-21" name="__codelineno-282-21" href="#__codelineno-282-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-282-22" name="__codelineno-282-22" href="#__codelineno-282-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-282-23" name="__codelineno-282-23" href="#__codelineno-282-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-282-24" name="__codelineno-282-24" href="#__codelineno-282-24"></a>        <span class="p">)</span>
<a id="__codelineno-282-25" name="__codelineno-282-25" href="#__codelineno-282-25"></a>    <span class="p">]</span>
<a id="__codelineno-282-26" name="__codelineno-282-26" href="#__codelineno-282-26"></a>
<a id="__codelineno-282-27" name="__codelineno-282-27" href="#__codelineno-282-27"></a>
<a id="__codelineno-282-28" name="__codelineno-282-28" href="#__codelineno-282-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-282-29" name="__codelineno-282-29" href="#__codelineno-282-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-282-30" name="__codelineno-282-30" href="#__codelineno-282-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-283-1" name="__codelineno-283-1" href="#__codelineno-283-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-283-2" name="__codelineno-283-2" href="#__codelineno-283-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-283-3" name="__codelineno-283-3" href="#__codelineno-283-3"></a>
<a id="__codelineno-283-4" name="__codelineno-283-4" href="#__codelineno-283-4"></a>
<a id="__codelineno-283-5" name="__codelineno-283-5" href="#__codelineno-283-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-283-6" name="__codelineno-283-6" href="#__codelineno-283-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-283-7" name="__codelineno-283-7" href="#__codelineno-283-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-283-8" name="__codelineno-283-8" href="#__codelineno-283-8"></a>
<a id="__codelineno-283-9" name="__codelineno-283-9" href="#__codelineno-283-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-283-10" name="__codelineno-283-10" href="#__codelineno-283-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-283-11" name="__codelineno-283-11" href="#__codelineno-283-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-283-12" name="__codelineno-283-12" href="#__codelineno-283-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-283-13" name="__codelineno-283-13" href="#__codelineno-283-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-283-14" name="__codelineno-283-14" href="#__codelineno-283-14"></a>        <span class="p">}</span>
<a id="__codelineno-283-15" name="__codelineno-283-15" href="#__codelineno-283-15"></a>    <span class="p">)</span>
<a id="__codelineno-283-16" name="__codelineno-283-16" href="#__codelineno-283-16"></a>
<a id="__codelineno-283-17" name="__codelineno-283-17" href="#__codelineno-283-17"></a>
<a id="__codelineno-283-18" name="__codelineno-283-18" href="#__codelineno-283-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-283-19" name="__codelineno-283-19" href="#__codelineno-283-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-283-20" name="__codelineno-283-20" href="#__codelineno-283-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-283-21" name="__codelineno-283-21" href="#__codelineno-283-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-283-22" name="__codelineno-283-22" href="#__codelineno-283-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-283-23" name="__codelineno-283-23" href="#__codelineno-283-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-283-24" name="__codelineno-283-24" href="#__codelineno-283-24"></a>        <span class="p">)</span>
<a id="__codelineno-283-25" name="__codelineno-283-25" href="#__codelineno-283-25"></a>    <span class="p">]</span>
<a id="__codelineno-283-26" name="__codelineno-283-26" href="#__codelineno-283-26"></a>
<a id="__codelineno-283-27" name="__codelineno-283-27" href="#__codelineno-283-27"></a>
<a id="__codelineno-283-28" name="__codelineno-283-28" href="#__codelineno-283-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-283-29" name="__codelineno-283-29" href="#__codelineno-283-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-283-30" name="__codelineno-283-30" href="#__codelineno-283-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-284-1" name="__codelineno-284-1" href="#__codelineno-284-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-284-2" name="__codelineno-284-2" href="#__codelineno-284-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-284-3" name="__codelineno-284-3" href="#__codelineno-284-3"></a>
<a id="__codelineno-284-4" name="__codelineno-284-4" href="#__codelineno-284-4"></a>
<a id="__codelineno-284-5" name="__codelineno-284-5" href="#__codelineno-284-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-284-6" name="__codelineno-284-6" href="#__codelineno-284-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-284-7" name="__codelineno-284-7" href="#__codelineno-284-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-284-8" name="__codelineno-284-8" href="#__codelineno-284-8"></a>
<a id="__codelineno-284-9" name="__codelineno-284-9" href="#__codelineno-284-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-284-10" name="__codelineno-284-10" href="#__codelineno-284-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-284-11" name="__codelineno-284-11" href="#__codelineno-284-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-284-12" name="__codelineno-284-12" href="#__codelineno-284-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-284-13" name="__codelineno-284-13" href="#__codelineno-284-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-284-14" name="__codelineno-284-14" href="#__codelineno-284-14"></a>        <span class="p">}</span>
<a id="__codelineno-284-15" name="__codelineno-284-15" href="#__codelineno-284-15"></a>    <span class="p">)</span>
<a id="__codelineno-284-16" name="__codelineno-284-16" href="#__codelineno-284-16"></a>
<a id="__codelineno-284-17" name="__codelineno-284-17" href="#__codelineno-284-17"></a>
<a id="__codelineno-284-18" name="__codelineno-284-18" href="#__codelineno-284-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-284-19" name="__codelineno-284-19" href="#__codelineno-284-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-284-20" name="__codelineno-284-20" href="#__codelineno-284-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-284-21" name="__codelineno-284-21" href="#__codelineno-284-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-284-22" name="__codelineno-284-22" href="#__codelineno-284-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-284-23" name="__codelineno-284-23" href="#__codelineno-284-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-284-24" name="__codelineno-284-24" href="#__codelineno-284-24"></a>        <span class="p">)</span>
<a id="__codelineno-284-25" name="__codelineno-284-25" href="#__codelineno-284-25"></a>    <span class="p">]</span>
<a id="__codelineno-284-26" name="__codelineno-284-26" href="#__codelineno-284-26"></a>
<a id="__codelineno-284-27" name="__codelineno-284-27" href="#__codelineno-284-27"></a>
<a id="__codelineno-284-28" name="__codelineno-284-28" href="#__codelineno-284-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-284-29" name="__codelineno-284-29" href="#__codelineno-284-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-284-30" name="__codelineno-284-30" href="#__codelineno-284-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-285-1" name="__codelineno-285-1" href="#__codelineno-285-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-285-2" name="__codelineno-285-2" href="#__codelineno-285-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-285-3" name="__codelineno-285-3" href="#__codelineno-285-3"></a>
<a id="__codelineno-285-4" name="__codelineno-285-4" href="#__codelineno-285-4"></a>
<a id="__codelineno-285-5" name="__codelineno-285-5" href="#__codelineno-285-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-285-6" name="__codelineno-285-6" href="#__codelineno-285-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-285-7" name="__codelineno-285-7" href="#__codelineno-285-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-285-8" name="__codelineno-285-8" href="#__codelineno-285-8"></a>
<a id="__codelineno-285-9" name="__codelineno-285-9" href="#__codelineno-285-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-285-10" name="__codelineno-285-10" href="#__codelineno-285-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-285-11" name="__codelineno-285-11" href="#__codelineno-285-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-285-12" name="__codelineno-285-12" href="#__codelineno-285-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-285-13" name="__codelineno-285-13" href="#__codelineno-285-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-285-14" name="__codelineno-285-14" href="#__codelineno-285-14"></a>        <span class="p">}</span>
<a id="__codelineno-285-15" name="__codelineno-285-15" href="#__codelineno-285-15"></a>    <span class="p">)</span>
<a id="__codelineno-285-16" name="__codelineno-285-16" href="#__codelineno-285-16"></a>
<a id="__codelineno-285-17" name="__codelineno-285-17" href="#__codelineno-285-17"></a>
<a id="__codelineno-285-18" name="__codelineno-285-18" href="#__codelineno-285-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-285-19" name="__codelineno-285-19" href="#__codelineno-285-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-285-20" name="__codelineno-285-20" href="#__codelineno-285-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-285-21" name="__codelineno-285-21" href="#__codelineno-285-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-285-22" name="__codelineno-285-22" href="#__codelineno-285-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-285-23" name="__codelineno-285-23" href="#__codelineno-285-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-285-24" name="__codelineno-285-24" href="#__codelineno-285-24"></a>        <span class="p">)</span>
<a id="__codelineno-285-25" name="__codelineno-285-25" href="#__codelineno-285-25"></a>    <span class="p">]</span>
<a id="__codelineno-285-26" name="__codelineno-285-26" href="#__codelineno-285-26"></a>
<a id="__codelineno-285-27" name="__codelineno-285-27" href="#__codelineno-285-27"></a>
<a id="__codelineno-285-28" name="__codelineno-285-28" href="#__codelineno-285-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-285-29" name="__codelineno-285-29" href="#__codelineno-285-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-285-30" name="__codelineno-285-30" href="#__codelineno-285-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-286-1" name="__codelineno-286-1" href="#__codelineno-286-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-286-2" name="__codelineno-286-2" href="#__codelineno-286-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-286-3" name="__codelineno-286-3" href="#__codelineno-286-3"></a>
<a id="__codelineno-286-4" name="__codelineno-286-4" href="#__codelineno-286-4"></a>
<a id="__codelineno-286-5" name="__codelineno-286-5" href="#__codelineno-286-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-286-6" name="__codelineno-286-6" href="#__codelineno-286-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-286-7" name="__codelineno-286-7" href="#__codelineno-286-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-286-8" name="__codelineno-286-8" href="#__codelineno-286-8"></a>
<a id="__codelineno-286-9" name="__codelineno-286-9" href="#__codelineno-286-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-286-10" name="__codelineno-286-10" href="#__codelineno-286-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-286-11" name="__codelineno-286-11" href="#__codelineno-286-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-286-12" name="__codelineno-286-12" href="#__codelineno-286-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-286-13" name="__codelineno-286-13" href="#__codelineno-286-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-286-14" name="__codelineno-286-14" href="#__codelineno-286-14"></a>        <span class="p">}</span>
<a id="__codelineno-286-15" name="__codelineno-286-15" href="#__codelineno-286-15"></a>    <span class="p">)</span>
<a id="__codelineno-286-16" name="__codelineno-286-16" href="#__codelineno-286-16"></a>
<a id="__codelineno-286-17" name="__codelineno-286-17" href="#__codelineno-286-17"></a>
<a id="__codelineno-286-18" name="__codelineno-286-18" href="#__codelineno-286-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-286-19" name="__codelineno-286-19" href="#__codelineno-286-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-286-20" name="__codelineno-286-20" href="#__codelineno-286-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-286-21" name="__codelineno-286-21" href="#__codelineno-286-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-286-22" name="__codelineno-286-22" href="#__codelineno-286-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-286-23" name="__codelineno-286-23" href="#__codelineno-286-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-286-24" name="__codelineno-286-24" href="#__codelineno-286-24"></a>        <span class="p">)</span>
<a id="__codelineno-286-25" name="__codelineno-286-25" href="#__codelineno-286-25"></a>    <span class="p">]</span>
<a id="__codelineno-286-26" name="__codelineno-286-26" href="#__codelineno-286-26"></a>
<a id="__codelineno-286-27" name="__codelineno-286-27" href="#__codelineno-286-27"></a>
<a id="__codelineno-286-28" name="__codelineno-286-28" href="#__codelineno-286-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-286-29" name="__codelineno-286-29" href="#__codelineno-286-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-286-30" name="__codelineno-286-30" href="#__codelineno-286-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-287-1" name="__codelineno-287-1" href="#__codelineno-287-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-287-2" name="__codelineno-287-2" href="#__codelineno-287-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-287-3" name="__codelineno-287-3" href="#__codelineno-287-3"></a>
<a id="__codelineno-287-4" name="__codelineno-287-4" href="#__codelineno-287-4"></a>
<a id="__codelineno-287-5" name="__codelineno-287-5" href="#__codelineno-287-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-287-6" name="__codelineno-287-6" href="#__codelineno-287-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-287-7" name="__codelineno-287-7" href="#__codelineno-287-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-287-8" name="__codelineno-287-8" href="#__codelineno-287-8"></a>
<a id="__codelineno-287-9" name="__codelineno-287-9" href="#__codelineno-287-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-287-10" name="__codelineno-287-10" href="#__codelineno-287-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-287-11" name="__codelineno-287-11" href="#__codelineno-287-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-287-12" name="__codelineno-287-12" href="#__codelineno-287-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-287-13" name="__codelineno-287-13" href="#__codelineno-287-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-287-14" name="__codelineno-287-14" href="#__codelineno-287-14"></a>        <span class="p">}</span>
<a id="__codelineno-287-15" name="__codelineno-287-15" href="#__codelineno-287-15"></a>    <span class="p">)</span>
<a id="__codelineno-287-16" name="__codelineno-287-16" href="#__codelineno-287-16"></a>
<a id="__codelineno-287-17" name="__codelineno-287-17" href="#__codelineno-287-17"></a>
<a id="__codelineno-287-18" name="__codelineno-287-18" href="#__codelineno-287-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-287-19" name="__codelineno-287-19" href="#__codelineno-287-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-287-20" name="__codelineno-287-20" href="#__codelineno-287-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-287-21" name="__codelineno-287-21" href="#__codelineno-287-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-287-22" name="__codelineno-287-22" href="#__codelineno-287-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-287-23" name="__codelineno-287-23" href="#__codelineno-287-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-287-24" name="__codelineno-287-24" href="#__codelineno-287-24"></a>        <span class="p">)</span>
<a id="__codelineno-287-25" name="__codelineno-287-25" href="#__codelineno-287-25"></a>    <span class="p">]</span>
<a id="__codelineno-287-26" name="__codelineno-287-26" href="#__codelineno-287-26"></a>
<a id="__codelineno-287-27" name="__codelineno-287-27" href="#__codelineno-287-27"></a>
<a id="__codelineno-287-28" name="__codelineno-287-28" href="#__codelineno-287-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-287-29" name="__codelineno-287-29" href="#__codelineno-287-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-287-30" name="__codelineno-287-30" href="#__codelineno-287-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-288-1" name="__codelineno-288-1" href="#__codelineno-288-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-288-2" name="__codelineno-288-2" href="#__codelineno-288-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-288-3" name="__codelineno-288-3" href="#__codelineno-288-3"></a>
<a id="__codelineno-288-4" name="__codelineno-288-4" href="#__codelineno-288-4"></a>
<a id="__codelineno-288-5" name="__codelineno-288-5" href="#__codelineno-288-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-288-6" name="__codelineno-288-6" href="#__codelineno-288-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-288-7" name="__codelineno-288-7" href="#__codelineno-288-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-288-8" name="__codelineno-288-8" href="#__codelineno-288-8"></a>
<a id="__codelineno-288-9" name="__codelineno-288-9" href="#__codelineno-288-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-288-10" name="__codelineno-288-10" href="#__codelineno-288-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-288-11" name="__codelineno-288-11" href="#__codelineno-288-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-288-12" name="__codelineno-288-12" href="#__codelineno-288-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-288-13" name="__codelineno-288-13" href="#__codelineno-288-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-288-14" name="__codelineno-288-14" href="#__codelineno-288-14"></a>        <span class="p">}</span>
<a id="__codelineno-288-15" name="__codelineno-288-15" href="#__codelineno-288-15"></a>    <span class="p">)</span>
<a id="__codelineno-288-16" name="__codelineno-288-16" href="#__codelineno-288-16"></a>
<a id="__codelineno-288-17" name="__codelineno-288-17" href="#__codelineno-288-17"></a>
<a id="__codelineno-288-18" name="__codelineno-288-18" href="#__codelineno-288-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-288-19" name="__codelineno-288-19" href="#__codelineno-288-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-288-20" name="__codelineno-288-20" href="#__codelineno-288-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-288-21" name="__codelineno-288-21" href="#__codelineno-288-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-288-22" name="__codelineno-288-22" href="#__codelineno-288-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-288-23" name="__codelineno-288-23" href="#__codelineno-288-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-288-24" name="__codelineno-288-24" href="#__codelineno-288-24"></a>        <span class="p">)</span>
<a id="__codelineno-288-25" name="__codelineno-288-25" href="#__codelineno-288-25"></a>    <span class="p">]</span>
<a id="__codelineno-288-26" name="__codelineno-288-26" href="#__codelineno-288-26"></a>
<a id="__codelineno-288-27" name="__codelineno-288-27" href="#__codelineno-288-27"></a>
<a id="__codelineno-288-28" name="__codelineno-288-28" href="#__codelineno-288-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-288-29" name="__codelineno-288-29" href="#__codelineno-288-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-288-30" name="__codelineno-288-30" href="#__codelineno-288-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-289-1" name="__codelineno-289-1" href="#__codelineno-289-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-289-2" name="__codelineno-289-2" href="#__codelineno-289-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-289-3" name="__codelineno-289-3" href="#__codelineno-289-3"></a>
<a id="__codelineno-289-4" name="__codelineno-289-4" href="#__codelineno-289-4"></a>
<a id="__codelineno-289-5" name="__codelineno-289-5" href="#__codelineno-289-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-289-6" name="__codelineno-289-6" href="#__codelineno-289-6"></a><span class="hll">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">])</span>
</span><a id="__codelineno-289-7" name="__codelineno-289-7" href="#__codelineno-289-7"></a><span class="hll">    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">])</span>
</span><a id="__codelineno-289-8" name="__codelineno-289-8" href="#__codelineno-289-8"></a>
<a id="__codelineno-289-9" name="__codelineno-289-9" href="#__codelineno-289-9"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
<a id="__codelineno-289-10" name="__codelineno-289-10" href="#__codelineno-289-10"></a>        <span class="n">json_schema_extra</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-289-11" name="__codelineno-289-11" href="#__codelineno-289-11"></a><span class="hll">            <span class="s2">&quot;examples&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><a id="__codelineno-289-12" name="__codelineno-289-12" href="#__codelineno-289-12"></a><span class="hll">                <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;THE NAME OF THE WIND&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Rothfuss, Patrick&quot;</span><span class="p">}</span>
</span><a id="__codelineno-289-13" name="__codelineno-289-13" href="#__codelineno-289-13"></a><span class="hll">            <span class="p">]</span>
</span><a id="__codelineno-289-14" name="__codelineno-289-14" href="#__codelineno-289-14"></a>        <span class="p">}</span>
<a id="__codelineno-289-15" name="__codelineno-289-15" href="#__codelineno-289-15"></a>    <span class="p">)</span>
<a id="__codelineno-289-16" name="__codelineno-289-16" href="#__codelineno-289-16"></a>
<a id="__codelineno-289-17" name="__codelineno-289-17" href="#__codelineno-289-17"></a>
<a id="__codelineno-289-18" name="__codelineno-289-18" href="#__codelineno-289-18"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">json_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-289-19" name="__codelineno-289-19" href="#__codelineno-289-19"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-289-20" name="__codelineno-289-20" href="#__codelineno-289-20"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-289-21" name="__codelineno-289-21" href="#__codelineno-289-21"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-289-22" name="__codelineno-289-22" href="#__codelineno-289-22"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-289-23" name="__codelineno-289-23" href="#__codelineno-289-23"></a>            <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Match example format EXCLUDING &#39;examples&#39; key.&quot;</span><span class="p">,</span>
<a id="__codelineno-289-24" name="__codelineno-289-24" href="#__codelineno-289-24"></a>        <span class="p">)</span>
<a id="__codelineno-289-25" name="__codelineno-289-25" href="#__codelineno-289-25"></a>    <span class="p">]</span>
<a id="__codelineno-289-26" name="__codelineno-289-26" href="#__codelineno-289-26"></a>
<a id="__codelineno-289-27" name="__codelineno-289-27" href="#__codelineno-289-27"></a>
<a id="__codelineno-289-28" name="__codelineno-289-28" href="#__codelineno-289-28"></a><span class="n">book</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Way of Kings by Brandon Sanderson&quot;</span><span class="p">)</span>
<a id="__codelineno-289-29" name="__codelineno-289-29" href="#__codelineno-289-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
<a id="__codelineno-289-30" name="__codelineno-289-30" href="#__codelineno-289-30"></a><span class="hll"><span class="c1"># Output: title=&#39;THE WAY OF KINGS&#39; author=&#39;Sanderson, Brandon&#39;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="streaming-response-models">Streaming Response Models<a class="headerlink" href="#streaming-response-models" title="Permanent link">&para;</a></h2>
<p>If you set <code>stream=True</code> when <code>response_model</code> is set, your LLM call will return an <code>Iterable</code> where each item will be a partial version of your response model representing the current state of the streamed information. The final model returned by the iterator will be the full response model.</p>
<div class="admonition mira">
<div class="tabbed-set tabbed-alternate" data-tabs="37:4"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><input id="__tabbed_37_2" name="__tabbed_37" type="radio" /><input id="__tabbed_37_3" name="__tabbed_37" type="radio" /><input id="__tabbed_37_4" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">Shorthand</label><label for="__tabbed_37_2">Messages</label><label for="__tabbed_37_3">String Template</label><label for="__tabbed_37_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="38:10"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><input id="__tabbed_38_2" name="__tabbed_38" type="radio" /><input id="__tabbed_38_3" name="__tabbed_38" type="radio" /><input id="__tabbed_38_4" name="__tabbed_38" type="radio" /><input id="__tabbed_38_5" name="__tabbed_38" type="radio" /><input id="__tabbed_38_6" name="__tabbed_38" type="radio" /><input id="__tabbed_38_7" name="__tabbed_38" type="radio" /><input id="__tabbed_38_8" name="__tabbed_38" type="radio" /><input id="__tabbed_38_9" name="__tabbed_38" type="radio" /><input id="__tabbed_38_10" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">OpenAI</label><label for="__tabbed_38_2">Anthropic</label><label for="__tabbed_38_3">Google</label><label for="__tabbed_38_4">Groq</label><label for="__tabbed_38_5">xAI</label><label for="__tabbed_38_6">Mistral</label><label for="__tabbed_38_7">Cohere</label><label for="__tabbed_38_8">LiteLLM</label><label for="__tabbed_38_9">Azure AI</label><label for="__tabbed_38_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-290-1" name="__codelineno-290-1" href="#__codelineno-290-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-290-2" name="__codelineno-290-2" href="#__codelineno-290-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-290-3" name="__codelineno-290-3" href="#__codelineno-290-3"></a>
<a id="__codelineno-290-4" name="__codelineno-290-4" href="#__codelineno-290-4"></a>
<a id="__codelineno-290-5" name="__codelineno-290-5" href="#__codelineno-290-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-290-6" name="__codelineno-290-6" href="#__codelineno-290-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-290-7" name="__codelineno-290-7" href="#__codelineno-290-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-290-8" name="__codelineno-290-8" href="#__codelineno-290-8"></a>
<a id="__codelineno-290-9" name="__codelineno-290-9" href="#__codelineno-290-9"></a>
<a id="__codelineno-290-10" name="__codelineno-290-10" href="#__codelineno-290-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-290-11" name="__codelineno-290-11" href="#__codelineno-290-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-290-12" name="__codelineno-290-12" href="#__codelineno-290-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-290-13" name="__codelineno-290-13" href="#__codelineno-290-13"></a>
<a id="__codelineno-290-14" name="__codelineno-290-14" href="#__codelineno-290-14"></a>
<a id="__codelineno-290-15" name="__codelineno-290-15" href="#__codelineno-290-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-290-16" name="__codelineno-290-16" href="#__codelineno-290-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-290-17" name="__codelineno-290-17" href="#__codelineno-290-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-290-18" name="__codelineno-290-18" href="#__codelineno-290-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-290-19" name="__codelineno-290-19" href="#__codelineno-290-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-290-20" name="__codelineno-290-20" href="#__codelineno-290-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-290-21" name="__codelineno-290-21" href="#__codelineno-290-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-290-22" name="__codelineno-290-22" href="#__codelineno-290-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-290-23" name="__codelineno-290-23" href="#__codelineno-290-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-290-24" name="__codelineno-290-24" href="#__codelineno-290-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-290-25" name="__codelineno-290-25" href="#__codelineno-290-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-290-26" name="__codelineno-290-26" href="#__codelineno-290-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-290-27" name="__codelineno-290-27" href="#__codelineno-290-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-290-28" name="__codelineno-290-28" href="#__codelineno-290-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-290-29" name="__codelineno-290-29" href="#__codelineno-290-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-290-30" name="__codelineno-290-30" href="#__codelineno-290-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-291-1" name="__codelineno-291-1" href="#__codelineno-291-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-291-2" name="__codelineno-291-2" href="#__codelineno-291-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-291-3" name="__codelineno-291-3" href="#__codelineno-291-3"></a>
<a id="__codelineno-291-4" name="__codelineno-291-4" href="#__codelineno-291-4"></a>
<a id="__codelineno-291-5" name="__codelineno-291-5" href="#__codelineno-291-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-291-6" name="__codelineno-291-6" href="#__codelineno-291-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-291-7" name="__codelineno-291-7" href="#__codelineno-291-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-291-8" name="__codelineno-291-8" href="#__codelineno-291-8"></a>
<a id="__codelineno-291-9" name="__codelineno-291-9" href="#__codelineno-291-9"></a>
<a id="__codelineno-291-10" name="__codelineno-291-10" href="#__codelineno-291-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-291-11" name="__codelineno-291-11" href="#__codelineno-291-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-291-12" name="__codelineno-291-12" href="#__codelineno-291-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-291-13" name="__codelineno-291-13" href="#__codelineno-291-13"></a>
<a id="__codelineno-291-14" name="__codelineno-291-14" href="#__codelineno-291-14"></a>
<a id="__codelineno-291-15" name="__codelineno-291-15" href="#__codelineno-291-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-291-16" name="__codelineno-291-16" href="#__codelineno-291-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-291-17" name="__codelineno-291-17" href="#__codelineno-291-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-291-18" name="__codelineno-291-18" href="#__codelineno-291-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-291-19" name="__codelineno-291-19" href="#__codelineno-291-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-291-20" name="__codelineno-291-20" href="#__codelineno-291-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-291-21" name="__codelineno-291-21" href="#__codelineno-291-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-291-22" name="__codelineno-291-22" href="#__codelineno-291-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-291-23" name="__codelineno-291-23" href="#__codelineno-291-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-291-24" name="__codelineno-291-24" href="#__codelineno-291-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-291-25" name="__codelineno-291-25" href="#__codelineno-291-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-291-26" name="__codelineno-291-26" href="#__codelineno-291-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-291-27" name="__codelineno-291-27" href="#__codelineno-291-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-291-28" name="__codelineno-291-28" href="#__codelineno-291-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-291-29" name="__codelineno-291-29" href="#__codelineno-291-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-291-30" name="__codelineno-291-30" href="#__codelineno-291-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-292-1" name="__codelineno-292-1" href="#__codelineno-292-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-292-2" name="__codelineno-292-2" href="#__codelineno-292-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-292-3" name="__codelineno-292-3" href="#__codelineno-292-3"></a>
<a id="__codelineno-292-4" name="__codelineno-292-4" href="#__codelineno-292-4"></a>
<a id="__codelineno-292-5" name="__codelineno-292-5" href="#__codelineno-292-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-292-6" name="__codelineno-292-6" href="#__codelineno-292-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-292-7" name="__codelineno-292-7" href="#__codelineno-292-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-292-8" name="__codelineno-292-8" href="#__codelineno-292-8"></a>
<a id="__codelineno-292-9" name="__codelineno-292-9" href="#__codelineno-292-9"></a>
<a id="__codelineno-292-10" name="__codelineno-292-10" href="#__codelineno-292-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-292-11" name="__codelineno-292-11" href="#__codelineno-292-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-292-12" name="__codelineno-292-12" href="#__codelineno-292-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-292-13" name="__codelineno-292-13" href="#__codelineno-292-13"></a>
<a id="__codelineno-292-14" name="__codelineno-292-14" href="#__codelineno-292-14"></a>
<a id="__codelineno-292-15" name="__codelineno-292-15" href="#__codelineno-292-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-292-16" name="__codelineno-292-16" href="#__codelineno-292-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-292-17" name="__codelineno-292-17" href="#__codelineno-292-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-292-18" name="__codelineno-292-18" href="#__codelineno-292-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-292-19" name="__codelineno-292-19" href="#__codelineno-292-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-292-20" name="__codelineno-292-20" href="#__codelineno-292-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-292-21" name="__codelineno-292-21" href="#__codelineno-292-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-292-22" name="__codelineno-292-22" href="#__codelineno-292-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-292-23" name="__codelineno-292-23" href="#__codelineno-292-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-292-24" name="__codelineno-292-24" href="#__codelineno-292-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-292-25" name="__codelineno-292-25" href="#__codelineno-292-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-292-26" name="__codelineno-292-26" href="#__codelineno-292-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-292-27" name="__codelineno-292-27" href="#__codelineno-292-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-292-28" name="__codelineno-292-28" href="#__codelineno-292-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-292-29" name="__codelineno-292-29" href="#__codelineno-292-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-292-30" name="__codelineno-292-30" href="#__codelineno-292-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-293-1" name="__codelineno-293-1" href="#__codelineno-293-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-293-2" name="__codelineno-293-2" href="#__codelineno-293-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-293-3" name="__codelineno-293-3" href="#__codelineno-293-3"></a>
<a id="__codelineno-293-4" name="__codelineno-293-4" href="#__codelineno-293-4"></a>
<a id="__codelineno-293-5" name="__codelineno-293-5" href="#__codelineno-293-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-293-6" name="__codelineno-293-6" href="#__codelineno-293-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-293-7" name="__codelineno-293-7" href="#__codelineno-293-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-293-8" name="__codelineno-293-8" href="#__codelineno-293-8"></a>
<a id="__codelineno-293-9" name="__codelineno-293-9" href="#__codelineno-293-9"></a>
<a id="__codelineno-293-10" name="__codelineno-293-10" href="#__codelineno-293-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-293-11" name="__codelineno-293-11" href="#__codelineno-293-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-293-12" name="__codelineno-293-12" href="#__codelineno-293-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-293-13" name="__codelineno-293-13" href="#__codelineno-293-13"></a>
<a id="__codelineno-293-14" name="__codelineno-293-14" href="#__codelineno-293-14"></a>
<a id="__codelineno-293-15" name="__codelineno-293-15" href="#__codelineno-293-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-293-16" name="__codelineno-293-16" href="#__codelineno-293-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-293-17" name="__codelineno-293-17" href="#__codelineno-293-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-293-18" name="__codelineno-293-18" href="#__codelineno-293-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-293-19" name="__codelineno-293-19" href="#__codelineno-293-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-293-20" name="__codelineno-293-20" href="#__codelineno-293-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-293-21" name="__codelineno-293-21" href="#__codelineno-293-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-293-22" name="__codelineno-293-22" href="#__codelineno-293-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-293-23" name="__codelineno-293-23" href="#__codelineno-293-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-293-24" name="__codelineno-293-24" href="#__codelineno-293-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-293-25" name="__codelineno-293-25" href="#__codelineno-293-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-293-26" name="__codelineno-293-26" href="#__codelineno-293-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-293-27" name="__codelineno-293-27" href="#__codelineno-293-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-293-28" name="__codelineno-293-28" href="#__codelineno-293-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-293-29" name="__codelineno-293-29" href="#__codelineno-293-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-293-30" name="__codelineno-293-30" href="#__codelineno-293-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-294-1" name="__codelineno-294-1" href="#__codelineno-294-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-294-2" name="__codelineno-294-2" href="#__codelineno-294-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-294-3" name="__codelineno-294-3" href="#__codelineno-294-3"></a>
<a id="__codelineno-294-4" name="__codelineno-294-4" href="#__codelineno-294-4"></a>
<a id="__codelineno-294-5" name="__codelineno-294-5" href="#__codelineno-294-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-294-6" name="__codelineno-294-6" href="#__codelineno-294-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-294-7" name="__codelineno-294-7" href="#__codelineno-294-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-294-8" name="__codelineno-294-8" href="#__codelineno-294-8"></a>
<a id="__codelineno-294-9" name="__codelineno-294-9" href="#__codelineno-294-9"></a>
<a id="__codelineno-294-10" name="__codelineno-294-10" href="#__codelineno-294-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-294-11" name="__codelineno-294-11" href="#__codelineno-294-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-294-12" name="__codelineno-294-12" href="#__codelineno-294-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-294-13" name="__codelineno-294-13" href="#__codelineno-294-13"></a>
<a id="__codelineno-294-14" name="__codelineno-294-14" href="#__codelineno-294-14"></a>
<a id="__codelineno-294-15" name="__codelineno-294-15" href="#__codelineno-294-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-294-16" name="__codelineno-294-16" href="#__codelineno-294-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-294-17" name="__codelineno-294-17" href="#__codelineno-294-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-294-18" name="__codelineno-294-18" href="#__codelineno-294-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-294-19" name="__codelineno-294-19" href="#__codelineno-294-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-294-20" name="__codelineno-294-20" href="#__codelineno-294-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-294-21" name="__codelineno-294-21" href="#__codelineno-294-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-294-22" name="__codelineno-294-22" href="#__codelineno-294-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-294-23" name="__codelineno-294-23" href="#__codelineno-294-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-294-24" name="__codelineno-294-24" href="#__codelineno-294-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-294-25" name="__codelineno-294-25" href="#__codelineno-294-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-294-26" name="__codelineno-294-26" href="#__codelineno-294-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-294-27" name="__codelineno-294-27" href="#__codelineno-294-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-294-28" name="__codelineno-294-28" href="#__codelineno-294-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-294-29" name="__codelineno-294-29" href="#__codelineno-294-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-294-30" name="__codelineno-294-30" href="#__codelineno-294-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-295-1" name="__codelineno-295-1" href="#__codelineno-295-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-295-2" name="__codelineno-295-2" href="#__codelineno-295-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-295-3" name="__codelineno-295-3" href="#__codelineno-295-3"></a>
<a id="__codelineno-295-4" name="__codelineno-295-4" href="#__codelineno-295-4"></a>
<a id="__codelineno-295-5" name="__codelineno-295-5" href="#__codelineno-295-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-295-6" name="__codelineno-295-6" href="#__codelineno-295-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-295-7" name="__codelineno-295-7" href="#__codelineno-295-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-295-8" name="__codelineno-295-8" href="#__codelineno-295-8"></a>
<a id="__codelineno-295-9" name="__codelineno-295-9" href="#__codelineno-295-9"></a>
<a id="__codelineno-295-10" name="__codelineno-295-10" href="#__codelineno-295-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-295-11" name="__codelineno-295-11" href="#__codelineno-295-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-295-12" name="__codelineno-295-12" href="#__codelineno-295-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-295-13" name="__codelineno-295-13" href="#__codelineno-295-13"></a>
<a id="__codelineno-295-14" name="__codelineno-295-14" href="#__codelineno-295-14"></a>
<a id="__codelineno-295-15" name="__codelineno-295-15" href="#__codelineno-295-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-295-16" name="__codelineno-295-16" href="#__codelineno-295-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-295-17" name="__codelineno-295-17" href="#__codelineno-295-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-295-18" name="__codelineno-295-18" href="#__codelineno-295-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-295-19" name="__codelineno-295-19" href="#__codelineno-295-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-295-20" name="__codelineno-295-20" href="#__codelineno-295-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-295-21" name="__codelineno-295-21" href="#__codelineno-295-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-295-22" name="__codelineno-295-22" href="#__codelineno-295-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-295-23" name="__codelineno-295-23" href="#__codelineno-295-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-295-24" name="__codelineno-295-24" href="#__codelineno-295-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-295-25" name="__codelineno-295-25" href="#__codelineno-295-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-295-26" name="__codelineno-295-26" href="#__codelineno-295-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-295-27" name="__codelineno-295-27" href="#__codelineno-295-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-295-28" name="__codelineno-295-28" href="#__codelineno-295-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-295-29" name="__codelineno-295-29" href="#__codelineno-295-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-295-30" name="__codelineno-295-30" href="#__codelineno-295-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-296-1" name="__codelineno-296-1" href="#__codelineno-296-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-296-2" name="__codelineno-296-2" href="#__codelineno-296-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-296-3" name="__codelineno-296-3" href="#__codelineno-296-3"></a>
<a id="__codelineno-296-4" name="__codelineno-296-4" href="#__codelineno-296-4"></a>
<a id="__codelineno-296-5" name="__codelineno-296-5" href="#__codelineno-296-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-296-6" name="__codelineno-296-6" href="#__codelineno-296-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-296-7" name="__codelineno-296-7" href="#__codelineno-296-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-296-8" name="__codelineno-296-8" href="#__codelineno-296-8"></a>
<a id="__codelineno-296-9" name="__codelineno-296-9" href="#__codelineno-296-9"></a>
<a id="__codelineno-296-10" name="__codelineno-296-10" href="#__codelineno-296-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-296-11" name="__codelineno-296-11" href="#__codelineno-296-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-296-12" name="__codelineno-296-12" href="#__codelineno-296-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-296-13" name="__codelineno-296-13" href="#__codelineno-296-13"></a>
<a id="__codelineno-296-14" name="__codelineno-296-14" href="#__codelineno-296-14"></a>
<a id="__codelineno-296-15" name="__codelineno-296-15" href="#__codelineno-296-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-296-16" name="__codelineno-296-16" href="#__codelineno-296-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-296-17" name="__codelineno-296-17" href="#__codelineno-296-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-296-18" name="__codelineno-296-18" href="#__codelineno-296-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-296-19" name="__codelineno-296-19" href="#__codelineno-296-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-296-20" name="__codelineno-296-20" href="#__codelineno-296-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-296-21" name="__codelineno-296-21" href="#__codelineno-296-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-296-22" name="__codelineno-296-22" href="#__codelineno-296-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-296-23" name="__codelineno-296-23" href="#__codelineno-296-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-296-24" name="__codelineno-296-24" href="#__codelineno-296-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-296-25" name="__codelineno-296-25" href="#__codelineno-296-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-296-26" name="__codelineno-296-26" href="#__codelineno-296-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-296-27" name="__codelineno-296-27" href="#__codelineno-296-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-296-28" name="__codelineno-296-28" href="#__codelineno-296-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-296-29" name="__codelineno-296-29" href="#__codelineno-296-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-296-30" name="__codelineno-296-30" href="#__codelineno-296-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-297-1" name="__codelineno-297-1" href="#__codelineno-297-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-297-2" name="__codelineno-297-2" href="#__codelineno-297-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-297-3" name="__codelineno-297-3" href="#__codelineno-297-3"></a>
<a id="__codelineno-297-4" name="__codelineno-297-4" href="#__codelineno-297-4"></a>
<a id="__codelineno-297-5" name="__codelineno-297-5" href="#__codelineno-297-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-297-6" name="__codelineno-297-6" href="#__codelineno-297-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-297-7" name="__codelineno-297-7" href="#__codelineno-297-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-297-8" name="__codelineno-297-8" href="#__codelineno-297-8"></a>
<a id="__codelineno-297-9" name="__codelineno-297-9" href="#__codelineno-297-9"></a>
<a id="__codelineno-297-10" name="__codelineno-297-10" href="#__codelineno-297-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-297-11" name="__codelineno-297-11" href="#__codelineno-297-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-297-12" name="__codelineno-297-12" href="#__codelineno-297-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-297-13" name="__codelineno-297-13" href="#__codelineno-297-13"></a>
<a id="__codelineno-297-14" name="__codelineno-297-14" href="#__codelineno-297-14"></a>
<a id="__codelineno-297-15" name="__codelineno-297-15" href="#__codelineno-297-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-297-16" name="__codelineno-297-16" href="#__codelineno-297-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-297-17" name="__codelineno-297-17" href="#__codelineno-297-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-297-18" name="__codelineno-297-18" href="#__codelineno-297-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-297-19" name="__codelineno-297-19" href="#__codelineno-297-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-297-20" name="__codelineno-297-20" href="#__codelineno-297-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-297-21" name="__codelineno-297-21" href="#__codelineno-297-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-297-22" name="__codelineno-297-22" href="#__codelineno-297-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-297-23" name="__codelineno-297-23" href="#__codelineno-297-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-297-24" name="__codelineno-297-24" href="#__codelineno-297-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-297-25" name="__codelineno-297-25" href="#__codelineno-297-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-297-26" name="__codelineno-297-26" href="#__codelineno-297-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-297-27" name="__codelineno-297-27" href="#__codelineno-297-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-297-28" name="__codelineno-297-28" href="#__codelineno-297-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-297-29" name="__codelineno-297-29" href="#__codelineno-297-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-297-30" name="__codelineno-297-30" href="#__codelineno-297-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-298-1" name="__codelineno-298-1" href="#__codelineno-298-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-298-2" name="__codelineno-298-2" href="#__codelineno-298-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-298-3" name="__codelineno-298-3" href="#__codelineno-298-3"></a>
<a id="__codelineno-298-4" name="__codelineno-298-4" href="#__codelineno-298-4"></a>
<a id="__codelineno-298-5" name="__codelineno-298-5" href="#__codelineno-298-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-298-6" name="__codelineno-298-6" href="#__codelineno-298-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-298-7" name="__codelineno-298-7" href="#__codelineno-298-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-298-8" name="__codelineno-298-8" href="#__codelineno-298-8"></a>
<a id="__codelineno-298-9" name="__codelineno-298-9" href="#__codelineno-298-9"></a>
<a id="__codelineno-298-10" name="__codelineno-298-10" href="#__codelineno-298-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-298-11" name="__codelineno-298-11" href="#__codelineno-298-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-298-12" name="__codelineno-298-12" href="#__codelineno-298-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-298-13" name="__codelineno-298-13" href="#__codelineno-298-13"></a>
<a id="__codelineno-298-14" name="__codelineno-298-14" href="#__codelineno-298-14"></a>
<a id="__codelineno-298-15" name="__codelineno-298-15" href="#__codelineno-298-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-298-16" name="__codelineno-298-16" href="#__codelineno-298-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-298-17" name="__codelineno-298-17" href="#__codelineno-298-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-298-18" name="__codelineno-298-18" href="#__codelineno-298-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-298-19" name="__codelineno-298-19" href="#__codelineno-298-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-298-20" name="__codelineno-298-20" href="#__codelineno-298-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-298-21" name="__codelineno-298-21" href="#__codelineno-298-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-298-22" name="__codelineno-298-22" href="#__codelineno-298-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-298-23" name="__codelineno-298-23" href="#__codelineno-298-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-298-24" name="__codelineno-298-24" href="#__codelineno-298-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-298-25" name="__codelineno-298-25" href="#__codelineno-298-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-298-26" name="__codelineno-298-26" href="#__codelineno-298-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-298-27" name="__codelineno-298-27" href="#__codelineno-298-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-298-28" name="__codelineno-298-28" href="#__codelineno-298-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-298-29" name="__codelineno-298-29" href="#__codelineno-298-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-298-30" name="__codelineno-298-30" href="#__codelineno-298-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-299-1" name="__codelineno-299-1" href="#__codelineno-299-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-299-2" name="__codelineno-299-2" href="#__codelineno-299-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-299-3" name="__codelineno-299-3" href="#__codelineno-299-3"></a>
<a id="__codelineno-299-4" name="__codelineno-299-4" href="#__codelineno-299-4"></a>
<a id="__codelineno-299-5" name="__codelineno-299-5" href="#__codelineno-299-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-299-6" name="__codelineno-299-6" href="#__codelineno-299-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-299-7" name="__codelineno-299-7" href="#__codelineno-299-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-299-8" name="__codelineno-299-8" href="#__codelineno-299-8"></a>
<a id="__codelineno-299-9" name="__codelineno-299-9" href="#__codelineno-299-9"></a>
<a id="__codelineno-299-10" name="__codelineno-299-10" href="#__codelineno-299-10"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-299-11" name="__codelineno-299-11" href="#__codelineno-299-11"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-299-12" name="__codelineno-299-12" href="#__codelineno-299-12"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-299-13" name="__codelineno-299-13" href="#__codelineno-299-13"></a>
<a id="__codelineno-299-14" name="__codelineno-299-14" href="#__codelineno-299-14"></a>
<a id="__codelineno-299-15" name="__codelineno-299-15" href="#__codelineno-299-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-299-16" name="__codelineno-299-16" href="#__codelineno-299-16"></a><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
<a id="__codelineno-299-17" name="__codelineno-299-17" href="#__codelineno-299-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
<a id="__codelineno-299-18" name="__codelineno-299-18" href="#__codelineno-299-18"></a><span class="hll"><span class="c1"># Output:</span>
</span><a id="__codelineno-299-19" name="__codelineno-299-19" href="#__codelineno-299-19"></a><span class="hll"><span class="c1"># title=None author=None</span>
</span><a id="__codelineno-299-20" name="__codelineno-299-20" href="#__codelineno-299-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-299-21" name="__codelineno-299-21" href="#__codelineno-299-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-299-22" name="__codelineno-299-22" href="#__codelineno-299-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-299-23" name="__codelineno-299-23" href="#__codelineno-299-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-299-24" name="__codelineno-299-24" href="#__codelineno-299-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-299-25" name="__codelineno-299-25" href="#__codelineno-299-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-299-26" name="__codelineno-299-26" href="#__codelineno-299-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-299-27" name="__codelineno-299-27" href="#__codelineno-299-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-299-28" name="__codelineno-299-28" href="#__codelineno-299-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-299-29" name="__codelineno-299-29" href="#__codelineno-299-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-299-30" name="__codelineno-299-30" href="#__codelineno-299-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="39:10"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><input id="__tabbed_39_2" name="__tabbed_39" type="radio" /><input id="__tabbed_39_3" name="__tabbed_39" type="radio" /><input id="__tabbed_39_4" name="__tabbed_39" type="radio" /><input id="__tabbed_39_5" name="__tabbed_39" type="radio" /><input id="__tabbed_39_6" name="__tabbed_39" type="radio" /><input id="__tabbed_39_7" name="__tabbed_39" type="radio" /><input id="__tabbed_39_8" name="__tabbed_39" type="radio" /><input id="__tabbed_39_9" name="__tabbed_39" type="radio" /><input id="__tabbed_39_10" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">OpenAI</label><label for="__tabbed_39_2">Anthropic</label><label for="__tabbed_39_3">Google</label><label for="__tabbed_39_4">Groq</label><label for="__tabbed_39_5">xAI</label><label for="__tabbed_39_6">Mistral</label><label for="__tabbed_39_7">Cohere</label><label for="__tabbed_39_8">LiteLLM</label><label for="__tabbed_39_9">Azure AI</label><label for="__tabbed_39_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-300-1" name="__codelineno-300-1" href="#__codelineno-300-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-300-2" name="__codelineno-300-2" href="#__codelineno-300-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-300-3" name="__codelineno-300-3" href="#__codelineno-300-3"></a>
<a id="__codelineno-300-4" name="__codelineno-300-4" href="#__codelineno-300-4"></a>
<a id="__codelineno-300-5" name="__codelineno-300-5" href="#__codelineno-300-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-300-6" name="__codelineno-300-6" href="#__codelineno-300-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-300-7" name="__codelineno-300-7" href="#__codelineno-300-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-300-8" name="__codelineno-300-8" href="#__codelineno-300-8"></a>
<a id="__codelineno-300-9" name="__codelineno-300-9" href="#__codelineno-300-9"></a>
<a id="__codelineno-300-10" name="__codelineno-300-10" href="#__codelineno-300-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-300-11" name="__codelineno-300-11" href="#__codelineno-300-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-300-12" name="__codelineno-300-12" href="#__codelineno-300-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-300-13" name="__codelineno-300-13" href="#__codelineno-300-13"></a>
<a id="__codelineno-300-14" name="__codelineno-300-14" href="#__codelineno-300-14"></a>
<a id="__codelineno-300-15" name="__codelineno-300-15" href="#__codelineno-300-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-300-16" name="__codelineno-300-16" href="#__codelineno-300-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-300-17" name="__codelineno-300-17" href="#__codelineno-300-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-300-18" name="__codelineno-300-18" href="#__codelineno-300-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-300-19" name="__codelineno-300-19" href="#__codelineno-300-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-300-20" name="__codelineno-300-20" href="#__codelineno-300-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-300-21" name="__codelineno-300-21" href="#__codelineno-300-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-300-22" name="__codelineno-300-22" href="#__codelineno-300-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-300-23" name="__codelineno-300-23" href="#__codelineno-300-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-300-24" name="__codelineno-300-24" href="#__codelineno-300-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-300-25" name="__codelineno-300-25" href="#__codelineno-300-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-300-26" name="__codelineno-300-26" href="#__codelineno-300-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-300-27" name="__codelineno-300-27" href="#__codelineno-300-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-300-28" name="__codelineno-300-28" href="#__codelineno-300-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-300-29" name="__codelineno-300-29" href="#__codelineno-300-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-300-30" name="__codelineno-300-30" href="#__codelineno-300-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-301-1" name="__codelineno-301-1" href="#__codelineno-301-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-301-2" name="__codelineno-301-2" href="#__codelineno-301-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-301-3" name="__codelineno-301-3" href="#__codelineno-301-3"></a>
<a id="__codelineno-301-4" name="__codelineno-301-4" href="#__codelineno-301-4"></a>
<a id="__codelineno-301-5" name="__codelineno-301-5" href="#__codelineno-301-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-301-6" name="__codelineno-301-6" href="#__codelineno-301-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-301-7" name="__codelineno-301-7" href="#__codelineno-301-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-301-8" name="__codelineno-301-8" href="#__codelineno-301-8"></a>
<a id="__codelineno-301-9" name="__codelineno-301-9" href="#__codelineno-301-9"></a>
<a id="__codelineno-301-10" name="__codelineno-301-10" href="#__codelineno-301-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-301-11" name="__codelineno-301-11" href="#__codelineno-301-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-301-12" name="__codelineno-301-12" href="#__codelineno-301-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-301-13" name="__codelineno-301-13" href="#__codelineno-301-13"></a>
<a id="__codelineno-301-14" name="__codelineno-301-14" href="#__codelineno-301-14"></a>
<a id="__codelineno-301-15" name="__codelineno-301-15" href="#__codelineno-301-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-301-16" name="__codelineno-301-16" href="#__codelineno-301-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-301-17" name="__codelineno-301-17" href="#__codelineno-301-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-301-18" name="__codelineno-301-18" href="#__codelineno-301-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-301-19" name="__codelineno-301-19" href="#__codelineno-301-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-301-20" name="__codelineno-301-20" href="#__codelineno-301-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-301-21" name="__codelineno-301-21" href="#__codelineno-301-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-301-22" name="__codelineno-301-22" href="#__codelineno-301-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-301-23" name="__codelineno-301-23" href="#__codelineno-301-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-301-24" name="__codelineno-301-24" href="#__codelineno-301-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-301-25" name="__codelineno-301-25" href="#__codelineno-301-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-301-26" name="__codelineno-301-26" href="#__codelineno-301-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-301-27" name="__codelineno-301-27" href="#__codelineno-301-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-301-28" name="__codelineno-301-28" href="#__codelineno-301-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-301-29" name="__codelineno-301-29" href="#__codelineno-301-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-301-30" name="__codelineno-301-30" href="#__codelineno-301-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-302-1" name="__codelineno-302-1" href="#__codelineno-302-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-302-2" name="__codelineno-302-2" href="#__codelineno-302-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-302-3" name="__codelineno-302-3" href="#__codelineno-302-3"></a>
<a id="__codelineno-302-4" name="__codelineno-302-4" href="#__codelineno-302-4"></a>
<a id="__codelineno-302-5" name="__codelineno-302-5" href="#__codelineno-302-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-302-6" name="__codelineno-302-6" href="#__codelineno-302-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-302-7" name="__codelineno-302-7" href="#__codelineno-302-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-302-8" name="__codelineno-302-8" href="#__codelineno-302-8"></a>
<a id="__codelineno-302-9" name="__codelineno-302-9" href="#__codelineno-302-9"></a>
<a id="__codelineno-302-10" name="__codelineno-302-10" href="#__codelineno-302-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-302-11" name="__codelineno-302-11" href="#__codelineno-302-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-302-12" name="__codelineno-302-12" href="#__codelineno-302-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-302-13" name="__codelineno-302-13" href="#__codelineno-302-13"></a>
<a id="__codelineno-302-14" name="__codelineno-302-14" href="#__codelineno-302-14"></a>
<a id="__codelineno-302-15" name="__codelineno-302-15" href="#__codelineno-302-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-302-16" name="__codelineno-302-16" href="#__codelineno-302-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-302-17" name="__codelineno-302-17" href="#__codelineno-302-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-302-18" name="__codelineno-302-18" href="#__codelineno-302-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-302-19" name="__codelineno-302-19" href="#__codelineno-302-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-302-20" name="__codelineno-302-20" href="#__codelineno-302-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-302-21" name="__codelineno-302-21" href="#__codelineno-302-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-302-22" name="__codelineno-302-22" href="#__codelineno-302-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-302-23" name="__codelineno-302-23" href="#__codelineno-302-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-302-24" name="__codelineno-302-24" href="#__codelineno-302-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-302-25" name="__codelineno-302-25" href="#__codelineno-302-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-302-26" name="__codelineno-302-26" href="#__codelineno-302-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-302-27" name="__codelineno-302-27" href="#__codelineno-302-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-302-28" name="__codelineno-302-28" href="#__codelineno-302-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-302-29" name="__codelineno-302-29" href="#__codelineno-302-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-302-30" name="__codelineno-302-30" href="#__codelineno-302-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-303-1" name="__codelineno-303-1" href="#__codelineno-303-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-303-2" name="__codelineno-303-2" href="#__codelineno-303-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-303-3" name="__codelineno-303-3" href="#__codelineno-303-3"></a>
<a id="__codelineno-303-4" name="__codelineno-303-4" href="#__codelineno-303-4"></a>
<a id="__codelineno-303-5" name="__codelineno-303-5" href="#__codelineno-303-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-303-6" name="__codelineno-303-6" href="#__codelineno-303-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-303-7" name="__codelineno-303-7" href="#__codelineno-303-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-303-8" name="__codelineno-303-8" href="#__codelineno-303-8"></a>
<a id="__codelineno-303-9" name="__codelineno-303-9" href="#__codelineno-303-9"></a>
<a id="__codelineno-303-10" name="__codelineno-303-10" href="#__codelineno-303-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-303-11" name="__codelineno-303-11" href="#__codelineno-303-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-303-12" name="__codelineno-303-12" href="#__codelineno-303-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-303-13" name="__codelineno-303-13" href="#__codelineno-303-13"></a>
<a id="__codelineno-303-14" name="__codelineno-303-14" href="#__codelineno-303-14"></a>
<a id="__codelineno-303-15" name="__codelineno-303-15" href="#__codelineno-303-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-303-16" name="__codelineno-303-16" href="#__codelineno-303-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-303-17" name="__codelineno-303-17" href="#__codelineno-303-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-303-18" name="__codelineno-303-18" href="#__codelineno-303-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-303-19" name="__codelineno-303-19" href="#__codelineno-303-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-303-20" name="__codelineno-303-20" href="#__codelineno-303-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-303-21" name="__codelineno-303-21" href="#__codelineno-303-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-303-22" name="__codelineno-303-22" href="#__codelineno-303-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-303-23" name="__codelineno-303-23" href="#__codelineno-303-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-303-24" name="__codelineno-303-24" href="#__codelineno-303-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-303-25" name="__codelineno-303-25" href="#__codelineno-303-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-303-26" name="__codelineno-303-26" href="#__codelineno-303-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-303-27" name="__codelineno-303-27" href="#__codelineno-303-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-303-28" name="__codelineno-303-28" href="#__codelineno-303-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-303-29" name="__codelineno-303-29" href="#__codelineno-303-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-303-30" name="__codelineno-303-30" href="#__codelineno-303-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-304-1" name="__codelineno-304-1" href="#__codelineno-304-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-304-2" name="__codelineno-304-2" href="#__codelineno-304-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-304-3" name="__codelineno-304-3" href="#__codelineno-304-3"></a>
<a id="__codelineno-304-4" name="__codelineno-304-4" href="#__codelineno-304-4"></a>
<a id="__codelineno-304-5" name="__codelineno-304-5" href="#__codelineno-304-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-304-6" name="__codelineno-304-6" href="#__codelineno-304-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-304-7" name="__codelineno-304-7" href="#__codelineno-304-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-304-8" name="__codelineno-304-8" href="#__codelineno-304-8"></a>
<a id="__codelineno-304-9" name="__codelineno-304-9" href="#__codelineno-304-9"></a>
<a id="__codelineno-304-10" name="__codelineno-304-10" href="#__codelineno-304-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-304-11" name="__codelineno-304-11" href="#__codelineno-304-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-304-12" name="__codelineno-304-12" href="#__codelineno-304-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-304-13" name="__codelineno-304-13" href="#__codelineno-304-13"></a>
<a id="__codelineno-304-14" name="__codelineno-304-14" href="#__codelineno-304-14"></a>
<a id="__codelineno-304-15" name="__codelineno-304-15" href="#__codelineno-304-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-304-16" name="__codelineno-304-16" href="#__codelineno-304-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-304-17" name="__codelineno-304-17" href="#__codelineno-304-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-304-18" name="__codelineno-304-18" href="#__codelineno-304-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-304-19" name="__codelineno-304-19" href="#__codelineno-304-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-304-20" name="__codelineno-304-20" href="#__codelineno-304-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-304-21" name="__codelineno-304-21" href="#__codelineno-304-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-304-22" name="__codelineno-304-22" href="#__codelineno-304-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-304-23" name="__codelineno-304-23" href="#__codelineno-304-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-304-24" name="__codelineno-304-24" href="#__codelineno-304-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-304-25" name="__codelineno-304-25" href="#__codelineno-304-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-304-26" name="__codelineno-304-26" href="#__codelineno-304-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-304-27" name="__codelineno-304-27" href="#__codelineno-304-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-304-28" name="__codelineno-304-28" href="#__codelineno-304-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-304-29" name="__codelineno-304-29" href="#__codelineno-304-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-304-30" name="__codelineno-304-30" href="#__codelineno-304-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-305-1" name="__codelineno-305-1" href="#__codelineno-305-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-305-2" name="__codelineno-305-2" href="#__codelineno-305-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-305-3" name="__codelineno-305-3" href="#__codelineno-305-3"></a>
<a id="__codelineno-305-4" name="__codelineno-305-4" href="#__codelineno-305-4"></a>
<a id="__codelineno-305-5" name="__codelineno-305-5" href="#__codelineno-305-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-305-6" name="__codelineno-305-6" href="#__codelineno-305-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-305-7" name="__codelineno-305-7" href="#__codelineno-305-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-305-8" name="__codelineno-305-8" href="#__codelineno-305-8"></a>
<a id="__codelineno-305-9" name="__codelineno-305-9" href="#__codelineno-305-9"></a>
<a id="__codelineno-305-10" name="__codelineno-305-10" href="#__codelineno-305-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-305-11" name="__codelineno-305-11" href="#__codelineno-305-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-305-12" name="__codelineno-305-12" href="#__codelineno-305-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-305-13" name="__codelineno-305-13" href="#__codelineno-305-13"></a>
<a id="__codelineno-305-14" name="__codelineno-305-14" href="#__codelineno-305-14"></a>
<a id="__codelineno-305-15" name="__codelineno-305-15" href="#__codelineno-305-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-305-16" name="__codelineno-305-16" href="#__codelineno-305-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-305-17" name="__codelineno-305-17" href="#__codelineno-305-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-305-18" name="__codelineno-305-18" href="#__codelineno-305-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-305-19" name="__codelineno-305-19" href="#__codelineno-305-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-305-20" name="__codelineno-305-20" href="#__codelineno-305-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-305-21" name="__codelineno-305-21" href="#__codelineno-305-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-305-22" name="__codelineno-305-22" href="#__codelineno-305-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-305-23" name="__codelineno-305-23" href="#__codelineno-305-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-305-24" name="__codelineno-305-24" href="#__codelineno-305-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-305-25" name="__codelineno-305-25" href="#__codelineno-305-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-305-26" name="__codelineno-305-26" href="#__codelineno-305-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-305-27" name="__codelineno-305-27" href="#__codelineno-305-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-305-28" name="__codelineno-305-28" href="#__codelineno-305-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-305-29" name="__codelineno-305-29" href="#__codelineno-305-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-305-30" name="__codelineno-305-30" href="#__codelineno-305-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-306-1" name="__codelineno-306-1" href="#__codelineno-306-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-306-2" name="__codelineno-306-2" href="#__codelineno-306-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-306-3" name="__codelineno-306-3" href="#__codelineno-306-3"></a>
<a id="__codelineno-306-4" name="__codelineno-306-4" href="#__codelineno-306-4"></a>
<a id="__codelineno-306-5" name="__codelineno-306-5" href="#__codelineno-306-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-306-6" name="__codelineno-306-6" href="#__codelineno-306-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-306-7" name="__codelineno-306-7" href="#__codelineno-306-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-306-8" name="__codelineno-306-8" href="#__codelineno-306-8"></a>
<a id="__codelineno-306-9" name="__codelineno-306-9" href="#__codelineno-306-9"></a>
<a id="__codelineno-306-10" name="__codelineno-306-10" href="#__codelineno-306-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-306-11" name="__codelineno-306-11" href="#__codelineno-306-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-306-12" name="__codelineno-306-12" href="#__codelineno-306-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-306-13" name="__codelineno-306-13" href="#__codelineno-306-13"></a>
<a id="__codelineno-306-14" name="__codelineno-306-14" href="#__codelineno-306-14"></a>
<a id="__codelineno-306-15" name="__codelineno-306-15" href="#__codelineno-306-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-306-16" name="__codelineno-306-16" href="#__codelineno-306-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-306-17" name="__codelineno-306-17" href="#__codelineno-306-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-306-18" name="__codelineno-306-18" href="#__codelineno-306-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-306-19" name="__codelineno-306-19" href="#__codelineno-306-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-306-20" name="__codelineno-306-20" href="#__codelineno-306-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-306-21" name="__codelineno-306-21" href="#__codelineno-306-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-306-22" name="__codelineno-306-22" href="#__codelineno-306-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-306-23" name="__codelineno-306-23" href="#__codelineno-306-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-306-24" name="__codelineno-306-24" href="#__codelineno-306-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-306-25" name="__codelineno-306-25" href="#__codelineno-306-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-306-26" name="__codelineno-306-26" href="#__codelineno-306-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-306-27" name="__codelineno-306-27" href="#__codelineno-306-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-306-28" name="__codelineno-306-28" href="#__codelineno-306-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-306-29" name="__codelineno-306-29" href="#__codelineno-306-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-306-30" name="__codelineno-306-30" href="#__codelineno-306-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-307-1" name="__codelineno-307-1" href="#__codelineno-307-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-307-2" name="__codelineno-307-2" href="#__codelineno-307-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-307-3" name="__codelineno-307-3" href="#__codelineno-307-3"></a>
<a id="__codelineno-307-4" name="__codelineno-307-4" href="#__codelineno-307-4"></a>
<a id="__codelineno-307-5" name="__codelineno-307-5" href="#__codelineno-307-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-307-6" name="__codelineno-307-6" href="#__codelineno-307-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-307-7" name="__codelineno-307-7" href="#__codelineno-307-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-307-8" name="__codelineno-307-8" href="#__codelineno-307-8"></a>
<a id="__codelineno-307-9" name="__codelineno-307-9" href="#__codelineno-307-9"></a>
<a id="__codelineno-307-10" name="__codelineno-307-10" href="#__codelineno-307-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-307-11" name="__codelineno-307-11" href="#__codelineno-307-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-307-12" name="__codelineno-307-12" href="#__codelineno-307-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-307-13" name="__codelineno-307-13" href="#__codelineno-307-13"></a>
<a id="__codelineno-307-14" name="__codelineno-307-14" href="#__codelineno-307-14"></a>
<a id="__codelineno-307-15" name="__codelineno-307-15" href="#__codelineno-307-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-307-16" name="__codelineno-307-16" href="#__codelineno-307-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-307-17" name="__codelineno-307-17" href="#__codelineno-307-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-307-18" name="__codelineno-307-18" href="#__codelineno-307-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-307-19" name="__codelineno-307-19" href="#__codelineno-307-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-307-20" name="__codelineno-307-20" href="#__codelineno-307-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-307-21" name="__codelineno-307-21" href="#__codelineno-307-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-307-22" name="__codelineno-307-22" href="#__codelineno-307-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-307-23" name="__codelineno-307-23" href="#__codelineno-307-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-307-24" name="__codelineno-307-24" href="#__codelineno-307-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-307-25" name="__codelineno-307-25" href="#__codelineno-307-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-307-26" name="__codelineno-307-26" href="#__codelineno-307-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-307-27" name="__codelineno-307-27" href="#__codelineno-307-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-307-28" name="__codelineno-307-28" href="#__codelineno-307-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-307-29" name="__codelineno-307-29" href="#__codelineno-307-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-307-30" name="__codelineno-307-30" href="#__codelineno-307-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-308-1" name="__codelineno-308-1" href="#__codelineno-308-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-308-2" name="__codelineno-308-2" href="#__codelineno-308-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-308-3" name="__codelineno-308-3" href="#__codelineno-308-3"></a>
<a id="__codelineno-308-4" name="__codelineno-308-4" href="#__codelineno-308-4"></a>
<a id="__codelineno-308-5" name="__codelineno-308-5" href="#__codelineno-308-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-308-6" name="__codelineno-308-6" href="#__codelineno-308-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-308-7" name="__codelineno-308-7" href="#__codelineno-308-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-308-8" name="__codelineno-308-8" href="#__codelineno-308-8"></a>
<a id="__codelineno-308-9" name="__codelineno-308-9" href="#__codelineno-308-9"></a>
<a id="__codelineno-308-10" name="__codelineno-308-10" href="#__codelineno-308-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-308-11" name="__codelineno-308-11" href="#__codelineno-308-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
<a id="__codelineno-308-12" name="__codelineno-308-12" href="#__codelineno-308-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-308-13" name="__codelineno-308-13" href="#__codelineno-308-13"></a>
<a id="__codelineno-308-14" name="__codelineno-308-14" href="#__codelineno-308-14"></a>
<a id="__codelineno-308-15" name="__codelineno-308-15" href="#__codelineno-308-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-308-16" name="__codelineno-308-16" href="#__codelineno-308-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-308-17" name="__codelineno-308-17" href="#__codelineno-308-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-308-18" name="__codelineno-308-18" href="#__codelineno-308-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-308-19" name="__codelineno-308-19" href="#__codelineno-308-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-308-20" name="__codelineno-308-20" href="#__codelineno-308-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-308-21" name="__codelineno-308-21" href="#__codelineno-308-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-308-22" name="__codelineno-308-22" href="#__codelineno-308-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-308-23" name="__codelineno-308-23" href="#__codelineno-308-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-308-24" name="__codelineno-308-24" href="#__codelineno-308-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-308-25" name="__codelineno-308-25" href="#__codelineno-308-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-308-26" name="__codelineno-308-26" href="#__codelineno-308-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-308-27" name="__codelineno-308-27" href="#__codelineno-308-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-308-28" name="__codelineno-308-28" href="#__codelineno-308-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-308-29" name="__codelineno-308-29" href="#__codelineno-308-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-308-30" name="__codelineno-308-30" href="#__codelineno-308-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-309-1" name="__codelineno-309-1" href="#__codelineno-309-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-309-2" name="__codelineno-309-2" href="#__codelineno-309-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-309-3" name="__codelineno-309-3" href="#__codelineno-309-3"></a>
<a id="__codelineno-309-4" name="__codelineno-309-4" href="#__codelineno-309-4"></a>
<a id="__codelineno-309-5" name="__codelineno-309-5" href="#__codelineno-309-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-309-6" name="__codelineno-309-6" href="#__codelineno-309-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-309-7" name="__codelineno-309-7" href="#__codelineno-309-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-309-8" name="__codelineno-309-8" href="#__codelineno-309-8"></a>
<a id="__codelineno-309-9" name="__codelineno-309-9" href="#__codelineno-309-9"></a>
<a id="__codelineno-309-10" name="__codelineno-309-10" href="#__codelineno-309-10"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-309-11" name="__codelineno-309-11" href="#__codelineno-309-11"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-309-12" name="__codelineno-309-12" href="#__codelineno-309-12"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-309-13" name="__codelineno-309-13" href="#__codelineno-309-13"></a>
<a id="__codelineno-309-14" name="__codelineno-309-14" href="#__codelineno-309-14"></a>
<a id="__codelineno-309-15" name="__codelineno-309-15" href="#__codelineno-309-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-309-16" name="__codelineno-309-16" href="#__codelineno-309-16"></a><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
<a id="__codelineno-309-17" name="__codelineno-309-17" href="#__codelineno-309-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
<a id="__codelineno-309-18" name="__codelineno-309-18" href="#__codelineno-309-18"></a><span class="hll"><span class="c1"># Output:</span>
</span><a id="__codelineno-309-19" name="__codelineno-309-19" href="#__codelineno-309-19"></a><span class="hll"><span class="c1"># title=None author=None</span>
</span><a id="__codelineno-309-20" name="__codelineno-309-20" href="#__codelineno-309-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-309-21" name="__codelineno-309-21" href="#__codelineno-309-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-309-22" name="__codelineno-309-22" href="#__codelineno-309-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-309-23" name="__codelineno-309-23" href="#__codelineno-309-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-309-24" name="__codelineno-309-24" href="#__codelineno-309-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-309-25" name="__codelineno-309-25" href="#__codelineno-309-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-309-26" name="__codelineno-309-26" href="#__codelineno-309-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-309-27" name="__codelineno-309-27" href="#__codelineno-309-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-309-28" name="__codelineno-309-28" href="#__codelineno-309-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-309-29" name="__codelineno-309-29" href="#__codelineno-309-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-309-30" name="__codelineno-309-30" href="#__codelineno-309-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="40:10"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><input id="__tabbed_40_2" name="__tabbed_40" type="radio" /><input id="__tabbed_40_3" name="__tabbed_40" type="radio" /><input id="__tabbed_40_4" name="__tabbed_40" type="radio" /><input id="__tabbed_40_5" name="__tabbed_40" type="radio" /><input id="__tabbed_40_6" name="__tabbed_40" type="radio" /><input id="__tabbed_40_7" name="__tabbed_40" type="radio" /><input id="__tabbed_40_8" name="__tabbed_40" type="radio" /><input id="__tabbed_40_9" name="__tabbed_40" type="radio" /><input id="__tabbed_40_10" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">OpenAI</label><label for="__tabbed_40_2">Anthropic</label><label for="__tabbed_40_3">Google</label><label for="__tabbed_40_4">Groq</label><label for="__tabbed_40_5">xAI</label><label for="__tabbed_40_6">Mistral</label><label for="__tabbed_40_7">Cohere</label><label for="__tabbed_40_8">LiteLLM</label><label for="__tabbed_40_9">Azure AI</label><label for="__tabbed_40_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-310-1" name="__codelineno-310-1" href="#__codelineno-310-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-310-2" name="__codelineno-310-2" href="#__codelineno-310-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-310-3" name="__codelineno-310-3" href="#__codelineno-310-3"></a>
<a id="__codelineno-310-4" name="__codelineno-310-4" href="#__codelineno-310-4"></a>
<a id="__codelineno-310-5" name="__codelineno-310-5" href="#__codelineno-310-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-310-6" name="__codelineno-310-6" href="#__codelineno-310-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-310-7" name="__codelineno-310-7" href="#__codelineno-310-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-310-8" name="__codelineno-310-8" href="#__codelineno-310-8"></a>
<a id="__codelineno-310-9" name="__codelineno-310-9" href="#__codelineno-310-9"></a>
<a id="__codelineno-310-10" name="__codelineno-310-10" href="#__codelineno-310-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-310-11" name="__codelineno-310-11" href="#__codelineno-310-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-310-12" name="__codelineno-310-12" href="#__codelineno-310-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-310-13" name="__codelineno-310-13" href="#__codelineno-310-13"></a>
<a id="__codelineno-310-14" name="__codelineno-310-14" href="#__codelineno-310-14"></a>
<a id="__codelineno-310-15" name="__codelineno-310-15" href="#__codelineno-310-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-310-16" name="__codelineno-310-16" href="#__codelineno-310-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-310-17" name="__codelineno-310-17" href="#__codelineno-310-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-310-18" name="__codelineno-310-18" href="#__codelineno-310-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-310-19" name="__codelineno-310-19" href="#__codelineno-310-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-310-20" name="__codelineno-310-20" href="#__codelineno-310-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-310-21" name="__codelineno-310-21" href="#__codelineno-310-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-310-22" name="__codelineno-310-22" href="#__codelineno-310-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-310-23" name="__codelineno-310-23" href="#__codelineno-310-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-310-24" name="__codelineno-310-24" href="#__codelineno-310-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-310-25" name="__codelineno-310-25" href="#__codelineno-310-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-310-26" name="__codelineno-310-26" href="#__codelineno-310-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-310-27" name="__codelineno-310-27" href="#__codelineno-310-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-310-28" name="__codelineno-310-28" href="#__codelineno-310-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-310-29" name="__codelineno-310-29" href="#__codelineno-310-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-310-30" name="__codelineno-310-30" href="#__codelineno-310-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-311-1" name="__codelineno-311-1" href="#__codelineno-311-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-311-2" name="__codelineno-311-2" href="#__codelineno-311-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-311-3" name="__codelineno-311-3" href="#__codelineno-311-3"></a>
<a id="__codelineno-311-4" name="__codelineno-311-4" href="#__codelineno-311-4"></a>
<a id="__codelineno-311-5" name="__codelineno-311-5" href="#__codelineno-311-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-311-6" name="__codelineno-311-6" href="#__codelineno-311-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-311-7" name="__codelineno-311-7" href="#__codelineno-311-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-311-8" name="__codelineno-311-8" href="#__codelineno-311-8"></a>
<a id="__codelineno-311-9" name="__codelineno-311-9" href="#__codelineno-311-9"></a>
<a id="__codelineno-311-10" name="__codelineno-311-10" href="#__codelineno-311-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-311-11" name="__codelineno-311-11" href="#__codelineno-311-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-311-12" name="__codelineno-311-12" href="#__codelineno-311-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-311-13" name="__codelineno-311-13" href="#__codelineno-311-13"></a>
<a id="__codelineno-311-14" name="__codelineno-311-14" href="#__codelineno-311-14"></a>
<a id="__codelineno-311-15" name="__codelineno-311-15" href="#__codelineno-311-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-311-16" name="__codelineno-311-16" href="#__codelineno-311-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-311-17" name="__codelineno-311-17" href="#__codelineno-311-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-311-18" name="__codelineno-311-18" href="#__codelineno-311-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-311-19" name="__codelineno-311-19" href="#__codelineno-311-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-311-20" name="__codelineno-311-20" href="#__codelineno-311-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-311-21" name="__codelineno-311-21" href="#__codelineno-311-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-311-22" name="__codelineno-311-22" href="#__codelineno-311-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-311-23" name="__codelineno-311-23" href="#__codelineno-311-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-311-24" name="__codelineno-311-24" href="#__codelineno-311-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-311-25" name="__codelineno-311-25" href="#__codelineno-311-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-311-26" name="__codelineno-311-26" href="#__codelineno-311-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-311-27" name="__codelineno-311-27" href="#__codelineno-311-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-311-28" name="__codelineno-311-28" href="#__codelineno-311-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-311-29" name="__codelineno-311-29" href="#__codelineno-311-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-311-30" name="__codelineno-311-30" href="#__codelineno-311-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-312-1" name="__codelineno-312-1" href="#__codelineno-312-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-312-2" name="__codelineno-312-2" href="#__codelineno-312-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-312-3" name="__codelineno-312-3" href="#__codelineno-312-3"></a>
<a id="__codelineno-312-4" name="__codelineno-312-4" href="#__codelineno-312-4"></a>
<a id="__codelineno-312-5" name="__codelineno-312-5" href="#__codelineno-312-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-312-6" name="__codelineno-312-6" href="#__codelineno-312-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-312-7" name="__codelineno-312-7" href="#__codelineno-312-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-312-8" name="__codelineno-312-8" href="#__codelineno-312-8"></a>
<a id="__codelineno-312-9" name="__codelineno-312-9" href="#__codelineno-312-9"></a>
<a id="__codelineno-312-10" name="__codelineno-312-10" href="#__codelineno-312-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-312-11" name="__codelineno-312-11" href="#__codelineno-312-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-312-12" name="__codelineno-312-12" href="#__codelineno-312-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-312-13" name="__codelineno-312-13" href="#__codelineno-312-13"></a>
<a id="__codelineno-312-14" name="__codelineno-312-14" href="#__codelineno-312-14"></a>
<a id="__codelineno-312-15" name="__codelineno-312-15" href="#__codelineno-312-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-312-16" name="__codelineno-312-16" href="#__codelineno-312-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-312-17" name="__codelineno-312-17" href="#__codelineno-312-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-312-18" name="__codelineno-312-18" href="#__codelineno-312-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-312-19" name="__codelineno-312-19" href="#__codelineno-312-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-312-20" name="__codelineno-312-20" href="#__codelineno-312-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-312-21" name="__codelineno-312-21" href="#__codelineno-312-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-312-22" name="__codelineno-312-22" href="#__codelineno-312-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-312-23" name="__codelineno-312-23" href="#__codelineno-312-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-312-24" name="__codelineno-312-24" href="#__codelineno-312-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-312-25" name="__codelineno-312-25" href="#__codelineno-312-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-312-26" name="__codelineno-312-26" href="#__codelineno-312-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-312-27" name="__codelineno-312-27" href="#__codelineno-312-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-312-28" name="__codelineno-312-28" href="#__codelineno-312-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-312-29" name="__codelineno-312-29" href="#__codelineno-312-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-312-30" name="__codelineno-312-30" href="#__codelineno-312-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-313-1" name="__codelineno-313-1" href="#__codelineno-313-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-313-2" name="__codelineno-313-2" href="#__codelineno-313-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-313-3" name="__codelineno-313-3" href="#__codelineno-313-3"></a>
<a id="__codelineno-313-4" name="__codelineno-313-4" href="#__codelineno-313-4"></a>
<a id="__codelineno-313-5" name="__codelineno-313-5" href="#__codelineno-313-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-313-6" name="__codelineno-313-6" href="#__codelineno-313-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-313-7" name="__codelineno-313-7" href="#__codelineno-313-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-313-8" name="__codelineno-313-8" href="#__codelineno-313-8"></a>
<a id="__codelineno-313-9" name="__codelineno-313-9" href="#__codelineno-313-9"></a>
<a id="__codelineno-313-10" name="__codelineno-313-10" href="#__codelineno-313-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-313-11" name="__codelineno-313-11" href="#__codelineno-313-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-313-12" name="__codelineno-313-12" href="#__codelineno-313-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-313-13" name="__codelineno-313-13" href="#__codelineno-313-13"></a>
<a id="__codelineno-313-14" name="__codelineno-313-14" href="#__codelineno-313-14"></a>
<a id="__codelineno-313-15" name="__codelineno-313-15" href="#__codelineno-313-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-313-16" name="__codelineno-313-16" href="#__codelineno-313-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-313-17" name="__codelineno-313-17" href="#__codelineno-313-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-313-18" name="__codelineno-313-18" href="#__codelineno-313-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-313-19" name="__codelineno-313-19" href="#__codelineno-313-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-313-20" name="__codelineno-313-20" href="#__codelineno-313-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-313-21" name="__codelineno-313-21" href="#__codelineno-313-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-313-22" name="__codelineno-313-22" href="#__codelineno-313-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-313-23" name="__codelineno-313-23" href="#__codelineno-313-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-313-24" name="__codelineno-313-24" href="#__codelineno-313-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-313-25" name="__codelineno-313-25" href="#__codelineno-313-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-313-26" name="__codelineno-313-26" href="#__codelineno-313-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-313-27" name="__codelineno-313-27" href="#__codelineno-313-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-313-28" name="__codelineno-313-28" href="#__codelineno-313-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-313-29" name="__codelineno-313-29" href="#__codelineno-313-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-313-30" name="__codelineno-313-30" href="#__codelineno-313-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-314-1" name="__codelineno-314-1" href="#__codelineno-314-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-314-2" name="__codelineno-314-2" href="#__codelineno-314-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-314-3" name="__codelineno-314-3" href="#__codelineno-314-3"></a>
<a id="__codelineno-314-4" name="__codelineno-314-4" href="#__codelineno-314-4"></a>
<a id="__codelineno-314-5" name="__codelineno-314-5" href="#__codelineno-314-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-314-6" name="__codelineno-314-6" href="#__codelineno-314-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-314-7" name="__codelineno-314-7" href="#__codelineno-314-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-314-8" name="__codelineno-314-8" href="#__codelineno-314-8"></a>
<a id="__codelineno-314-9" name="__codelineno-314-9" href="#__codelineno-314-9"></a>
<a id="__codelineno-314-10" name="__codelineno-314-10" href="#__codelineno-314-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-314-11" name="__codelineno-314-11" href="#__codelineno-314-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-314-12" name="__codelineno-314-12" href="#__codelineno-314-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-314-13" name="__codelineno-314-13" href="#__codelineno-314-13"></a>
<a id="__codelineno-314-14" name="__codelineno-314-14" href="#__codelineno-314-14"></a>
<a id="__codelineno-314-15" name="__codelineno-314-15" href="#__codelineno-314-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-314-16" name="__codelineno-314-16" href="#__codelineno-314-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-314-17" name="__codelineno-314-17" href="#__codelineno-314-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-314-18" name="__codelineno-314-18" href="#__codelineno-314-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-314-19" name="__codelineno-314-19" href="#__codelineno-314-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-314-20" name="__codelineno-314-20" href="#__codelineno-314-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-314-21" name="__codelineno-314-21" href="#__codelineno-314-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-314-22" name="__codelineno-314-22" href="#__codelineno-314-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-314-23" name="__codelineno-314-23" href="#__codelineno-314-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-314-24" name="__codelineno-314-24" href="#__codelineno-314-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-314-25" name="__codelineno-314-25" href="#__codelineno-314-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-314-26" name="__codelineno-314-26" href="#__codelineno-314-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-314-27" name="__codelineno-314-27" href="#__codelineno-314-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-314-28" name="__codelineno-314-28" href="#__codelineno-314-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-314-29" name="__codelineno-314-29" href="#__codelineno-314-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-314-30" name="__codelineno-314-30" href="#__codelineno-314-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-315-1" name="__codelineno-315-1" href="#__codelineno-315-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-315-2" name="__codelineno-315-2" href="#__codelineno-315-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-315-3" name="__codelineno-315-3" href="#__codelineno-315-3"></a>
<a id="__codelineno-315-4" name="__codelineno-315-4" href="#__codelineno-315-4"></a>
<a id="__codelineno-315-5" name="__codelineno-315-5" href="#__codelineno-315-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-315-6" name="__codelineno-315-6" href="#__codelineno-315-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-315-7" name="__codelineno-315-7" href="#__codelineno-315-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-315-8" name="__codelineno-315-8" href="#__codelineno-315-8"></a>
<a id="__codelineno-315-9" name="__codelineno-315-9" href="#__codelineno-315-9"></a>
<a id="__codelineno-315-10" name="__codelineno-315-10" href="#__codelineno-315-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-315-11" name="__codelineno-315-11" href="#__codelineno-315-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-315-12" name="__codelineno-315-12" href="#__codelineno-315-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-315-13" name="__codelineno-315-13" href="#__codelineno-315-13"></a>
<a id="__codelineno-315-14" name="__codelineno-315-14" href="#__codelineno-315-14"></a>
<a id="__codelineno-315-15" name="__codelineno-315-15" href="#__codelineno-315-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-315-16" name="__codelineno-315-16" href="#__codelineno-315-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-315-17" name="__codelineno-315-17" href="#__codelineno-315-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-315-18" name="__codelineno-315-18" href="#__codelineno-315-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-315-19" name="__codelineno-315-19" href="#__codelineno-315-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-315-20" name="__codelineno-315-20" href="#__codelineno-315-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-315-21" name="__codelineno-315-21" href="#__codelineno-315-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-315-22" name="__codelineno-315-22" href="#__codelineno-315-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-315-23" name="__codelineno-315-23" href="#__codelineno-315-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-315-24" name="__codelineno-315-24" href="#__codelineno-315-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-315-25" name="__codelineno-315-25" href="#__codelineno-315-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-315-26" name="__codelineno-315-26" href="#__codelineno-315-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-315-27" name="__codelineno-315-27" href="#__codelineno-315-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-315-28" name="__codelineno-315-28" href="#__codelineno-315-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-315-29" name="__codelineno-315-29" href="#__codelineno-315-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-315-30" name="__codelineno-315-30" href="#__codelineno-315-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-316-1" name="__codelineno-316-1" href="#__codelineno-316-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-316-2" name="__codelineno-316-2" href="#__codelineno-316-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-316-3" name="__codelineno-316-3" href="#__codelineno-316-3"></a>
<a id="__codelineno-316-4" name="__codelineno-316-4" href="#__codelineno-316-4"></a>
<a id="__codelineno-316-5" name="__codelineno-316-5" href="#__codelineno-316-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-316-6" name="__codelineno-316-6" href="#__codelineno-316-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-316-7" name="__codelineno-316-7" href="#__codelineno-316-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-316-8" name="__codelineno-316-8" href="#__codelineno-316-8"></a>
<a id="__codelineno-316-9" name="__codelineno-316-9" href="#__codelineno-316-9"></a>
<a id="__codelineno-316-10" name="__codelineno-316-10" href="#__codelineno-316-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-316-11" name="__codelineno-316-11" href="#__codelineno-316-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-316-12" name="__codelineno-316-12" href="#__codelineno-316-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-316-13" name="__codelineno-316-13" href="#__codelineno-316-13"></a>
<a id="__codelineno-316-14" name="__codelineno-316-14" href="#__codelineno-316-14"></a>
<a id="__codelineno-316-15" name="__codelineno-316-15" href="#__codelineno-316-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-316-16" name="__codelineno-316-16" href="#__codelineno-316-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-316-17" name="__codelineno-316-17" href="#__codelineno-316-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-316-18" name="__codelineno-316-18" href="#__codelineno-316-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-316-19" name="__codelineno-316-19" href="#__codelineno-316-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-316-20" name="__codelineno-316-20" href="#__codelineno-316-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-316-21" name="__codelineno-316-21" href="#__codelineno-316-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-316-22" name="__codelineno-316-22" href="#__codelineno-316-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-316-23" name="__codelineno-316-23" href="#__codelineno-316-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-316-24" name="__codelineno-316-24" href="#__codelineno-316-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-316-25" name="__codelineno-316-25" href="#__codelineno-316-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-316-26" name="__codelineno-316-26" href="#__codelineno-316-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-316-27" name="__codelineno-316-27" href="#__codelineno-316-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-316-28" name="__codelineno-316-28" href="#__codelineno-316-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-316-29" name="__codelineno-316-29" href="#__codelineno-316-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-316-30" name="__codelineno-316-30" href="#__codelineno-316-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-317-1" name="__codelineno-317-1" href="#__codelineno-317-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-317-2" name="__codelineno-317-2" href="#__codelineno-317-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-317-3" name="__codelineno-317-3" href="#__codelineno-317-3"></a>
<a id="__codelineno-317-4" name="__codelineno-317-4" href="#__codelineno-317-4"></a>
<a id="__codelineno-317-5" name="__codelineno-317-5" href="#__codelineno-317-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-317-6" name="__codelineno-317-6" href="#__codelineno-317-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-317-7" name="__codelineno-317-7" href="#__codelineno-317-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-317-8" name="__codelineno-317-8" href="#__codelineno-317-8"></a>
<a id="__codelineno-317-9" name="__codelineno-317-9" href="#__codelineno-317-9"></a>
<a id="__codelineno-317-10" name="__codelineno-317-10" href="#__codelineno-317-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-317-11" name="__codelineno-317-11" href="#__codelineno-317-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-317-12" name="__codelineno-317-12" href="#__codelineno-317-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-317-13" name="__codelineno-317-13" href="#__codelineno-317-13"></a>
<a id="__codelineno-317-14" name="__codelineno-317-14" href="#__codelineno-317-14"></a>
<a id="__codelineno-317-15" name="__codelineno-317-15" href="#__codelineno-317-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-317-16" name="__codelineno-317-16" href="#__codelineno-317-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-317-17" name="__codelineno-317-17" href="#__codelineno-317-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-317-18" name="__codelineno-317-18" href="#__codelineno-317-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-317-19" name="__codelineno-317-19" href="#__codelineno-317-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-317-20" name="__codelineno-317-20" href="#__codelineno-317-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-317-21" name="__codelineno-317-21" href="#__codelineno-317-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-317-22" name="__codelineno-317-22" href="#__codelineno-317-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-317-23" name="__codelineno-317-23" href="#__codelineno-317-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-317-24" name="__codelineno-317-24" href="#__codelineno-317-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-317-25" name="__codelineno-317-25" href="#__codelineno-317-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-317-26" name="__codelineno-317-26" href="#__codelineno-317-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-317-27" name="__codelineno-317-27" href="#__codelineno-317-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-317-28" name="__codelineno-317-28" href="#__codelineno-317-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-317-29" name="__codelineno-317-29" href="#__codelineno-317-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-317-30" name="__codelineno-317-30" href="#__codelineno-317-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-318-1" name="__codelineno-318-1" href="#__codelineno-318-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-318-2" name="__codelineno-318-2" href="#__codelineno-318-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-318-3" name="__codelineno-318-3" href="#__codelineno-318-3"></a>
<a id="__codelineno-318-4" name="__codelineno-318-4" href="#__codelineno-318-4"></a>
<a id="__codelineno-318-5" name="__codelineno-318-5" href="#__codelineno-318-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-318-6" name="__codelineno-318-6" href="#__codelineno-318-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-318-7" name="__codelineno-318-7" href="#__codelineno-318-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-318-8" name="__codelineno-318-8" href="#__codelineno-318-8"></a>
<a id="__codelineno-318-9" name="__codelineno-318-9" href="#__codelineno-318-9"></a>
<a id="__codelineno-318-10" name="__codelineno-318-10" href="#__codelineno-318-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-318-11" name="__codelineno-318-11" href="#__codelineno-318-11"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-318-12" name="__codelineno-318-12" href="#__codelineno-318-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-318-13" name="__codelineno-318-13" href="#__codelineno-318-13"></a>
<a id="__codelineno-318-14" name="__codelineno-318-14" href="#__codelineno-318-14"></a>
<a id="__codelineno-318-15" name="__codelineno-318-15" href="#__codelineno-318-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-318-16" name="__codelineno-318-16" href="#__codelineno-318-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-318-17" name="__codelineno-318-17" href="#__codelineno-318-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-318-18" name="__codelineno-318-18" href="#__codelineno-318-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-318-19" name="__codelineno-318-19" href="#__codelineno-318-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-318-20" name="__codelineno-318-20" href="#__codelineno-318-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-318-21" name="__codelineno-318-21" href="#__codelineno-318-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-318-22" name="__codelineno-318-22" href="#__codelineno-318-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-318-23" name="__codelineno-318-23" href="#__codelineno-318-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-318-24" name="__codelineno-318-24" href="#__codelineno-318-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-318-25" name="__codelineno-318-25" href="#__codelineno-318-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-318-26" name="__codelineno-318-26" href="#__codelineno-318-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-318-27" name="__codelineno-318-27" href="#__codelineno-318-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-318-28" name="__codelineno-318-28" href="#__codelineno-318-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-318-29" name="__codelineno-318-29" href="#__codelineno-318-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-318-30" name="__codelineno-318-30" href="#__codelineno-318-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-319-1" name="__codelineno-319-1" href="#__codelineno-319-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-319-2" name="__codelineno-319-2" href="#__codelineno-319-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-319-3" name="__codelineno-319-3" href="#__codelineno-319-3"></a>
<a id="__codelineno-319-4" name="__codelineno-319-4" href="#__codelineno-319-4"></a>
<a id="__codelineno-319-5" name="__codelineno-319-5" href="#__codelineno-319-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-319-6" name="__codelineno-319-6" href="#__codelineno-319-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-319-7" name="__codelineno-319-7" href="#__codelineno-319-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-319-8" name="__codelineno-319-8" href="#__codelineno-319-8"></a>
<a id="__codelineno-319-9" name="__codelineno-319-9" href="#__codelineno-319-9"></a>
<a id="__codelineno-319-10" name="__codelineno-319-10" href="#__codelineno-319-10"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-319-11" name="__codelineno-319-11" href="#__codelineno-319-11"></a><span class="hll"><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract </span><span class="si">{text}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><a id="__codelineno-319-12" name="__codelineno-319-12" href="#__codelineno-319-12"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-319-13" name="__codelineno-319-13" href="#__codelineno-319-13"></a>
<a id="__codelineno-319-14" name="__codelineno-319-14" href="#__codelineno-319-14"></a>
<a id="__codelineno-319-15" name="__codelineno-319-15" href="#__codelineno-319-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-319-16" name="__codelineno-319-16" href="#__codelineno-319-16"></a><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
<a id="__codelineno-319-17" name="__codelineno-319-17" href="#__codelineno-319-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
<a id="__codelineno-319-18" name="__codelineno-319-18" href="#__codelineno-319-18"></a><span class="hll"><span class="c1"># Output:</span>
</span><a id="__codelineno-319-19" name="__codelineno-319-19" href="#__codelineno-319-19"></a><span class="hll"><span class="c1"># title=None author=None</span>
</span><a id="__codelineno-319-20" name="__codelineno-319-20" href="#__codelineno-319-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-319-21" name="__codelineno-319-21" href="#__codelineno-319-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-319-22" name="__codelineno-319-22" href="#__codelineno-319-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-319-23" name="__codelineno-319-23" href="#__codelineno-319-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-319-24" name="__codelineno-319-24" href="#__codelineno-319-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-319-25" name="__codelineno-319-25" href="#__codelineno-319-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-319-26" name="__codelineno-319-26" href="#__codelineno-319-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-319-27" name="__codelineno-319-27" href="#__codelineno-319-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-319-28" name="__codelineno-319-28" href="#__codelineno-319-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-319-29" name="__codelineno-319-29" href="#__codelineno-319-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-319-30" name="__codelineno-319-30" href="#__codelineno-319-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="41:10"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><input id="__tabbed_41_2" name="__tabbed_41" type="radio" /><input id="__tabbed_41_3" name="__tabbed_41" type="radio" /><input id="__tabbed_41_4" name="__tabbed_41" type="radio" /><input id="__tabbed_41_5" name="__tabbed_41" type="radio" /><input id="__tabbed_41_6" name="__tabbed_41" type="radio" /><input id="__tabbed_41_7" name="__tabbed_41" type="radio" /><input id="__tabbed_41_8" name="__tabbed_41" type="radio" /><input id="__tabbed_41_9" name="__tabbed_41" type="radio" /><input id="__tabbed_41_10" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">OpenAI</label><label for="__tabbed_41_2">Anthropic</label><label for="__tabbed_41_3">Google</label><label for="__tabbed_41_4">Groq</label><label for="__tabbed_41_5">xAI</label><label for="__tabbed_41_6">Mistral</label><label for="__tabbed_41_7">Cohere</label><label for="__tabbed_41_8">LiteLLM</label><label for="__tabbed_41_9">Azure AI</label><label for="__tabbed_41_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-320-1" name="__codelineno-320-1" href="#__codelineno-320-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-320-2" name="__codelineno-320-2" href="#__codelineno-320-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-320-3" name="__codelineno-320-3" href="#__codelineno-320-3"></a>
<a id="__codelineno-320-4" name="__codelineno-320-4" href="#__codelineno-320-4"></a>
<a id="__codelineno-320-5" name="__codelineno-320-5" href="#__codelineno-320-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-320-6" name="__codelineno-320-6" href="#__codelineno-320-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-320-7" name="__codelineno-320-7" href="#__codelineno-320-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-320-8" name="__codelineno-320-8" href="#__codelineno-320-8"></a>
<a id="__codelineno-320-9" name="__codelineno-320-9" href="#__codelineno-320-9"></a>
<a id="__codelineno-320-10" name="__codelineno-320-10" href="#__codelineno-320-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-320-11" name="__codelineno-320-11" href="#__codelineno-320-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-320-12" name="__codelineno-320-12" href="#__codelineno-320-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-320-13" name="__codelineno-320-13" href="#__codelineno-320-13"></a>
<a id="__codelineno-320-14" name="__codelineno-320-14" href="#__codelineno-320-14"></a>
<a id="__codelineno-320-15" name="__codelineno-320-15" href="#__codelineno-320-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-320-16" name="__codelineno-320-16" href="#__codelineno-320-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-320-17" name="__codelineno-320-17" href="#__codelineno-320-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-320-18" name="__codelineno-320-18" href="#__codelineno-320-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-320-19" name="__codelineno-320-19" href="#__codelineno-320-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-320-20" name="__codelineno-320-20" href="#__codelineno-320-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-320-21" name="__codelineno-320-21" href="#__codelineno-320-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-320-22" name="__codelineno-320-22" href="#__codelineno-320-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-320-23" name="__codelineno-320-23" href="#__codelineno-320-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-320-24" name="__codelineno-320-24" href="#__codelineno-320-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-320-25" name="__codelineno-320-25" href="#__codelineno-320-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-320-26" name="__codelineno-320-26" href="#__codelineno-320-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-320-27" name="__codelineno-320-27" href="#__codelineno-320-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-320-28" name="__codelineno-320-28" href="#__codelineno-320-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-320-29" name="__codelineno-320-29" href="#__codelineno-320-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-320-30" name="__codelineno-320-30" href="#__codelineno-320-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-321-1" name="__codelineno-321-1" href="#__codelineno-321-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-321-2" name="__codelineno-321-2" href="#__codelineno-321-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-321-3" name="__codelineno-321-3" href="#__codelineno-321-3"></a>
<a id="__codelineno-321-4" name="__codelineno-321-4" href="#__codelineno-321-4"></a>
<a id="__codelineno-321-5" name="__codelineno-321-5" href="#__codelineno-321-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-321-6" name="__codelineno-321-6" href="#__codelineno-321-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-321-7" name="__codelineno-321-7" href="#__codelineno-321-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-321-8" name="__codelineno-321-8" href="#__codelineno-321-8"></a>
<a id="__codelineno-321-9" name="__codelineno-321-9" href="#__codelineno-321-9"></a>
<a id="__codelineno-321-10" name="__codelineno-321-10" href="#__codelineno-321-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-321-11" name="__codelineno-321-11" href="#__codelineno-321-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-321-12" name="__codelineno-321-12" href="#__codelineno-321-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-321-13" name="__codelineno-321-13" href="#__codelineno-321-13"></a>
<a id="__codelineno-321-14" name="__codelineno-321-14" href="#__codelineno-321-14"></a>
<a id="__codelineno-321-15" name="__codelineno-321-15" href="#__codelineno-321-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-321-16" name="__codelineno-321-16" href="#__codelineno-321-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-321-17" name="__codelineno-321-17" href="#__codelineno-321-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-321-18" name="__codelineno-321-18" href="#__codelineno-321-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-321-19" name="__codelineno-321-19" href="#__codelineno-321-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-321-20" name="__codelineno-321-20" href="#__codelineno-321-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-321-21" name="__codelineno-321-21" href="#__codelineno-321-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-321-22" name="__codelineno-321-22" href="#__codelineno-321-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-321-23" name="__codelineno-321-23" href="#__codelineno-321-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-321-24" name="__codelineno-321-24" href="#__codelineno-321-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-321-25" name="__codelineno-321-25" href="#__codelineno-321-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-321-26" name="__codelineno-321-26" href="#__codelineno-321-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-321-27" name="__codelineno-321-27" href="#__codelineno-321-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-321-28" name="__codelineno-321-28" href="#__codelineno-321-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-321-29" name="__codelineno-321-29" href="#__codelineno-321-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-321-30" name="__codelineno-321-30" href="#__codelineno-321-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-322-1" name="__codelineno-322-1" href="#__codelineno-322-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-322-2" name="__codelineno-322-2" href="#__codelineno-322-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-322-3" name="__codelineno-322-3" href="#__codelineno-322-3"></a>
<a id="__codelineno-322-4" name="__codelineno-322-4" href="#__codelineno-322-4"></a>
<a id="__codelineno-322-5" name="__codelineno-322-5" href="#__codelineno-322-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-322-6" name="__codelineno-322-6" href="#__codelineno-322-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-322-7" name="__codelineno-322-7" href="#__codelineno-322-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-322-8" name="__codelineno-322-8" href="#__codelineno-322-8"></a>
<a id="__codelineno-322-9" name="__codelineno-322-9" href="#__codelineno-322-9"></a>
<a id="__codelineno-322-10" name="__codelineno-322-10" href="#__codelineno-322-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-322-11" name="__codelineno-322-11" href="#__codelineno-322-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-322-12" name="__codelineno-322-12" href="#__codelineno-322-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-322-13" name="__codelineno-322-13" href="#__codelineno-322-13"></a>
<a id="__codelineno-322-14" name="__codelineno-322-14" href="#__codelineno-322-14"></a>
<a id="__codelineno-322-15" name="__codelineno-322-15" href="#__codelineno-322-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-322-16" name="__codelineno-322-16" href="#__codelineno-322-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-322-17" name="__codelineno-322-17" href="#__codelineno-322-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-322-18" name="__codelineno-322-18" href="#__codelineno-322-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-322-19" name="__codelineno-322-19" href="#__codelineno-322-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-322-20" name="__codelineno-322-20" href="#__codelineno-322-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-322-21" name="__codelineno-322-21" href="#__codelineno-322-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-322-22" name="__codelineno-322-22" href="#__codelineno-322-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-322-23" name="__codelineno-322-23" href="#__codelineno-322-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-322-24" name="__codelineno-322-24" href="#__codelineno-322-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-322-25" name="__codelineno-322-25" href="#__codelineno-322-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-322-26" name="__codelineno-322-26" href="#__codelineno-322-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-322-27" name="__codelineno-322-27" href="#__codelineno-322-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-322-28" name="__codelineno-322-28" href="#__codelineno-322-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-322-29" name="__codelineno-322-29" href="#__codelineno-322-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-322-30" name="__codelineno-322-30" href="#__codelineno-322-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-323-1" name="__codelineno-323-1" href="#__codelineno-323-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-323-2" name="__codelineno-323-2" href="#__codelineno-323-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-323-3" name="__codelineno-323-3" href="#__codelineno-323-3"></a>
<a id="__codelineno-323-4" name="__codelineno-323-4" href="#__codelineno-323-4"></a>
<a id="__codelineno-323-5" name="__codelineno-323-5" href="#__codelineno-323-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-323-6" name="__codelineno-323-6" href="#__codelineno-323-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-323-7" name="__codelineno-323-7" href="#__codelineno-323-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-323-8" name="__codelineno-323-8" href="#__codelineno-323-8"></a>
<a id="__codelineno-323-9" name="__codelineno-323-9" href="#__codelineno-323-9"></a>
<a id="__codelineno-323-10" name="__codelineno-323-10" href="#__codelineno-323-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-323-11" name="__codelineno-323-11" href="#__codelineno-323-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-323-12" name="__codelineno-323-12" href="#__codelineno-323-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-323-13" name="__codelineno-323-13" href="#__codelineno-323-13"></a>
<a id="__codelineno-323-14" name="__codelineno-323-14" href="#__codelineno-323-14"></a>
<a id="__codelineno-323-15" name="__codelineno-323-15" href="#__codelineno-323-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-323-16" name="__codelineno-323-16" href="#__codelineno-323-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-323-17" name="__codelineno-323-17" href="#__codelineno-323-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-323-18" name="__codelineno-323-18" href="#__codelineno-323-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-323-19" name="__codelineno-323-19" href="#__codelineno-323-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-323-20" name="__codelineno-323-20" href="#__codelineno-323-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-323-21" name="__codelineno-323-21" href="#__codelineno-323-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-323-22" name="__codelineno-323-22" href="#__codelineno-323-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-323-23" name="__codelineno-323-23" href="#__codelineno-323-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-323-24" name="__codelineno-323-24" href="#__codelineno-323-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-323-25" name="__codelineno-323-25" href="#__codelineno-323-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-323-26" name="__codelineno-323-26" href="#__codelineno-323-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-323-27" name="__codelineno-323-27" href="#__codelineno-323-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-323-28" name="__codelineno-323-28" href="#__codelineno-323-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-323-29" name="__codelineno-323-29" href="#__codelineno-323-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-323-30" name="__codelineno-323-30" href="#__codelineno-323-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-324-1" name="__codelineno-324-1" href="#__codelineno-324-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-324-2" name="__codelineno-324-2" href="#__codelineno-324-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-324-3" name="__codelineno-324-3" href="#__codelineno-324-3"></a>
<a id="__codelineno-324-4" name="__codelineno-324-4" href="#__codelineno-324-4"></a>
<a id="__codelineno-324-5" name="__codelineno-324-5" href="#__codelineno-324-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-324-6" name="__codelineno-324-6" href="#__codelineno-324-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-324-7" name="__codelineno-324-7" href="#__codelineno-324-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-324-8" name="__codelineno-324-8" href="#__codelineno-324-8"></a>
<a id="__codelineno-324-9" name="__codelineno-324-9" href="#__codelineno-324-9"></a>
<a id="__codelineno-324-10" name="__codelineno-324-10" href="#__codelineno-324-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-324-11" name="__codelineno-324-11" href="#__codelineno-324-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-324-12" name="__codelineno-324-12" href="#__codelineno-324-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-324-13" name="__codelineno-324-13" href="#__codelineno-324-13"></a>
<a id="__codelineno-324-14" name="__codelineno-324-14" href="#__codelineno-324-14"></a>
<a id="__codelineno-324-15" name="__codelineno-324-15" href="#__codelineno-324-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-324-16" name="__codelineno-324-16" href="#__codelineno-324-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-324-17" name="__codelineno-324-17" href="#__codelineno-324-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-324-18" name="__codelineno-324-18" href="#__codelineno-324-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-324-19" name="__codelineno-324-19" href="#__codelineno-324-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-324-20" name="__codelineno-324-20" href="#__codelineno-324-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-324-21" name="__codelineno-324-21" href="#__codelineno-324-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-324-22" name="__codelineno-324-22" href="#__codelineno-324-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-324-23" name="__codelineno-324-23" href="#__codelineno-324-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-324-24" name="__codelineno-324-24" href="#__codelineno-324-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-324-25" name="__codelineno-324-25" href="#__codelineno-324-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-324-26" name="__codelineno-324-26" href="#__codelineno-324-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-324-27" name="__codelineno-324-27" href="#__codelineno-324-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-324-28" name="__codelineno-324-28" href="#__codelineno-324-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-324-29" name="__codelineno-324-29" href="#__codelineno-324-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-324-30" name="__codelineno-324-30" href="#__codelineno-324-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-325-1" name="__codelineno-325-1" href="#__codelineno-325-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-325-2" name="__codelineno-325-2" href="#__codelineno-325-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-325-3" name="__codelineno-325-3" href="#__codelineno-325-3"></a>
<a id="__codelineno-325-4" name="__codelineno-325-4" href="#__codelineno-325-4"></a>
<a id="__codelineno-325-5" name="__codelineno-325-5" href="#__codelineno-325-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-325-6" name="__codelineno-325-6" href="#__codelineno-325-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-325-7" name="__codelineno-325-7" href="#__codelineno-325-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-325-8" name="__codelineno-325-8" href="#__codelineno-325-8"></a>
<a id="__codelineno-325-9" name="__codelineno-325-9" href="#__codelineno-325-9"></a>
<a id="__codelineno-325-10" name="__codelineno-325-10" href="#__codelineno-325-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-325-11" name="__codelineno-325-11" href="#__codelineno-325-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-325-12" name="__codelineno-325-12" href="#__codelineno-325-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-325-13" name="__codelineno-325-13" href="#__codelineno-325-13"></a>
<a id="__codelineno-325-14" name="__codelineno-325-14" href="#__codelineno-325-14"></a>
<a id="__codelineno-325-15" name="__codelineno-325-15" href="#__codelineno-325-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-325-16" name="__codelineno-325-16" href="#__codelineno-325-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-325-17" name="__codelineno-325-17" href="#__codelineno-325-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-325-18" name="__codelineno-325-18" href="#__codelineno-325-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-325-19" name="__codelineno-325-19" href="#__codelineno-325-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-325-20" name="__codelineno-325-20" href="#__codelineno-325-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-325-21" name="__codelineno-325-21" href="#__codelineno-325-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-325-22" name="__codelineno-325-22" href="#__codelineno-325-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-325-23" name="__codelineno-325-23" href="#__codelineno-325-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-325-24" name="__codelineno-325-24" href="#__codelineno-325-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-325-25" name="__codelineno-325-25" href="#__codelineno-325-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-325-26" name="__codelineno-325-26" href="#__codelineno-325-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-325-27" name="__codelineno-325-27" href="#__codelineno-325-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-325-28" name="__codelineno-325-28" href="#__codelineno-325-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-325-29" name="__codelineno-325-29" href="#__codelineno-325-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-325-30" name="__codelineno-325-30" href="#__codelineno-325-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-326-1" name="__codelineno-326-1" href="#__codelineno-326-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-326-2" name="__codelineno-326-2" href="#__codelineno-326-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-326-3" name="__codelineno-326-3" href="#__codelineno-326-3"></a>
<a id="__codelineno-326-4" name="__codelineno-326-4" href="#__codelineno-326-4"></a>
<a id="__codelineno-326-5" name="__codelineno-326-5" href="#__codelineno-326-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-326-6" name="__codelineno-326-6" href="#__codelineno-326-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-326-7" name="__codelineno-326-7" href="#__codelineno-326-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-326-8" name="__codelineno-326-8" href="#__codelineno-326-8"></a>
<a id="__codelineno-326-9" name="__codelineno-326-9" href="#__codelineno-326-9"></a>
<a id="__codelineno-326-10" name="__codelineno-326-10" href="#__codelineno-326-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-326-11" name="__codelineno-326-11" href="#__codelineno-326-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-326-12" name="__codelineno-326-12" href="#__codelineno-326-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-326-13" name="__codelineno-326-13" href="#__codelineno-326-13"></a>
<a id="__codelineno-326-14" name="__codelineno-326-14" href="#__codelineno-326-14"></a>
<a id="__codelineno-326-15" name="__codelineno-326-15" href="#__codelineno-326-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-326-16" name="__codelineno-326-16" href="#__codelineno-326-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-326-17" name="__codelineno-326-17" href="#__codelineno-326-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-326-18" name="__codelineno-326-18" href="#__codelineno-326-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-326-19" name="__codelineno-326-19" href="#__codelineno-326-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-326-20" name="__codelineno-326-20" href="#__codelineno-326-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-326-21" name="__codelineno-326-21" href="#__codelineno-326-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-326-22" name="__codelineno-326-22" href="#__codelineno-326-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-326-23" name="__codelineno-326-23" href="#__codelineno-326-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-326-24" name="__codelineno-326-24" href="#__codelineno-326-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-326-25" name="__codelineno-326-25" href="#__codelineno-326-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-326-26" name="__codelineno-326-26" href="#__codelineno-326-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-326-27" name="__codelineno-326-27" href="#__codelineno-326-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-326-28" name="__codelineno-326-28" href="#__codelineno-326-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-326-29" name="__codelineno-326-29" href="#__codelineno-326-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-326-30" name="__codelineno-326-30" href="#__codelineno-326-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-327-1" name="__codelineno-327-1" href="#__codelineno-327-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-327-2" name="__codelineno-327-2" href="#__codelineno-327-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-327-3" name="__codelineno-327-3" href="#__codelineno-327-3"></a>
<a id="__codelineno-327-4" name="__codelineno-327-4" href="#__codelineno-327-4"></a>
<a id="__codelineno-327-5" name="__codelineno-327-5" href="#__codelineno-327-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-327-6" name="__codelineno-327-6" href="#__codelineno-327-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-327-7" name="__codelineno-327-7" href="#__codelineno-327-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-327-8" name="__codelineno-327-8" href="#__codelineno-327-8"></a>
<a id="__codelineno-327-9" name="__codelineno-327-9" href="#__codelineno-327-9"></a>
<a id="__codelineno-327-10" name="__codelineno-327-10" href="#__codelineno-327-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-327-11" name="__codelineno-327-11" href="#__codelineno-327-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-327-12" name="__codelineno-327-12" href="#__codelineno-327-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-327-13" name="__codelineno-327-13" href="#__codelineno-327-13"></a>
<a id="__codelineno-327-14" name="__codelineno-327-14" href="#__codelineno-327-14"></a>
<a id="__codelineno-327-15" name="__codelineno-327-15" href="#__codelineno-327-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-327-16" name="__codelineno-327-16" href="#__codelineno-327-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-327-17" name="__codelineno-327-17" href="#__codelineno-327-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-327-18" name="__codelineno-327-18" href="#__codelineno-327-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-327-19" name="__codelineno-327-19" href="#__codelineno-327-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-327-20" name="__codelineno-327-20" href="#__codelineno-327-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-327-21" name="__codelineno-327-21" href="#__codelineno-327-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-327-22" name="__codelineno-327-22" href="#__codelineno-327-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-327-23" name="__codelineno-327-23" href="#__codelineno-327-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-327-24" name="__codelineno-327-24" href="#__codelineno-327-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-327-25" name="__codelineno-327-25" href="#__codelineno-327-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-327-26" name="__codelineno-327-26" href="#__codelineno-327-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-327-27" name="__codelineno-327-27" href="#__codelineno-327-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-327-28" name="__codelineno-327-28" href="#__codelineno-327-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-327-29" name="__codelineno-327-29" href="#__codelineno-327-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-327-30" name="__codelineno-327-30" href="#__codelineno-327-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-328-1" name="__codelineno-328-1" href="#__codelineno-328-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-328-2" name="__codelineno-328-2" href="#__codelineno-328-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-328-3" name="__codelineno-328-3" href="#__codelineno-328-3"></a>
<a id="__codelineno-328-4" name="__codelineno-328-4" href="#__codelineno-328-4"></a>
<a id="__codelineno-328-5" name="__codelineno-328-5" href="#__codelineno-328-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-328-6" name="__codelineno-328-6" href="#__codelineno-328-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-328-7" name="__codelineno-328-7" href="#__codelineno-328-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-328-8" name="__codelineno-328-8" href="#__codelineno-328-8"></a>
<a id="__codelineno-328-9" name="__codelineno-328-9" href="#__codelineno-328-9"></a>
<a id="__codelineno-328-10" name="__codelineno-328-10" href="#__codelineno-328-10"></a><span class="hll"><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><a id="__codelineno-328-11" name="__codelineno-328-11" href="#__codelineno-328-11"></a><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
<a id="__codelineno-328-12" name="__codelineno-328-12" href="#__codelineno-328-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-328-13" name="__codelineno-328-13" href="#__codelineno-328-13"></a>
<a id="__codelineno-328-14" name="__codelineno-328-14" href="#__codelineno-328-14"></a>
<a id="__codelineno-328-15" name="__codelineno-328-15" href="#__codelineno-328-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-328-16" name="__codelineno-328-16" href="#__codelineno-328-16"></a><span class="hll"><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
</span><a id="__codelineno-328-17" name="__codelineno-328-17" href="#__codelineno-328-17"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
</span><a id="__codelineno-328-18" name="__codelineno-328-18" href="#__codelineno-328-18"></a><span class="c1"># Output:</span>
<a id="__codelineno-328-19" name="__codelineno-328-19" href="#__codelineno-328-19"></a><span class="c1"># title=None author=None</span>
<a id="__codelineno-328-20" name="__codelineno-328-20" href="#__codelineno-328-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-328-21" name="__codelineno-328-21" href="#__codelineno-328-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-328-22" name="__codelineno-328-22" href="#__codelineno-328-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-328-23" name="__codelineno-328-23" href="#__codelineno-328-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-328-24" name="__codelineno-328-24" href="#__codelineno-328-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-328-25" name="__codelineno-328-25" href="#__codelineno-328-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-328-26" name="__codelineno-328-26" href="#__codelineno-328-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-328-27" name="__codelineno-328-27" href="#__codelineno-328-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-328-28" name="__codelineno-328-28" href="#__codelineno-328-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-328-29" name="__codelineno-328-29" href="#__codelineno-328-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-328-30" name="__codelineno-328-30" href="#__codelineno-328-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-329-1" name="__codelineno-329-1" href="#__codelineno-329-1"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-329-2" name="__codelineno-329-2" href="#__codelineno-329-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<a id="__codelineno-329-3" name="__codelineno-329-3" href="#__codelineno-329-3"></a>
<a id="__codelineno-329-4" name="__codelineno-329-4" href="#__codelineno-329-4"></a>
<a id="__codelineno-329-5" name="__codelineno-329-5" href="#__codelineno-329-5"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-329-6" name="__codelineno-329-6" href="#__codelineno-329-6"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-329-7" name="__codelineno-329-7" href="#__codelineno-329-7"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-329-8" name="__codelineno-329-8" href="#__codelineno-329-8"></a>
<a id="__codelineno-329-9" name="__codelineno-329-9" href="#__codelineno-329-9"></a>
<a id="__codelineno-329-10" name="__codelineno-329-10" href="#__codelineno-329-10"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Book</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-329-11" name="__codelineno-329-11" href="#__codelineno-329-11"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_book</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-329-12" name="__codelineno-329-12" href="#__codelineno-329-12"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)]</span>
<a id="__codelineno-329-13" name="__codelineno-329-13" href="#__codelineno-329-13"></a>
<a id="__codelineno-329-14" name="__codelineno-329-14" href="#__codelineno-329-14"></a>
<a id="__codelineno-329-15" name="__codelineno-329-15" href="#__codelineno-329-15"></a><span class="n">book_stream</span> <span class="o">=</span> <span class="n">extract_book</span><span class="p">(</span><span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">)</span>
<a id="__codelineno-329-16" name="__codelineno-329-16" href="#__codelineno-329-16"></a><span class="k">for</span> <span class="n">partial_book</span> <span class="ow">in</span> <span class="n">book_stream</span><span class="p">:</span>
<a id="__codelineno-329-17" name="__codelineno-329-17" href="#__codelineno-329-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">partial_book</span><span class="p">)</span>
<a id="__codelineno-329-18" name="__codelineno-329-18" href="#__codelineno-329-18"></a><span class="hll"><span class="c1"># Output:</span>
</span><a id="__codelineno-329-19" name="__codelineno-329-19" href="#__codelineno-329-19"></a><span class="hll"><span class="c1"># title=None author=None</span>
</span><a id="__codelineno-329-20" name="__codelineno-329-20" href="#__codelineno-329-20"></a><span class="c1"># title=&#39;&#39; author=None</span>
<a id="__codelineno-329-21" name="__codelineno-329-21" href="#__codelineno-329-21"></a><span class="c1"># title=&#39;The&#39; author=None</span>
<a id="__codelineno-329-22" name="__codelineno-329-22" href="#__codelineno-329-22"></a><span class="c1"># title=&#39;The Name&#39; author=None</span>
<a id="__codelineno-329-23" name="__codelineno-329-23" href="#__codelineno-329-23"></a><span class="c1"># title=&#39;The Name of&#39; author=None</span>
<a id="__codelineno-329-24" name="__codelineno-329-24" href="#__codelineno-329-24"></a><span class="c1"># title=&#39;The Name of the&#39; author=None</span>
<a id="__codelineno-329-25" name="__codelineno-329-25" href="#__codelineno-329-25"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=None</span>
<a id="__codelineno-329-26" name="__codelineno-329-26" href="#__codelineno-329-26"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;&#39;</span>
<a id="__codelineno-329-27" name="__codelineno-329-27" href="#__codelineno-329-27"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick&#39;</span>
<a id="__codelineno-329-28" name="__codelineno-329-28" href="#__codelineno-329-28"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Roth&#39;</span>
<a id="__codelineno-329-29" name="__codelineno-329-29" href="#__codelineno-329-29"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothf&#39;</span>
<a id="__codelineno-329-30" name="__codelineno-329-30" href="#__codelineno-329-30"></a><span class="c1"># title=&#39;The Name of the Wind&#39; author=&#39;Patrick Rothfuss&#39;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Once exhausted, you can access the final, full response model through the <code>constructed_response_model</code> property of the structured stream. Note that this will also give you access to the <a href="#accessing-original-call-response"><code>._response</code> property</a> that every <code>BaseModel</code> receives.</p>
<p>You can also use the <code>stream</code> property to access the <code>BaseStream</code> instance and <a href="../streams/#common-stream-properties-and-methods">all of it's properties</a>.</p>
<h2 id="fromcallargs">FromCallArgs<a class="headerlink" href="#fromcallargs" title="Permanent link">&para;</a></h2>
<p>Fields annotated with <code>FromCallArgs</code> will be populated with the corresponding argument from the function call rather than expecting it from the LLM's response. This enables seamless validation of LLM outputs against function inputs:</p>
<div class="admonition mira">
<p class="admonition-title">Mirascope</p>
<div class="tabbed-set tabbed-alternate" data-tabs="42:4"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><input id="__tabbed_42_2" name="__tabbed_42" type="radio" /><input id="__tabbed_42_3" name="__tabbed_42" type="radio" /><input id="__tabbed_42_4" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">Shorthand</label><label for="__tabbed_42_2">Messages</label><label for="__tabbed_42_3">String Template</label><label for="__tabbed_42_4">BaseMessageParam</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="43:10"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><input id="__tabbed_43_2" name="__tabbed_43" type="radio" /><input id="__tabbed_43_3" name="__tabbed_43" type="radio" /><input id="__tabbed_43_4" name="__tabbed_43" type="radio" /><input id="__tabbed_43_5" name="__tabbed_43" type="radio" /><input id="__tabbed_43_6" name="__tabbed_43" type="radio" /><input id="__tabbed_43_7" name="__tabbed_43" type="radio" /><input id="__tabbed_43_8" name="__tabbed_43" type="radio" /><input id="__tabbed_43_9" name="__tabbed_43" type="radio" /><input id="__tabbed_43_10" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">OpenAI</label><label for="__tabbed_43_2">Anthropic</label><label for="__tabbed_43_3">Google</label><label for="__tabbed_43_4">Groq</label><label for="__tabbed_43_5">xAI</label><label for="__tabbed_43_6">Mistral</label><label for="__tabbed_43_7">Cohere</label><label for="__tabbed_43_8">LiteLLM</label><label for="__tabbed_43_9">Azure AI</label><label for="__tabbed_43_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-330-1" name="__codelineno-330-1" href="#__codelineno-330-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-330-2" name="__codelineno-330-2" href="#__codelineno-330-2"></a>
<a id="__codelineno-330-3" name="__codelineno-330-3" href="#__codelineno-330-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-330-4" name="__codelineno-330-4" href="#__codelineno-330-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-330-5" name="__codelineno-330-5" href="#__codelineno-330-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-330-6" name="__codelineno-330-6" href="#__codelineno-330-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-330-7" name="__codelineno-330-7" href="#__codelineno-330-7"></a>
<a id="__codelineno-330-8" name="__codelineno-330-8" href="#__codelineno-330-8"></a>
<a id="__codelineno-330-9" name="__codelineno-330-9" href="#__codelineno-330-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-330-10" name="__codelineno-330-10" href="#__codelineno-330-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-330-11" name="__codelineno-330-11" href="#__codelineno-330-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-330-12" name="__codelineno-330-12" href="#__codelineno-330-12"></a>
<a id="__codelineno-330-13" name="__codelineno-330-13" href="#__codelineno-330-13"></a>
<a id="__codelineno-330-14" name="__codelineno-330-14" href="#__codelineno-330-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-330-15" name="__codelineno-330-15" href="#__codelineno-330-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-330-16" name="__codelineno-330-16" href="#__codelineno-330-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-330-17" name="__codelineno-330-17" href="#__codelineno-330-17"></a>
<a id="__codelineno-330-18" name="__codelineno-330-18" href="#__codelineno-330-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-330-19" name="__codelineno-330-19" href="#__codelineno-330-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-330-20" name="__codelineno-330-20" href="#__codelineno-330-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-330-21" name="__codelineno-330-21" href="#__codelineno-330-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-330-22" name="__codelineno-330-22" href="#__codelineno-330-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-330-23" name="__codelineno-330-23" href="#__codelineno-330-23"></a>
<a id="__codelineno-330-24" name="__codelineno-330-24" href="#__codelineno-330-24"></a>
<a id="__codelineno-330-25" name="__codelineno-330-25" href="#__codelineno-330-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-330-26" name="__codelineno-330-26" href="#__codelineno-330-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-330-27" name="__codelineno-330-27" href="#__codelineno-330-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-330-28" name="__codelineno-330-28" href="#__codelineno-330-28"></a>
<a id="__codelineno-330-29" name="__codelineno-330-29" href="#__codelineno-330-29"></a>
<a id="__codelineno-330-30" name="__codelineno-330-30" href="#__codelineno-330-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-330-31" name="__codelineno-330-31" href="#__codelineno-330-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-330-32" name="__codelineno-330-32" href="#__codelineno-330-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-330-33" name="__codelineno-330-33" href="#__codelineno-330-33"></a><span class="p">]</span>
<a id="__codelineno-330-34" name="__codelineno-330-34" href="#__codelineno-330-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-330-35" name="__codelineno-330-35" href="#__codelineno-330-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-330-36" name="__codelineno-330-36" href="#__codelineno-330-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-330-37" name="__codelineno-330-37" href="#__codelineno-330-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-330-38" name="__codelineno-330-38" href="#__codelineno-330-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-330-39" name="__codelineno-330-39" href="#__codelineno-330-39"></a><span class="c1"># ]</span>
<a id="__codelineno-330-40" name="__codelineno-330-40" href="#__codelineno-330-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-330-41" name="__codelineno-330-41" href="#__codelineno-330-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-330-42" name="__codelineno-330-42" href="#__codelineno-330-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-330-43" name="__codelineno-330-43" href="#__codelineno-330-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-331-1" name="__codelineno-331-1" href="#__codelineno-331-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-331-2" name="__codelineno-331-2" href="#__codelineno-331-2"></a>
<a id="__codelineno-331-3" name="__codelineno-331-3" href="#__codelineno-331-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-331-4" name="__codelineno-331-4" href="#__codelineno-331-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-331-5" name="__codelineno-331-5" href="#__codelineno-331-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-331-6" name="__codelineno-331-6" href="#__codelineno-331-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-331-7" name="__codelineno-331-7" href="#__codelineno-331-7"></a>
<a id="__codelineno-331-8" name="__codelineno-331-8" href="#__codelineno-331-8"></a>
<a id="__codelineno-331-9" name="__codelineno-331-9" href="#__codelineno-331-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-331-10" name="__codelineno-331-10" href="#__codelineno-331-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-331-11" name="__codelineno-331-11" href="#__codelineno-331-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-331-12" name="__codelineno-331-12" href="#__codelineno-331-12"></a>
<a id="__codelineno-331-13" name="__codelineno-331-13" href="#__codelineno-331-13"></a>
<a id="__codelineno-331-14" name="__codelineno-331-14" href="#__codelineno-331-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-331-15" name="__codelineno-331-15" href="#__codelineno-331-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-331-16" name="__codelineno-331-16" href="#__codelineno-331-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-331-17" name="__codelineno-331-17" href="#__codelineno-331-17"></a>
<a id="__codelineno-331-18" name="__codelineno-331-18" href="#__codelineno-331-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-331-19" name="__codelineno-331-19" href="#__codelineno-331-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-331-20" name="__codelineno-331-20" href="#__codelineno-331-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-331-21" name="__codelineno-331-21" href="#__codelineno-331-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-331-22" name="__codelineno-331-22" href="#__codelineno-331-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-331-23" name="__codelineno-331-23" href="#__codelineno-331-23"></a>
<a id="__codelineno-331-24" name="__codelineno-331-24" href="#__codelineno-331-24"></a>
<a id="__codelineno-331-25" name="__codelineno-331-25" href="#__codelineno-331-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-331-26" name="__codelineno-331-26" href="#__codelineno-331-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-331-27" name="__codelineno-331-27" href="#__codelineno-331-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-331-28" name="__codelineno-331-28" href="#__codelineno-331-28"></a>
<a id="__codelineno-331-29" name="__codelineno-331-29" href="#__codelineno-331-29"></a>
<a id="__codelineno-331-30" name="__codelineno-331-30" href="#__codelineno-331-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-331-31" name="__codelineno-331-31" href="#__codelineno-331-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-331-32" name="__codelineno-331-32" href="#__codelineno-331-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-331-33" name="__codelineno-331-33" href="#__codelineno-331-33"></a><span class="p">]</span>
<a id="__codelineno-331-34" name="__codelineno-331-34" href="#__codelineno-331-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-331-35" name="__codelineno-331-35" href="#__codelineno-331-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-331-36" name="__codelineno-331-36" href="#__codelineno-331-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-331-37" name="__codelineno-331-37" href="#__codelineno-331-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-331-38" name="__codelineno-331-38" href="#__codelineno-331-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-331-39" name="__codelineno-331-39" href="#__codelineno-331-39"></a><span class="c1"># ]</span>
<a id="__codelineno-331-40" name="__codelineno-331-40" href="#__codelineno-331-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-331-41" name="__codelineno-331-41" href="#__codelineno-331-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-331-42" name="__codelineno-331-42" href="#__codelineno-331-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-331-43" name="__codelineno-331-43" href="#__codelineno-331-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-332-1" name="__codelineno-332-1" href="#__codelineno-332-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-332-2" name="__codelineno-332-2" href="#__codelineno-332-2"></a>
<a id="__codelineno-332-3" name="__codelineno-332-3" href="#__codelineno-332-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-332-4" name="__codelineno-332-4" href="#__codelineno-332-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-332-5" name="__codelineno-332-5" href="#__codelineno-332-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-332-6" name="__codelineno-332-6" href="#__codelineno-332-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-332-7" name="__codelineno-332-7" href="#__codelineno-332-7"></a>
<a id="__codelineno-332-8" name="__codelineno-332-8" href="#__codelineno-332-8"></a>
<a id="__codelineno-332-9" name="__codelineno-332-9" href="#__codelineno-332-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-332-10" name="__codelineno-332-10" href="#__codelineno-332-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-332-11" name="__codelineno-332-11" href="#__codelineno-332-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-332-12" name="__codelineno-332-12" href="#__codelineno-332-12"></a>
<a id="__codelineno-332-13" name="__codelineno-332-13" href="#__codelineno-332-13"></a>
<a id="__codelineno-332-14" name="__codelineno-332-14" href="#__codelineno-332-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-332-15" name="__codelineno-332-15" href="#__codelineno-332-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-332-16" name="__codelineno-332-16" href="#__codelineno-332-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-332-17" name="__codelineno-332-17" href="#__codelineno-332-17"></a>
<a id="__codelineno-332-18" name="__codelineno-332-18" href="#__codelineno-332-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-332-19" name="__codelineno-332-19" href="#__codelineno-332-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-332-20" name="__codelineno-332-20" href="#__codelineno-332-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-332-21" name="__codelineno-332-21" href="#__codelineno-332-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-332-22" name="__codelineno-332-22" href="#__codelineno-332-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-332-23" name="__codelineno-332-23" href="#__codelineno-332-23"></a>
<a id="__codelineno-332-24" name="__codelineno-332-24" href="#__codelineno-332-24"></a>
<a id="__codelineno-332-25" name="__codelineno-332-25" href="#__codelineno-332-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-332-26" name="__codelineno-332-26" href="#__codelineno-332-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-332-27" name="__codelineno-332-27" href="#__codelineno-332-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-332-28" name="__codelineno-332-28" href="#__codelineno-332-28"></a>
<a id="__codelineno-332-29" name="__codelineno-332-29" href="#__codelineno-332-29"></a>
<a id="__codelineno-332-30" name="__codelineno-332-30" href="#__codelineno-332-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-332-31" name="__codelineno-332-31" href="#__codelineno-332-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-332-32" name="__codelineno-332-32" href="#__codelineno-332-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-332-33" name="__codelineno-332-33" href="#__codelineno-332-33"></a><span class="p">]</span>
<a id="__codelineno-332-34" name="__codelineno-332-34" href="#__codelineno-332-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-332-35" name="__codelineno-332-35" href="#__codelineno-332-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-332-36" name="__codelineno-332-36" href="#__codelineno-332-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-332-37" name="__codelineno-332-37" href="#__codelineno-332-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-332-38" name="__codelineno-332-38" href="#__codelineno-332-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-332-39" name="__codelineno-332-39" href="#__codelineno-332-39"></a><span class="c1"># ]</span>
<a id="__codelineno-332-40" name="__codelineno-332-40" href="#__codelineno-332-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-332-41" name="__codelineno-332-41" href="#__codelineno-332-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-332-42" name="__codelineno-332-42" href="#__codelineno-332-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-332-43" name="__codelineno-332-43" href="#__codelineno-332-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-333-1" name="__codelineno-333-1" href="#__codelineno-333-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-333-2" name="__codelineno-333-2" href="#__codelineno-333-2"></a>
<a id="__codelineno-333-3" name="__codelineno-333-3" href="#__codelineno-333-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-333-4" name="__codelineno-333-4" href="#__codelineno-333-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-333-5" name="__codelineno-333-5" href="#__codelineno-333-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-333-6" name="__codelineno-333-6" href="#__codelineno-333-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-333-7" name="__codelineno-333-7" href="#__codelineno-333-7"></a>
<a id="__codelineno-333-8" name="__codelineno-333-8" href="#__codelineno-333-8"></a>
<a id="__codelineno-333-9" name="__codelineno-333-9" href="#__codelineno-333-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-333-10" name="__codelineno-333-10" href="#__codelineno-333-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-333-11" name="__codelineno-333-11" href="#__codelineno-333-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-333-12" name="__codelineno-333-12" href="#__codelineno-333-12"></a>
<a id="__codelineno-333-13" name="__codelineno-333-13" href="#__codelineno-333-13"></a>
<a id="__codelineno-333-14" name="__codelineno-333-14" href="#__codelineno-333-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-333-15" name="__codelineno-333-15" href="#__codelineno-333-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-333-16" name="__codelineno-333-16" href="#__codelineno-333-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-333-17" name="__codelineno-333-17" href="#__codelineno-333-17"></a>
<a id="__codelineno-333-18" name="__codelineno-333-18" href="#__codelineno-333-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-333-19" name="__codelineno-333-19" href="#__codelineno-333-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-333-20" name="__codelineno-333-20" href="#__codelineno-333-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-333-21" name="__codelineno-333-21" href="#__codelineno-333-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-333-22" name="__codelineno-333-22" href="#__codelineno-333-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-333-23" name="__codelineno-333-23" href="#__codelineno-333-23"></a>
<a id="__codelineno-333-24" name="__codelineno-333-24" href="#__codelineno-333-24"></a>
<a id="__codelineno-333-25" name="__codelineno-333-25" href="#__codelineno-333-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-333-26" name="__codelineno-333-26" href="#__codelineno-333-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-333-27" name="__codelineno-333-27" href="#__codelineno-333-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-333-28" name="__codelineno-333-28" href="#__codelineno-333-28"></a>
<a id="__codelineno-333-29" name="__codelineno-333-29" href="#__codelineno-333-29"></a>
<a id="__codelineno-333-30" name="__codelineno-333-30" href="#__codelineno-333-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-333-31" name="__codelineno-333-31" href="#__codelineno-333-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-333-32" name="__codelineno-333-32" href="#__codelineno-333-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-333-33" name="__codelineno-333-33" href="#__codelineno-333-33"></a><span class="p">]</span>
<a id="__codelineno-333-34" name="__codelineno-333-34" href="#__codelineno-333-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-333-35" name="__codelineno-333-35" href="#__codelineno-333-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-333-36" name="__codelineno-333-36" href="#__codelineno-333-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-333-37" name="__codelineno-333-37" href="#__codelineno-333-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-333-38" name="__codelineno-333-38" href="#__codelineno-333-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-333-39" name="__codelineno-333-39" href="#__codelineno-333-39"></a><span class="c1"># ]</span>
<a id="__codelineno-333-40" name="__codelineno-333-40" href="#__codelineno-333-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-333-41" name="__codelineno-333-41" href="#__codelineno-333-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-333-42" name="__codelineno-333-42" href="#__codelineno-333-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-333-43" name="__codelineno-333-43" href="#__codelineno-333-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-334-1" name="__codelineno-334-1" href="#__codelineno-334-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-334-2" name="__codelineno-334-2" href="#__codelineno-334-2"></a>
<a id="__codelineno-334-3" name="__codelineno-334-3" href="#__codelineno-334-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-334-4" name="__codelineno-334-4" href="#__codelineno-334-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-334-5" name="__codelineno-334-5" href="#__codelineno-334-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-334-6" name="__codelineno-334-6" href="#__codelineno-334-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-334-7" name="__codelineno-334-7" href="#__codelineno-334-7"></a>
<a id="__codelineno-334-8" name="__codelineno-334-8" href="#__codelineno-334-8"></a>
<a id="__codelineno-334-9" name="__codelineno-334-9" href="#__codelineno-334-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-334-10" name="__codelineno-334-10" href="#__codelineno-334-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-334-11" name="__codelineno-334-11" href="#__codelineno-334-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-334-12" name="__codelineno-334-12" href="#__codelineno-334-12"></a>
<a id="__codelineno-334-13" name="__codelineno-334-13" href="#__codelineno-334-13"></a>
<a id="__codelineno-334-14" name="__codelineno-334-14" href="#__codelineno-334-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-334-15" name="__codelineno-334-15" href="#__codelineno-334-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-334-16" name="__codelineno-334-16" href="#__codelineno-334-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-334-17" name="__codelineno-334-17" href="#__codelineno-334-17"></a>
<a id="__codelineno-334-18" name="__codelineno-334-18" href="#__codelineno-334-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-334-19" name="__codelineno-334-19" href="#__codelineno-334-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-334-20" name="__codelineno-334-20" href="#__codelineno-334-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-334-21" name="__codelineno-334-21" href="#__codelineno-334-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-334-22" name="__codelineno-334-22" href="#__codelineno-334-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-334-23" name="__codelineno-334-23" href="#__codelineno-334-23"></a>
<a id="__codelineno-334-24" name="__codelineno-334-24" href="#__codelineno-334-24"></a>
<a id="__codelineno-334-25" name="__codelineno-334-25" href="#__codelineno-334-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-334-26" name="__codelineno-334-26" href="#__codelineno-334-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-334-27" name="__codelineno-334-27" href="#__codelineno-334-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-334-28" name="__codelineno-334-28" href="#__codelineno-334-28"></a>
<a id="__codelineno-334-29" name="__codelineno-334-29" href="#__codelineno-334-29"></a>
<a id="__codelineno-334-30" name="__codelineno-334-30" href="#__codelineno-334-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-334-31" name="__codelineno-334-31" href="#__codelineno-334-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-334-32" name="__codelineno-334-32" href="#__codelineno-334-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-334-33" name="__codelineno-334-33" href="#__codelineno-334-33"></a><span class="p">]</span>
<a id="__codelineno-334-34" name="__codelineno-334-34" href="#__codelineno-334-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-334-35" name="__codelineno-334-35" href="#__codelineno-334-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-334-36" name="__codelineno-334-36" href="#__codelineno-334-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-334-37" name="__codelineno-334-37" href="#__codelineno-334-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-334-38" name="__codelineno-334-38" href="#__codelineno-334-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-334-39" name="__codelineno-334-39" href="#__codelineno-334-39"></a><span class="c1"># ]</span>
<a id="__codelineno-334-40" name="__codelineno-334-40" href="#__codelineno-334-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-334-41" name="__codelineno-334-41" href="#__codelineno-334-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-334-42" name="__codelineno-334-42" href="#__codelineno-334-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-334-43" name="__codelineno-334-43" href="#__codelineno-334-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-335-1" name="__codelineno-335-1" href="#__codelineno-335-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-335-2" name="__codelineno-335-2" href="#__codelineno-335-2"></a>
<a id="__codelineno-335-3" name="__codelineno-335-3" href="#__codelineno-335-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-335-4" name="__codelineno-335-4" href="#__codelineno-335-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-335-5" name="__codelineno-335-5" href="#__codelineno-335-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-335-6" name="__codelineno-335-6" href="#__codelineno-335-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-335-7" name="__codelineno-335-7" href="#__codelineno-335-7"></a>
<a id="__codelineno-335-8" name="__codelineno-335-8" href="#__codelineno-335-8"></a>
<a id="__codelineno-335-9" name="__codelineno-335-9" href="#__codelineno-335-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-335-10" name="__codelineno-335-10" href="#__codelineno-335-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-335-11" name="__codelineno-335-11" href="#__codelineno-335-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-335-12" name="__codelineno-335-12" href="#__codelineno-335-12"></a>
<a id="__codelineno-335-13" name="__codelineno-335-13" href="#__codelineno-335-13"></a>
<a id="__codelineno-335-14" name="__codelineno-335-14" href="#__codelineno-335-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-335-15" name="__codelineno-335-15" href="#__codelineno-335-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-335-16" name="__codelineno-335-16" href="#__codelineno-335-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-335-17" name="__codelineno-335-17" href="#__codelineno-335-17"></a>
<a id="__codelineno-335-18" name="__codelineno-335-18" href="#__codelineno-335-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-335-19" name="__codelineno-335-19" href="#__codelineno-335-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-335-20" name="__codelineno-335-20" href="#__codelineno-335-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-335-21" name="__codelineno-335-21" href="#__codelineno-335-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-335-22" name="__codelineno-335-22" href="#__codelineno-335-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-335-23" name="__codelineno-335-23" href="#__codelineno-335-23"></a>
<a id="__codelineno-335-24" name="__codelineno-335-24" href="#__codelineno-335-24"></a>
<a id="__codelineno-335-25" name="__codelineno-335-25" href="#__codelineno-335-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-335-26" name="__codelineno-335-26" href="#__codelineno-335-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-335-27" name="__codelineno-335-27" href="#__codelineno-335-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-335-28" name="__codelineno-335-28" href="#__codelineno-335-28"></a>
<a id="__codelineno-335-29" name="__codelineno-335-29" href="#__codelineno-335-29"></a>
<a id="__codelineno-335-30" name="__codelineno-335-30" href="#__codelineno-335-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-335-31" name="__codelineno-335-31" href="#__codelineno-335-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-335-32" name="__codelineno-335-32" href="#__codelineno-335-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-335-33" name="__codelineno-335-33" href="#__codelineno-335-33"></a><span class="p">]</span>
<a id="__codelineno-335-34" name="__codelineno-335-34" href="#__codelineno-335-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-335-35" name="__codelineno-335-35" href="#__codelineno-335-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-335-36" name="__codelineno-335-36" href="#__codelineno-335-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-335-37" name="__codelineno-335-37" href="#__codelineno-335-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-335-38" name="__codelineno-335-38" href="#__codelineno-335-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-335-39" name="__codelineno-335-39" href="#__codelineno-335-39"></a><span class="c1"># ]</span>
<a id="__codelineno-335-40" name="__codelineno-335-40" href="#__codelineno-335-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-335-41" name="__codelineno-335-41" href="#__codelineno-335-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-335-42" name="__codelineno-335-42" href="#__codelineno-335-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-335-43" name="__codelineno-335-43" href="#__codelineno-335-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-336-1" name="__codelineno-336-1" href="#__codelineno-336-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-336-2" name="__codelineno-336-2" href="#__codelineno-336-2"></a>
<a id="__codelineno-336-3" name="__codelineno-336-3" href="#__codelineno-336-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-336-4" name="__codelineno-336-4" href="#__codelineno-336-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-336-5" name="__codelineno-336-5" href="#__codelineno-336-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-336-6" name="__codelineno-336-6" href="#__codelineno-336-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-336-7" name="__codelineno-336-7" href="#__codelineno-336-7"></a>
<a id="__codelineno-336-8" name="__codelineno-336-8" href="#__codelineno-336-8"></a>
<a id="__codelineno-336-9" name="__codelineno-336-9" href="#__codelineno-336-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-336-10" name="__codelineno-336-10" href="#__codelineno-336-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-336-11" name="__codelineno-336-11" href="#__codelineno-336-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-336-12" name="__codelineno-336-12" href="#__codelineno-336-12"></a>
<a id="__codelineno-336-13" name="__codelineno-336-13" href="#__codelineno-336-13"></a>
<a id="__codelineno-336-14" name="__codelineno-336-14" href="#__codelineno-336-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-336-15" name="__codelineno-336-15" href="#__codelineno-336-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-336-16" name="__codelineno-336-16" href="#__codelineno-336-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-336-17" name="__codelineno-336-17" href="#__codelineno-336-17"></a>
<a id="__codelineno-336-18" name="__codelineno-336-18" href="#__codelineno-336-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-336-19" name="__codelineno-336-19" href="#__codelineno-336-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-336-20" name="__codelineno-336-20" href="#__codelineno-336-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-336-21" name="__codelineno-336-21" href="#__codelineno-336-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-336-22" name="__codelineno-336-22" href="#__codelineno-336-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-336-23" name="__codelineno-336-23" href="#__codelineno-336-23"></a>
<a id="__codelineno-336-24" name="__codelineno-336-24" href="#__codelineno-336-24"></a>
<a id="__codelineno-336-25" name="__codelineno-336-25" href="#__codelineno-336-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-336-26" name="__codelineno-336-26" href="#__codelineno-336-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-336-27" name="__codelineno-336-27" href="#__codelineno-336-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-336-28" name="__codelineno-336-28" href="#__codelineno-336-28"></a>
<a id="__codelineno-336-29" name="__codelineno-336-29" href="#__codelineno-336-29"></a>
<a id="__codelineno-336-30" name="__codelineno-336-30" href="#__codelineno-336-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-336-31" name="__codelineno-336-31" href="#__codelineno-336-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-336-32" name="__codelineno-336-32" href="#__codelineno-336-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-336-33" name="__codelineno-336-33" href="#__codelineno-336-33"></a><span class="p">]</span>
<a id="__codelineno-336-34" name="__codelineno-336-34" href="#__codelineno-336-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-336-35" name="__codelineno-336-35" href="#__codelineno-336-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-336-36" name="__codelineno-336-36" href="#__codelineno-336-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-336-37" name="__codelineno-336-37" href="#__codelineno-336-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-336-38" name="__codelineno-336-38" href="#__codelineno-336-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-336-39" name="__codelineno-336-39" href="#__codelineno-336-39"></a><span class="c1"># ]</span>
<a id="__codelineno-336-40" name="__codelineno-336-40" href="#__codelineno-336-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-336-41" name="__codelineno-336-41" href="#__codelineno-336-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-336-42" name="__codelineno-336-42" href="#__codelineno-336-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-336-43" name="__codelineno-336-43" href="#__codelineno-336-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-337-1" name="__codelineno-337-1" href="#__codelineno-337-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-337-2" name="__codelineno-337-2" href="#__codelineno-337-2"></a>
<a id="__codelineno-337-3" name="__codelineno-337-3" href="#__codelineno-337-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-337-4" name="__codelineno-337-4" href="#__codelineno-337-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-337-5" name="__codelineno-337-5" href="#__codelineno-337-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-337-6" name="__codelineno-337-6" href="#__codelineno-337-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-337-7" name="__codelineno-337-7" href="#__codelineno-337-7"></a>
<a id="__codelineno-337-8" name="__codelineno-337-8" href="#__codelineno-337-8"></a>
<a id="__codelineno-337-9" name="__codelineno-337-9" href="#__codelineno-337-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-337-10" name="__codelineno-337-10" href="#__codelineno-337-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-337-11" name="__codelineno-337-11" href="#__codelineno-337-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-337-12" name="__codelineno-337-12" href="#__codelineno-337-12"></a>
<a id="__codelineno-337-13" name="__codelineno-337-13" href="#__codelineno-337-13"></a>
<a id="__codelineno-337-14" name="__codelineno-337-14" href="#__codelineno-337-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-337-15" name="__codelineno-337-15" href="#__codelineno-337-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-337-16" name="__codelineno-337-16" href="#__codelineno-337-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-337-17" name="__codelineno-337-17" href="#__codelineno-337-17"></a>
<a id="__codelineno-337-18" name="__codelineno-337-18" href="#__codelineno-337-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-337-19" name="__codelineno-337-19" href="#__codelineno-337-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-337-20" name="__codelineno-337-20" href="#__codelineno-337-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-337-21" name="__codelineno-337-21" href="#__codelineno-337-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-337-22" name="__codelineno-337-22" href="#__codelineno-337-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-337-23" name="__codelineno-337-23" href="#__codelineno-337-23"></a>
<a id="__codelineno-337-24" name="__codelineno-337-24" href="#__codelineno-337-24"></a>
<a id="__codelineno-337-25" name="__codelineno-337-25" href="#__codelineno-337-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-337-26" name="__codelineno-337-26" href="#__codelineno-337-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-337-27" name="__codelineno-337-27" href="#__codelineno-337-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-337-28" name="__codelineno-337-28" href="#__codelineno-337-28"></a>
<a id="__codelineno-337-29" name="__codelineno-337-29" href="#__codelineno-337-29"></a>
<a id="__codelineno-337-30" name="__codelineno-337-30" href="#__codelineno-337-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-337-31" name="__codelineno-337-31" href="#__codelineno-337-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-337-32" name="__codelineno-337-32" href="#__codelineno-337-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-337-33" name="__codelineno-337-33" href="#__codelineno-337-33"></a><span class="p">]</span>
<a id="__codelineno-337-34" name="__codelineno-337-34" href="#__codelineno-337-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-337-35" name="__codelineno-337-35" href="#__codelineno-337-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-337-36" name="__codelineno-337-36" href="#__codelineno-337-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-337-37" name="__codelineno-337-37" href="#__codelineno-337-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-337-38" name="__codelineno-337-38" href="#__codelineno-337-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-337-39" name="__codelineno-337-39" href="#__codelineno-337-39"></a><span class="c1"># ]</span>
<a id="__codelineno-337-40" name="__codelineno-337-40" href="#__codelineno-337-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-337-41" name="__codelineno-337-41" href="#__codelineno-337-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-337-42" name="__codelineno-337-42" href="#__codelineno-337-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-337-43" name="__codelineno-337-43" href="#__codelineno-337-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-338-1" name="__codelineno-338-1" href="#__codelineno-338-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-338-2" name="__codelineno-338-2" href="#__codelineno-338-2"></a>
<a id="__codelineno-338-3" name="__codelineno-338-3" href="#__codelineno-338-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-338-4" name="__codelineno-338-4" href="#__codelineno-338-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-338-5" name="__codelineno-338-5" href="#__codelineno-338-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-338-6" name="__codelineno-338-6" href="#__codelineno-338-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-338-7" name="__codelineno-338-7" href="#__codelineno-338-7"></a>
<a id="__codelineno-338-8" name="__codelineno-338-8" href="#__codelineno-338-8"></a>
<a id="__codelineno-338-9" name="__codelineno-338-9" href="#__codelineno-338-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-338-10" name="__codelineno-338-10" href="#__codelineno-338-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-338-11" name="__codelineno-338-11" href="#__codelineno-338-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-338-12" name="__codelineno-338-12" href="#__codelineno-338-12"></a>
<a id="__codelineno-338-13" name="__codelineno-338-13" href="#__codelineno-338-13"></a>
<a id="__codelineno-338-14" name="__codelineno-338-14" href="#__codelineno-338-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-338-15" name="__codelineno-338-15" href="#__codelineno-338-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-338-16" name="__codelineno-338-16" href="#__codelineno-338-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-338-17" name="__codelineno-338-17" href="#__codelineno-338-17"></a>
<a id="__codelineno-338-18" name="__codelineno-338-18" href="#__codelineno-338-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-338-19" name="__codelineno-338-19" href="#__codelineno-338-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-338-20" name="__codelineno-338-20" href="#__codelineno-338-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-338-21" name="__codelineno-338-21" href="#__codelineno-338-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-338-22" name="__codelineno-338-22" href="#__codelineno-338-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-338-23" name="__codelineno-338-23" href="#__codelineno-338-23"></a>
<a id="__codelineno-338-24" name="__codelineno-338-24" href="#__codelineno-338-24"></a>
<a id="__codelineno-338-25" name="__codelineno-338-25" href="#__codelineno-338-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-338-26" name="__codelineno-338-26" href="#__codelineno-338-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-338-27" name="__codelineno-338-27" href="#__codelineno-338-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-338-28" name="__codelineno-338-28" href="#__codelineno-338-28"></a>
<a id="__codelineno-338-29" name="__codelineno-338-29" href="#__codelineno-338-29"></a>
<a id="__codelineno-338-30" name="__codelineno-338-30" href="#__codelineno-338-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-338-31" name="__codelineno-338-31" href="#__codelineno-338-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-338-32" name="__codelineno-338-32" href="#__codelineno-338-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-338-33" name="__codelineno-338-33" href="#__codelineno-338-33"></a><span class="p">]</span>
<a id="__codelineno-338-34" name="__codelineno-338-34" href="#__codelineno-338-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-338-35" name="__codelineno-338-35" href="#__codelineno-338-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-338-36" name="__codelineno-338-36" href="#__codelineno-338-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-338-37" name="__codelineno-338-37" href="#__codelineno-338-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-338-38" name="__codelineno-338-38" href="#__codelineno-338-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-338-39" name="__codelineno-338-39" href="#__codelineno-338-39"></a><span class="c1"># ]</span>
<a id="__codelineno-338-40" name="__codelineno-338-40" href="#__codelineno-338-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-338-41" name="__codelineno-338-41" href="#__codelineno-338-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-338-42" name="__codelineno-338-42" href="#__codelineno-338-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-338-43" name="__codelineno-338-43" href="#__codelineno-338-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-339-1" name="__codelineno-339-1" href="#__codelineno-339-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-339-2" name="__codelineno-339-2" href="#__codelineno-339-2"></a>
<a id="__codelineno-339-3" name="__codelineno-339-3" href="#__codelineno-339-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span>
<a id="__codelineno-339-4" name="__codelineno-339-4" href="#__codelineno-339-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-339-5" name="__codelineno-339-5" href="#__codelineno-339-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-339-6" name="__codelineno-339-6" href="#__codelineno-339-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-339-7" name="__codelineno-339-7" href="#__codelineno-339-7"></a>
<a id="__codelineno-339-8" name="__codelineno-339-8" href="#__codelineno-339-8"></a>
<a id="__codelineno-339-9" name="__codelineno-339-9" href="#__codelineno-339-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-339-10" name="__codelineno-339-10" href="#__codelineno-339-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-339-11" name="__codelineno-339-11" href="#__codelineno-339-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-339-12" name="__codelineno-339-12" href="#__codelineno-339-12"></a>
<a id="__codelineno-339-13" name="__codelineno-339-13" href="#__codelineno-339-13"></a>
<a id="__codelineno-339-14" name="__codelineno-339-14" href="#__codelineno-339-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-339-15" name="__codelineno-339-15" href="#__codelineno-339-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-339-16" name="__codelineno-339-16" href="#__codelineno-339-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-339-17" name="__codelineno-339-17" href="#__codelineno-339-17"></a>
<a id="__codelineno-339-18" name="__codelineno-339-18" href="#__codelineno-339-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-339-19" name="__codelineno-339-19" href="#__codelineno-339-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-339-20" name="__codelineno-339-20" href="#__codelineno-339-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-339-21" name="__codelineno-339-21" href="#__codelineno-339-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-339-22" name="__codelineno-339-22" href="#__codelineno-339-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-339-23" name="__codelineno-339-23" href="#__codelineno-339-23"></a>
<a id="__codelineno-339-24" name="__codelineno-339-24" href="#__codelineno-339-24"></a>
<a id="__codelineno-339-25" name="__codelineno-339-25" href="#__codelineno-339-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-339-26" name="__codelineno-339-26" href="#__codelineno-339-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><a id="__codelineno-339-27" name="__codelineno-339-27" href="#__codelineno-339-27"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-339-28" name="__codelineno-339-28" href="#__codelineno-339-28"></a>
<a id="__codelineno-339-29" name="__codelineno-339-29" href="#__codelineno-339-29"></a>
<a id="__codelineno-339-30" name="__codelineno-339-30" href="#__codelineno-339-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-339-31" name="__codelineno-339-31" href="#__codelineno-339-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-339-32" name="__codelineno-339-32" href="#__codelineno-339-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-339-33" name="__codelineno-339-33" href="#__codelineno-339-33"></a><span class="p">]</span>
<a id="__codelineno-339-34" name="__codelineno-339-34" href="#__codelineno-339-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-339-35" name="__codelineno-339-35" href="#__codelineno-339-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-339-36" name="__codelineno-339-36" href="#__codelineno-339-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-339-37" name="__codelineno-339-37" href="#__codelineno-339-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-339-38" name="__codelineno-339-38" href="#__codelineno-339-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-339-39" name="__codelineno-339-39" href="#__codelineno-339-39"></a><span class="c1"># ]</span>
<a id="__codelineno-339-40" name="__codelineno-339-40" href="#__codelineno-339-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-339-41" name="__codelineno-339-41" href="#__codelineno-339-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-339-42" name="__codelineno-339-42" href="#__codelineno-339-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-339-43" name="__codelineno-339-43" href="#__codelineno-339-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="44:10"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><input id="__tabbed_44_2" name="__tabbed_44" type="radio" /><input id="__tabbed_44_3" name="__tabbed_44" type="radio" /><input id="__tabbed_44_4" name="__tabbed_44" type="radio" /><input id="__tabbed_44_5" name="__tabbed_44" type="radio" /><input id="__tabbed_44_6" name="__tabbed_44" type="radio" /><input id="__tabbed_44_7" name="__tabbed_44" type="radio" /><input id="__tabbed_44_8" name="__tabbed_44" type="radio" /><input id="__tabbed_44_9" name="__tabbed_44" type="radio" /><input id="__tabbed_44_10" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">OpenAI</label><label for="__tabbed_44_2">Anthropic</label><label for="__tabbed_44_3">Google</label><label for="__tabbed_44_4">Groq</label><label for="__tabbed_44_5">xAI</label><label for="__tabbed_44_6">Mistral</label><label for="__tabbed_44_7">Cohere</label><label for="__tabbed_44_8">LiteLLM</label><label for="__tabbed_44_9">Azure AI</label><label for="__tabbed_44_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-340-1" name="__codelineno-340-1" href="#__codelineno-340-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-340-2" name="__codelineno-340-2" href="#__codelineno-340-2"></a>
<a id="__codelineno-340-3" name="__codelineno-340-3" href="#__codelineno-340-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-340-4" name="__codelineno-340-4" href="#__codelineno-340-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-340-5" name="__codelineno-340-5" href="#__codelineno-340-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-340-6" name="__codelineno-340-6" href="#__codelineno-340-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-340-7" name="__codelineno-340-7" href="#__codelineno-340-7"></a>
<a id="__codelineno-340-8" name="__codelineno-340-8" href="#__codelineno-340-8"></a>
<a id="__codelineno-340-9" name="__codelineno-340-9" href="#__codelineno-340-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-340-10" name="__codelineno-340-10" href="#__codelineno-340-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-340-11" name="__codelineno-340-11" href="#__codelineno-340-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-340-12" name="__codelineno-340-12" href="#__codelineno-340-12"></a>
<a id="__codelineno-340-13" name="__codelineno-340-13" href="#__codelineno-340-13"></a>
<a id="__codelineno-340-14" name="__codelineno-340-14" href="#__codelineno-340-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-340-15" name="__codelineno-340-15" href="#__codelineno-340-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-340-16" name="__codelineno-340-16" href="#__codelineno-340-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-340-17" name="__codelineno-340-17" href="#__codelineno-340-17"></a>
<a id="__codelineno-340-18" name="__codelineno-340-18" href="#__codelineno-340-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-340-19" name="__codelineno-340-19" href="#__codelineno-340-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-340-20" name="__codelineno-340-20" href="#__codelineno-340-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-340-21" name="__codelineno-340-21" href="#__codelineno-340-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-340-22" name="__codelineno-340-22" href="#__codelineno-340-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-340-23" name="__codelineno-340-23" href="#__codelineno-340-23"></a>
<a id="__codelineno-340-24" name="__codelineno-340-24" href="#__codelineno-340-24"></a>
<a id="__codelineno-340-25" name="__codelineno-340-25" href="#__codelineno-340-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-340-26" name="__codelineno-340-26" href="#__codelineno-340-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-340-27" name="__codelineno-340-27" href="#__codelineno-340-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-340-28" name="__codelineno-340-28" href="#__codelineno-340-28"></a>
<a id="__codelineno-340-29" name="__codelineno-340-29" href="#__codelineno-340-29"></a>
<a id="__codelineno-340-30" name="__codelineno-340-30" href="#__codelineno-340-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-340-31" name="__codelineno-340-31" href="#__codelineno-340-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-340-32" name="__codelineno-340-32" href="#__codelineno-340-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-340-33" name="__codelineno-340-33" href="#__codelineno-340-33"></a><span class="p">]</span>
<a id="__codelineno-340-34" name="__codelineno-340-34" href="#__codelineno-340-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-340-35" name="__codelineno-340-35" href="#__codelineno-340-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-340-36" name="__codelineno-340-36" href="#__codelineno-340-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-340-37" name="__codelineno-340-37" href="#__codelineno-340-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-340-38" name="__codelineno-340-38" href="#__codelineno-340-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-340-39" name="__codelineno-340-39" href="#__codelineno-340-39"></a><span class="c1"># ]</span>
<a id="__codelineno-340-40" name="__codelineno-340-40" href="#__codelineno-340-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-340-41" name="__codelineno-340-41" href="#__codelineno-340-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-340-42" name="__codelineno-340-42" href="#__codelineno-340-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-340-43" name="__codelineno-340-43" href="#__codelineno-340-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-341-1" name="__codelineno-341-1" href="#__codelineno-341-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-341-2" name="__codelineno-341-2" href="#__codelineno-341-2"></a>
<a id="__codelineno-341-3" name="__codelineno-341-3" href="#__codelineno-341-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-341-4" name="__codelineno-341-4" href="#__codelineno-341-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-341-5" name="__codelineno-341-5" href="#__codelineno-341-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-341-6" name="__codelineno-341-6" href="#__codelineno-341-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-341-7" name="__codelineno-341-7" href="#__codelineno-341-7"></a>
<a id="__codelineno-341-8" name="__codelineno-341-8" href="#__codelineno-341-8"></a>
<a id="__codelineno-341-9" name="__codelineno-341-9" href="#__codelineno-341-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-341-10" name="__codelineno-341-10" href="#__codelineno-341-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-341-11" name="__codelineno-341-11" href="#__codelineno-341-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-341-12" name="__codelineno-341-12" href="#__codelineno-341-12"></a>
<a id="__codelineno-341-13" name="__codelineno-341-13" href="#__codelineno-341-13"></a>
<a id="__codelineno-341-14" name="__codelineno-341-14" href="#__codelineno-341-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-341-15" name="__codelineno-341-15" href="#__codelineno-341-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-341-16" name="__codelineno-341-16" href="#__codelineno-341-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-341-17" name="__codelineno-341-17" href="#__codelineno-341-17"></a>
<a id="__codelineno-341-18" name="__codelineno-341-18" href="#__codelineno-341-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-341-19" name="__codelineno-341-19" href="#__codelineno-341-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-341-20" name="__codelineno-341-20" href="#__codelineno-341-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-341-21" name="__codelineno-341-21" href="#__codelineno-341-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-341-22" name="__codelineno-341-22" href="#__codelineno-341-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-341-23" name="__codelineno-341-23" href="#__codelineno-341-23"></a>
<a id="__codelineno-341-24" name="__codelineno-341-24" href="#__codelineno-341-24"></a>
<a id="__codelineno-341-25" name="__codelineno-341-25" href="#__codelineno-341-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-341-26" name="__codelineno-341-26" href="#__codelineno-341-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-341-27" name="__codelineno-341-27" href="#__codelineno-341-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-341-28" name="__codelineno-341-28" href="#__codelineno-341-28"></a>
<a id="__codelineno-341-29" name="__codelineno-341-29" href="#__codelineno-341-29"></a>
<a id="__codelineno-341-30" name="__codelineno-341-30" href="#__codelineno-341-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-341-31" name="__codelineno-341-31" href="#__codelineno-341-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-341-32" name="__codelineno-341-32" href="#__codelineno-341-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-341-33" name="__codelineno-341-33" href="#__codelineno-341-33"></a><span class="p">]</span>
<a id="__codelineno-341-34" name="__codelineno-341-34" href="#__codelineno-341-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-341-35" name="__codelineno-341-35" href="#__codelineno-341-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-341-36" name="__codelineno-341-36" href="#__codelineno-341-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-341-37" name="__codelineno-341-37" href="#__codelineno-341-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-341-38" name="__codelineno-341-38" href="#__codelineno-341-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-341-39" name="__codelineno-341-39" href="#__codelineno-341-39"></a><span class="c1"># ]</span>
<a id="__codelineno-341-40" name="__codelineno-341-40" href="#__codelineno-341-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-341-41" name="__codelineno-341-41" href="#__codelineno-341-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-341-42" name="__codelineno-341-42" href="#__codelineno-341-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-341-43" name="__codelineno-341-43" href="#__codelineno-341-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-342-1" name="__codelineno-342-1" href="#__codelineno-342-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-342-2" name="__codelineno-342-2" href="#__codelineno-342-2"></a>
<a id="__codelineno-342-3" name="__codelineno-342-3" href="#__codelineno-342-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-342-4" name="__codelineno-342-4" href="#__codelineno-342-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-342-5" name="__codelineno-342-5" href="#__codelineno-342-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-342-6" name="__codelineno-342-6" href="#__codelineno-342-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-342-7" name="__codelineno-342-7" href="#__codelineno-342-7"></a>
<a id="__codelineno-342-8" name="__codelineno-342-8" href="#__codelineno-342-8"></a>
<a id="__codelineno-342-9" name="__codelineno-342-9" href="#__codelineno-342-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-342-10" name="__codelineno-342-10" href="#__codelineno-342-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-342-11" name="__codelineno-342-11" href="#__codelineno-342-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-342-12" name="__codelineno-342-12" href="#__codelineno-342-12"></a>
<a id="__codelineno-342-13" name="__codelineno-342-13" href="#__codelineno-342-13"></a>
<a id="__codelineno-342-14" name="__codelineno-342-14" href="#__codelineno-342-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-342-15" name="__codelineno-342-15" href="#__codelineno-342-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-342-16" name="__codelineno-342-16" href="#__codelineno-342-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-342-17" name="__codelineno-342-17" href="#__codelineno-342-17"></a>
<a id="__codelineno-342-18" name="__codelineno-342-18" href="#__codelineno-342-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-342-19" name="__codelineno-342-19" href="#__codelineno-342-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-342-20" name="__codelineno-342-20" href="#__codelineno-342-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-342-21" name="__codelineno-342-21" href="#__codelineno-342-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-342-22" name="__codelineno-342-22" href="#__codelineno-342-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-342-23" name="__codelineno-342-23" href="#__codelineno-342-23"></a>
<a id="__codelineno-342-24" name="__codelineno-342-24" href="#__codelineno-342-24"></a>
<a id="__codelineno-342-25" name="__codelineno-342-25" href="#__codelineno-342-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-342-26" name="__codelineno-342-26" href="#__codelineno-342-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-342-27" name="__codelineno-342-27" href="#__codelineno-342-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-342-28" name="__codelineno-342-28" href="#__codelineno-342-28"></a>
<a id="__codelineno-342-29" name="__codelineno-342-29" href="#__codelineno-342-29"></a>
<a id="__codelineno-342-30" name="__codelineno-342-30" href="#__codelineno-342-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-342-31" name="__codelineno-342-31" href="#__codelineno-342-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-342-32" name="__codelineno-342-32" href="#__codelineno-342-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-342-33" name="__codelineno-342-33" href="#__codelineno-342-33"></a><span class="p">]</span>
<a id="__codelineno-342-34" name="__codelineno-342-34" href="#__codelineno-342-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-342-35" name="__codelineno-342-35" href="#__codelineno-342-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-342-36" name="__codelineno-342-36" href="#__codelineno-342-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-342-37" name="__codelineno-342-37" href="#__codelineno-342-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-342-38" name="__codelineno-342-38" href="#__codelineno-342-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-342-39" name="__codelineno-342-39" href="#__codelineno-342-39"></a><span class="c1"># ]</span>
<a id="__codelineno-342-40" name="__codelineno-342-40" href="#__codelineno-342-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-342-41" name="__codelineno-342-41" href="#__codelineno-342-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-342-42" name="__codelineno-342-42" href="#__codelineno-342-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-342-43" name="__codelineno-342-43" href="#__codelineno-342-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-343-1" name="__codelineno-343-1" href="#__codelineno-343-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-343-2" name="__codelineno-343-2" href="#__codelineno-343-2"></a>
<a id="__codelineno-343-3" name="__codelineno-343-3" href="#__codelineno-343-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-343-4" name="__codelineno-343-4" href="#__codelineno-343-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-343-5" name="__codelineno-343-5" href="#__codelineno-343-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-343-6" name="__codelineno-343-6" href="#__codelineno-343-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-343-7" name="__codelineno-343-7" href="#__codelineno-343-7"></a>
<a id="__codelineno-343-8" name="__codelineno-343-8" href="#__codelineno-343-8"></a>
<a id="__codelineno-343-9" name="__codelineno-343-9" href="#__codelineno-343-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-343-10" name="__codelineno-343-10" href="#__codelineno-343-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-343-11" name="__codelineno-343-11" href="#__codelineno-343-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-343-12" name="__codelineno-343-12" href="#__codelineno-343-12"></a>
<a id="__codelineno-343-13" name="__codelineno-343-13" href="#__codelineno-343-13"></a>
<a id="__codelineno-343-14" name="__codelineno-343-14" href="#__codelineno-343-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-343-15" name="__codelineno-343-15" href="#__codelineno-343-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-343-16" name="__codelineno-343-16" href="#__codelineno-343-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-343-17" name="__codelineno-343-17" href="#__codelineno-343-17"></a>
<a id="__codelineno-343-18" name="__codelineno-343-18" href="#__codelineno-343-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-343-19" name="__codelineno-343-19" href="#__codelineno-343-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-343-20" name="__codelineno-343-20" href="#__codelineno-343-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-343-21" name="__codelineno-343-21" href="#__codelineno-343-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-343-22" name="__codelineno-343-22" href="#__codelineno-343-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-343-23" name="__codelineno-343-23" href="#__codelineno-343-23"></a>
<a id="__codelineno-343-24" name="__codelineno-343-24" href="#__codelineno-343-24"></a>
<a id="__codelineno-343-25" name="__codelineno-343-25" href="#__codelineno-343-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-343-26" name="__codelineno-343-26" href="#__codelineno-343-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-343-27" name="__codelineno-343-27" href="#__codelineno-343-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-343-28" name="__codelineno-343-28" href="#__codelineno-343-28"></a>
<a id="__codelineno-343-29" name="__codelineno-343-29" href="#__codelineno-343-29"></a>
<a id="__codelineno-343-30" name="__codelineno-343-30" href="#__codelineno-343-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-343-31" name="__codelineno-343-31" href="#__codelineno-343-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-343-32" name="__codelineno-343-32" href="#__codelineno-343-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-343-33" name="__codelineno-343-33" href="#__codelineno-343-33"></a><span class="p">]</span>
<a id="__codelineno-343-34" name="__codelineno-343-34" href="#__codelineno-343-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-343-35" name="__codelineno-343-35" href="#__codelineno-343-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-343-36" name="__codelineno-343-36" href="#__codelineno-343-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-343-37" name="__codelineno-343-37" href="#__codelineno-343-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-343-38" name="__codelineno-343-38" href="#__codelineno-343-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-343-39" name="__codelineno-343-39" href="#__codelineno-343-39"></a><span class="c1"># ]</span>
<a id="__codelineno-343-40" name="__codelineno-343-40" href="#__codelineno-343-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-343-41" name="__codelineno-343-41" href="#__codelineno-343-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-343-42" name="__codelineno-343-42" href="#__codelineno-343-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-343-43" name="__codelineno-343-43" href="#__codelineno-343-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-344-1" name="__codelineno-344-1" href="#__codelineno-344-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-344-2" name="__codelineno-344-2" href="#__codelineno-344-2"></a>
<a id="__codelineno-344-3" name="__codelineno-344-3" href="#__codelineno-344-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-344-4" name="__codelineno-344-4" href="#__codelineno-344-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-344-5" name="__codelineno-344-5" href="#__codelineno-344-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-344-6" name="__codelineno-344-6" href="#__codelineno-344-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-344-7" name="__codelineno-344-7" href="#__codelineno-344-7"></a>
<a id="__codelineno-344-8" name="__codelineno-344-8" href="#__codelineno-344-8"></a>
<a id="__codelineno-344-9" name="__codelineno-344-9" href="#__codelineno-344-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-344-10" name="__codelineno-344-10" href="#__codelineno-344-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-344-11" name="__codelineno-344-11" href="#__codelineno-344-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-344-12" name="__codelineno-344-12" href="#__codelineno-344-12"></a>
<a id="__codelineno-344-13" name="__codelineno-344-13" href="#__codelineno-344-13"></a>
<a id="__codelineno-344-14" name="__codelineno-344-14" href="#__codelineno-344-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-344-15" name="__codelineno-344-15" href="#__codelineno-344-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-344-16" name="__codelineno-344-16" href="#__codelineno-344-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-344-17" name="__codelineno-344-17" href="#__codelineno-344-17"></a>
<a id="__codelineno-344-18" name="__codelineno-344-18" href="#__codelineno-344-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-344-19" name="__codelineno-344-19" href="#__codelineno-344-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-344-20" name="__codelineno-344-20" href="#__codelineno-344-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-344-21" name="__codelineno-344-21" href="#__codelineno-344-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-344-22" name="__codelineno-344-22" href="#__codelineno-344-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-344-23" name="__codelineno-344-23" href="#__codelineno-344-23"></a>
<a id="__codelineno-344-24" name="__codelineno-344-24" href="#__codelineno-344-24"></a>
<a id="__codelineno-344-25" name="__codelineno-344-25" href="#__codelineno-344-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-344-26" name="__codelineno-344-26" href="#__codelineno-344-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-344-27" name="__codelineno-344-27" href="#__codelineno-344-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-344-28" name="__codelineno-344-28" href="#__codelineno-344-28"></a>
<a id="__codelineno-344-29" name="__codelineno-344-29" href="#__codelineno-344-29"></a>
<a id="__codelineno-344-30" name="__codelineno-344-30" href="#__codelineno-344-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-344-31" name="__codelineno-344-31" href="#__codelineno-344-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-344-32" name="__codelineno-344-32" href="#__codelineno-344-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-344-33" name="__codelineno-344-33" href="#__codelineno-344-33"></a><span class="p">]</span>
<a id="__codelineno-344-34" name="__codelineno-344-34" href="#__codelineno-344-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-344-35" name="__codelineno-344-35" href="#__codelineno-344-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-344-36" name="__codelineno-344-36" href="#__codelineno-344-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-344-37" name="__codelineno-344-37" href="#__codelineno-344-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-344-38" name="__codelineno-344-38" href="#__codelineno-344-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-344-39" name="__codelineno-344-39" href="#__codelineno-344-39"></a><span class="c1"># ]</span>
<a id="__codelineno-344-40" name="__codelineno-344-40" href="#__codelineno-344-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-344-41" name="__codelineno-344-41" href="#__codelineno-344-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-344-42" name="__codelineno-344-42" href="#__codelineno-344-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-344-43" name="__codelineno-344-43" href="#__codelineno-344-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-345-1" name="__codelineno-345-1" href="#__codelineno-345-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-345-2" name="__codelineno-345-2" href="#__codelineno-345-2"></a>
<a id="__codelineno-345-3" name="__codelineno-345-3" href="#__codelineno-345-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-345-4" name="__codelineno-345-4" href="#__codelineno-345-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-345-5" name="__codelineno-345-5" href="#__codelineno-345-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-345-6" name="__codelineno-345-6" href="#__codelineno-345-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-345-7" name="__codelineno-345-7" href="#__codelineno-345-7"></a>
<a id="__codelineno-345-8" name="__codelineno-345-8" href="#__codelineno-345-8"></a>
<a id="__codelineno-345-9" name="__codelineno-345-9" href="#__codelineno-345-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-345-10" name="__codelineno-345-10" href="#__codelineno-345-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-345-11" name="__codelineno-345-11" href="#__codelineno-345-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-345-12" name="__codelineno-345-12" href="#__codelineno-345-12"></a>
<a id="__codelineno-345-13" name="__codelineno-345-13" href="#__codelineno-345-13"></a>
<a id="__codelineno-345-14" name="__codelineno-345-14" href="#__codelineno-345-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-345-15" name="__codelineno-345-15" href="#__codelineno-345-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-345-16" name="__codelineno-345-16" href="#__codelineno-345-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-345-17" name="__codelineno-345-17" href="#__codelineno-345-17"></a>
<a id="__codelineno-345-18" name="__codelineno-345-18" href="#__codelineno-345-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-345-19" name="__codelineno-345-19" href="#__codelineno-345-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-345-20" name="__codelineno-345-20" href="#__codelineno-345-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-345-21" name="__codelineno-345-21" href="#__codelineno-345-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-345-22" name="__codelineno-345-22" href="#__codelineno-345-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-345-23" name="__codelineno-345-23" href="#__codelineno-345-23"></a>
<a id="__codelineno-345-24" name="__codelineno-345-24" href="#__codelineno-345-24"></a>
<a id="__codelineno-345-25" name="__codelineno-345-25" href="#__codelineno-345-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-345-26" name="__codelineno-345-26" href="#__codelineno-345-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-345-27" name="__codelineno-345-27" href="#__codelineno-345-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-345-28" name="__codelineno-345-28" href="#__codelineno-345-28"></a>
<a id="__codelineno-345-29" name="__codelineno-345-29" href="#__codelineno-345-29"></a>
<a id="__codelineno-345-30" name="__codelineno-345-30" href="#__codelineno-345-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-345-31" name="__codelineno-345-31" href="#__codelineno-345-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-345-32" name="__codelineno-345-32" href="#__codelineno-345-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-345-33" name="__codelineno-345-33" href="#__codelineno-345-33"></a><span class="p">]</span>
<a id="__codelineno-345-34" name="__codelineno-345-34" href="#__codelineno-345-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-345-35" name="__codelineno-345-35" href="#__codelineno-345-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-345-36" name="__codelineno-345-36" href="#__codelineno-345-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-345-37" name="__codelineno-345-37" href="#__codelineno-345-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-345-38" name="__codelineno-345-38" href="#__codelineno-345-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-345-39" name="__codelineno-345-39" href="#__codelineno-345-39"></a><span class="c1"># ]</span>
<a id="__codelineno-345-40" name="__codelineno-345-40" href="#__codelineno-345-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-345-41" name="__codelineno-345-41" href="#__codelineno-345-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-345-42" name="__codelineno-345-42" href="#__codelineno-345-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-345-43" name="__codelineno-345-43" href="#__codelineno-345-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-346-1" name="__codelineno-346-1" href="#__codelineno-346-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-346-2" name="__codelineno-346-2" href="#__codelineno-346-2"></a>
<a id="__codelineno-346-3" name="__codelineno-346-3" href="#__codelineno-346-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-346-4" name="__codelineno-346-4" href="#__codelineno-346-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-346-5" name="__codelineno-346-5" href="#__codelineno-346-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-346-6" name="__codelineno-346-6" href="#__codelineno-346-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-346-7" name="__codelineno-346-7" href="#__codelineno-346-7"></a>
<a id="__codelineno-346-8" name="__codelineno-346-8" href="#__codelineno-346-8"></a>
<a id="__codelineno-346-9" name="__codelineno-346-9" href="#__codelineno-346-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-346-10" name="__codelineno-346-10" href="#__codelineno-346-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-346-11" name="__codelineno-346-11" href="#__codelineno-346-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-346-12" name="__codelineno-346-12" href="#__codelineno-346-12"></a>
<a id="__codelineno-346-13" name="__codelineno-346-13" href="#__codelineno-346-13"></a>
<a id="__codelineno-346-14" name="__codelineno-346-14" href="#__codelineno-346-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-346-15" name="__codelineno-346-15" href="#__codelineno-346-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-346-16" name="__codelineno-346-16" href="#__codelineno-346-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-346-17" name="__codelineno-346-17" href="#__codelineno-346-17"></a>
<a id="__codelineno-346-18" name="__codelineno-346-18" href="#__codelineno-346-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-346-19" name="__codelineno-346-19" href="#__codelineno-346-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-346-20" name="__codelineno-346-20" href="#__codelineno-346-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-346-21" name="__codelineno-346-21" href="#__codelineno-346-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-346-22" name="__codelineno-346-22" href="#__codelineno-346-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-346-23" name="__codelineno-346-23" href="#__codelineno-346-23"></a>
<a id="__codelineno-346-24" name="__codelineno-346-24" href="#__codelineno-346-24"></a>
<a id="__codelineno-346-25" name="__codelineno-346-25" href="#__codelineno-346-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-346-26" name="__codelineno-346-26" href="#__codelineno-346-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-346-27" name="__codelineno-346-27" href="#__codelineno-346-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-346-28" name="__codelineno-346-28" href="#__codelineno-346-28"></a>
<a id="__codelineno-346-29" name="__codelineno-346-29" href="#__codelineno-346-29"></a>
<a id="__codelineno-346-30" name="__codelineno-346-30" href="#__codelineno-346-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-346-31" name="__codelineno-346-31" href="#__codelineno-346-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-346-32" name="__codelineno-346-32" href="#__codelineno-346-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-346-33" name="__codelineno-346-33" href="#__codelineno-346-33"></a><span class="p">]</span>
<a id="__codelineno-346-34" name="__codelineno-346-34" href="#__codelineno-346-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-346-35" name="__codelineno-346-35" href="#__codelineno-346-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-346-36" name="__codelineno-346-36" href="#__codelineno-346-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-346-37" name="__codelineno-346-37" href="#__codelineno-346-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-346-38" name="__codelineno-346-38" href="#__codelineno-346-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-346-39" name="__codelineno-346-39" href="#__codelineno-346-39"></a><span class="c1"># ]</span>
<a id="__codelineno-346-40" name="__codelineno-346-40" href="#__codelineno-346-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-346-41" name="__codelineno-346-41" href="#__codelineno-346-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-346-42" name="__codelineno-346-42" href="#__codelineno-346-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-346-43" name="__codelineno-346-43" href="#__codelineno-346-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-347-1" name="__codelineno-347-1" href="#__codelineno-347-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-347-2" name="__codelineno-347-2" href="#__codelineno-347-2"></a>
<a id="__codelineno-347-3" name="__codelineno-347-3" href="#__codelineno-347-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-347-4" name="__codelineno-347-4" href="#__codelineno-347-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-347-5" name="__codelineno-347-5" href="#__codelineno-347-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-347-6" name="__codelineno-347-6" href="#__codelineno-347-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-347-7" name="__codelineno-347-7" href="#__codelineno-347-7"></a>
<a id="__codelineno-347-8" name="__codelineno-347-8" href="#__codelineno-347-8"></a>
<a id="__codelineno-347-9" name="__codelineno-347-9" href="#__codelineno-347-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-347-10" name="__codelineno-347-10" href="#__codelineno-347-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-347-11" name="__codelineno-347-11" href="#__codelineno-347-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-347-12" name="__codelineno-347-12" href="#__codelineno-347-12"></a>
<a id="__codelineno-347-13" name="__codelineno-347-13" href="#__codelineno-347-13"></a>
<a id="__codelineno-347-14" name="__codelineno-347-14" href="#__codelineno-347-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-347-15" name="__codelineno-347-15" href="#__codelineno-347-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-347-16" name="__codelineno-347-16" href="#__codelineno-347-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-347-17" name="__codelineno-347-17" href="#__codelineno-347-17"></a>
<a id="__codelineno-347-18" name="__codelineno-347-18" href="#__codelineno-347-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-347-19" name="__codelineno-347-19" href="#__codelineno-347-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-347-20" name="__codelineno-347-20" href="#__codelineno-347-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-347-21" name="__codelineno-347-21" href="#__codelineno-347-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-347-22" name="__codelineno-347-22" href="#__codelineno-347-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-347-23" name="__codelineno-347-23" href="#__codelineno-347-23"></a>
<a id="__codelineno-347-24" name="__codelineno-347-24" href="#__codelineno-347-24"></a>
<a id="__codelineno-347-25" name="__codelineno-347-25" href="#__codelineno-347-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-347-26" name="__codelineno-347-26" href="#__codelineno-347-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-347-27" name="__codelineno-347-27" href="#__codelineno-347-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-347-28" name="__codelineno-347-28" href="#__codelineno-347-28"></a>
<a id="__codelineno-347-29" name="__codelineno-347-29" href="#__codelineno-347-29"></a>
<a id="__codelineno-347-30" name="__codelineno-347-30" href="#__codelineno-347-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-347-31" name="__codelineno-347-31" href="#__codelineno-347-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-347-32" name="__codelineno-347-32" href="#__codelineno-347-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-347-33" name="__codelineno-347-33" href="#__codelineno-347-33"></a><span class="p">]</span>
<a id="__codelineno-347-34" name="__codelineno-347-34" href="#__codelineno-347-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-347-35" name="__codelineno-347-35" href="#__codelineno-347-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-347-36" name="__codelineno-347-36" href="#__codelineno-347-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-347-37" name="__codelineno-347-37" href="#__codelineno-347-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-347-38" name="__codelineno-347-38" href="#__codelineno-347-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-347-39" name="__codelineno-347-39" href="#__codelineno-347-39"></a><span class="c1"># ]</span>
<a id="__codelineno-347-40" name="__codelineno-347-40" href="#__codelineno-347-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-347-41" name="__codelineno-347-41" href="#__codelineno-347-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-347-42" name="__codelineno-347-42" href="#__codelineno-347-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-347-43" name="__codelineno-347-43" href="#__codelineno-347-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-348-1" name="__codelineno-348-1" href="#__codelineno-348-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-348-2" name="__codelineno-348-2" href="#__codelineno-348-2"></a>
<a id="__codelineno-348-3" name="__codelineno-348-3" href="#__codelineno-348-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-348-4" name="__codelineno-348-4" href="#__codelineno-348-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-348-5" name="__codelineno-348-5" href="#__codelineno-348-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-348-6" name="__codelineno-348-6" href="#__codelineno-348-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-348-7" name="__codelineno-348-7" href="#__codelineno-348-7"></a>
<a id="__codelineno-348-8" name="__codelineno-348-8" href="#__codelineno-348-8"></a>
<a id="__codelineno-348-9" name="__codelineno-348-9" href="#__codelineno-348-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-348-10" name="__codelineno-348-10" href="#__codelineno-348-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-348-11" name="__codelineno-348-11" href="#__codelineno-348-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-348-12" name="__codelineno-348-12" href="#__codelineno-348-12"></a>
<a id="__codelineno-348-13" name="__codelineno-348-13" href="#__codelineno-348-13"></a>
<a id="__codelineno-348-14" name="__codelineno-348-14" href="#__codelineno-348-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-348-15" name="__codelineno-348-15" href="#__codelineno-348-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-348-16" name="__codelineno-348-16" href="#__codelineno-348-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-348-17" name="__codelineno-348-17" href="#__codelineno-348-17"></a>
<a id="__codelineno-348-18" name="__codelineno-348-18" href="#__codelineno-348-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-348-19" name="__codelineno-348-19" href="#__codelineno-348-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-348-20" name="__codelineno-348-20" href="#__codelineno-348-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-348-21" name="__codelineno-348-21" href="#__codelineno-348-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-348-22" name="__codelineno-348-22" href="#__codelineno-348-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-348-23" name="__codelineno-348-23" href="#__codelineno-348-23"></a>
<a id="__codelineno-348-24" name="__codelineno-348-24" href="#__codelineno-348-24"></a>
<a id="__codelineno-348-25" name="__codelineno-348-25" href="#__codelineno-348-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-348-26" name="__codelineno-348-26" href="#__codelineno-348-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-348-27" name="__codelineno-348-27" href="#__codelineno-348-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-348-28" name="__codelineno-348-28" href="#__codelineno-348-28"></a>
<a id="__codelineno-348-29" name="__codelineno-348-29" href="#__codelineno-348-29"></a>
<a id="__codelineno-348-30" name="__codelineno-348-30" href="#__codelineno-348-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-348-31" name="__codelineno-348-31" href="#__codelineno-348-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-348-32" name="__codelineno-348-32" href="#__codelineno-348-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-348-33" name="__codelineno-348-33" href="#__codelineno-348-33"></a><span class="p">]</span>
<a id="__codelineno-348-34" name="__codelineno-348-34" href="#__codelineno-348-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-348-35" name="__codelineno-348-35" href="#__codelineno-348-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-348-36" name="__codelineno-348-36" href="#__codelineno-348-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-348-37" name="__codelineno-348-37" href="#__codelineno-348-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-348-38" name="__codelineno-348-38" href="#__codelineno-348-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-348-39" name="__codelineno-348-39" href="#__codelineno-348-39"></a><span class="c1"># ]</span>
<a id="__codelineno-348-40" name="__codelineno-348-40" href="#__codelineno-348-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-348-41" name="__codelineno-348-41" href="#__codelineno-348-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-348-42" name="__codelineno-348-42" href="#__codelineno-348-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-348-43" name="__codelineno-348-43" href="#__codelineno-348-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-349-1" name="__codelineno-349-1" href="#__codelineno-349-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-349-2" name="__codelineno-349-2" href="#__codelineno-349-2"></a>
<a id="__codelineno-349-3" name="__codelineno-349-3" href="#__codelineno-349-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">Messages</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-349-4" name="__codelineno-349-4" href="#__codelineno-349-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-349-5" name="__codelineno-349-5" href="#__codelineno-349-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-349-6" name="__codelineno-349-6" href="#__codelineno-349-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-349-7" name="__codelineno-349-7" href="#__codelineno-349-7"></a>
<a id="__codelineno-349-8" name="__codelineno-349-8" href="#__codelineno-349-8"></a>
<a id="__codelineno-349-9" name="__codelineno-349-9" href="#__codelineno-349-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-349-10" name="__codelineno-349-10" href="#__codelineno-349-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-349-11" name="__codelineno-349-11" href="#__codelineno-349-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-349-12" name="__codelineno-349-12" href="#__codelineno-349-12"></a>
<a id="__codelineno-349-13" name="__codelineno-349-13" href="#__codelineno-349-13"></a>
<a id="__codelineno-349-14" name="__codelineno-349-14" href="#__codelineno-349-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-349-15" name="__codelineno-349-15" href="#__codelineno-349-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-349-16" name="__codelineno-349-16" href="#__codelineno-349-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-349-17" name="__codelineno-349-17" href="#__codelineno-349-17"></a>
<a id="__codelineno-349-18" name="__codelineno-349-18" href="#__codelineno-349-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-349-19" name="__codelineno-349-19" href="#__codelineno-349-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-349-20" name="__codelineno-349-20" href="#__codelineno-349-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-349-21" name="__codelineno-349-21" href="#__codelineno-349-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-349-22" name="__codelineno-349-22" href="#__codelineno-349-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-349-23" name="__codelineno-349-23" href="#__codelineno-349-23"></a>
<a id="__codelineno-349-24" name="__codelineno-349-24" href="#__codelineno-349-24"></a>
<a id="__codelineno-349-25" name="__codelineno-349-25" href="#__codelineno-349-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-349-26" name="__codelineno-349-26" href="#__codelineno-349-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Messages</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
</span><a id="__codelineno-349-27" name="__codelineno-349-27" href="#__codelineno-349-27"></a>    <span class="k">return</span> <span class="n">Messages</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-349-28" name="__codelineno-349-28" href="#__codelineno-349-28"></a>
<a id="__codelineno-349-29" name="__codelineno-349-29" href="#__codelineno-349-29"></a>
<a id="__codelineno-349-30" name="__codelineno-349-30" href="#__codelineno-349-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-349-31" name="__codelineno-349-31" href="#__codelineno-349-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-349-32" name="__codelineno-349-32" href="#__codelineno-349-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-349-33" name="__codelineno-349-33" href="#__codelineno-349-33"></a><span class="p">]</span>
<a id="__codelineno-349-34" name="__codelineno-349-34" href="#__codelineno-349-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-349-35" name="__codelineno-349-35" href="#__codelineno-349-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-349-36" name="__codelineno-349-36" href="#__codelineno-349-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-349-37" name="__codelineno-349-37" href="#__codelineno-349-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-349-38" name="__codelineno-349-38" href="#__codelineno-349-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-349-39" name="__codelineno-349-39" href="#__codelineno-349-39"></a><span class="c1"># ]</span>
<a id="__codelineno-349-40" name="__codelineno-349-40" href="#__codelineno-349-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-349-41" name="__codelineno-349-41" href="#__codelineno-349-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-349-42" name="__codelineno-349-42" href="#__codelineno-349-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-349-43" name="__codelineno-349-43" href="#__codelineno-349-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="45:10"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><input id="__tabbed_45_2" name="__tabbed_45" type="radio" /><input id="__tabbed_45_3" name="__tabbed_45" type="radio" /><input id="__tabbed_45_4" name="__tabbed_45" type="radio" /><input id="__tabbed_45_5" name="__tabbed_45" type="radio" /><input id="__tabbed_45_6" name="__tabbed_45" type="radio" /><input id="__tabbed_45_7" name="__tabbed_45" type="radio" /><input id="__tabbed_45_8" name="__tabbed_45" type="radio" /><input id="__tabbed_45_9" name="__tabbed_45" type="radio" /><input id="__tabbed_45_10" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">OpenAI</label><label for="__tabbed_45_2">Anthropic</label><label for="__tabbed_45_3">Google</label><label for="__tabbed_45_4">Groq</label><label for="__tabbed_45_5">xAI</label><label for="__tabbed_45_6">Mistral</label><label for="__tabbed_45_7">Cohere</label><label for="__tabbed_45_8">LiteLLM</label><label for="__tabbed_45_9">Azure AI</label><label for="__tabbed_45_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-350-1" name="__codelineno-350-1" href="#__codelineno-350-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-350-2" name="__codelineno-350-2" href="#__codelineno-350-2"></a>
<a id="__codelineno-350-3" name="__codelineno-350-3" href="#__codelineno-350-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-350-4" name="__codelineno-350-4" href="#__codelineno-350-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-350-5" name="__codelineno-350-5" href="#__codelineno-350-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-350-6" name="__codelineno-350-6" href="#__codelineno-350-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-350-7" name="__codelineno-350-7" href="#__codelineno-350-7"></a>
<a id="__codelineno-350-8" name="__codelineno-350-8" href="#__codelineno-350-8"></a>
<a id="__codelineno-350-9" name="__codelineno-350-9" href="#__codelineno-350-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-350-10" name="__codelineno-350-10" href="#__codelineno-350-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-350-11" name="__codelineno-350-11" href="#__codelineno-350-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-350-12" name="__codelineno-350-12" href="#__codelineno-350-12"></a>
<a id="__codelineno-350-13" name="__codelineno-350-13" href="#__codelineno-350-13"></a>
<a id="__codelineno-350-14" name="__codelineno-350-14" href="#__codelineno-350-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-350-15" name="__codelineno-350-15" href="#__codelineno-350-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-350-16" name="__codelineno-350-16" href="#__codelineno-350-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-350-17" name="__codelineno-350-17" href="#__codelineno-350-17"></a>
<a id="__codelineno-350-18" name="__codelineno-350-18" href="#__codelineno-350-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-350-19" name="__codelineno-350-19" href="#__codelineno-350-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-350-20" name="__codelineno-350-20" href="#__codelineno-350-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-350-21" name="__codelineno-350-21" href="#__codelineno-350-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-350-22" name="__codelineno-350-22" href="#__codelineno-350-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-350-23" name="__codelineno-350-23" href="#__codelineno-350-23"></a>
<a id="__codelineno-350-24" name="__codelineno-350-24" href="#__codelineno-350-24"></a>
<a id="__codelineno-350-25" name="__codelineno-350-25" href="#__codelineno-350-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-350-26" name="__codelineno-350-26" href="#__codelineno-350-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-350-27" name="__codelineno-350-27" href="#__codelineno-350-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-350-28" name="__codelineno-350-28" href="#__codelineno-350-28"></a>
<a id="__codelineno-350-29" name="__codelineno-350-29" href="#__codelineno-350-29"></a>
<a id="__codelineno-350-30" name="__codelineno-350-30" href="#__codelineno-350-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-350-31" name="__codelineno-350-31" href="#__codelineno-350-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-350-32" name="__codelineno-350-32" href="#__codelineno-350-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-350-33" name="__codelineno-350-33" href="#__codelineno-350-33"></a><span class="p">]</span>
<a id="__codelineno-350-34" name="__codelineno-350-34" href="#__codelineno-350-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-350-35" name="__codelineno-350-35" href="#__codelineno-350-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-350-36" name="__codelineno-350-36" href="#__codelineno-350-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-350-37" name="__codelineno-350-37" href="#__codelineno-350-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-350-38" name="__codelineno-350-38" href="#__codelineno-350-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-350-39" name="__codelineno-350-39" href="#__codelineno-350-39"></a><span class="c1"># ]</span>
<a id="__codelineno-350-40" name="__codelineno-350-40" href="#__codelineno-350-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-350-41" name="__codelineno-350-41" href="#__codelineno-350-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-350-42" name="__codelineno-350-42" href="#__codelineno-350-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-350-43" name="__codelineno-350-43" href="#__codelineno-350-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-351-1" name="__codelineno-351-1" href="#__codelineno-351-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-351-2" name="__codelineno-351-2" href="#__codelineno-351-2"></a>
<a id="__codelineno-351-3" name="__codelineno-351-3" href="#__codelineno-351-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-351-4" name="__codelineno-351-4" href="#__codelineno-351-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-351-5" name="__codelineno-351-5" href="#__codelineno-351-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-351-6" name="__codelineno-351-6" href="#__codelineno-351-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-351-7" name="__codelineno-351-7" href="#__codelineno-351-7"></a>
<a id="__codelineno-351-8" name="__codelineno-351-8" href="#__codelineno-351-8"></a>
<a id="__codelineno-351-9" name="__codelineno-351-9" href="#__codelineno-351-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-351-10" name="__codelineno-351-10" href="#__codelineno-351-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-351-11" name="__codelineno-351-11" href="#__codelineno-351-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-351-12" name="__codelineno-351-12" href="#__codelineno-351-12"></a>
<a id="__codelineno-351-13" name="__codelineno-351-13" href="#__codelineno-351-13"></a>
<a id="__codelineno-351-14" name="__codelineno-351-14" href="#__codelineno-351-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-351-15" name="__codelineno-351-15" href="#__codelineno-351-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-351-16" name="__codelineno-351-16" href="#__codelineno-351-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-351-17" name="__codelineno-351-17" href="#__codelineno-351-17"></a>
<a id="__codelineno-351-18" name="__codelineno-351-18" href="#__codelineno-351-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-351-19" name="__codelineno-351-19" href="#__codelineno-351-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-351-20" name="__codelineno-351-20" href="#__codelineno-351-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-351-21" name="__codelineno-351-21" href="#__codelineno-351-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-351-22" name="__codelineno-351-22" href="#__codelineno-351-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-351-23" name="__codelineno-351-23" href="#__codelineno-351-23"></a>
<a id="__codelineno-351-24" name="__codelineno-351-24" href="#__codelineno-351-24"></a>
<a id="__codelineno-351-25" name="__codelineno-351-25" href="#__codelineno-351-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-351-26" name="__codelineno-351-26" href="#__codelineno-351-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-351-27" name="__codelineno-351-27" href="#__codelineno-351-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-351-28" name="__codelineno-351-28" href="#__codelineno-351-28"></a>
<a id="__codelineno-351-29" name="__codelineno-351-29" href="#__codelineno-351-29"></a>
<a id="__codelineno-351-30" name="__codelineno-351-30" href="#__codelineno-351-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-351-31" name="__codelineno-351-31" href="#__codelineno-351-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-351-32" name="__codelineno-351-32" href="#__codelineno-351-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-351-33" name="__codelineno-351-33" href="#__codelineno-351-33"></a><span class="p">]</span>
<a id="__codelineno-351-34" name="__codelineno-351-34" href="#__codelineno-351-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-351-35" name="__codelineno-351-35" href="#__codelineno-351-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-351-36" name="__codelineno-351-36" href="#__codelineno-351-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-351-37" name="__codelineno-351-37" href="#__codelineno-351-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-351-38" name="__codelineno-351-38" href="#__codelineno-351-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-351-39" name="__codelineno-351-39" href="#__codelineno-351-39"></a><span class="c1"># ]</span>
<a id="__codelineno-351-40" name="__codelineno-351-40" href="#__codelineno-351-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-351-41" name="__codelineno-351-41" href="#__codelineno-351-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-351-42" name="__codelineno-351-42" href="#__codelineno-351-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-351-43" name="__codelineno-351-43" href="#__codelineno-351-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-352-1" name="__codelineno-352-1" href="#__codelineno-352-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-352-2" name="__codelineno-352-2" href="#__codelineno-352-2"></a>
<a id="__codelineno-352-3" name="__codelineno-352-3" href="#__codelineno-352-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-352-4" name="__codelineno-352-4" href="#__codelineno-352-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-352-5" name="__codelineno-352-5" href="#__codelineno-352-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-352-6" name="__codelineno-352-6" href="#__codelineno-352-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-352-7" name="__codelineno-352-7" href="#__codelineno-352-7"></a>
<a id="__codelineno-352-8" name="__codelineno-352-8" href="#__codelineno-352-8"></a>
<a id="__codelineno-352-9" name="__codelineno-352-9" href="#__codelineno-352-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-352-10" name="__codelineno-352-10" href="#__codelineno-352-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-352-11" name="__codelineno-352-11" href="#__codelineno-352-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-352-12" name="__codelineno-352-12" href="#__codelineno-352-12"></a>
<a id="__codelineno-352-13" name="__codelineno-352-13" href="#__codelineno-352-13"></a>
<a id="__codelineno-352-14" name="__codelineno-352-14" href="#__codelineno-352-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-352-15" name="__codelineno-352-15" href="#__codelineno-352-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-352-16" name="__codelineno-352-16" href="#__codelineno-352-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-352-17" name="__codelineno-352-17" href="#__codelineno-352-17"></a>
<a id="__codelineno-352-18" name="__codelineno-352-18" href="#__codelineno-352-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-352-19" name="__codelineno-352-19" href="#__codelineno-352-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-352-20" name="__codelineno-352-20" href="#__codelineno-352-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-352-21" name="__codelineno-352-21" href="#__codelineno-352-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-352-22" name="__codelineno-352-22" href="#__codelineno-352-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-352-23" name="__codelineno-352-23" href="#__codelineno-352-23"></a>
<a id="__codelineno-352-24" name="__codelineno-352-24" href="#__codelineno-352-24"></a>
<a id="__codelineno-352-25" name="__codelineno-352-25" href="#__codelineno-352-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-352-26" name="__codelineno-352-26" href="#__codelineno-352-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-352-27" name="__codelineno-352-27" href="#__codelineno-352-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-352-28" name="__codelineno-352-28" href="#__codelineno-352-28"></a>
<a id="__codelineno-352-29" name="__codelineno-352-29" href="#__codelineno-352-29"></a>
<a id="__codelineno-352-30" name="__codelineno-352-30" href="#__codelineno-352-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-352-31" name="__codelineno-352-31" href="#__codelineno-352-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-352-32" name="__codelineno-352-32" href="#__codelineno-352-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-352-33" name="__codelineno-352-33" href="#__codelineno-352-33"></a><span class="p">]</span>
<a id="__codelineno-352-34" name="__codelineno-352-34" href="#__codelineno-352-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-352-35" name="__codelineno-352-35" href="#__codelineno-352-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-352-36" name="__codelineno-352-36" href="#__codelineno-352-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-352-37" name="__codelineno-352-37" href="#__codelineno-352-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-352-38" name="__codelineno-352-38" href="#__codelineno-352-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-352-39" name="__codelineno-352-39" href="#__codelineno-352-39"></a><span class="c1"># ]</span>
<a id="__codelineno-352-40" name="__codelineno-352-40" href="#__codelineno-352-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-352-41" name="__codelineno-352-41" href="#__codelineno-352-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-352-42" name="__codelineno-352-42" href="#__codelineno-352-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-352-43" name="__codelineno-352-43" href="#__codelineno-352-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-353-1" name="__codelineno-353-1" href="#__codelineno-353-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-353-2" name="__codelineno-353-2" href="#__codelineno-353-2"></a>
<a id="__codelineno-353-3" name="__codelineno-353-3" href="#__codelineno-353-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-353-4" name="__codelineno-353-4" href="#__codelineno-353-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-353-5" name="__codelineno-353-5" href="#__codelineno-353-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-353-6" name="__codelineno-353-6" href="#__codelineno-353-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-353-7" name="__codelineno-353-7" href="#__codelineno-353-7"></a>
<a id="__codelineno-353-8" name="__codelineno-353-8" href="#__codelineno-353-8"></a>
<a id="__codelineno-353-9" name="__codelineno-353-9" href="#__codelineno-353-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-353-10" name="__codelineno-353-10" href="#__codelineno-353-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-353-11" name="__codelineno-353-11" href="#__codelineno-353-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-353-12" name="__codelineno-353-12" href="#__codelineno-353-12"></a>
<a id="__codelineno-353-13" name="__codelineno-353-13" href="#__codelineno-353-13"></a>
<a id="__codelineno-353-14" name="__codelineno-353-14" href="#__codelineno-353-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-353-15" name="__codelineno-353-15" href="#__codelineno-353-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-353-16" name="__codelineno-353-16" href="#__codelineno-353-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-353-17" name="__codelineno-353-17" href="#__codelineno-353-17"></a>
<a id="__codelineno-353-18" name="__codelineno-353-18" href="#__codelineno-353-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-353-19" name="__codelineno-353-19" href="#__codelineno-353-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-353-20" name="__codelineno-353-20" href="#__codelineno-353-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-353-21" name="__codelineno-353-21" href="#__codelineno-353-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-353-22" name="__codelineno-353-22" href="#__codelineno-353-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-353-23" name="__codelineno-353-23" href="#__codelineno-353-23"></a>
<a id="__codelineno-353-24" name="__codelineno-353-24" href="#__codelineno-353-24"></a>
<a id="__codelineno-353-25" name="__codelineno-353-25" href="#__codelineno-353-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-353-26" name="__codelineno-353-26" href="#__codelineno-353-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-353-27" name="__codelineno-353-27" href="#__codelineno-353-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-353-28" name="__codelineno-353-28" href="#__codelineno-353-28"></a>
<a id="__codelineno-353-29" name="__codelineno-353-29" href="#__codelineno-353-29"></a>
<a id="__codelineno-353-30" name="__codelineno-353-30" href="#__codelineno-353-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-353-31" name="__codelineno-353-31" href="#__codelineno-353-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-353-32" name="__codelineno-353-32" href="#__codelineno-353-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-353-33" name="__codelineno-353-33" href="#__codelineno-353-33"></a><span class="p">]</span>
<a id="__codelineno-353-34" name="__codelineno-353-34" href="#__codelineno-353-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-353-35" name="__codelineno-353-35" href="#__codelineno-353-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-353-36" name="__codelineno-353-36" href="#__codelineno-353-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-353-37" name="__codelineno-353-37" href="#__codelineno-353-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-353-38" name="__codelineno-353-38" href="#__codelineno-353-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-353-39" name="__codelineno-353-39" href="#__codelineno-353-39"></a><span class="c1"># ]</span>
<a id="__codelineno-353-40" name="__codelineno-353-40" href="#__codelineno-353-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-353-41" name="__codelineno-353-41" href="#__codelineno-353-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-353-42" name="__codelineno-353-42" href="#__codelineno-353-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-353-43" name="__codelineno-353-43" href="#__codelineno-353-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-354-1" name="__codelineno-354-1" href="#__codelineno-354-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-354-2" name="__codelineno-354-2" href="#__codelineno-354-2"></a>
<a id="__codelineno-354-3" name="__codelineno-354-3" href="#__codelineno-354-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-354-4" name="__codelineno-354-4" href="#__codelineno-354-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-354-5" name="__codelineno-354-5" href="#__codelineno-354-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-354-6" name="__codelineno-354-6" href="#__codelineno-354-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-354-7" name="__codelineno-354-7" href="#__codelineno-354-7"></a>
<a id="__codelineno-354-8" name="__codelineno-354-8" href="#__codelineno-354-8"></a>
<a id="__codelineno-354-9" name="__codelineno-354-9" href="#__codelineno-354-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-354-10" name="__codelineno-354-10" href="#__codelineno-354-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-354-11" name="__codelineno-354-11" href="#__codelineno-354-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-354-12" name="__codelineno-354-12" href="#__codelineno-354-12"></a>
<a id="__codelineno-354-13" name="__codelineno-354-13" href="#__codelineno-354-13"></a>
<a id="__codelineno-354-14" name="__codelineno-354-14" href="#__codelineno-354-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-354-15" name="__codelineno-354-15" href="#__codelineno-354-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-354-16" name="__codelineno-354-16" href="#__codelineno-354-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-354-17" name="__codelineno-354-17" href="#__codelineno-354-17"></a>
<a id="__codelineno-354-18" name="__codelineno-354-18" href="#__codelineno-354-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-354-19" name="__codelineno-354-19" href="#__codelineno-354-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-354-20" name="__codelineno-354-20" href="#__codelineno-354-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-354-21" name="__codelineno-354-21" href="#__codelineno-354-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-354-22" name="__codelineno-354-22" href="#__codelineno-354-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-354-23" name="__codelineno-354-23" href="#__codelineno-354-23"></a>
<a id="__codelineno-354-24" name="__codelineno-354-24" href="#__codelineno-354-24"></a>
<a id="__codelineno-354-25" name="__codelineno-354-25" href="#__codelineno-354-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-354-26" name="__codelineno-354-26" href="#__codelineno-354-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-354-27" name="__codelineno-354-27" href="#__codelineno-354-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-354-28" name="__codelineno-354-28" href="#__codelineno-354-28"></a>
<a id="__codelineno-354-29" name="__codelineno-354-29" href="#__codelineno-354-29"></a>
<a id="__codelineno-354-30" name="__codelineno-354-30" href="#__codelineno-354-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-354-31" name="__codelineno-354-31" href="#__codelineno-354-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-354-32" name="__codelineno-354-32" href="#__codelineno-354-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-354-33" name="__codelineno-354-33" href="#__codelineno-354-33"></a><span class="p">]</span>
<a id="__codelineno-354-34" name="__codelineno-354-34" href="#__codelineno-354-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-354-35" name="__codelineno-354-35" href="#__codelineno-354-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-354-36" name="__codelineno-354-36" href="#__codelineno-354-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-354-37" name="__codelineno-354-37" href="#__codelineno-354-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-354-38" name="__codelineno-354-38" href="#__codelineno-354-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-354-39" name="__codelineno-354-39" href="#__codelineno-354-39"></a><span class="c1"># ]</span>
<a id="__codelineno-354-40" name="__codelineno-354-40" href="#__codelineno-354-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-354-41" name="__codelineno-354-41" href="#__codelineno-354-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-354-42" name="__codelineno-354-42" href="#__codelineno-354-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-354-43" name="__codelineno-354-43" href="#__codelineno-354-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-355-1" name="__codelineno-355-1" href="#__codelineno-355-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-355-2" name="__codelineno-355-2" href="#__codelineno-355-2"></a>
<a id="__codelineno-355-3" name="__codelineno-355-3" href="#__codelineno-355-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-355-4" name="__codelineno-355-4" href="#__codelineno-355-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-355-5" name="__codelineno-355-5" href="#__codelineno-355-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-355-6" name="__codelineno-355-6" href="#__codelineno-355-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-355-7" name="__codelineno-355-7" href="#__codelineno-355-7"></a>
<a id="__codelineno-355-8" name="__codelineno-355-8" href="#__codelineno-355-8"></a>
<a id="__codelineno-355-9" name="__codelineno-355-9" href="#__codelineno-355-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-355-10" name="__codelineno-355-10" href="#__codelineno-355-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-355-11" name="__codelineno-355-11" href="#__codelineno-355-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-355-12" name="__codelineno-355-12" href="#__codelineno-355-12"></a>
<a id="__codelineno-355-13" name="__codelineno-355-13" href="#__codelineno-355-13"></a>
<a id="__codelineno-355-14" name="__codelineno-355-14" href="#__codelineno-355-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-355-15" name="__codelineno-355-15" href="#__codelineno-355-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-355-16" name="__codelineno-355-16" href="#__codelineno-355-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-355-17" name="__codelineno-355-17" href="#__codelineno-355-17"></a>
<a id="__codelineno-355-18" name="__codelineno-355-18" href="#__codelineno-355-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-355-19" name="__codelineno-355-19" href="#__codelineno-355-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-355-20" name="__codelineno-355-20" href="#__codelineno-355-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-355-21" name="__codelineno-355-21" href="#__codelineno-355-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-355-22" name="__codelineno-355-22" href="#__codelineno-355-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-355-23" name="__codelineno-355-23" href="#__codelineno-355-23"></a>
<a id="__codelineno-355-24" name="__codelineno-355-24" href="#__codelineno-355-24"></a>
<a id="__codelineno-355-25" name="__codelineno-355-25" href="#__codelineno-355-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-355-26" name="__codelineno-355-26" href="#__codelineno-355-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-355-27" name="__codelineno-355-27" href="#__codelineno-355-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-355-28" name="__codelineno-355-28" href="#__codelineno-355-28"></a>
<a id="__codelineno-355-29" name="__codelineno-355-29" href="#__codelineno-355-29"></a>
<a id="__codelineno-355-30" name="__codelineno-355-30" href="#__codelineno-355-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-355-31" name="__codelineno-355-31" href="#__codelineno-355-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-355-32" name="__codelineno-355-32" href="#__codelineno-355-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-355-33" name="__codelineno-355-33" href="#__codelineno-355-33"></a><span class="p">]</span>
<a id="__codelineno-355-34" name="__codelineno-355-34" href="#__codelineno-355-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-355-35" name="__codelineno-355-35" href="#__codelineno-355-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-355-36" name="__codelineno-355-36" href="#__codelineno-355-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-355-37" name="__codelineno-355-37" href="#__codelineno-355-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-355-38" name="__codelineno-355-38" href="#__codelineno-355-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-355-39" name="__codelineno-355-39" href="#__codelineno-355-39"></a><span class="c1"># ]</span>
<a id="__codelineno-355-40" name="__codelineno-355-40" href="#__codelineno-355-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-355-41" name="__codelineno-355-41" href="#__codelineno-355-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-355-42" name="__codelineno-355-42" href="#__codelineno-355-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-355-43" name="__codelineno-355-43" href="#__codelineno-355-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-356-1" name="__codelineno-356-1" href="#__codelineno-356-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-356-2" name="__codelineno-356-2" href="#__codelineno-356-2"></a>
<a id="__codelineno-356-3" name="__codelineno-356-3" href="#__codelineno-356-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-356-4" name="__codelineno-356-4" href="#__codelineno-356-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-356-5" name="__codelineno-356-5" href="#__codelineno-356-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-356-6" name="__codelineno-356-6" href="#__codelineno-356-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-356-7" name="__codelineno-356-7" href="#__codelineno-356-7"></a>
<a id="__codelineno-356-8" name="__codelineno-356-8" href="#__codelineno-356-8"></a>
<a id="__codelineno-356-9" name="__codelineno-356-9" href="#__codelineno-356-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-356-10" name="__codelineno-356-10" href="#__codelineno-356-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-356-11" name="__codelineno-356-11" href="#__codelineno-356-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-356-12" name="__codelineno-356-12" href="#__codelineno-356-12"></a>
<a id="__codelineno-356-13" name="__codelineno-356-13" href="#__codelineno-356-13"></a>
<a id="__codelineno-356-14" name="__codelineno-356-14" href="#__codelineno-356-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-356-15" name="__codelineno-356-15" href="#__codelineno-356-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-356-16" name="__codelineno-356-16" href="#__codelineno-356-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-356-17" name="__codelineno-356-17" href="#__codelineno-356-17"></a>
<a id="__codelineno-356-18" name="__codelineno-356-18" href="#__codelineno-356-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-356-19" name="__codelineno-356-19" href="#__codelineno-356-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-356-20" name="__codelineno-356-20" href="#__codelineno-356-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-356-21" name="__codelineno-356-21" href="#__codelineno-356-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-356-22" name="__codelineno-356-22" href="#__codelineno-356-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-356-23" name="__codelineno-356-23" href="#__codelineno-356-23"></a>
<a id="__codelineno-356-24" name="__codelineno-356-24" href="#__codelineno-356-24"></a>
<a id="__codelineno-356-25" name="__codelineno-356-25" href="#__codelineno-356-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-356-26" name="__codelineno-356-26" href="#__codelineno-356-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-356-27" name="__codelineno-356-27" href="#__codelineno-356-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-356-28" name="__codelineno-356-28" href="#__codelineno-356-28"></a>
<a id="__codelineno-356-29" name="__codelineno-356-29" href="#__codelineno-356-29"></a>
<a id="__codelineno-356-30" name="__codelineno-356-30" href="#__codelineno-356-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-356-31" name="__codelineno-356-31" href="#__codelineno-356-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-356-32" name="__codelineno-356-32" href="#__codelineno-356-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-356-33" name="__codelineno-356-33" href="#__codelineno-356-33"></a><span class="p">]</span>
<a id="__codelineno-356-34" name="__codelineno-356-34" href="#__codelineno-356-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-356-35" name="__codelineno-356-35" href="#__codelineno-356-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-356-36" name="__codelineno-356-36" href="#__codelineno-356-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-356-37" name="__codelineno-356-37" href="#__codelineno-356-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-356-38" name="__codelineno-356-38" href="#__codelineno-356-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-356-39" name="__codelineno-356-39" href="#__codelineno-356-39"></a><span class="c1"># ]</span>
<a id="__codelineno-356-40" name="__codelineno-356-40" href="#__codelineno-356-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-356-41" name="__codelineno-356-41" href="#__codelineno-356-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-356-42" name="__codelineno-356-42" href="#__codelineno-356-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-356-43" name="__codelineno-356-43" href="#__codelineno-356-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-357-1" name="__codelineno-357-1" href="#__codelineno-357-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-357-2" name="__codelineno-357-2" href="#__codelineno-357-2"></a>
<a id="__codelineno-357-3" name="__codelineno-357-3" href="#__codelineno-357-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-357-4" name="__codelineno-357-4" href="#__codelineno-357-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-357-5" name="__codelineno-357-5" href="#__codelineno-357-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-357-6" name="__codelineno-357-6" href="#__codelineno-357-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-357-7" name="__codelineno-357-7" href="#__codelineno-357-7"></a>
<a id="__codelineno-357-8" name="__codelineno-357-8" href="#__codelineno-357-8"></a>
<a id="__codelineno-357-9" name="__codelineno-357-9" href="#__codelineno-357-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-357-10" name="__codelineno-357-10" href="#__codelineno-357-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-357-11" name="__codelineno-357-11" href="#__codelineno-357-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-357-12" name="__codelineno-357-12" href="#__codelineno-357-12"></a>
<a id="__codelineno-357-13" name="__codelineno-357-13" href="#__codelineno-357-13"></a>
<a id="__codelineno-357-14" name="__codelineno-357-14" href="#__codelineno-357-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-357-15" name="__codelineno-357-15" href="#__codelineno-357-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-357-16" name="__codelineno-357-16" href="#__codelineno-357-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-357-17" name="__codelineno-357-17" href="#__codelineno-357-17"></a>
<a id="__codelineno-357-18" name="__codelineno-357-18" href="#__codelineno-357-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-357-19" name="__codelineno-357-19" href="#__codelineno-357-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-357-20" name="__codelineno-357-20" href="#__codelineno-357-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-357-21" name="__codelineno-357-21" href="#__codelineno-357-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-357-22" name="__codelineno-357-22" href="#__codelineno-357-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-357-23" name="__codelineno-357-23" href="#__codelineno-357-23"></a>
<a id="__codelineno-357-24" name="__codelineno-357-24" href="#__codelineno-357-24"></a>
<a id="__codelineno-357-25" name="__codelineno-357-25" href="#__codelineno-357-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-357-26" name="__codelineno-357-26" href="#__codelineno-357-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-357-27" name="__codelineno-357-27" href="#__codelineno-357-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-357-28" name="__codelineno-357-28" href="#__codelineno-357-28"></a>
<a id="__codelineno-357-29" name="__codelineno-357-29" href="#__codelineno-357-29"></a>
<a id="__codelineno-357-30" name="__codelineno-357-30" href="#__codelineno-357-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-357-31" name="__codelineno-357-31" href="#__codelineno-357-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-357-32" name="__codelineno-357-32" href="#__codelineno-357-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-357-33" name="__codelineno-357-33" href="#__codelineno-357-33"></a><span class="p">]</span>
<a id="__codelineno-357-34" name="__codelineno-357-34" href="#__codelineno-357-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-357-35" name="__codelineno-357-35" href="#__codelineno-357-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-357-36" name="__codelineno-357-36" href="#__codelineno-357-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-357-37" name="__codelineno-357-37" href="#__codelineno-357-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-357-38" name="__codelineno-357-38" href="#__codelineno-357-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-357-39" name="__codelineno-357-39" href="#__codelineno-357-39"></a><span class="c1"># ]</span>
<a id="__codelineno-357-40" name="__codelineno-357-40" href="#__codelineno-357-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-357-41" name="__codelineno-357-41" href="#__codelineno-357-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-357-42" name="__codelineno-357-42" href="#__codelineno-357-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-357-43" name="__codelineno-357-43" href="#__codelineno-357-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-358-1" name="__codelineno-358-1" href="#__codelineno-358-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-358-2" name="__codelineno-358-2" href="#__codelineno-358-2"></a>
<a id="__codelineno-358-3" name="__codelineno-358-3" href="#__codelineno-358-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-358-4" name="__codelineno-358-4" href="#__codelineno-358-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-358-5" name="__codelineno-358-5" href="#__codelineno-358-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-358-6" name="__codelineno-358-6" href="#__codelineno-358-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-358-7" name="__codelineno-358-7" href="#__codelineno-358-7"></a>
<a id="__codelineno-358-8" name="__codelineno-358-8" href="#__codelineno-358-8"></a>
<a id="__codelineno-358-9" name="__codelineno-358-9" href="#__codelineno-358-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-358-10" name="__codelineno-358-10" href="#__codelineno-358-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-358-11" name="__codelineno-358-11" href="#__codelineno-358-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-358-12" name="__codelineno-358-12" href="#__codelineno-358-12"></a>
<a id="__codelineno-358-13" name="__codelineno-358-13" href="#__codelineno-358-13"></a>
<a id="__codelineno-358-14" name="__codelineno-358-14" href="#__codelineno-358-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-358-15" name="__codelineno-358-15" href="#__codelineno-358-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-358-16" name="__codelineno-358-16" href="#__codelineno-358-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-358-17" name="__codelineno-358-17" href="#__codelineno-358-17"></a>
<a id="__codelineno-358-18" name="__codelineno-358-18" href="#__codelineno-358-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-358-19" name="__codelineno-358-19" href="#__codelineno-358-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-358-20" name="__codelineno-358-20" href="#__codelineno-358-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-358-21" name="__codelineno-358-21" href="#__codelineno-358-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-358-22" name="__codelineno-358-22" href="#__codelineno-358-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-358-23" name="__codelineno-358-23" href="#__codelineno-358-23"></a>
<a id="__codelineno-358-24" name="__codelineno-358-24" href="#__codelineno-358-24"></a>
<a id="__codelineno-358-25" name="__codelineno-358-25" href="#__codelineno-358-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-358-26" name="__codelineno-358-26" href="#__codelineno-358-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-358-27" name="__codelineno-358-27" href="#__codelineno-358-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-358-28" name="__codelineno-358-28" href="#__codelineno-358-28"></a>
<a id="__codelineno-358-29" name="__codelineno-358-29" href="#__codelineno-358-29"></a>
<a id="__codelineno-358-30" name="__codelineno-358-30" href="#__codelineno-358-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-358-31" name="__codelineno-358-31" href="#__codelineno-358-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-358-32" name="__codelineno-358-32" href="#__codelineno-358-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-358-33" name="__codelineno-358-33" href="#__codelineno-358-33"></a><span class="p">]</span>
<a id="__codelineno-358-34" name="__codelineno-358-34" href="#__codelineno-358-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-358-35" name="__codelineno-358-35" href="#__codelineno-358-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-358-36" name="__codelineno-358-36" href="#__codelineno-358-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-358-37" name="__codelineno-358-37" href="#__codelineno-358-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-358-38" name="__codelineno-358-38" href="#__codelineno-358-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-358-39" name="__codelineno-358-39" href="#__codelineno-358-39"></a><span class="c1"># ]</span>
<a id="__codelineno-358-40" name="__codelineno-358-40" href="#__codelineno-358-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-358-41" name="__codelineno-358-41" href="#__codelineno-358-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-358-42" name="__codelineno-358-42" href="#__codelineno-358-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-358-43" name="__codelineno-358-43" href="#__codelineno-358-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-359-1" name="__codelineno-359-1" href="#__codelineno-359-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-359-2" name="__codelineno-359-2" href="#__codelineno-359-2"></a>
<a id="__codelineno-359-3" name="__codelineno-359-3" href="#__codelineno-359-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">llm</span><span class="p">,</span> <span class="n">prompt_template</span>
<a id="__codelineno-359-4" name="__codelineno-359-4" href="#__codelineno-359-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-359-5" name="__codelineno-359-5" href="#__codelineno-359-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-359-6" name="__codelineno-359-6" href="#__codelineno-359-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-359-7" name="__codelineno-359-7" href="#__codelineno-359-7"></a>
<a id="__codelineno-359-8" name="__codelineno-359-8" href="#__codelineno-359-8"></a>
<a id="__codelineno-359-9" name="__codelineno-359-9" href="#__codelineno-359-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-359-10" name="__codelineno-359-10" href="#__codelineno-359-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-359-11" name="__codelineno-359-11" href="#__codelineno-359-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-359-12" name="__codelineno-359-12" href="#__codelineno-359-12"></a>
<a id="__codelineno-359-13" name="__codelineno-359-13" href="#__codelineno-359-13"></a>
<a id="__codelineno-359-14" name="__codelineno-359-14" href="#__codelineno-359-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-359-15" name="__codelineno-359-15" href="#__codelineno-359-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-359-16" name="__codelineno-359-16" href="#__codelineno-359-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-359-17" name="__codelineno-359-17" href="#__codelineno-359-17"></a>
<a id="__codelineno-359-18" name="__codelineno-359-18" href="#__codelineno-359-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-359-19" name="__codelineno-359-19" href="#__codelineno-359-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-359-20" name="__codelineno-359-20" href="#__codelineno-359-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-359-21" name="__codelineno-359-21" href="#__codelineno-359-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-359-22" name="__codelineno-359-22" href="#__codelineno-359-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-359-23" name="__codelineno-359-23" href="#__codelineno-359-23"></a>
<a id="__codelineno-359-24" name="__codelineno-359-24" href="#__codelineno-359-24"></a>
<a id="__codelineno-359-25" name="__codelineno-359-25" href="#__codelineno-359-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-359-26" name="__codelineno-359-26" href="#__codelineno-359-26"></a><span class="nd">@prompt_template</span><span class="p">(</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{texts}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-359-27" name="__codelineno-359-27" href="#__codelineno-359-27"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span> <span class="o">...</span>
</span><a id="__codelineno-359-28" name="__codelineno-359-28" href="#__codelineno-359-28"></a>
<a id="__codelineno-359-29" name="__codelineno-359-29" href="#__codelineno-359-29"></a>
<a id="__codelineno-359-30" name="__codelineno-359-30" href="#__codelineno-359-30"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-359-31" name="__codelineno-359-31" href="#__codelineno-359-31"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-359-32" name="__codelineno-359-32" href="#__codelineno-359-32"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-359-33" name="__codelineno-359-33" href="#__codelineno-359-33"></a><span class="p">]</span>
<a id="__codelineno-359-34" name="__codelineno-359-34" href="#__codelineno-359-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-359-35" name="__codelineno-359-35" href="#__codelineno-359-35"></a><span class="c1"># Output:</span>
<a id="__codelineno-359-36" name="__codelineno-359-36" href="#__codelineno-359-36"></a><span class="c1"># texts=[</span>
<a id="__codelineno-359-37" name="__codelineno-359-37" href="#__codelineno-359-37"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-359-38" name="__codelineno-359-38" href="#__codelineno-359-38"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-359-39" name="__codelineno-359-39" href="#__codelineno-359-39"></a><span class="c1"># ]</span>
<a id="__codelineno-359-40" name="__codelineno-359-40" href="#__codelineno-359-40"></a><span class="c1"># books=[</span>
<a id="__codelineno-359-41" name="__codelineno-359-41" href="#__codelineno-359-41"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-359-42" name="__codelineno-359-42" href="#__codelineno-359-42"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-359-43" name="__codelineno-359-43" href="#__codelineno-359-43"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="46:10"><input checked="checked" id="__tabbed_46_1" name="__tabbed_46" type="radio" /><input id="__tabbed_46_2" name="__tabbed_46" type="radio" /><input id="__tabbed_46_3" name="__tabbed_46" type="radio" /><input id="__tabbed_46_4" name="__tabbed_46" type="radio" /><input id="__tabbed_46_5" name="__tabbed_46" type="radio" /><input id="__tabbed_46_6" name="__tabbed_46" type="radio" /><input id="__tabbed_46_7" name="__tabbed_46" type="radio" /><input id="__tabbed_46_8" name="__tabbed_46" type="radio" /><input id="__tabbed_46_9" name="__tabbed_46" type="radio" /><input id="__tabbed_46_10" name="__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="__tabbed_46_1">OpenAI</label><label for="__tabbed_46_2">Anthropic</label><label for="__tabbed_46_3">Google</label><label for="__tabbed_46_4">Groq</label><label for="__tabbed_46_5">xAI</label><label for="__tabbed_46_6">Mistral</label><label for="__tabbed_46_7">Cohere</label><label for="__tabbed_46_8">LiteLLM</label><label for="__tabbed_46_9">Azure AI</label><label for="__tabbed_46_10">Bedrock</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-360-1" name="__codelineno-360-1" href="#__codelineno-360-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-360-2" name="__codelineno-360-2" href="#__codelineno-360-2"></a>
<a id="__codelineno-360-3" name="__codelineno-360-3" href="#__codelineno-360-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-360-4" name="__codelineno-360-4" href="#__codelineno-360-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-360-5" name="__codelineno-360-5" href="#__codelineno-360-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-360-6" name="__codelineno-360-6" href="#__codelineno-360-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-360-7" name="__codelineno-360-7" href="#__codelineno-360-7"></a>
<a id="__codelineno-360-8" name="__codelineno-360-8" href="#__codelineno-360-8"></a>
<a id="__codelineno-360-9" name="__codelineno-360-9" href="#__codelineno-360-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-360-10" name="__codelineno-360-10" href="#__codelineno-360-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-360-11" name="__codelineno-360-11" href="#__codelineno-360-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-360-12" name="__codelineno-360-12" href="#__codelineno-360-12"></a>
<a id="__codelineno-360-13" name="__codelineno-360-13" href="#__codelineno-360-13"></a>
<a id="__codelineno-360-14" name="__codelineno-360-14" href="#__codelineno-360-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-360-15" name="__codelineno-360-15" href="#__codelineno-360-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-360-16" name="__codelineno-360-16" href="#__codelineno-360-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-360-17" name="__codelineno-360-17" href="#__codelineno-360-17"></a>
<a id="__codelineno-360-18" name="__codelineno-360-18" href="#__codelineno-360-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-360-19" name="__codelineno-360-19" href="#__codelineno-360-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-360-20" name="__codelineno-360-20" href="#__codelineno-360-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-360-21" name="__codelineno-360-21" href="#__codelineno-360-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-360-22" name="__codelineno-360-22" href="#__codelineno-360-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-360-23" name="__codelineno-360-23" href="#__codelineno-360-23"></a>
<a id="__codelineno-360-24" name="__codelineno-360-24" href="#__codelineno-360-24"></a>
<a id="__codelineno-360-25" name="__codelineno-360-25" href="#__codelineno-360-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-360-26" name="__codelineno-360-26" href="#__codelineno-360-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-360-27" name="__codelineno-360-27" href="#__codelineno-360-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-360-28" name="__codelineno-360-28" href="#__codelineno-360-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-360-29" name="__codelineno-360-29" href="#__codelineno-360-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-360-30" name="__codelineno-360-30" href="#__codelineno-360-30"></a>        <span class="p">)</span>
<a id="__codelineno-360-31" name="__codelineno-360-31" href="#__codelineno-360-31"></a>    <span class="p">]</span>
<a id="__codelineno-360-32" name="__codelineno-360-32" href="#__codelineno-360-32"></a>
<a id="__codelineno-360-33" name="__codelineno-360-33" href="#__codelineno-360-33"></a>
<a id="__codelineno-360-34" name="__codelineno-360-34" href="#__codelineno-360-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-360-35" name="__codelineno-360-35" href="#__codelineno-360-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-360-36" name="__codelineno-360-36" href="#__codelineno-360-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-360-37" name="__codelineno-360-37" href="#__codelineno-360-37"></a><span class="p">]</span>
<a id="__codelineno-360-38" name="__codelineno-360-38" href="#__codelineno-360-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-360-39" name="__codelineno-360-39" href="#__codelineno-360-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-360-40" name="__codelineno-360-40" href="#__codelineno-360-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-360-41" name="__codelineno-360-41" href="#__codelineno-360-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-360-42" name="__codelineno-360-42" href="#__codelineno-360-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-360-43" name="__codelineno-360-43" href="#__codelineno-360-43"></a><span class="c1"># ]</span>
<a id="__codelineno-360-44" name="__codelineno-360-44" href="#__codelineno-360-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-360-45" name="__codelineno-360-45" href="#__codelineno-360-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-360-46" name="__codelineno-360-46" href="#__codelineno-360-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-360-47" name="__codelineno-360-47" href="#__codelineno-360-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-361-1" name="__codelineno-361-1" href="#__codelineno-361-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-361-2" name="__codelineno-361-2" href="#__codelineno-361-2"></a>
<a id="__codelineno-361-3" name="__codelineno-361-3" href="#__codelineno-361-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-361-4" name="__codelineno-361-4" href="#__codelineno-361-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-361-5" name="__codelineno-361-5" href="#__codelineno-361-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-361-6" name="__codelineno-361-6" href="#__codelineno-361-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-361-7" name="__codelineno-361-7" href="#__codelineno-361-7"></a>
<a id="__codelineno-361-8" name="__codelineno-361-8" href="#__codelineno-361-8"></a>
<a id="__codelineno-361-9" name="__codelineno-361-9" href="#__codelineno-361-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-361-10" name="__codelineno-361-10" href="#__codelineno-361-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-361-11" name="__codelineno-361-11" href="#__codelineno-361-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-361-12" name="__codelineno-361-12" href="#__codelineno-361-12"></a>
<a id="__codelineno-361-13" name="__codelineno-361-13" href="#__codelineno-361-13"></a>
<a id="__codelineno-361-14" name="__codelineno-361-14" href="#__codelineno-361-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-361-15" name="__codelineno-361-15" href="#__codelineno-361-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-361-16" name="__codelineno-361-16" href="#__codelineno-361-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-361-17" name="__codelineno-361-17" href="#__codelineno-361-17"></a>
<a id="__codelineno-361-18" name="__codelineno-361-18" href="#__codelineno-361-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-361-19" name="__codelineno-361-19" href="#__codelineno-361-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-361-20" name="__codelineno-361-20" href="#__codelineno-361-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-361-21" name="__codelineno-361-21" href="#__codelineno-361-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-361-22" name="__codelineno-361-22" href="#__codelineno-361-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-361-23" name="__codelineno-361-23" href="#__codelineno-361-23"></a>
<a id="__codelineno-361-24" name="__codelineno-361-24" href="#__codelineno-361-24"></a>
<a id="__codelineno-361-25" name="__codelineno-361-25" href="#__codelineno-361-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-3-5-sonnet-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-361-26" name="__codelineno-361-26" href="#__codelineno-361-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-361-27" name="__codelineno-361-27" href="#__codelineno-361-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-361-28" name="__codelineno-361-28" href="#__codelineno-361-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-361-29" name="__codelineno-361-29" href="#__codelineno-361-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-361-30" name="__codelineno-361-30" href="#__codelineno-361-30"></a>        <span class="p">)</span>
<a id="__codelineno-361-31" name="__codelineno-361-31" href="#__codelineno-361-31"></a>    <span class="p">]</span>
<a id="__codelineno-361-32" name="__codelineno-361-32" href="#__codelineno-361-32"></a>
<a id="__codelineno-361-33" name="__codelineno-361-33" href="#__codelineno-361-33"></a>
<a id="__codelineno-361-34" name="__codelineno-361-34" href="#__codelineno-361-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-361-35" name="__codelineno-361-35" href="#__codelineno-361-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-361-36" name="__codelineno-361-36" href="#__codelineno-361-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-361-37" name="__codelineno-361-37" href="#__codelineno-361-37"></a><span class="p">]</span>
<a id="__codelineno-361-38" name="__codelineno-361-38" href="#__codelineno-361-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-361-39" name="__codelineno-361-39" href="#__codelineno-361-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-361-40" name="__codelineno-361-40" href="#__codelineno-361-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-361-41" name="__codelineno-361-41" href="#__codelineno-361-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-361-42" name="__codelineno-361-42" href="#__codelineno-361-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-361-43" name="__codelineno-361-43" href="#__codelineno-361-43"></a><span class="c1"># ]</span>
<a id="__codelineno-361-44" name="__codelineno-361-44" href="#__codelineno-361-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-361-45" name="__codelineno-361-45" href="#__codelineno-361-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-361-46" name="__codelineno-361-46" href="#__codelineno-361-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-361-47" name="__codelineno-361-47" href="#__codelineno-361-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-362-1" name="__codelineno-362-1" href="#__codelineno-362-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-362-2" name="__codelineno-362-2" href="#__codelineno-362-2"></a>
<a id="__codelineno-362-3" name="__codelineno-362-3" href="#__codelineno-362-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-362-4" name="__codelineno-362-4" href="#__codelineno-362-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-362-5" name="__codelineno-362-5" href="#__codelineno-362-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-362-6" name="__codelineno-362-6" href="#__codelineno-362-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-362-7" name="__codelineno-362-7" href="#__codelineno-362-7"></a>
<a id="__codelineno-362-8" name="__codelineno-362-8" href="#__codelineno-362-8"></a>
<a id="__codelineno-362-9" name="__codelineno-362-9" href="#__codelineno-362-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-362-10" name="__codelineno-362-10" href="#__codelineno-362-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-362-11" name="__codelineno-362-11" href="#__codelineno-362-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-362-12" name="__codelineno-362-12" href="#__codelineno-362-12"></a>
<a id="__codelineno-362-13" name="__codelineno-362-13" href="#__codelineno-362-13"></a>
<a id="__codelineno-362-14" name="__codelineno-362-14" href="#__codelineno-362-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-362-15" name="__codelineno-362-15" href="#__codelineno-362-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-362-16" name="__codelineno-362-16" href="#__codelineno-362-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-362-17" name="__codelineno-362-17" href="#__codelineno-362-17"></a>
<a id="__codelineno-362-18" name="__codelineno-362-18" href="#__codelineno-362-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-362-19" name="__codelineno-362-19" href="#__codelineno-362-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-362-20" name="__codelineno-362-20" href="#__codelineno-362-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-362-21" name="__codelineno-362-21" href="#__codelineno-362-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-362-22" name="__codelineno-362-22" href="#__codelineno-362-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-362-23" name="__codelineno-362-23" href="#__codelineno-362-23"></a>
<a id="__codelineno-362-24" name="__codelineno-362-24" href="#__codelineno-362-24"></a>
<a id="__codelineno-362-25" name="__codelineno-362-25" href="#__codelineno-362-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-362-26" name="__codelineno-362-26" href="#__codelineno-362-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-362-27" name="__codelineno-362-27" href="#__codelineno-362-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-362-28" name="__codelineno-362-28" href="#__codelineno-362-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-362-29" name="__codelineno-362-29" href="#__codelineno-362-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-362-30" name="__codelineno-362-30" href="#__codelineno-362-30"></a>        <span class="p">)</span>
<a id="__codelineno-362-31" name="__codelineno-362-31" href="#__codelineno-362-31"></a>    <span class="p">]</span>
<a id="__codelineno-362-32" name="__codelineno-362-32" href="#__codelineno-362-32"></a>
<a id="__codelineno-362-33" name="__codelineno-362-33" href="#__codelineno-362-33"></a>
<a id="__codelineno-362-34" name="__codelineno-362-34" href="#__codelineno-362-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-362-35" name="__codelineno-362-35" href="#__codelineno-362-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-362-36" name="__codelineno-362-36" href="#__codelineno-362-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-362-37" name="__codelineno-362-37" href="#__codelineno-362-37"></a><span class="p">]</span>
<a id="__codelineno-362-38" name="__codelineno-362-38" href="#__codelineno-362-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-362-39" name="__codelineno-362-39" href="#__codelineno-362-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-362-40" name="__codelineno-362-40" href="#__codelineno-362-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-362-41" name="__codelineno-362-41" href="#__codelineno-362-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-362-42" name="__codelineno-362-42" href="#__codelineno-362-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-362-43" name="__codelineno-362-43" href="#__codelineno-362-43"></a><span class="c1"># ]</span>
<a id="__codelineno-362-44" name="__codelineno-362-44" href="#__codelineno-362-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-362-45" name="__codelineno-362-45" href="#__codelineno-362-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-362-46" name="__codelineno-362-46" href="#__codelineno-362-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-362-47" name="__codelineno-362-47" href="#__codelineno-362-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-363-1" name="__codelineno-363-1" href="#__codelineno-363-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-363-2" name="__codelineno-363-2" href="#__codelineno-363-2"></a>
<a id="__codelineno-363-3" name="__codelineno-363-3" href="#__codelineno-363-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-363-4" name="__codelineno-363-4" href="#__codelineno-363-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-363-5" name="__codelineno-363-5" href="#__codelineno-363-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-363-6" name="__codelineno-363-6" href="#__codelineno-363-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-363-7" name="__codelineno-363-7" href="#__codelineno-363-7"></a>
<a id="__codelineno-363-8" name="__codelineno-363-8" href="#__codelineno-363-8"></a>
<a id="__codelineno-363-9" name="__codelineno-363-9" href="#__codelineno-363-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-363-10" name="__codelineno-363-10" href="#__codelineno-363-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-363-11" name="__codelineno-363-11" href="#__codelineno-363-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-363-12" name="__codelineno-363-12" href="#__codelineno-363-12"></a>
<a id="__codelineno-363-13" name="__codelineno-363-13" href="#__codelineno-363-13"></a>
<a id="__codelineno-363-14" name="__codelineno-363-14" href="#__codelineno-363-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-363-15" name="__codelineno-363-15" href="#__codelineno-363-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-363-16" name="__codelineno-363-16" href="#__codelineno-363-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-363-17" name="__codelineno-363-17" href="#__codelineno-363-17"></a>
<a id="__codelineno-363-18" name="__codelineno-363-18" href="#__codelineno-363-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-363-19" name="__codelineno-363-19" href="#__codelineno-363-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-363-20" name="__codelineno-363-20" href="#__codelineno-363-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-363-21" name="__codelineno-363-21" href="#__codelineno-363-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-363-22" name="__codelineno-363-22" href="#__codelineno-363-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-363-23" name="__codelineno-363-23" href="#__codelineno-363-23"></a>
<a id="__codelineno-363-24" name="__codelineno-363-24" href="#__codelineno-363-24"></a>
<a id="__codelineno-363-25" name="__codelineno-363-25" href="#__codelineno-363-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;groq&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;llama-3.3-70b-versatile&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-363-26" name="__codelineno-363-26" href="#__codelineno-363-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-363-27" name="__codelineno-363-27" href="#__codelineno-363-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-363-28" name="__codelineno-363-28" href="#__codelineno-363-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-363-29" name="__codelineno-363-29" href="#__codelineno-363-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-363-30" name="__codelineno-363-30" href="#__codelineno-363-30"></a>        <span class="p">)</span>
<a id="__codelineno-363-31" name="__codelineno-363-31" href="#__codelineno-363-31"></a>    <span class="p">]</span>
<a id="__codelineno-363-32" name="__codelineno-363-32" href="#__codelineno-363-32"></a>
<a id="__codelineno-363-33" name="__codelineno-363-33" href="#__codelineno-363-33"></a>
<a id="__codelineno-363-34" name="__codelineno-363-34" href="#__codelineno-363-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-363-35" name="__codelineno-363-35" href="#__codelineno-363-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-363-36" name="__codelineno-363-36" href="#__codelineno-363-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-363-37" name="__codelineno-363-37" href="#__codelineno-363-37"></a><span class="p">]</span>
<a id="__codelineno-363-38" name="__codelineno-363-38" href="#__codelineno-363-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-363-39" name="__codelineno-363-39" href="#__codelineno-363-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-363-40" name="__codelineno-363-40" href="#__codelineno-363-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-363-41" name="__codelineno-363-41" href="#__codelineno-363-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-363-42" name="__codelineno-363-42" href="#__codelineno-363-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-363-43" name="__codelineno-363-43" href="#__codelineno-363-43"></a><span class="c1"># ]</span>
<a id="__codelineno-363-44" name="__codelineno-363-44" href="#__codelineno-363-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-363-45" name="__codelineno-363-45" href="#__codelineno-363-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-363-46" name="__codelineno-363-46" href="#__codelineno-363-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-363-47" name="__codelineno-363-47" href="#__codelineno-363-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-364-1" name="__codelineno-364-1" href="#__codelineno-364-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-364-2" name="__codelineno-364-2" href="#__codelineno-364-2"></a>
<a id="__codelineno-364-3" name="__codelineno-364-3" href="#__codelineno-364-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-364-4" name="__codelineno-364-4" href="#__codelineno-364-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-364-5" name="__codelineno-364-5" href="#__codelineno-364-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-364-6" name="__codelineno-364-6" href="#__codelineno-364-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-364-7" name="__codelineno-364-7" href="#__codelineno-364-7"></a>
<a id="__codelineno-364-8" name="__codelineno-364-8" href="#__codelineno-364-8"></a>
<a id="__codelineno-364-9" name="__codelineno-364-9" href="#__codelineno-364-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-364-10" name="__codelineno-364-10" href="#__codelineno-364-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-364-11" name="__codelineno-364-11" href="#__codelineno-364-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-364-12" name="__codelineno-364-12" href="#__codelineno-364-12"></a>
<a id="__codelineno-364-13" name="__codelineno-364-13" href="#__codelineno-364-13"></a>
<a id="__codelineno-364-14" name="__codelineno-364-14" href="#__codelineno-364-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-364-15" name="__codelineno-364-15" href="#__codelineno-364-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-364-16" name="__codelineno-364-16" href="#__codelineno-364-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-364-17" name="__codelineno-364-17" href="#__codelineno-364-17"></a>
<a id="__codelineno-364-18" name="__codelineno-364-18" href="#__codelineno-364-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-364-19" name="__codelineno-364-19" href="#__codelineno-364-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-364-20" name="__codelineno-364-20" href="#__codelineno-364-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-364-21" name="__codelineno-364-21" href="#__codelineno-364-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-364-22" name="__codelineno-364-22" href="#__codelineno-364-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-364-23" name="__codelineno-364-23" href="#__codelineno-364-23"></a>
<a id="__codelineno-364-24" name="__codelineno-364-24" href="#__codelineno-364-24"></a>
<a id="__codelineno-364-25" name="__codelineno-364-25" href="#__codelineno-364-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;xai&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;grok-3&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-364-26" name="__codelineno-364-26" href="#__codelineno-364-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-364-27" name="__codelineno-364-27" href="#__codelineno-364-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-364-28" name="__codelineno-364-28" href="#__codelineno-364-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-364-29" name="__codelineno-364-29" href="#__codelineno-364-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-364-30" name="__codelineno-364-30" href="#__codelineno-364-30"></a>        <span class="p">)</span>
<a id="__codelineno-364-31" name="__codelineno-364-31" href="#__codelineno-364-31"></a>    <span class="p">]</span>
<a id="__codelineno-364-32" name="__codelineno-364-32" href="#__codelineno-364-32"></a>
<a id="__codelineno-364-33" name="__codelineno-364-33" href="#__codelineno-364-33"></a>
<a id="__codelineno-364-34" name="__codelineno-364-34" href="#__codelineno-364-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-364-35" name="__codelineno-364-35" href="#__codelineno-364-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-364-36" name="__codelineno-364-36" href="#__codelineno-364-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-364-37" name="__codelineno-364-37" href="#__codelineno-364-37"></a><span class="p">]</span>
<a id="__codelineno-364-38" name="__codelineno-364-38" href="#__codelineno-364-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-364-39" name="__codelineno-364-39" href="#__codelineno-364-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-364-40" name="__codelineno-364-40" href="#__codelineno-364-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-364-41" name="__codelineno-364-41" href="#__codelineno-364-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-364-42" name="__codelineno-364-42" href="#__codelineno-364-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-364-43" name="__codelineno-364-43" href="#__codelineno-364-43"></a><span class="c1"># ]</span>
<a id="__codelineno-364-44" name="__codelineno-364-44" href="#__codelineno-364-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-364-45" name="__codelineno-364-45" href="#__codelineno-364-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-364-46" name="__codelineno-364-46" href="#__codelineno-364-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-364-47" name="__codelineno-364-47" href="#__codelineno-364-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-365-1" name="__codelineno-365-1" href="#__codelineno-365-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-365-2" name="__codelineno-365-2" href="#__codelineno-365-2"></a>
<a id="__codelineno-365-3" name="__codelineno-365-3" href="#__codelineno-365-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-365-4" name="__codelineno-365-4" href="#__codelineno-365-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-365-5" name="__codelineno-365-5" href="#__codelineno-365-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-365-6" name="__codelineno-365-6" href="#__codelineno-365-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-365-7" name="__codelineno-365-7" href="#__codelineno-365-7"></a>
<a id="__codelineno-365-8" name="__codelineno-365-8" href="#__codelineno-365-8"></a>
<a id="__codelineno-365-9" name="__codelineno-365-9" href="#__codelineno-365-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-365-10" name="__codelineno-365-10" href="#__codelineno-365-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-365-11" name="__codelineno-365-11" href="#__codelineno-365-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-365-12" name="__codelineno-365-12" href="#__codelineno-365-12"></a>
<a id="__codelineno-365-13" name="__codelineno-365-13" href="#__codelineno-365-13"></a>
<a id="__codelineno-365-14" name="__codelineno-365-14" href="#__codelineno-365-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-365-15" name="__codelineno-365-15" href="#__codelineno-365-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-365-16" name="__codelineno-365-16" href="#__codelineno-365-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-365-17" name="__codelineno-365-17" href="#__codelineno-365-17"></a>
<a id="__codelineno-365-18" name="__codelineno-365-18" href="#__codelineno-365-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-365-19" name="__codelineno-365-19" href="#__codelineno-365-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-365-20" name="__codelineno-365-20" href="#__codelineno-365-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-365-21" name="__codelineno-365-21" href="#__codelineno-365-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-365-22" name="__codelineno-365-22" href="#__codelineno-365-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-365-23" name="__codelineno-365-23" href="#__codelineno-365-23"></a>
<a id="__codelineno-365-24" name="__codelineno-365-24" href="#__codelineno-365-24"></a>
<a id="__codelineno-365-25" name="__codelineno-365-25" href="#__codelineno-365-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;mistral&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral-large-latest&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-365-26" name="__codelineno-365-26" href="#__codelineno-365-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-365-27" name="__codelineno-365-27" href="#__codelineno-365-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-365-28" name="__codelineno-365-28" href="#__codelineno-365-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-365-29" name="__codelineno-365-29" href="#__codelineno-365-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-365-30" name="__codelineno-365-30" href="#__codelineno-365-30"></a>        <span class="p">)</span>
<a id="__codelineno-365-31" name="__codelineno-365-31" href="#__codelineno-365-31"></a>    <span class="p">]</span>
<a id="__codelineno-365-32" name="__codelineno-365-32" href="#__codelineno-365-32"></a>
<a id="__codelineno-365-33" name="__codelineno-365-33" href="#__codelineno-365-33"></a>
<a id="__codelineno-365-34" name="__codelineno-365-34" href="#__codelineno-365-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-365-35" name="__codelineno-365-35" href="#__codelineno-365-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-365-36" name="__codelineno-365-36" href="#__codelineno-365-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-365-37" name="__codelineno-365-37" href="#__codelineno-365-37"></a><span class="p">]</span>
<a id="__codelineno-365-38" name="__codelineno-365-38" href="#__codelineno-365-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-365-39" name="__codelineno-365-39" href="#__codelineno-365-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-365-40" name="__codelineno-365-40" href="#__codelineno-365-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-365-41" name="__codelineno-365-41" href="#__codelineno-365-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-365-42" name="__codelineno-365-42" href="#__codelineno-365-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-365-43" name="__codelineno-365-43" href="#__codelineno-365-43"></a><span class="c1"># ]</span>
<a id="__codelineno-365-44" name="__codelineno-365-44" href="#__codelineno-365-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-365-45" name="__codelineno-365-45" href="#__codelineno-365-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-365-46" name="__codelineno-365-46" href="#__codelineno-365-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-365-47" name="__codelineno-365-47" href="#__codelineno-365-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-366-1" name="__codelineno-366-1" href="#__codelineno-366-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-366-2" name="__codelineno-366-2" href="#__codelineno-366-2"></a>
<a id="__codelineno-366-3" name="__codelineno-366-3" href="#__codelineno-366-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-366-4" name="__codelineno-366-4" href="#__codelineno-366-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-366-5" name="__codelineno-366-5" href="#__codelineno-366-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-366-6" name="__codelineno-366-6" href="#__codelineno-366-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-366-7" name="__codelineno-366-7" href="#__codelineno-366-7"></a>
<a id="__codelineno-366-8" name="__codelineno-366-8" href="#__codelineno-366-8"></a>
<a id="__codelineno-366-9" name="__codelineno-366-9" href="#__codelineno-366-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-366-10" name="__codelineno-366-10" href="#__codelineno-366-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-366-11" name="__codelineno-366-11" href="#__codelineno-366-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-366-12" name="__codelineno-366-12" href="#__codelineno-366-12"></a>
<a id="__codelineno-366-13" name="__codelineno-366-13" href="#__codelineno-366-13"></a>
<a id="__codelineno-366-14" name="__codelineno-366-14" href="#__codelineno-366-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-366-15" name="__codelineno-366-15" href="#__codelineno-366-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-366-16" name="__codelineno-366-16" href="#__codelineno-366-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-366-17" name="__codelineno-366-17" href="#__codelineno-366-17"></a>
<a id="__codelineno-366-18" name="__codelineno-366-18" href="#__codelineno-366-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-366-19" name="__codelineno-366-19" href="#__codelineno-366-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-366-20" name="__codelineno-366-20" href="#__codelineno-366-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-366-21" name="__codelineno-366-21" href="#__codelineno-366-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-366-22" name="__codelineno-366-22" href="#__codelineno-366-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-366-23" name="__codelineno-366-23" href="#__codelineno-366-23"></a>
<a id="__codelineno-366-24" name="__codelineno-366-24" href="#__codelineno-366-24"></a>
<a id="__codelineno-366-25" name="__codelineno-366-25" href="#__codelineno-366-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;cohere&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;command-r-plus&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-366-26" name="__codelineno-366-26" href="#__codelineno-366-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-366-27" name="__codelineno-366-27" href="#__codelineno-366-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-366-28" name="__codelineno-366-28" href="#__codelineno-366-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-366-29" name="__codelineno-366-29" href="#__codelineno-366-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-366-30" name="__codelineno-366-30" href="#__codelineno-366-30"></a>        <span class="p">)</span>
<a id="__codelineno-366-31" name="__codelineno-366-31" href="#__codelineno-366-31"></a>    <span class="p">]</span>
<a id="__codelineno-366-32" name="__codelineno-366-32" href="#__codelineno-366-32"></a>
<a id="__codelineno-366-33" name="__codelineno-366-33" href="#__codelineno-366-33"></a>
<a id="__codelineno-366-34" name="__codelineno-366-34" href="#__codelineno-366-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-366-35" name="__codelineno-366-35" href="#__codelineno-366-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-366-36" name="__codelineno-366-36" href="#__codelineno-366-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-366-37" name="__codelineno-366-37" href="#__codelineno-366-37"></a><span class="p">]</span>
<a id="__codelineno-366-38" name="__codelineno-366-38" href="#__codelineno-366-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-366-39" name="__codelineno-366-39" href="#__codelineno-366-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-366-40" name="__codelineno-366-40" href="#__codelineno-366-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-366-41" name="__codelineno-366-41" href="#__codelineno-366-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-366-42" name="__codelineno-366-42" href="#__codelineno-366-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-366-43" name="__codelineno-366-43" href="#__codelineno-366-43"></a><span class="c1"># ]</span>
<a id="__codelineno-366-44" name="__codelineno-366-44" href="#__codelineno-366-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-366-45" name="__codelineno-366-45" href="#__codelineno-366-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-366-46" name="__codelineno-366-46" href="#__codelineno-366-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-366-47" name="__codelineno-366-47" href="#__codelineno-366-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-367-1" name="__codelineno-367-1" href="#__codelineno-367-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-367-2" name="__codelineno-367-2" href="#__codelineno-367-2"></a>
<a id="__codelineno-367-3" name="__codelineno-367-3" href="#__codelineno-367-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-367-4" name="__codelineno-367-4" href="#__codelineno-367-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-367-5" name="__codelineno-367-5" href="#__codelineno-367-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-367-6" name="__codelineno-367-6" href="#__codelineno-367-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-367-7" name="__codelineno-367-7" href="#__codelineno-367-7"></a>
<a id="__codelineno-367-8" name="__codelineno-367-8" href="#__codelineno-367-8"></a>
<a id="__codelineno-367-9" name="__codelineno-367-9" href="#__codelineno-367-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-367-10" name="__codelineno-367-10" href="#__codelineno-367-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-367-11" name="__codelineno-367-11" href="#__codelineno-367-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-367-12" name="__codelineno-367-12" href="#__codelineno-367-12"></a>
<a id="__codelineno-367-13" name="__codelineno-367-13" href="#__codelineno-367-13"></a>
<a id="__codelineno-367-14" name="__codelineno-367-14" href="#__codelineno-367-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-367-15" name="__codelineno-367-15" href="#__codelineno-367-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-367-16" name="__codelineno-367-16" href="#__codelineno-367-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-367-17" name="__codelineno-367-17" href="#__codelineno-367-17"></a>
<a id="__codelineno-367-18" name="__codelineno-367-18" href="#__codelineno-367-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-367-19" name="__codelineno-367-19" href="#__codelineno-367-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-367-20" name="__codelineno-367-20" href="#__codelineno-367-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-367-21" name="__codelineno-367-21" href="#__codelineno-367-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-367-22" name="__codelineno-367-22" href="#__codelineno-367-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-367-23" name="__codelineno-367-23" href="#__codelineno-367-23"></a>
<a id="__codelineno-367-24" name="__codelineno-367-24" href="#__codelineno-367-24"></a>
<a id="__codelineno-367-25" name="__codelineno-367-25" href="#__codelineno-367-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;litellm&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-367-26" name="__codelineno-367-26" href="#__codelineno-367-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-367-27" name="__codelineno-367-27" href="#__codelineno-367-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-367-28" name="__codelineno-367-28" href="#__codelineno-367-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-367-29" name="__codelineno-367-29" href="#__codelineno-367-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-367-30" name="__codelineno-367-30" href="#__codelineno-367-30"></a>        <span class="p">)</span>
<a id="__codelineno-367-31" name="__codelineno-367-31" href="#__codelineno-367-31"></a>    <span class="p">]</span>
<a id="__codelineno-367-32" name="__codelineno-367-32" href="#__codelineno-367-32"></a>
<a id="__codelineno-367-33" name="__codelineno-367-33" href="#__codelineno-367-33"></a>
<a id="__codelineno-367-34" name="__codelineno-367-34" href="#__codelineno-367-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-367-35" name="__codelineno-367-35" href="#__codelineno-367-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-367-36" name="__codelineno-367-36" href="#__codelineno-367-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-367-37" name="__codelineno-367-37" href="#__codelineno-367-37"></a><span class="p">]</span>
<a id="__codelineno-367-38" name="__codelineno-367-38" href="#__codelineno-367-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-367-39" name="__codelineno-367-39" href="#__codelineno-367-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-367-40" name="__codelineno-367-40" href="#__codelineno-367-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-367-41" name="__codelineno-367-41" href="#__codelineno-367-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-367-42" name="__codelineno-367-42" href="#__codelineno-367-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-367-43" name="__codelineno-367-43" href="#__codelineno-367-43"></a><span class="c1"># ]</span>
<a id="__codelineno-367-44" name="__codelineno-367-44" href="#__codelineno-367-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-367-45" name="__codelineno-367-45" href="#__codelineno-367-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-367-46" name="__codelineno-367-46" href="#__codelineno-367-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-367-47" name="__codelineno-367-47" href="#__codelineno-367-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-368-1" name="__codelineno-368-1" href="#__codelineno-368-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-368-2" name="__codelineno-368-2" href="#__codelineno-368-2"></a>
<a id="__codelineno-368-3" name="__codelineno-368-3" href="#__codelineno-368-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-368-4" name="__codelineno-368-4" href="#__codelineno-368-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-368-5" name="__codelineno-368-5" href="#__codelineno-368-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-368-6" name="__codelineno-368-6" href="#__codelineno-368-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-368-7" name="__codelineno-368-7" href="#__codelineno-368-7"></a>
<a id="__codelineno-368-8" name="__codelineno-368-8" href="#__codelineno-368-8"></a>
<a id="__codelineno-368-9" name="__codelineno-368-9" href="#__codelineno-368-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-368-10" name="__codelineno-368-10" href="#__codelineno-368-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-368-11" name="__codelineno-368-11" href="#__codelineno-368-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-368-12" name="__codelineno-368-12" href="#__codelineno-368-12"></a>
<a id="__codelineno-368-13" name="__codelineno-368-13" href="#__codelineno-368-13"></a>
<a id="__codelineno-368-14" name="__codelineno-368-14" href="#__codelineno-368-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-368-15" name="__codelineno-368-15" href="#__codelineno-368-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-368-16" name="__codelineno-368-16" href="#__codelineno-368-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-368-17" name="__codelineno-368-17" href="#__codelineno-368-17"></a>
<a id="__codelineno-368-18" name="__codelineno-368-18" href="#__codelineno-368-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-368-19" name="__codelineno-368-19" href="#__codelineno-368-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-368-20" name="__codelineno-368-20" href="#__codelineno-368-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-368-21" name="__codelineno-368-21" href="#__codelineno-368-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-368-22" name="__codelineno-368-22" href="#__codelineno-368-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-368-23" name="__codelineno-368-23" href="#__codelineno-368-23"></a>
<a id="__codelineno-368-24" name="__codelineno-368-24" href="#__codelineno-368-24"></a>
<a id="__codelineno-368-25" name="__codelineno-368-25" href="#__codelineno-368-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;azure&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-368-26" name="__codelineno-368-26" href="#__codelineno-368-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-368-27" name="__codelineno-368-27" href="#__codelineno-368-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-368-28" name="__codelineno-368-28" href="#__codelineno-368-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-368-29" name="__codelineno-368-29" href="#__codelineno-368-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-368-30" name="__codelineno-368-30" href="#__codelineno-368-30"></a>        <span class="p">)</span>
<a id="__codelineno-368-31" name="__codelineno-368-31" href="#__codelineno-368-31"></a>    <span class="p">]</span>
<a id="__codelineno-368-32" name="__codelineno-368-32" href="#__codelineno-368-32"></a>
<a id="__codelineno-368-33" name="__codelineno-368-33" href="#__codelineno-368-33"></a>
<a id="__codelineno-368-34" name="__codelineno-368-34" href="#__codelineno-368-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-368-35" name="__codelineno-368-35" href="#__codelineno-368-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-368-36" name="__codelineno-368-36" href="#__codelineno-368-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-368-37" name="__codelineno-368-37" href="#__codelineno-368-37"></a><span class="p">]</span>
<a id="__codelineno-368-38" name="__codelineno-368-38" href="#__codelineno-368-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-368-39" name="__codelineno-368-39" href="#__codelineno-368-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-368-40" name="__codelineno-368-40" href="#__codelineno-368-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-368-41" name="__codelineno-368-41" href="#__codelineno-368-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-368-42" name="__codelineno-368-42" href="#__codelineno-368-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-368-43" name="__codelineno-368-43" href="#__codelineno-368-43"></a><span class="c1"># ]</span>
<a id="__codelineno-368-44" name="__codelineno-368-44" href="#__codelineno-368-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-368-45" name="__codelineno-368-45" href="#__codelineno-368-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-368-46" name="__codelineno-368-46" href="#__codelineno-368-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-368-47" name="__codelineno-368-47" href="#__codelineno-368-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-369-1" name="__codelineno-369-1" href="#__codelineno-369-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>
<a id="__codelineno-369-2" name="__codelineno-369-2" href="#__codelineno-369-2"></a>
<a id="__codelineno-369-3" name="__codelineno-369-3" href="#__codelineno-369-3"></a><span class="kn">from</span> <span class="nn">mirascope</span> <span class="kn">import</span> <span class="n">BaseMessageParam</span><span class="p">,</span> <span class="n">llm</span>
<a id="__codelineno-369-4" name="__codelineno-369-4" href="#__codelineno-369-4"></a><span class="kn">from</span> <span class="nn">mirascope.core</span> <span class="kn">import</span> <span class="n">FromCallArgs</span>
<a id="__codelineno-369-5" name="__codelineno-369-5" href="#__codelineno-369-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>
<a id="__codelineno-369-6" name="__codelineno-369-6" href="#__codelineno-369-6"></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span>
<a id="__codelineno-369-7" name="__codelineno-369-7" href="#__codelineno-369-7"></a>
<a id="__codelineno-369-8" name="__codelineno-369-8" href="#__codelineno-369-8"></a>
<a id="__codelineno-369-9" name="__codelineno-369-9" href="#__codelineno-369-9"></a><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-369-10" name="__codelineno-369-10" href="#__codelineno-369-10"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-369-11" name="__codelineno-369-11" href="#__codelineno-369-11"></a>    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-369-12" name="__codelineno-369-12" href="#__codelineno-369-12"></a>
<a id="__codelineno-369-13" name="__codelineno-369-13" href="#__codelineno-369-13"></a>
<a id="__codelineno-369-14" name="__codelineno-369-14" href="#__codelineno-369-14"></a><span class="k">class</span> <span class="nc">Books</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-369-15" name="__codelineno-369-15" href="#__codelineno-369-15"></a><span class="hll">    <span class="n">texts</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">FromCallArgs</span><span class="p">()]</span>
</span><a id="__codelineno-369-16" name="__codelineno-369-16" href="#__codelineno-369-16"></a>    <span class="n">books</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Book</span><span class="p">]</span>
<a id="__codelineno-369-17" name="__codelineno-369-17" href="#__codelineno-369-17"></a>
<a id="__codelineno-369-18" name="__codelineno-369-18" href="#__codelineno-369-18"></a>    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<a id="__codelineno-369-19" name="__codelineno-369-19" href="#__codelineno-369-19"></a>    <span class="k">def</span> <span class="nf">validate_output_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-369-20" name="__codelineno-369-20" href="#__codelineno-369-20"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">):</span>
<a id="__codelineno-369-21" name="__codelineno-369-21" href="#__codelineno-369-21"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length mismatch...&quot;</span><span class="p">)</span>
<a id="__codelineno-369-22" name="__codelineno-369-22" href="#__codelineno-369-22"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-369-23" name="__codelineno-369-23" href="#__codelineno-369-23"></a>
<a id="__codelineno-369-24" name="__codelineno-369-24" href="#__codelineno-369-24"></a>
<a id="__codelineno-369-25" name="__codelineno-369-25" href="#__codelineno-369-25"></a><span class="nd">@llm</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&quot;bedrock&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;amazon.nova-lite-v1:0&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Books</span><span class="p">)</span>
<a id="__codelineno-369-26" name="__codelineno-369-26" href="#__codelineno-369-26"></a><span class="hll"><span class="k">def</span> <span class="nf">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseMessageParam</span><span class="p">]:</span>
</span><a id="__codelineno-369-27" name="__codelineno-369-27" href="#__codelineno-369-27"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-369-28" name="__codelineno-369-28" href="#__codelineno-369-28"></a>        <span class="n">BaseMessageParam</span><span class="p">(</span>
<a id="__codelineno-369-29" name="__codelineno-369-29" href="#__codelineno-369-29"></a>            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Extract the books from these texts: </span><span class="si">{</span><span class="n">texts</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-369-30" name="__codelineno-369-30" href="#__codelineno-369-30"></a>        <span class="p">)</span>
<a id="__codelineno-369-31" name="__codelineno-369-31" href="#__codelineno-369-31"></a>    <span class="p">]</span>
<a id="__codelineno-369-32" name="__codelineno-369-32" href="#__codelineno-369-32"></a>
<a id="__codelineno-369-33" name="__codelineno-369-33" href="#__codelineno-369-33"></a>
<a id="__codelineno-369-34" name="__codelineno-369-34" href="#__codelineno-369-34"></a><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-369-35" name="__codelineno-369-35" href="#__codelineno-369-35"></a>    <span class="s2">&quot;The Name of the Wind by Patrick Rothfuss&quot;</span><span class="p">,</span>
<a id="__codelineno-369-36" name="__codelineno-369-36" href="#__codelineno-369-36"></a>    <span class="s2">&quot;Mistborn: The Final Empire by Brandon Sanderson&quot;</span><span class="p">,</span>
<a id="__codelineno-369-37" name="__codelineno-369-37" href="#__codelineno-369-37"></a><span class="p">]</span>
<a id="__codelineno-369-38" name="__codelineno-369-38" href="#__codelineno-369-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">extract_books</span><span class="p">(</span><span class="n">texts</span><span class="p">))</span>
<a id="__codelineno-369-39" name="__codelineno-369-39" href="#__codelineno-369-39"></a><span class="c1"># Output:</span>
<a id="__codelineno-369-40" name="__codelineno-369-40" href="#__codelineno-369-40"></a><span class="c1"># texts=[</span>
<a id="__codelineno-369-41" name="__codelineno-369-41" href="#__codelineno-369-41"></a><span class="c1">#     &#39;The Name of the Wind by Patrick Rothfuss&#39;,</span>
<a id="__codelineno-369-42" name="__codelineno-369-42" href="#__codelineno-369-42"></a><span class="c1">#     &#39;Mistborn: The Final Empire by Brandon Sanderson&#39;</span>
<a id="__codelineno-369-43" name="__codelineno-369-43" href="#__codelineno-369-43"></a><span class="c1"># ]</span>
<a id="__codelineno-369-44" name="__codelineno-369-44" href="#__codelineno-369-44"></a><span class="c1"># books=[</span>
<a id="__codelineno-369-45" name="__codelineno-369-45" href="#__codelineno-369-45"></a><span class="c1">#     Book(title=&#39;The Name of the Wind&#39;, author=&#39;Patrick Rothfuss&#39;),</span>
<a id="__codelineno-369-46" name="__codelineno-369-46" href="#__codelineno-369-46"></a><span class="c1">#     Book(title=&#39;Mistborn: The Final Empire&#39;, author=&#39;Brandon Sanderson&#39;)</span>
<a id="__codelineno-369-47" name="__codelineno-369-47" href="#__codelineno-369-47"></a><span class="c1"># ]</span>
</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>By following these best practices and leveraging Response Models effectively, you can create more robust, type-safe, and maintainable LLM-powered applications with Mirascope.</p>
<p>Next, we recommend taking a lookg at one of:</p>
<ul>
<li><a href="../json_mode/">JSON Mode</a> to see an alternate way to generate structured outputs where using Pydantic to validate outputs is optional.</li>
<li><a href="../evals/">Evals</a> to see how to use <code>response_model</code> to evaluate your prompts.</li>
</ul>







  
  



  




                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../chaining/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Chaining">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Chaining
              </div>
            </div>
          </a>
        
        
          
          <a href="../json_mode/" class="md-footer__link md-footer__link--next" aria-label="Next: JSON Mode">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                JSON Mode
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Mirascope, Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Mirascope" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/WilliamBakst" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/wbakst/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "content.code.link", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.sections", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.471ce7a9.min.js"></script>
      
    
  </body>
</html>