"""The `StructuredAgent` module for creating agents with structured responses."""

from collections.abc import Sequence
from dataclasses import dataclass

from typing_extensions import TypeVar

from ..content import UserContent
from ..responses import Response
from ..streams import (
    AsyncStructuredStream,
    StructuredStream,
)
from .base_structured_agent import (
    BaseStructuredAgent,
)

DepsT = TypeVar("DepsT", default=None)
T = TypeVar("T", bound=object | None, default=None)


@dataclass
class StructuredAgent(BaseStructuredAgent[DepsT, T]):
    """Structured agent class for generating structured responses using LLMs with tools."""

    def __call__(
        self, query: UserContent | Sequence[UserContent], *, deps: DepsT = None
    ) -> Response[T]:
        """Generates a structured response by running the agent loop."""
        raise NotImplementedError()

    async def run_async(
        self, query: UserContent | Sequence[UserContent], *, deps: DepsT = None
    ) -> Response[T]:
        """Generates a structured response by running the agent loop asynchronously."""
        raise NotImplementedError()

    def stream(
        self, query: UserContent | Sequence[UserContent], *, deps: DepsT = None
    ) -> StructuredStream[T]:
        """Streams the structured response generated by running the agent loop."""
        raise NotImplementedError()

    async def stream_async(
        self, query: UserContent | Sequence[UserContent], *, deps: DepsT = None
    ) -> AsyncStructuredStream[T]:
        """Streams the structured response generated by running the agent loop asynchronously."""
        raise NotImplementedError()
