interactions:
- request:
    body: '{"contents": [{"parts": [{"text": "Please recommend the most popular book
      by Patrick Rothfuss"}], "role": "user"}], "systemInstruction": {"parts": [{"text":
      "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in Book format for a final response.\nA
      book with a rating. The title should be in all caps!", "name": "__mirascope_formatted_output_tool__",
      "parameters": {"properties": {"title": {"title": "Title", "type": "STRING"},
      "author": {"description": "The author of a book.", "properties": {"first_name":
      {"title": "First Name", "type": "STRING"}, "last_name": {"title": "Last Name",
      "type": "STRING"}}, "required": ["first_name", "last_name"], "title": "Author",
      "type": "OBJECT"}, "rating": {"description": "For testing purposes, the rating
      should be 7", "title": "Rating", "type": "INTEGER"}}, "required": ["title",
      "author", "rating"], "type": "OBJECT"}}]}], "toolConfig": {"functionCallingConfig":
      {"mode": "ANY", "allowedFunctionNames": ["__mirascope_formatted_output_tool__"]}},
      "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1174'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"__mirascope_formatted_output_tool__\",\"args\": {\"author\":
        {\"last_name\": \"Rothfuss\",\"first_name\": \"Patrick\"},\"rating\": 7,\"title\":
        \"THE NAME OF THE WIND\"}},\"thoughtSignature\": \"CiQB0e2Kb/6nhq89IPYXPJpTjStnREpBcdCwkNx37n0ILs+POy0KeQHR7YpvEHmW7XNAIOwzNpK9t3elL0AzeLl9+IeQvhZI1USDxsRjwYmg8TVmUa8bV7ow3YA5DAflaOQHBklpInkagWT6UEHxQVQpaCHgjW/UMSbycrd5j+hJ3vXzszOeaXYltNN+GnuhTVdTBRCcIqRigJJNkjiRQ7kKyQEB0e2Kb541OF6Ojzrim2yHyzKl+rhFrJzpDjIW3CJz+zwKKOYntdGbDhWwxP3Tstk/9cLrcB7N38xKwiAxdP9Jv1bIfnkFSxwRbMSfvPaxBS2XB8Pkm2Q8OLYxTIBkyu3XtMgYhsli2+HID94mvudyErnXnlRv3T52y9z1NJk675ytoBtXbLW7H3zTjwrd5cQ7tyWIi+06f4ue9KlKqOiRWHfgJkYWnUwKza3RcU+7BesSBtkV8LKei0+3nuwUlKgH6EO5zZx9dNwK5QEB0e2Kb5e8D0tfc98sUXuQpRl48KzbATUHrBGd2pVAxJLHn+kNG54EdYLd9g8IB+tN/i3ZvhVw4RwEwYqXCPT5FSRskLF4k+Xw92hDwTQp8GjLyXuOXCLDbZczBY1FXZLyBxd2PaREFondWUaFvxjbXp2lj+Eiwp0Oou74/pp3PpsNF8LeRsxKjs5mivnHZvm25GRCazR7m8xbtRVm9vucGlm6LdyNNSFISOEPJA8fViT01VR2z/aTKg/JK98tKJn9lBgwVH1NJrYib2BYr2O99NtB80Nwpvo9o2qjETnt/dAKqE53CsMBAdHtim/vbdVZUdMgJ0KJpUHeSzzj0r5UilamFIDhzix1/rcleGOtXhrz//K5sbwx2HcBw+/ZisLC2W7KsA5apZffC7RlmwLa2ni59qDP3NapUmH4oulwNOHh4PbOQvfQJvr33reh2YodLOqePl5cTC/IWE9C5jp5QHli6iqWietXceohmHQ4rtn1CJ/7xLTxr+ItPP/lvBzeKiCnpQwA1leVq8JoIWJANSkw+j6VSDaTIOfPvbkNblGax1nVKQtG5T7lCn4B0e2KbwF4Fn3VfdXEtep/dzrMWiEFgTSA6ppySraRNrd79+H1RwkWLIrbYnZbE8J3/Blzut/or0FJ8y0VVjbz59mZpmhQpsVejvQoba7aOTiPdFSTSpUSO65/A5DtyfaM7hNWgM5Xz9BLg74mmWJFHUGq6P+BKfg/EDJIUXI=\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\":
        217,\"candidatesTokenCount\": 49,\"totalTokenCount\": 461,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 217}],\"thoughtsTokenCount\": 195},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"_mPUaNmbHOfRz7IPp6Lx-Qw\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Wed, 24 Sep 2025 21:34:55 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=2053
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
