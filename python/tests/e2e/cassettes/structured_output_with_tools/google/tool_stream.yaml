interactions:
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parametersJsonSchema":
      {"properties": {"title": {"title": "Title", "type": "string"}, "author": {"title":
      "Author", "type": "string"}, "pages": {"title": "Pages", "type": "integer"},
      "publication_year": {"title": "Publication Year", "type": "integer"}}, "required":
      ["title", "author", "pages", "publication_year"], "title": "BookSummary", "type":
      "object"}}, {"description": "Look up book information by ISBN.", "name": "get_book_info",
      "parameters": {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}},
      "required": ["isbn"], "type": "OBJECT"}}]}], "toolConfig": {"functionCallingConfig":
      {"mode": "ANY"}}, "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1147'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"get_book_info\",\"args\": {\"isbn\": \"0-7653-1178-X\"}},\"thoughtSignature\":
        \"CiQB0e2KbwKDxo4oNUyXvBm/wGfAlBXhDr0fo9tlmJx4+BMsFGYKfwHR7YpvEhEbPYvZGuPm03Yh/KO8N0dZhdhpl3u92gTfQi6nDIE+Am1Be6ygp0wfAfRYCdUkG6zvD022BX8RQS6IEtqZftk5vXIMoIfb0GhpKhJvTdygY+0qlMO0ep2XY+q6EEBP8dN1VeE1EdLqBuWQMpXN56D4C+ihL9o7oyUK2gEB0e2Kb5Npfiqwya4t4Sy3YQWadg0dSn1UKqIM0SaXwIAu5y62PS7xN4meXhlgTs3u9ZXk5KQVuxFz15mwzJ98diHdVqUktS060w+NyNlNAZmXTmkNQLS6ku4IJ9NSY6S12kpbhcaUXiC0ZpDgf7VhDP1GN2QIPjqiQfuZWLPVXrf4hoWLv9NLbc9FQ72oqn/T6GH7We0yYLoI22pG+MC7oJO9IbiPxVRvawQ+Ip/nxe8qkPkBKGJGF6KchI2oEo3QAKz+yE/vEmAWmIDmiVxjWTfssM8K8/kcwQryAQHR7YpvflCHUKDnaSGw904dDAPDEKaHQvuCG2/cVDBHG80vnXIci25M2bYf2VCXj3dtqiSwmZjS5+4SA7E5IZT1O2qx8jjejIg5Wyqw9db1QeI0mlXiLYuEY0NwfSNp86sTRDZz4j8s9EUd7YGw4JBh90X1p+QTb6eSr3t/Sw1Ni99yKfXrPUxMUCE7E1iRzgLT3lOegf2CgA1xcEFhKlvALmNFw1YnnU0aBSqcg9veIvtuN4c3D22EdmbuPifIwouA8iYzfXx7F0/AXE3GVQY0e1tQV2cdYsfTIZrCj78wARQ6v2843wZxWuqJfWgVDjdSCqwBAdHtim/hN0jZ00MSmmqjnNaX0vuxVGECjvFomw6CmRtwGCQ6e6y5zvjrRKsCo/ydSe32FSrln74FDeKq9BXLBR9uIdxXOlZeGnwZgLuXe5d++UfkXyALg50M9y76usuf34IncoZpSXzcdLW+sZkSbtkaxvBJaQ+43DmXXHO7IKLJ07AnXaoh1Ud+ZG97NHW1pmCJjnb3NfGweGPbN59JMU11ZD6Qwi0L6cuOkQoiAdHtim/r/w1zhtKIOCeo1O6fxp+mipIrqQzGwTdYCj8v5w==\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\":
        189,\"candidatesTokenCount\": 29,\"totalTokenCount\": 386,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 189}],\"thoughtsTokenCount\": 168},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"kfHSaNKiBrXUz7IP08ah6Qg\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Tue, 23 Sep 2025 19:14:26 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=1511
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}, {"parts":
      [{"functionCall": {"args": {"isbn": "0-7653-1178-X"}, "name": "get_book_info"}}],
      "role": "model"}, {"parts": [{"functionResponse": {"name": "get_book_info",
      "response": {"output": "Title: Mistborn: The Final Empire, Author: Brandon Sanderson,
      Pages: 544, Published: 2006-07-25"}}}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parametersJsonSchema":
      {"properties": {"title": {"title": "Title", "type": "string"}, "author": {"title":
      "Author", "type": "string"}, "pages": {"title": "Pages", "type": "integer"},
      "publication_year": {"title": "Publication Year", "type": "integer"}}, "required":
      ["title", "author", "pages", "publication_year"], "title": "BookSummary", "type":
      "object"}}, {"description": "Look up book information by ISBN.", "name": "get_book_info",
      "parameters": {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}},
      "required": ["isbn"], "type": "OBJECT"}}]}], "toolConfig": {"functionCallingConfig":
      {"mode": "ANY"}}, "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1458'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"__mirascope_formatted_output_tool__\",\"args\": {\"pages\": 544,\"author\":
        \"Brandon Sanderson\",\"title\": \"Mistborn: The Final Empire\",\"publication_year\":
        2006}},\"thoughtSignature\": \"CiQB0e2Kb2JoPfNfR0XOBOYfhPKNfusdCz+susZ3r2fHtooWCRsKgwEB0e2Kb7wgtr/hOvmrBAQYwy5QhjweBSUf+2cGXmbLrPAlTrsujGYTKDjmGkbRBn9K4ouk7I0iYenOHkAXSmooS5iwntM0W95MVVS6yE3Mc2Obh1XK5rGfJgH6+utJvDSwmTIIG/l3jg1Ngm8TWDFchAy53LxXzr/aQYtd9F6dr7097grVAQHR7YpvD3rI414aYbdvIZIxnyMmrduIQXwoxSumPh5AD6GkldPtaEKk8wk9kXiM6eWVwGmwSK81AXz/ai9l8vGZU+71AzZHe2wFemFYPp4AojV5RirpVMAf80wtRAaP13vp+BCKKr+WjaZMc1VT9pGjP1z0MMzjtss5R4DoESEyrN7eA/ilMDOPmJ0m62emQRJj3nYpUTaR5PcHBEmd9yVi9KHFbd/VU3uORQdYmVayZeeqzZyEhEKMT2hqo7goEUfzGUq34uNQOcJbcIibcHNDpTSnswqUAgHR7Ypv68IctO0XdYuRLFjYNCKVY6iL7IuOxIq9PB96ZBIstjHTbHBKNyrmtfold1dMgdPVJCoXqEdFuV0GM+MF+yytwwGuWER+b2BhFfkWle9TVfyx1ktT/m6DKCks5HJYdrlz7pmeDuvsV6PQrNqY841OwijFhOtTK8R1A/GCif1dsRQt87PooBB+KFv+iu1KjCYaHrgm2hgiQLPmLedltlXqf6/r3S3nkjEFXesajgMZCWGwAOnSCBXzHo60gI7ybjejDNXuu6SNe4XCSgJymr7B5sjnbMWyfMki5vwCLviVBDld9ID156tSww9F2c7sp2pViUJzdJlFS5tBm18KHigytM+kKIAasDfbHD2MAAnUKwqGAgHR7YpvHPh5zVbll79SJy4XtLsfnQWMU0pApEkYQ3Qut9UesVAhr+4UoWrVYw5d4HYgjoz5rctZrMwiAVXg8pGmpt8wFVIkmbZtX1BTIYxiA8ttHUbCBBu+1xb0KX+ucI8NBq/zq2zwCAaOMP1cNAw5/H3Ani6JseePgzA/AdgmtMWofwZMSSkAR26r336ciqL6Lx0ltFkLTblBBHFFdHQWrAc/v9LzMSfhrQ0HQrLmObWw0Atw2R2dab2M/vmL2PRTs7l/0CBTTSBmHBoUg+V4yn/GzaYM4dLa7pjdejAFYujWodHQTZaj9ABcckwKq9VBxPgh27RUJcNx73znDJG1dYM0cmoKJwHR7YpvzUSDkO60sIGE+N3GVomE0FjVbj+RT427J3DLzKtTlMuv3g==\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\":
        268,\"candidatesTokenCount\": 49,\"totalTokenCount\": 490,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 268}],\"thoughtsTokenCount\": 173},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"kvHSaLPFLt2Cz7IPqZjZwAo\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Tue, 23 Sep 2025 19:14:28 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=2099
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
