interactions:
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parameters":
      {"properties": {"title": {"title": "Title", "type": "STRING"}, "author": {"title":
      "Author", "type": "STRING"}, "pages": {"title": "Pages", "type": "INTEGER"},
      "publication_year": {"title": "Publication Year", "type": "INTEGER"}}, "required":
      ["title", "author", "pages", "publication_year"], "type": "OBJECT"}}, {"description":
      "Look up book information by ISBN.", "name": "get_book_info", "parameters":
      {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}}, "required": ["isbn"],
      "type": "OBJECT"}}]}], "toolConfig": {"functionCallingConfig": {"mode": "ANY"}},
      "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1113'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"get_book_info\",\"args\": {\"isbn\": \"0-7653-1178-X\"}},\"thoughtSignature\":
        \"CiQB0e2Kb3QQYcLjVzHGoFudR1iVLCUfcK3lDUBeoM4XQjTjYdEKeQHR7YpvGulLK5UQARhyOnuV0Menspn4KbJ4gtbGt1VLgrRyBstVEcGHiB3yMDto0SoN4Jrvnr+7rKszJWtGQo9U7SH9PYRcCBw1B8XrSO/HOlsfx1eK9BC/44LN3kJXnQmqEvhvc/sElYnrd+dJT8LGkuszcmVQExIK6gEB0e2Kb+ZIaBk7Zq/WerVmgaZ1OoFuiBKShiw38/Vd7REv3lrKZDHfwXDa9n9TrKEINYkHGM0wxiiahrNofZvWLqddd6nA4g//Rpu2iUgxuPDAPP4/Nd3uGKK38NjJguXv+OMExzT6YA8AJGyegAGorNOkPcLOc0CxfoVYGIidXAPZ8a/H9ttv9AnXPrkSFF5stG7oXXop5EPZcrrsxBk6LupLkpvE1fS3hoZgv343AYt9uEqB+j69A1oH1ndQKKLoRQipUSgdq6D6pzZ59OEIdmYjTWoCd+y8ajQix2yJWFMXbznxMKa3TNAKiAIB0e2Kb/f/fEPvAO0CwzYGIhdh7IE89DLAIxEzyTPB/eU2QlShtRyBx8T9/leKu0BfCAmmE4cff2xualQD2RVxdsNNY203xxNTNbWdEart8Sodp0oZsa5QJszdl3B9WGyvVLnUDCQc9wHpQGFC/L721CTXkgtyx0mWpJdEUm6cGJe9AE6/Hyo2ks5VHP/ckkPxnqVRTdKrjNY8iANS7BSdf4StLh3mK9udFGYCtHlUnh3gDal2WWHPL9zveN7cl71Q66/2xuJrCT9RmYljC83FpTWMJyWV+Mr2nr7rJhT7uCQ3srQSfjOWdTTDbXnmS6HNTnmHjNLudXi4PN/Y4GInPliAd0kPtAgKMwHR7Ypvv36AAnk63puFcL0OxpAtsQ+gqUhqvpM80J+tjjZ9LoI75k6ayoAUeyaaG7Gd/A==\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\":
        189,\"candidatesTokenCount\": 29,\"totalTokenCount\": 338,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 189}],\"thoughtsTokenCount\": 120},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"lGHUaMefDrD7qtsPqNKy2AY\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Wed, 24 Sep 2025 21:24:37 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=1157
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}, {"parts":
      [{"functionCall": {"args": {"isbn": "0-7653-1178-X"}, "name": "get_book_info"}}],
      "role": "model"}, {"parts": [{"functionResponse": {"name": "get_book_info",
      "response": {"output": "Title: Mistborn: The Final Empire, Author: Brandon Sanderson,
      Pages: 544, Published: 2006-07-25"}}}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parameters":
      {"properties": {"title": {"title": "Title", "type": "STRING"}, "author": {"title":
      "Author", "type": "STRING"}, "pages": {"title": "Pages", "type": "INTEGER"},
      "publication_year": {"title": "Publication Year", "type": "INTEGER"}}, "required":
      ["title", "author", "pages", "publication_year"], "type": "OBJECT"}}, {"description":
      "Look up book information by ISBN.", "name": "get_book_info", "parameters":
      {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}}, "required": ["isbn"],
      "type": "OBJECT"}}]}], "toolConfig": {"functionCallingConfig": {"mode": "ANY"}},
      "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1424'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.31.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"__mirascope_formatted_output_tool__\",\"args\": {\"publication_year\":
        2006,\"author\": \"Brandon Sanderson\",\"pages\": 544,\"title\": \"Mistborn:
        The Final Empire\"}},\"thoughtSignature\": \"CiQB0e2Kb6QklIPGPiWemixoI19eIGIjxQHBokRZ+JdpCcQAQpQKcgHR7Ypv7Xd/ok7bYJgmsuO3YoSOBXO0R4sRWD//xnv3k1RE4nDf4T8aKNc1lkaTYN0ZNlZxvfQ5jtz+b16As798XD3aY6DkPc1noqjTO0TTIKH3NCoe3LXeQHZuWCJyuG9+QmbyGn/ieEmMTOdCpOXwuwrdAQHR7Ypv6jdSUw+zWxS8+zFjDS7WuY69uZkLe9K/EOP5URZ8dQ5jK+BKn3RV7Xm93bSCBKjlIg4+8aE1fLiR0Dkoyr0C2kqKCKw1Wzk84M9CRYNtmYVJhjZWOw9df9uy8ZSa1hlBUGliMwGUyv846yeht7nzlvQbbM+JbvKvfZvBhjnE0uQ09RUJVHENKuYFRYYPhku9sx6nC1XeWpZZO/RnxLIuRDk5LnsuNRdYHxkEX/DQtAiyhkxHsVJt0wjNoLoXmQqbaruJrprXLqeen36KFk4h4m1lbEq/xo5HCrUBAdHtim+g4JBkD65UToMmkSf3eidN/EjeFOUrUAAAjtbJ1/rQePj37zZ0+y4OBHkUhqmt0ZuUBiAndKI1wPk1yBePMWJdks1Zr0GZ5B9LLjgA3TRsRb2wZNZaw3yahx+5Bvg0hjxuREU6SOGc3PZR3rs+mVW1+1h72uxTbX90w8+SpbmJXPpsuZcsUZ5xDcZuZ1Yo9WOmJVN2pe3Pr1s0I1GovbGEZvzP69AUNJb/RmP7HFstxgrMAQHR7YpvvKWHv+1Tc32GjIXZgv/xcBXRRzFZR2VFhtxLyF4NfbjjsXnuvcOKS7FFz/JQ09Uz41zuXN3v5J9xjc8LsQ6fY6InkbVxZ1c3aniI7QCaQDZmwLSOBs5LlLpXCbfsfWna4+b7rEn4potGfus5yue5tRxiK+f4bnQgo5sOKbKz1DvDYwe39hVwf12eYVn6PgH4elni0ADBQPfuqPvKH53lceeryICdPCNJl+L1w49ykZxYYicbwr863KpoZor2qVcLPAaJxBvAYQqQAQHR7Ypv4cFVPCOmWXIkrPdBuHyAwaoyTuByuQ9iDlLw/lgP7hP2Kpwk94eAgJvb43Anb5boak1nZh4/20OX5F1uqqpWrvYO6htrCWNYuvdeVIqWTCgFOR0y316kxtQV2F4BbgNppJ7XWahnzgPVcso6LZtS3dPvZfLYDEokfD9fThlY6CbUHPcXhA5Z6Es9fQqNAgHR7Ypvon24REQm4UyX3dqO4t8umdlNqtj3bv7ZrmxPmnVVI8tLqhbgtN+RJZ2WyaSVvYMvum3U14w60/a2PLY6HPvO7r/9MMuISdPE35pbyRaG5r38V9AbFMf0XBOCXuy9SXmaqWwFu1cde9L0xtWaoJnaGkBhAUNMlPHkjCDi6zb4rt/fCVBWASq103lTA6YZIDPDdR3XIRiglr4SDsral+c5d9eP2ZE/j3a7GAVbQ2WUeGPD4HVpsBBQdXvjDNxVUcpiFaZPjGkQlfPigYOAa5G6Z9BE0DSGqsI/JqCBXY9sYRFDN8A3X3MH77BDwXcKGSNmvhKLE/JaYZRGeG9DA2PuK5vpcmRahZAbCmMB0e2Kb97As5/5A0pOfdFCQb6Or0tlDq8Kov6ACPnRdZD87pRlICJr11QI4o8Fy73DML3gv4BAUuve8jZd0frBzadm9rVFpAJNdnWmO3jABfOXOGTzofesb2kly5dyWcMCrr0=\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\":
        268,\"candidatesTokenCount\": 49,\"totalTokenCount\": 594,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 268}],\"thoughtsTokenCount\": 277},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"lWHUaK2BGoSlmtkPpN6P8QI\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Wed, 24 Sep 2025 21:24:39 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=2297
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
