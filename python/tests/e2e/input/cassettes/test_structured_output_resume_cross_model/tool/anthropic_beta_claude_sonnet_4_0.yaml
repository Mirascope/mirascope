interactions:
- request:
    body: '{"contents": [{"parts": [{"text": "Choose a lucky number between 1 and
      10"}], "role": "user"}], "systemInstruction": {"parts": [{"text": "Always respond
      to the user''s query using the __mirascope_formatted_output_tool__ tool for
      structured output."}], "role": "user"}, "tools": [{"functionDeclarations": [{"description":
      "Use this tool to extract data in int format for a final response.", "name":
      "__mirascope_formatted_output_tool__", "parameters": {"properties": {"output":
      {"title": "Output", "type": "INTEGER"}}, "required": ["output"], "type": "OBJECT"}}]}],
      "toolConfig": {"functionCallingConfig": {"allowedFunctionNames": ["__mirascope_formatted_output_tool__"],
      "mode": "ANY"}}, "generationConfig": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '710'
      Content-Type:
      - application/json
      Host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.60.0 gl-python/3.12.12
      x-goog-api-client:
      - google-genai-sdk/1.60.0 gl-python/3.12.12
      x-goog-api-key:
      - <filtered>
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent
  response:
    body:
      string: !!binary |
        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
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=UTF-8
      Date:
      - Mon, 09 Feb 2026 22:10:02 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=1603
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens":16000,"messages":[{"role":"user","content":"Choose a lucky
      number between 1 and 10"},{"role":"assistant","content":"{\"output\": 7}"},{"role":"user","content":[{"type":"text","text":"Ok,
      now choose a different lucky number","cache_control":{"type":"ephemeral"}}]}],"model":"claude-sonnet-4-0","system":[{"type":"text","text":"Always
      respond to the user''s query using the __mirascope_formatted_output_tool__ tool
      for structured output.","cache_control":{"type":"ephemeral"}}],"tool_choice":{"type":"tool","name":"__mirascope_formatted_output_tool__","disable_parallel_tool_use":true},"tools":[{"name":"__mirascope_formatted_output_tool__","description":"Use
      this tool to extract data in int format for a final response.","input_schema":{"properties":{"output":{"title":"Output","type":"integer"}},"required":["output"],"additionalProperties":false,"type":"object"},"strict":false,"cache_control":{"type":"ephemeral"}}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '932'
      Content-Type:
      - application/json
      Host:
      - api.anthropic.com
      User-Agent:
      - Anthropic/Python 0.76.0
      X-Api-Key:
      - <filtered>
      X-Stainless-Arch:
      - arm64
      X-Stainless-Async:
      - 'false'
      X-Stainless-Helper:
      - beta.messages.parse
      X-Stainless-Lang:
      - python
      X-Stainless-OS:
      - MacOS
      X-Stainless-Package-Version:
      - 0.76.0
      X-Stainless-Runtime:
      - CPython
      X-Stainless-Runtime-Version:
      - 3.12.12
      anthropic-beta:
      - structured-outputs-2025-11-13
      anthropic-version:
      - '2023-06-01'
      x-stainless-read-timeout:
      - '600'
      x-stainless-retry-count:
      - '0'
      x-stainless-timeout:
      - '600'
    method: POST
    uri: https://api.anthropic.com/v1/messages?beta=true
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAA/3WR3U4CMRCF36XXS7KwS9S9VTAB440JUYyZlHaWbey2a3+ISPbdnS4Bg8a7znyn
        Z3o6B9ZaiZpVTGgeJY68NQbDqBxN8sk0n45LljElibd+C/n4/maBfL5efC6eNmK1nD8/FvX1LWnC
        vsOkQu/5FqnhrE4N7r3ygZtALWFNQDpVr4eTPlirIXo8TUl1pDl3K7O+Usum9nL/ItYPxezLyBmp
        DG/TPYBWOe6F7RBq61oeAkqwMXQxwGAKydJQyaoDOwJWFX3/ljEfbAcOOWW9fMIAPH5ENIKmmKh1
        xuIQiEwGNzJ/R+NZVRY5JeKiQRDkFZQ1cKk4c8LyP3a6mwZg12CLjmuYtn/1P3Tc/KZ9xs7Zj61J
        SXHQ7ZRACAodBU1rkNzJ4WNqdCkkbNESMjYA33Gl+Ya21vffZ1CJRRcCAAA=
    headers:
      CF-RAY:
      - 9cb6b1cdfcfae574-SEA
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 09 Feb 2026 22:10:03 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      anthropic-organization-id:
      - 217a607f-ed5e-40af-8a7d-f83ed52d59d6
      anthropic-ratelimit-input-tokens-limit:
      - '2000000'
      anthropic-ratelimit-input-tokens-remaining:
      - '2000000'
      anthropic-ratelimit-input-tokens-reset:
      - '2026-02-09T22:10:03Z'
      anthropic-ratelimit-output-tokens-limit:
      - '400000'
      anthropic-ratelimit-output-tokens-remaining:
      - '400000'
      anthropic-ratelimit-output-tokens-reset:
      - '2026-02-09T22:10:03Z'
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3999'
      anthropic-ratelimit-requests-reset:
      - '2026-02-09T22:10:02Z'
      anthropic-ratelimit-tokens-limit:
      - '2400000'
      anthropic-ratelimit-tokens-remaining:
      - '2400000'
      anthropic-ratelimit-tokens-reset:
      - '2026-02-09T22:10:03Z'
      cf-cache-status:
      - DYNAMIC
      request-id:
      - req_011CXyG2T6V9u93B5J9sS1ZW
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      x-envoy-upstream-service-time:
      - '976'
    status:
      code: 200
      message: OK
version: 1
