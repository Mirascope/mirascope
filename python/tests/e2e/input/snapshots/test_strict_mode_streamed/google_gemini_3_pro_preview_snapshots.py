from inline_snapshot import snapshot

from mirascope.llm import (
    AssistantMessage,
    Text,
    UserMessage,
)

test_snapshot = snapshot(
    {
        "response": {
            "provider_id": "google",
            "provider_model_name": "gemini-3-pro-preview",
            "model_id": "google/gemini-3-pro-preview",
            "finish_reason": None,
            "messages": [
                UserMessage(
                    content=[Text(text="Answer this question: What is 2 + 2?")]
                ),
                AssistantMessage(
                    content=[
                        Text(
                            text="""\
{
"integer_a": 2,
"integer_b": 2,
"answer": 4
}\
"""
                        )
                    ],
                    provider_id="google",
                    model_id="google/gemini-3-pro-preview",
                    provider_model_name="gemini-3-pro-preview",
                    raw_message={
                        "parts": [
                            {
                                "function_call": None,
                                "code_execution_result": None,
                                "executable_code": None,
                                "file_data": None,
                                "function_response": None,
                                "inline_data": None,
                                "text": """\
{
"integer_a": 2,
"integer_b": 2,
"answer": 4
}\
""",
                                "thought": None,
                                "thought_signature": None,
                                "video_metadata": None,
                            },
                            {
                                "function_call": None,
                                "code_execution_result": None,
                                "executable_code": None,
                                "file_data": None,
                                "function_response": None,
                                "inline_data": None,
                                "text": "",
                                "thought": None,
                                "thought_signature": b"\x12\xe6\x08\n\xe3\x08\x01r\xc8\xda|$w\xef'x\x04\xe5{\xb6g*\x8f6\x86D1\x13\xad\x8b\xcd#\x1e\xd5\xc7\x96\xaceat\xcbTE\xc6U\xf0\x97\x8e\x87\x15,[\x8b\xb3\xf0\x8b\xd188,\xc1\xfaFg\xe4\xe4=\xf6\xb1\x90\x81lT\xe3\x88d\xa2\x19\x96x\xf2\x9d\xe1\xd5\x10.u\xf8\x19\x88?\xee\xd9Q\xb3\x05\xf6\x08e\x88<\xa6\xf7\x13\x03\xd69r>\x88{8^\xb4u#\x95\xa8U1\x9d\xbf0\x00\xddW\x8b@G\xcb\xab5\x88\x1f*\xd12@\xdc\xa3\xea\x02W\xba\xf5\xda\xc0\xc5\xe4\x8eZX\x98\n\x958Y'\xcb\xe6\x9c\xd8\xd6\x0bbV\xa6\r\x94\x8e\xdf\xd5\"9\xe0\xce\x055\x06\xa0K\x14\x1b\x9aj\xc0\x01mUlf\r\xe7\xe9\x0b\x8b\xdd\xc9\x94\x81K\xc7\x85\xb7z\x10\xdc|\xd3\xe2n\xd3\xe7\xe8e\xcc\xfe\xb5p\xb8It\xe7\x8d\xc8\xef\x14\x11\xa9I\xaeM\x15\xebD\xfd\x12\x93\xf7mH\x01B\xb88\x1d\xcc\xdb\x0f\n+\xc7(\x19ap_\xb1\xd2\xd4b\x1blh'\xa1\xe9\xf3'\x105S)j\xd0\xc07\xe9\t\xb4\xe7\x92:\xbbf$x\xcf\xc6\xa9p\xf8\x92\x7f;\xab\xd96\x84\xc4\x7f\xad\x10zm\xc4\x88T+\xb3\xe3\xe09d\xcb&\x91\xc0\x0b\xb4\x8e\xd3W\xe2\xdb\xe7.\xbf\xaaIy\x90d\xd5\x13f\x81\x05\\\x19\xde>\xa8\xf2$.|\x8a\xa9\xa2Pp\x0c6g\n\xa7\x82r\x8c\x12\xcb0i?\xe9\x129t\x85\xad\xa7\x16W\xf7j\xf5\xc8+\x0c\xd5J\x10\x95\xe0P\xb9\x89\xeb\xe0\xd3L\xf35a\xae\x9c9`\xa6\\iXoq\xa9\xd6\xf2\xc0\xfe\x81\x99\x07\x93\xce\xe6\xb0t\xe2\x92n1\x03\x0c\x8d\x05x\xf1\xcc\xba\x080\x90O@k\xe18\x84\xa6q\x8a}\x81_\n\x95\x89\xd4\xe6\x04\xe5\xfa\xa4\xc5\x13\xad\x0c\xfe\xaa\x9b\x90\\\nd\xa8\xdfi\xff-\x9e\xa7\x104\x9ar3?\xf8B}B\x89FY\x0f\xb4H\xfd\"@G\xcb\xcc\xbe!(\r\x95\xc9F\xc3\x97\x04X\x90+\xe2#/c\xd7\xd1\x13\xdbX\x03(\xc0\xf5u\xc4\xffY\xd4\x99\x02\x08\x87\xcb\x89 g\xc5\xa1=+\x15F\x9ar\xd6\x0ev\x1e\xe0\xae\x9e\xd6\xea\x1e)\x1e\x06\xe0\x82#\x0b\x17\xfc\xf7C\x8f]\x02\x89\xa9\r\x00\xe0|M\x9d\xf3n\xc6\xfa\x8d?\x03\xd0\xac\xcd\xe9C:\x8f0P\xfa)\xb8\xbd!sY\xfd =r7\xab\xd4`\x86J\xa9+\xf8A\xba\xda\xda\x88r\xeb\xa62\xe7\xaf\xba$\x17lPG^\xea&E\xa3\xef\xf9\xcc\xbeE\xa2a\xbe\xac\x82\xc8\xff\x07\xbe6\xf9\xae6\x8c\xaf\xc4(\x96\x7f&\xfaZ_\xa6~\x1b\x99\xde\xc2\x1e\xcc\xa1\x05\x1d\xee\x17\xc3\xb9\xdf\xa0\xd6\x05\x11\xbc\x9c\xe0\xd4\xee8X\xe8\xa6\xfd\xc3\x14-\xb7\xf1@rfp\xf9\x90\x10\xb0\xc4\xaf\xf6\x98G\xcd\x9c#\x90\x96c<\xe2<\x06\x1b\x1d\x985t\x98(\xb1\x0e\xae\xf9)\xb0C\xb5\xd6\xa3\xe0+\x0bB\xdf\x9a\x02't\xc2\xc0\x04+\xd3\xc1,\xa6\xdf\xee\xaf\xb4f\xbb{\x97|f\xde\xf3\xd3\xb6r\xfenJ\x17T2\xf6\xcf\x18\xc7v]\xe0\xb5\xa9x\xfd\xb4<^y\xe1\xc4\x06I\x81\xdd9v\x82\xe7/\x10\xa5\x86[\xb6\xc2N\xb5\x1d\x82f\xb9R\xdf\xd2\xfd\xe5\xfcvc\x1fN\xd3\xc9X\x90\xa2\x11\x92\x01*\xbb\x1d[\xb3\xb6\xa1\xa2*\xc2\x8fV\xc3\xfc\xb5]\x00>\xe6\x1c\xee;^\r9\xf6\xe4\x96^\xb9\xdf\x19\xef\x17(@\xa8\xa3\xc5\x19\xadU\xadJ\xea\xfae\xb4\x196\xe0\x88\xdb\xd2\xcc\x86\xc1<\xf4q\r2\xaaI]\xd4\"R\x83k\xf9\x92a\xb8\xc3\xbf\x1a\x19xI\x12\xa2\xb0{\xdcW{\x13\xae\xe1\xae\x16T?4l\xe7\x0b\xd2f\xc8\n\xdd?t)~0\xf7T{y\nB\xf9\xcc\x81rw,C\x8c\xcc\xf31\x89F\xbd{\x01\xef\xac6\xea\x9c#FP\xd8\xee\xe5\xb6\xb3\xf9\xe2\x04y\xb9\xe7\x92'\x11?\x9aG\x1c\x03z\x90!\x11\x11\x17CG\xc8v\xc6v\x1b\x03d}\xf6\xfb\xc3\xdc\x8dP\x15\xc2\xcb\x95\x97\x98V\x01\xa3X\x11\x1cC}o\x90\xc3\xfe\xe3\xb6DTxx\xa1#>\xcc\xbd\xdc\xcb5C!\x89%\xc6\x1f\xa0\x1f\x0f\xd6\xb7\x18\xda\x93a\t\xd1\xa8Hy\x92'\xd0\x18\xcc\xe8\xfbz\x98x\xc1i\x89\x86mub\xbf\x9d\xdfkH\x06\xa7\xdf\xc8\xe1\x08f\r\xc9/zb{\xb7\xa27$\x9e\x86\xcd\"\xd4r\xda\xf5\xcd\xa96X?\xd1\x1f\xa2\xf6\xeb\x92\x97\x16\xebf\xec@U\xbb>\xc9\xac\x0f",
                                "video_metadata": None,
                            },
                        ],
                        "role": "model",
                    },
                ),
            ],
            "format": {
                "name": "IntegerAdditionResponse",
                "description": "A simple response for testing.",
                "schema": {
                    "description": "A simple response for testing.",
                    "properties": {
                        "integer_a": {"title": "Integer A", "type": "integer"},
                        "integer_b": {"title": "Integer B", "type": "integer"},
                        "answer": {"title": "Answer", "type": "integer"},
                    },
                    "required": ["integer_a", "integer_b", "answer"],
                    "title": "IntegerAdditionResponse",
                    "type": "object",
                },
                "mode": "strict",
                "formatting_instructions": None,
            },
            "tools": [],
            "usage": {
                "input_tokens": 13,
                "output_tokens": 27,
                "cache_read_tokens": 0,
                "cache_write_tokens": 0,
                "reasoning_tokens": 284,
                "raw": "None",
                "total_tokens": 40,
            },
            "n_chunks": 3,
        }
    }
)
