interactions:
- request:
    body: '{"messages": [{"role": "user", "content": [{"text": "Please recommend the
      most popular book by Patrick Rothfuss"}]}], "inferenceConfig": {"maxTokens":
      4096}, "system": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "toolConfig": {"tools": [{"toolSpec": {"name":
      "__mirascope_formatted_output_tool__", "description": "Use this tool to extract
      data in Book format for a final response.\nA book with a rating. The title should
      be in all caps!", "inputSchema": {"json": {"properties": {"title": {"title":
      "Title", "type": "string"}, "author": {"$ref": "#/$defs/Author"}, "rating":
      {"description": "For testing purposes, the rating should be 7", "title": "Rating",
      "type": "integer"}}, "required": ["title", "author", "rating"], "additionalProperties":
      false, "$defs": {"Author": {"description": "The author of a book.", "properties":
      {"first_name": {"title": "First Name", "type": "string"}, "last_name": {"title":
      "Last Name", "type": "string"}}, "required": ["first_name", "last_name"], "title":
      "Author", "type": "object"}}, "type": "object"}}}}], "toolChoice": {"tool":
      {"name": "__mirascope_formatted_output_tool__"}}}}'
    headers:
      Authorization:
      - <filtered>
      Content-Length:
      - '1197'
      Content-Type:
      - !!binary |
        YXBwbGljYXRpb24vanNvbg==
      User-Agent:
      - !!binary |
        Qm90bzMvMS40Mi4zMiBtZC9Cb3RvY29yZSMxLjQyLjMyIHVhLzIuMSBvcy9tYWNvcyMyNC4xLjAg
        bWQvYXJjaCNhcm02NCBsYW5nL3B5dGhvbiMzLjEzLjMgbWQvcHlpbXBsI0NQeXRob24gbS9ELFos
        YixuIGNmZy9yZXRyeS1tb2RlI2xlZ2FjeSBCb3RvY29yZS8xLjQyLjMy
      X-Amz-Date:
      - !!binary |
        MjAyNjAxMjZUMTI1NDM2Wg==
      amz-sdk-invocation-id:
      - !!binary |
        NzQwOGY2OTQtMzI1MS00ZmQ4LWE4YTAtYmVhOWZkM2MzOThh
      amz-sdk-request:
      - !!binary |
        YXR0ZW1wdD0x
    method: POST
    uri: https://bedrock-runtime.us-east-1.amazonaws.com/model/amazon.nova-micro-v1%3A0/converse-stream
  response:
    body:
      string: !!binary |
        AAAAsAAAAFLwgOelCzpldmVudC10eXBlBwAMbWVzc2FnZVN0YXJ0DTpjb250ZW50LXR5cGUHABBh
        cHBsaWNhdGlvbi9qc29uDTptZXNzYWdlLXR5cGUHAAVldmVudHsicCI6ImFiY2RlZmdoaWprbG1u
        b3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWSIsInJvbGUiOiJhc3Npc3RhbnQi
        fdpnxiUAAAELAAAAVyyh+YoLOmV2ZW50LXR5cGUHABFjb250ZW50QmxvY2tTdGFydA06Y29udGVu
        dC10eXBlBwAQYXBwbGljYXRpb24vanNvbg06bWVzc2FnZS10eXBlBwAFZXZlbnR7ImNvbnRlbnRC
        bG9ja0luZGV4IjowLCJwIjoiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4Iiwic3RhcnQiOnsidG9v
        bFVzZSI6eyJuYW1lIjoibWlyYXNjb3BlX2Zvcm1hdHRlZF9vdXRwdXRfdG9vbF9fIiwidG9vbFVz
        ZUlkIjoidG9vbHVzZV9IUWtaS19ENFJIYWtqb3hwLXhsaWlRIn19fTQhvg4AAAFDAAAAV0Qi6gIL
        OmV2ZW50LXR5cGUHABFjb250ZW50QmxvY2tEZWx0YQ06Y29udGVudC10eXBlBwAQYXBwbGljYXRp
        b24vanNvbg06bWVzc2FnZS10eXBlBwAFZXZlbnR7ImNvbnRlbnRCbG9ja0luZGV4IjowLCJkZWx0
        YSI6eyJ0b29sVXNlIjp7ImlucHV0Ijoie1wiYXV0aG9yXCI6e1wiZmlyc3RfbmFtZVwiOlwiUGF0
        cmlja1wiLFwibGFzdF9uYW1lXCI6XCJSb3RoZnVzc1wifSxcInJhdGluZ1wiOjcsXCJ0aXRsZVwi
        OlwiVEhFIE5BTUUgT0YgVEhFIFdJTkRcIn0ifX0sInAiOiJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2
        d3h5ekFCQ0RFRkdISUpLTE1OTyJ9pTh2pgAAALoAAABWvV07HQs6ZXZlbnQtdHlwZQcAEGNvbnRl
        bnRCbG9ja1N0b3ANOmNvbnRlbnQtdHlwZQcAEGFwcGxpY2F0aW9uL2pzb24NOm1lc3NhZ2UtdHlw
        ZQcABWV2ZW50eyJjb250ZW50QmxvY2tJbmRleCI6MCwicCI6ImFiY2RlZmdoaWprbG1ub3BxcnN0
        dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMSJ9kRtZkQAAAKAAAABRCWkhnQs6ZXZl
        bnQtdHlwZQcAC21lc3NhZ2VTdG9wDTpjb250ZW50LXR5cGUHABBhcHBsaWNhdGlvbi9qc29uDTpt
        ZXNzYWdlLXR5cGUHAAVldmVudHsicCI6ImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREUi
        LCJzdG9wUmVhc29uIjoidG9vbF91c2UifWXkfW8AAADzAAAATvvSmXMLOmV2ZW50LXR5cGUHAAht
        ZXRhZGF0YQ06Y29udGVudC10eXBlBwAQYXBwbGljYXRpb24vanNvbg06bWVzc2FnZS10eXBlBwAF
        ZXZlbnR7Im1ldHJpY3MiOnsibGF0ZW5jeU1zIjozOTh9LCJwIjoiYWJjZGVmZ2hpamtsbW5vcHFy
        c3R1dnd4eXpBQiIsInVzYWdlIjp7ImlucHV0VG9rZW5zIjo2MjMsIm91dHB1dFRva2VucyI6Mzcs
        InNlcnZlclRvb2xVc2FnZSI6e30sInRvdGFsVG9rZW5zIjo2NjB9fU9dBk8=
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/vnd.amazon.eventstream
      Date:
      - Mon, 26 Jan 2026 12:54:37 GMT
      Transfer-Encoding:
      - chunked
      x-amzn-RequestId:
      - d50f15be-56b8-4a34-bb87-e6f081e47679
    status:
      code: 200
      message: OK
version: 1
