interactions:
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parameters":
      {"properties": {"title": {"title": "Title", "type": "STRING"}, "author": {"title":
      "Author", "type": "STRING"}, "pages": {"title": "Pages", "type": "INTEGER"},
      "publication_year": {"title": "Publication Year", "type": "INTEGER"}}, "required":
      ["title", "author", "pages", "publication_year"], "type": "OBJECT"}}, {"description":
      "Look up book information by ISBN.", "name": "get_book_info", "parameters":
      {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}}, "required": ["isbn"],
      "type": "OBJECT"}}]}], "toolConfig": {"function_calling_config": {"mode": "ANY"}},
      "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '1115'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.48.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.48.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"get_book_info\",\"args\": {\"isbn\": \"0-7653-1178-X\"}},\"thoughtSignature\":
        \"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\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0,\"finishMessage\": \"Model
        generated function call(s).\"}],\"usageMetadata\": {\"promptTokenCount\":
        189,\"candidatesTokenCount\": 29,\"totalTokenCount\": 556,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 189}],\"thoughtsTokenCount\": 338},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"MnUKaZ6YHfPoz7IPuY-C4Qw\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Tue, 04 Nov 2025 21:50:44 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=2498
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
- request:
    body: '{"contents": [{"parts": [{"text": "Please look up the book with ISBN 0-7653-1178-X
      and provide detailed info and a recommendation score"}], "role": "user"}, {"parts":
      [{"functionCall": {"args": {"isbn": "0-7653-1178-X"}, "name": "get_book_info"},
      "thoughtSignature": "CiQB0e2Kb-Ep6wJurTfCi1Ey3VsfBqgDOWRVYQ-50CqBbmcODY0KgAEB0e2Kb6es3tEju0zo8h9zhT6bBOd_uZBwFdeeAXslc-NHGTF3EtGaqp0jCnq1GWyBgrb7hIjxQj8jN8qJ1ta0v1ryK7Ia9tuNavQ9iX1t4JpIUlNvBgRLvRsS7YCFNjikf2CAoYvjJq_QpUWdwCFlaYNaAGYYYfgpDCFSk233dgqWAgHR7YpvuiKt77SLJ55cKKf-LgpolXM8DaUO7XhwYG9GPN_JSnJRQnPugdbEUH4Fxo9PwS7K_xGtHpUpqJNbjuEFgBYchkvx7lyT9yiAAyhqJTL5BSIhltLbKIJAXDjN_xuKYwa-5otcUmPUVG7ZQxPlaTB2kvB_DOOEHiIxyofXXzItHtLrwftxzPdi4P7rESsB4GGoLrH96pw-0AGwGUfxsd9s50688f9g5TAH2mGTYxfcKy8ktvle4FZ2NtRSjWfG9ZFyqwmNDutNuw276_9k1zPBAHWbMNb_CcFqlzltGLhvTk5EmZFyIP3CQvaHvHWbDTe2Q7gZYDsBsM2j2g7RJJx1wjQYQDGo90wiXQWDU8-35DE-Cr4BAdHtim_YW2vgQjFuD8WqQhfS40UQ42J32weSVXk-5zC6HmjB_yNVY2Hof73ZaPlCViW71LP9v0ZOl1HiO6kq1q6bC-QVz-lfsgpgKZCiafIQ3AVGO-IK6hjxgY2S25Pm7rOEigULR6rfZU0J7m6KDMZFeURIUcnfnL4-sSN8g3Ulhp1nrljQPwz16jrDgUJvZh5PUv1cvqHkUSDufsvWbcMsmsJR_Qp3eYEv0YXcV3zWeN9jbQmUWRfygfTZbQrbAQHR7YpvFum_mhT7oBQNL2lfYFd93ZFEkPs4aQmOvudiZ44S6wg0q9mVq_1TTsfH8fkW3o3qvOaTO5SNdgD4kYV0rnTCr6U0THbcQfZqbcWPyMIgaVVrIYNSzvyZ3CaTSAIAICyANQXL2vcs-cEPrCdAtkZORy73lNgXgFt9xrkpZsonpht4ljGYOhGikVRvReNk23tnN5AIfKijn237-1UxSLi9cppk6U5rlRDCaU-Aie1EtGlo976Uo_d5RdusDsvqJBBk6_OqH66jGKl0w_rJP2vN8efGzqGJRgrRAQHR7YpvuFU4VYVFNU-9eigTLtODDs6lxifA8VJvL6zmUfPTCRFPtP5LqyMpnesDxpHnz0mElzU6jp7XCLam8AAnhlB606KXbjlOSjSdmIo-m023knBS6ejw068Alt3MMGu3vhUCLVd1_jShkc7gYHjKzyP67tsgeyhR9oe_cOFqXTAwrrWIK26jvyOk2QD8P_Rr44Eaz8Vpoqxv908VfYH-wpFVsJ5_-_6dPHA41CRfzy_-xKDqjD-8EOQ2fQIKxqk8nqeDqN7fFroOkCenr96kCqcBAdHtim_rG-bSVc_2FXmFX32QJUYvttG2jMbSeK9bOB3K4cPyAULlW9evPgQ7sjQVBreDmwas_Eidve0bBgCk86n9HyPBVGrgI9Vc_Ak9v_locBGhCTiElAu-BUgTjc58ZzlMIJHO3XWfmk_teyu5E18nwU6fQiRmTORO9zgNooSIiYL-A2Ycuz_r36_r1ArRlPmmyeNj1WaQu4qp_ksh1pwQb2STkAUK7gEB0e2KbwG0KQC7WLvQj48XufpTINFAXtPFK_vV8EsgkwpOZa0S7BFqmA5G-f3uVWxqDwKBOgHUhyJPXXHw9d7N8kkvqDrkZql5FeI6910zQPpuKOwOOcXhVAgeM4MrtCn_k7iYyjuZlN6AuwI0z6SyhYOOtiSBpFfmF1eUtwESkOfmS5mQnA8GdB-u7_d7fdn8M8IT77u8IVZy7mmRFspP2irc8B9M0ie_1ifKFQ3A8-tRH8Ke_ot-NFYgmcznmS0z9PtUrTh1Bvi1PwXDA-QEM_EJjakgLALvssCFDQzdHPOR2M4VoadM1ad5ckwTCmoB0e2KbwynNzZA73c83oe4BDhBCJLOBRVYSVmM3_ySI7UbSxFa2434ZEMBA7acG4n8gKfgmKtXL4Qw0QbbXQDcTQGB5M6fQnAaTcMVhm9NMFQGhnWFIJ37UpjUf8eSQn43sLRlwvBXJpfO"}],
      "role": "model"}, {"parts": [{"functionResponse": {"name": "get_book_info",
      "response": {"output": "Title: Mistborn: The Final Empire, Author: Brandon Sanderson,
      Pages: 544, Published: 2006-07-25"}}}], "role": "user"}], "systemInstruction":
      {"parts": [{"text": "Always respond to the user''s query using the __mirascope_formatted_output_tool__
      tool for structured output."}], "role": "user"}, "tools": [{"functionDeclarations":
      [{"description": "Use this tool to extract data in BookSummary format for a
      final response.", "name": "__mirascope_formatted_output_tool__", "parameters":
      {"properties": {"title": {"title": "Title", "type": "STRING"}, "author": {"title":
      "Author", "type": "STRING"}, "pages": {"title": "Pages", "type": "INTEGER"},
      "publication_year": {"title": "Publication Year", "type": "INTEGER"}}, "required":
      ["title", "author", "pages", "publication_year"], "type": "OBJECT"}}, {"description":
      "Look up book information by ISBN.", "name": "get_book_info", "parameters":
      {"properties": {"isbn": {"title": "Isbn", "type": "STRING"}}, "required": ["isbn"],
      "type": "OBJECT"}}]}], "toolConfig": {"function_calling_config": {"mode": "ANY"}},
      "generationConfig": {}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '3578'
      content-type:
      - application/json
      host:
      - generativelanguage.googleapis.com
      user-agent:
      - google-genai-sdk/1.48.0 gl-python/3.10.16
      x-goog-api-client:
      - google-genai-sdk/1.48.0 gl-python/3.10.16
    method: POST
    uri: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
  response:
    body:
      string: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\":
        {\"name\": \"__mirascope_formatted_output_tool__\",\"args\": {\"publication_year\":
        2006,\"author\": \"Brandon Sanderson\",\"pages\": 544,\"title\": \"Mistborn:
        The Final Empire\"}},\"thoughtSignature\": \"CiQB0e2Kb+YhcPcgaefVi6CV/CtbHbGQys5f+P+ujnv8EGXAnHIKfwHR7Ypvzr9pKNxznhAMohCeesL3PGmBDGnNwK7nX5DOBICmb6y/I9Aju8FwyRFn+19BFflU5vSMuUEOENmNy3u2VgYk89nfRlFihhSPfEF3ceTCKJvivcZN0nn8XQiXbgutEp9PuNZPW/OtaSflyms6NZoA3F73qwX4lLD4QBgKuQEB0e2Kbx3YHuhWSxi4vZax5vz2Ykn022H+WuUc0hJQLehsO3R2NiBSXu69YPTy6t2k+i4ZMMG/r/LpKVGA2TmW+JH7J/9RNKJbA4TYUty4EpczSwkuO8LfnI+KobBQLktJpzCCUfav+6l9izqLfm5u8A/wk/cr3pRwTC32Fw7UBe1DArTmCdUfujIAjGrLzXEY4H4GsYS/XU04ywXaZDf3hg+O0DBhT0DNkIqdfIuR1vUmzziA+yC8lQqsAQHR7Ypv22eO2XSj8cQ+QCR1j4iVEYxYYNEsXd2EQj2HkMtYHBxKf0GehlrchBPVovyLOI5tvVD5coIry6oVpC7Q6UBK7MnJa2Cev3UrJueWyT1Czt8mpJ/k79XJ+AxfsNXidGggu14NPiRsxFDrO4UPSkpha0jOIRlX1LnfVeaV+KjCIFrSRnmHmJweBEPRbANHPV62lFKqR5kCOQBg7WW9M3j7aw+4wa/mahsK8AEB0e2Kb3v3b0nM7Ux49qG+50LlwabJi3EggBzvCPaPu8J6McRVCGT68/RVnNbyMVTd0QCaQlTH+sPMEtNCdb2UbuI+b//Vm4LhTb8aUwPuCDdN8i9q6fNmC9hX9f1hKV5ifnWfY5U2wgkFLQqbe/YKyJWUV0+zDqUJSZGlMSGonGgYwUimg42t8uPHPUmlj25rDI0rFuLzFjMzYW5lp3qfQb+Y+leQHIOX6ZdBnemfnchWEetOQQHV3dyxS4h2Eeem2YnYp/mfb5t3YuULmRXsBUbIXOthU12AhPJozytMVX4TwfCu5RT1kOzo61u7/vEKqgEB0e2Kb27ygW3La7yO0fL49E8Yaj3I94Pk7wfSB99n2DxYdS0Sq6p0OYr70sR3wdYCSaPLwldWTmAuNpUQmmn0r9sXQjD98lIi7iUO3nC37m1lBheF6frrNVWczZ+FyWceRjY0Qal5SB+sTNsQhH0nVNMAeFeZYKyzu5qXM0X8EWqYm6u3WgFqyl/UTihnSqaTcT638Iox5oaPPcv2ihPOSmW0xYd3Lc46sQpxAdHtim9H2ihVQhdpFCjxsy3JINv3LTE1MtkjjaI5t+qJzl0FapuXCIckn0IgWQcPdxTWqpUK+VaEc+e8beXx3dK6qvI8e8ek3UqJu+tAZ3AIMcVgjfWOULQXRi+71qbX58f7op2A1jlRwWSImxGWkRo=\"}],\"role\":
        \"model\"},\"finishReason\": \"STOP\",\"index\": 0,\"finishMessage\": \"Model
        generated function call(s).\"}],\"usageMetadata\": {\"promptTokenCount\":
        604,\"candidatesTokenCount\": 49,\"totalTokenCount\": 895,\"promptTokensDetails\":
        [{\"modality\": \"TEXT\",\"tokenCount\": 604}],\"thoughtsTokenCount\": 242},\"modelVersion\":
        \"gemini-2.5-flash\",\"responseId\": \"NXUKaYTyAqmCz7IPpP6k8AY\"}\r\n\r\n"
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Disposition:
      - attachment
      Content-Type:
      - text/event-stream
      Date:
      - Tue, 04 Nov 2025 21:50:47 GMT
      Server:
      - scaffolding on HTTPServer2
      Server-Timing:
      - gfet4t7; dur=2504
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
