from inline_snapshot import snapshot

from mirascope.llm import (
    AssistantMessage,
    SystemMessage,
    Text,
    ToolCall,
    ToolOutput,
    UserMessage,
)

sync_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "params": {},
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b'\n\x91\x07\x01\xd1\xed\x8aoH\xc7\xbf\xae\x04 \xa0\x9eV\x9b\xbc\xda\x90Q\x91\x08\xda\x87(f\x95\x04\xa3K\x86\xf5\x15\x1a^\xf3\xab\xb8\xf5\xa2\xacO\x11c\x96\x98\xf0\xdb\xfe\'\xeeB9"F\xa5\x9c\x86<\x94\xc5;\xc7\x1a\xdbj\xdeI\xe6\xb9kG\xd5\xb6\xebp\xca\xdf\x9co\xde\xac%w\x80\xc2\xfc\x01\xd2\xe9\xaa&\xa2f\xfc\x1d_\x14G\xd2\xeb<\xb37bu\xacA\xf9\xb0%\xd9\x15m\xdbM\x83V\xa5\xe2\x80\x9al\xbes\x0c_D\x9b\x95\x90F\xaa\xc1\x92\x99 \xc9`\x9f\xdb\x01\x89\x9c4\xff\x9ck\xef\xe50\xcfZ\xd6`\xfa\xc459\xfd\x0bO\xa6\xf7\xd3\xf7\x9a\xb7\xf8\xe1\x97o}5\x9b\xfb\x81\xf4\x1cw\xe1$\x9a\xa7n1\x05\xfe\xf4\xb4\xc0\x1e*\x97\x8e\xe1\x15\x14\x9917\xba\x01_\x8d\x06;\x90\xb4\x99\xfd;4\x87\xd5V\x8a\xbc\x1dl\xf0\x90OA\xd0\xdamI\xd3\xe2\xaa\xe5\xd8V\xaa\xf6\xae\x08N\x93\x02\x0e5]\xa7t\xcc\x0f\xfc\xb5a\xd3j\xcd\xd8!\xfer\xc4lv\xab%+Tg>\xcc\xca\xf3t\xd9\xbf\x93\xd2\xa9\xd3\xea\xf7w\x82\xa5h\xe8\x10\xbcy\x8f\x8d\x0fi\xe0ydx\x9d\xa2\x86\xae?y\x95<W?@):\x90^M\xe2o\xbb\x1c\x81I\xb6\x84\x7fg\xe2\xa5v\xf9\xb2\x10\xd0\xc8x\x10X\xb2\xc9`*=k\x16@\x9e\x80\xeeC{\xaf\x82\t\xb41\xdf\xdfM\xe8\x0fb)\xe8\xd8\x8b1G\xcar\xdf\x03\x90K\xaa\n\xcbv\xb5)\x19\x06\xd6\xa70\xb8\xfcC\xbf\x9c\x9dr\xe2\xccP\x0eTe\x15L\x8d",7\x074\xab\xe7\xa7:\xb9\x13\x8d\x9c\x92\x07\xb7\xc1\xe3\x01\x97\xcdh\x13\x1b\xe5\x14h]\xa0\x86\xcb\x9e\x93\x8b_\t\r\xb1|Q\xf48\x9az\x94\xdf\xfc\xa2\x9c\xf0\xc8\xd97%\x13\xfc|x\x99V\x1b\xd7 Xs\xf1\x8e{\x94\xe6\xd3\x12\x88D\xf7\xea\xabwN\xcd\xce\xc9%U\x01\xcb\xdbS\xac\x8e\x80\x93\xaew\x0f\t\xfb\xb5\xf3\t\x11\xad;)u\x15x\xe6V\xcb\x88?\x95\x85\xbb\x7f\xffOp\x06\x91uo\x16Z.?\xdf\x86\xf4\xbc\x8b\xaf\x8f\xd7\xff\xaffX\xc0\xa5Sq\xc9\xc8L\x9d\xc9v\xd4e\x14\xfc\x86r\xf2>\xccc\xa7P\x08\x0f\xf4\xe2\x93QF\xdd<P\x18\xe0\xc8\x01\xd0x\xf8Yd\x08\xa8\xf6\x89\r\xa6\xd9V\x88;\xbf\xcdG\xb5\x81\xc9\x92\x91\xcd\xdfL$@]\x12\x14\xa3\xd2\xa5\xe8\x91RRB\x04\x8d\xa7\xdd!\xf7\xe6\x94z\x1dcr$\xa3\xb5\x96f\xff\xd57Uej\xe2i\x14Rx\xe3G\xda\xad\xfa\xc98$l\xc2\xc6\x88s|\xbf\xdfz\x1d\x9e\xbf5\x14\xfa\xde\xa9\x95\xe6\x8c!1\xe6\xfa\xfb\x9e*\xe6vU$U\xc3\xdb\xeaw\xaamr\x91\xb0g(O\xe4\xa0\xad\x8c\xd1\xfb\xb6\xe3\xf8\x10\x9fV\x8e\t\x91\xab\xb4\x17*|\xb3\xbf\xe02n7\xae\x9a\xc9aM\xde\xd7m\xa6p\xe2r\x0b!@\xfe\xeb\xc1\xf3\xdb\x9f+\xf1#Ih\x8c"\xce\xb2\x98\x9b"\x96\xf9\xb9+\xaf\x8d`m&\xf4\xf0\xdf\xa3\xfdl\xef\xf6\x85\xbe_h\x03&\xa4\xfa\x9aY\xd8`\xa2\xdb\xacq\xf9\xffA\x1b\x99\x92~\xd9j\x0fX\xdc8\xa0\x07G\xa3\xb1v\x8f~\xfbd\\\x0e\xecsZ\xea$\x9a\xa7h\xfc\xa7<\x03?\x98R\x1b\x1f\x84\x8b=\x00\xa5t;v\xeb-\xbf}\x93T\xff\x9a\xce\xc0\xf2\xff\x8b\xa6\xc6"\x05l=\x81?\xb5\x18\xf9\xd5\x8di\xa2\xf9\xb3\x9b\x80q\xf2HJ\xd5WUE\x8au6\x0f\xe8Vm8Ci=\x04\xd4\xd5\xdd\x8a\xbf\x94\xab{\x8erJ\x8e\xaf\x05\x92\xd6:\xf9\xbe\xa3)\xfdk\x05\tyC\xd1}\x88\x80',
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"author": "Brandon Sanderson", "title": "Mistborn: The Final Empire", "pages": 544, "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b'\n\xd0\x05\x01\xd1\xed\x8ao\xfa\xea\xae\x0b\x7f\xe6\x90\xc7E\x0f\xc6}\x0ei1+\xc3\x13\xc9(\x033\xc8;\xad\xe3-g5\x97\xce\xce)\xea\xcao&\xfb\x81-\x90t7\xc8\x90\xf1\xf81\x82\xbd\xe3\x9f\x1a\xda\x9eA\xe3a\xcfH\xa0\xfag\x04\x96\xc7\xfd\xc8\x81\xf9\xff\xad\xa0z\x0c\xad\xcaY\xf3.\x8a\x80yL"\xa8A\xba\xd9+^\t\x1a\x7f\x03\xaa{\xe6P\x87\x08-\x7fE\xc2.\x94D\xa1!\xfc\t\x8bD\xaa\x03\xbd%\x02\xb2\xd4\x8d\x92\x18?F2K7D\xaf\xd6\xa4\xd8}\xd3\xf6C(\xa0i\xfb\xef\xd0\x8c\x9a\xb9>\xeaN\nn\x8dQ\xb5\xec,\r\xbf\x84\xe1_!c\x93Q5\x0e\xd6m\xba\xba\xca\rP\x91H\xfdS\xbf\x87w\x01\xa4w\x96\xf8\xb4\x94<{t\xa9m\x8e\x95\xf5\xeb\xee\xb6Bq\xdd\xe1t!\xfe\t\xcf\xd6\xfb-\x16aq\xad\xbc\xeaK\x03>\xd8\xfb\x16\xaa\x1c\x9bG\x11\xccc\xa0(\xd2\x9fd\xbal_\xc87K\x8a\xd8B\x17\xff\xd1Q2bU\xa3`\x86%\xc2\xd2\xc2\xb7\xc0\x84*J\x07\xc3>4\xe0N\x8a[\xa4\x03_\xa5\x99\xfb\xcf}0\xd9\xf1\xdd\x91w\x81\xcb\xab\x92&\x82\xee\xe3KG\xf5\x1eP\x020\xc3=\x93\xf4\x9d!j\xef+\xd2\x07\x14\xb8\x02\x19\r\xdb\x12\x1e\xc67\x1cK\xbd"-C\x10\x95\r\xeb\xdf\xaf\xa3(\xcbd)\xa2\x97DY\xb6[\xa3\x14\x9e\xf0\x92\x8d\xcd\x08\xb9\x8f\x16\xb5\xe3C\xe8\xb5\xe2\xbeM\xdafM\xc4^P^s\xcb\xa4\x02\xce\x03\xa9,$X\xb9\x0e\xb4\xe1\xae\x03\xb3\x14&\x0c:\xdb\xf9\x0c\x81\xcd\xbd\xffB\xa0\ra\xa3+wm\xd3\xbcv\xc6\xe1\xae\x02\x14tR\x12\x10\xe9\xb8\xff\x99\xf1\x81\xa0\xae\xda\xcfQVE\xbd\x81\x8dEzh\x97\n\\L\x99\xc9\x80=\x879\xdb\x02\x83zC\xc4\x81~\x91\xa5\xad:\xad\xd2T\x90\xee\xc9\xcfl`\xf6,\xc7\xe5\xb9\xd30\x18\xbcqX\xa9\x1c[\xc0u\x80\x9a\nS\xcb\xb1\x83\xc8=\x11\xd4-\x95\x15\x08\x16\xaa\xf51\xf1[\xc0\x9d\x01o\x157\xa0\xb3\x03\x0f\x18j1C\x0b\rl\\\x17K\xb3\xbfwx\xdc\x91p\xaer\xf6\x1d9\xfa\xa9\xb1{\xfa\xe7Z\xcc\xbf1M\x7f\xc9\x7f\x99\xbe\xe2\xba\xc2\x9b\xd8}_q:3\xf9-~ \xbe\x9eF4${nU\x0e\x92\xd8\x13`\xfa\x9er|\x9fR\xed`_\xbc9&2\x00An\x1f9\xe5\xec\xf7\xc7\xcd\xad\xb2d\xe7m[\x9a\xd5\xf0Dam_\xe7\x8b\xbf]r\xde\x87\xda\x85&\xaa\x00\xbcG\xa2`X\x1e3\x08\xb6\xa9\xfe\r<9\x91\xb0\x801\xa7\x11\x9a\xb2\x17\x1a\xca\xc3b\xe9c\xe6\xb1\x0cB^}H\xda|\xda\xab\xd5\xcd\xb3R^\xc0m7"g\xd6\xf6^6\xfe8\x84.lE\xf2$|c\xafH\xfa*\x0c:\xcc ##B7\x12H\x96z\xa9/\xa0\xfd\xd6\xdf',
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "author": "Brandon Sanderson",
                                "title": "Mistborn: The Final Empire",
                                "pages": 544,
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
    }
)
async_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "params": {},
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\x85\t\x01\xd1\xed\x8ao\xcc\x00\xbe=\x9c\xfbw c\x95\xdbu\x07\xde\x1e\rA\xba\x13\xd1\xa5+\xb6\xec\xf5\x06\xf2\xc3\xc7\x93\xd5\x15c\x11\xf8\xf8\xa1\x97\x81>\\\xfc\xe75\xf8\xb9s\x1d\x8b\x81b\x82\xa0<\xff\x80O\xa0fVmZ\x16\x04\xa9w\x16i\xed\x9d\xef\xaf\x00\xd9\n\x1f\xb6\xc6-6\x07\x14\xdb\x88\x88\xddX+)k\xc9\x03b\x02Q\xb3\xd5\x03?\xc5\x83\xf8}\xf5\xd0e\x1dhU\xe9\xb7\xdd\x0e\x1e\xb9\xb5o\x7ff@\xabq(;\x8f\xe4\xd3\xfa\xce\xf2GA~\xc9\xa0\xdb\xe7\xe7\xdb\xeb\xb5\xbe\xf8\xd4\xa6\x9f>\xd5a\xe0\xed\x81R\x88\xad\x91\xc3_i\x04\xa4E\xdd\xd3G\xfaS\x11\xefo\x0f\x86\x07{\x03\x14\x17=\x0f\xecq2\xa2m\xad\x1eX\x95\x84\x0f\xa6wv\xe3\xf1\xfe\xbf*:\x94\x95n\x03\xc6:\t\xbf\xcd|\xcaM\x83\x1e\xb6'\x94g\xc5\x97\x82,$b?\x87Ll\xbd?\x14:\xf6\xd0\x926\"\x0c\x10+g/7(\x95\x14\x15E\xf5\x80\xb1y\xb0\x80\x14\x0b\xf4\xda\xcb\xe2\x18D\xe0\xdf\xb7I\xd7\xa2V\xb5\x84M\xfa\x86*\x01\x88\xf2A\xce>\xdaE\xb7\xf5\xa1\xd4O\xa2\x9f\x94\xad\x15PM>\x87\xa6\x0f'\xf38\xdc1\x9d\x80<\x8dA\xb1\xb6GUdYc\xd6\xb4\xf8qq\xf9\xc0|p \xd8\x19\x13<\xcc\xf5=\xcf\xf9d\xdf\xf8^\x1d\xd4XZB\x91wo\xce\xb1\xfe\x836\x15\xb0\x0eu\xcd\xa28\x01\xfb\x12\xf5\n;\xd7\xf5\x15\xba\x0e\x9ek\x00{\"/;\xc8\xd5<\x80\xfdW\x90&\x1c\x19\x8f\xbf\xe3!{\xd1hc\"L!6 \x9as\xce,\xe7}\x8c\xe0\x05\xab\x97\xbb1\x14\x88\xcf\xf2\xae#\xc7\xe1LZG\xd4\x9d\x15n\xae\xb2\x1f`\xba?\xb1|1\x9e\x95b\xd4 }\x9e\xcc\x90A\xa2U\xd1\xea\xf6p\x0e\x80\xdb1z^\x9c\xcf\xa6\xd1\xc5\xb2\x16d\xcf\xd3\xad3C\x90\xacA\x8c\xedU\xc6\xcaZ.}R\xc3\x97\x80*\xcd(u\x18\xa7\xfd\xb4\xdb\xd5\xd30\x84C\xc4\x00y\xc1I\x81\xac\x87\xe6s\xec?\xf5\xafo\xcd\xd3\x8c\xf8A\xe4\xd2\xd7\x84n\x9f\xa9~\x8e\xa2\xeb\xac\xec\xfd\xbb\xb2~\xfa`\xec\x81s9\x98?\x99\xd8~\xe4\xb22SO\xce\xbb4\x1a\xf8\xf5\xd0\xa5 \x97\xd8\xab\xaa\xe8\xc3x\tGb\xa6}\xb9\x80\xe6\xfa\xed\x8f66\xe5\x8f\xd6\xee\xb2\xee\xa4q;[\xc54\xca0\\\xe0\xcc\xe1\xfd\x8e\x05F\xf7f\xb2yiy\xb0\xaa\xb5e\xb3\xa0\xbb\xa1\xeb0ha \x85D\xa3I_'\xeaq\t\xe8VX\x0c\x0b\x01\xeb\x00\xff\xaa\r\xb0\xf0\x84\x10\xda\xaa=\x9f\x8f\xf2j\x92\xb3\xa6\xa8\x13\xf5\xfc\xae\x8cuo\xaae\xdb&\xd5\x84\x19\xe0h\xd8qC\\\x13\xcc@\xc2\x85\xf0\x93\x9f\x87h\xde\xeacg\xc2\xe0<c\xe8Uq3\xf0'\xa4\xa9\xc5\xd0{;\xf6\x06\x83\xed]\xe4)<\t\xc4\xbf\x058K\xc1h\xabr \xe8\x08\xfab\x9b\xf2\xc9\x88\x8d\xd3\xdd\xc4C\x02\x0b\x8a\xd6*\xfd\xd9\x10(v\xe9\xed\xca\xbaQ\xb4\xb26\nj;\xb61\x80\xc8\x03\xca\x8bF\x85\x93kA\x85\x96I\x93\x83n)\x15\x1f\xcb\xcc\\\xa3:\x17\x0f\xbd\x97\xea\x12[DW*\xd5\xe2\xfe\xb8\xab\x95\x87\xd4\x9c\x1a^b\xc2\xf7\xb1k\x96\x88\xfe\xaeY\xa6\xdc\xd3st\xca\x9b:sqf\xeae\x90>\x97\xf2y\xda\xcb\xc9)X\x84\xf9A\xa4[\xf9\x94\x84\xe6\xd5ME\xb3\xf5C\xbf\xd1\x82\xa50l\x1c\xbaXJ\xe8\xb5(\x90\x92\xffr\x16t\xc0)\xd3\x04e\xa3\xa2u>\xd5y\x82\t=\xa0i2\xf94h\xba\x93e^\\\xf1t\x0exW#\xa8h\xa7\x99\xb2a\x11\x8c\xb5\xc8\x8b.\xeb*\x9e\x0f.\x1bZl\x00.Q[\x01\xfdI\x95V+\xad\x1d\x87m\xd5\x98K\x82;\x12\x18_\x06\x08X&\x8c\xeeE\xd8\xe92\x84\xd6I\xdc,\xda\xbb\x01\xcaJ\xe39\xae\xb4\x8c\x16\xea\xd7-\xc1\xae\x812#Zs\xfaN[\xf5W\x181\xfc\x92\x04\xad\xb8\x7fGX\x87PX*\xb5\x90\xb8\x82\xb1\xdc~\xa5\x8dGr\x02\xdc\xe9\x82\xc0>\x7f\x92^\xf6\xef\x962b\xc0\xa16\xff\x16X9\xb1\xde }\x89\x81\xe2DA\xd6fU\xff\x02\xad\x18\xc8)d\xf3\x14-W/\xd7\xa7\x06\xeb\xda\xec\xef\xc1\x05\n\xdegNf\xaeE\xc3\xea\x01M\n\xc3/\xc2\xf4\x0b\xb1E\xde\x0c\xa5:7~J\xd1\x18c\xf1\xc9H\x80\x9c{\x96\x1a)\xc9p\xca\\\xe2\x00\x84\xdc\xd6\x9a\xb3(N\xc9WZx\x9b\xcfiM&d\xf4\x94\xf7\x99*\xf6g\xb0\x92j\x16\x08\xf2\xaf\xc0\x8a.\xc1@D\xc6\x9f@",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"pages": 544, "publication_year": 2006, "title": "Mistborn: The Final Empire", "author": "Brandon Sanderson"}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\xd9\x03\x01\xd1\xed\x8aoG\x12\xa6\x9aL*\xb0\xaa(\x9d\xf8\xf7;1\xf4\xe0\x85T)n\xfe\x10\x08U\xd23\n\xa6\x0c.t3\x1f\xab~\x88\x99\xd4<\x87\xa19\xa6B\xbf\xfc\x18\xef\x94H\x13\x9b\xdb-$\xcbz\xcd\x8fS\xe3\t\x12\x7f\xab\xca\x90\x15\x89\xc9E\xe4\xae\xa9?o\x85,\xb4h\xe6\x07\xf3.<\x89\r\xf5\x86f\xef\x84\xf70\x02J4\x84\xb7Sb\xa2\xd1\x03\xb4\xce\xd6\xdb\xfbp\x03\xa4\xb1\xc5\xb1\xb5\xc4\xce\xa6\xa4\x0e\xf6'\x9c\xf7\xac\xaf\x11\x8a\xbaul\x8d\xa1\x98\x9b\xdf\x97\xee\n\x96E\xf3S5\xba\xdf6\xf0\x90\x14X@\x15\x88y\x01'[\xb9'\x97\x99\xed\\B\xa8\xc4\xb2f\x15\xac\xb4\x86\xa9{\x80\xea\xac\xceyZ\xbe^g}\xe3\x1ch[E7\xe7\xbb\x8d\xd9\xcd\xc8\x19\xe1\xb3\xfa\xf3\x91]\xf4E\xc3\x9c\xd2\x8d\x00\x9d\xc3m\x1e\x17\x06v'\x8dq\xbd\xf4\xba\xae\x1e\xed-k\xdc\x18\xa3Y\xcc8O\xab\x876t\xabB5\x1b\"\x19Q\"\x08\x8co?+\xe4`]\xd39\xdf\xe0D\x8f\x7f\xd6\t\xeeS\xe9e\x94\x91\xd4\x17\xc0\xc8n\xcdN\xf6\xdaXvw\xf6#\\\xd0\x07\x95r\xac\xfc\xce+\x9bRP5\xe6k\xcbc\xf2e\xab\x91\x0e\xb7\xe9V\xa8\xb4Ux\x88\x16p\x8b=\xd0[\xe9l\xecl\xee\xdd#yS\x02\xf3]FUK\x8a\xc8|s\xd9%\xe7\xef\xb0\x8b\xa4\xa3<,\xd4\xef\xea\x16\xf38\xcf\xdd\x1b&&\x8e\x18\x00\xc8\xcbl\xe6<\xbe\xe6\x05\xa5\x11\xb8\x10\\Q\xfb$3\xdd=p\xfb\x11\xbaH\x05\xdaVrqb\xa4V{(\xa9,\x95<2U\x9f\xe5\xf3e\xd3O*\xe8gy\x120a\xe4\x81\xdel\xef;\xb1{~\xf9\x87\x10\x86\xce1\xb0\xef\xa2\xf1\x07\x9a\x96z\xe3\xe9\xcc\x85\xb7\xb6\xbd\xaf\xaa}P\xb5z\x99t\xa1X\x81\xb4n\x9a\xb2}\xfe\xa8\xe0L",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "pages": 544,
                                "publication_year": 2006,
                                "title": "Mistborn: The Final Empire",
                                "author": "Brandon Sanderson",
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
    }
)
stream_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n$\x01\xd1\xed\x8ao\xfb\xc2\x17\x86\xaa^\xa1\x82\x83G\x11?8k):\x9a+^\x18\x18\xc1a\xd6 \x8b\x00\xfe\xa8\xea\x8f\nz\x01\xd1\xed\x8ao\x8e\x8ab2\x0ek\xba\\\xfd-YB\x07\x02T\x17\xa0A\xab\r\xddv'\xde\xf3\x19!=\x972/b\x89\x950z\x8bj\x90\xa4e\\\xe4\xcdP%\x9b+](\xe5IXN*\xcd\xd2+U\x96\x94\xc9 mf\xb5VX\x01KGrL1R+}B>\xbe\xf8\x85\xd2/k\xbf!9A\xe1\xc1\x043G\xee\x0c\xeb\x04\xf6+\x9e\x0b\xe9(\xc1;\xd4\x01\xb2=i\xde\xd0\xfc\xa2CP\n\xe6\x01\x01\xd1\xed\x8aow\x0e0\xb5\x92\xd0\xeb3z\xb1\xf0V|\x94;\x885\x9cL!n\xda{\xa20$\xe2k8WJ\xec1Uo\x08\xd5V\xa0\xa2k*\xc2\xf6\x02\xa1\x8a\x13\xdc\t!\x96UJ\x96\xc6^\xf78\xfa\xd1\xfb\x0c\xef\xa2\x98\x86\xb25\x90\xa3\x0b\xa9=,c\x1dz\xab\xa8`>Z\xd2(\xee\xc4\xf3\x94\x9d\x1ck3NS\xc0\x02{$Q\xc5z\xf8\xed}Q\x97\x94\xcb\xa3\xa6\xf0\xd9\xf0-J\x97\xa0s\x11\x1d\xf2\x01i\x00*S\x98\x8dq\xc6\x1a\xf8\xdbfw\xd8G\x050\xf5\xbd\xf9w\xe6\xc5r\x97\xde\xcb\x1be\xa5\xf9T\xcc\xbc\x06^\xf6\xe6\x9c\x16\x13i&[\x19\x9e.j\xe6\x03\xe3,\xd4\xdaJ\x81\xaa\x1b\xb3\x13\xde.$@\x03y\x18..\x11\xd7\xec\x05v\x91Sm]\x98\xdc\x0b\xf19\xef~\xbc\x0ek\x1eP\x93%\xec\xbc\xf1\x88i\x13\x969\xa8\xed\n\xf9\x01\x01\xd1\xed\x8ao\x13\x0b\xc1\xba\x85a\xeb4\xaa^\xed+\xd6\x05xz\xf1\xc3_9\xfea\x97h\xbe;\x00\x8e)(\xff\x92\xcc\xc9\xa42\xfb\xc4\x97\xd32\x02\x98\xd6q\x99\x84\x18\xd4\xd2\x93oF\x050\xd9R\xe6\x80\xb9\x97\xb1\xc0\xd8\x1cG|\xef\\}\xc7\xb6\x02\x89H\xb6\xd7H\xfd]M\x16\xe7\xf4\xa9\xf4h\xf8:\x08\xebF\xe8\x05\x97\x84J\x81\xf8<\x13\xd6\x07i\x0c\xf1\xbf4!/\xc1O\x19\x9a\xda\xab\xa7\xfc5W\xa6\x85\xd1\xe5\xc3\x90%#\xd1\x98\x8e\xba\x0c%\x16,\xd9!\xfa85X\x0e\xe15\x84U\xf4%\x17}\x08\xbc \x9b\xdf\xe1)\xf1'\xa0c\xc6\x9d\xa1\x99\x04\xf5\x0f%\xaa%\xdcZ^jz\xa3\xf6\x01\xef^\xa3\x0f\xc7\x11\xe5\xa7\x02?\xc8\x1f\xd5\xba\x9eP\x19\x8e<\xbb\xaf\xe1U\x9e6\x00\xc9F\xda^\xc8\x9a\xa6\xfe\xbf,cy\x96U\x1c\x83\xfbE\xf9\x9c\xd9\xfd\x8b\tf\x92 \x1e\xad\xe4.\x13$k\x04\xcbWC\n\x86\x01\x01\xd1\xed\x8ao\x9f\xde{\x1b\xd7\x0c\x13\x84\xd3\xd5\x86\xe2\xa3\x06\x82\xf7\xab\x1a\xe7\xb2<\xd5\x04\x8f\xb9\xc4\xc0\xe6\x07\x1f\xbd\\w\xb4n\x07\xaex\x86\x0b\xe8*\x8eE\xd1\x06\xd2\ti\xfco\xc4\tf\xb1:\xdd\x88\xa6\xb80\xd4U\xa1d`\x8e\xcf\xf1{\x18\x1c\x19\x9d\x01\x8c\x8a\x10\xd8\x85\x9e\rn\x84~\xec\xc6miw\xc41\xbe-\xaa\x92\x08\x00\x15A\xa4\x81\xabCU\xef\xbfg\xee\xe7\xfd\xf0\xdf[\x9a\xefl\xcbG+\xee'\xde\xf6c,\x0eg]",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"author": "Brandon Sanderson", "pages": 544, "title": "Mistborn: The Final Empire", "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n$\x01\xd1\xed\x8ao+\xf2\xf2!k\xb4a|PK\xef\x96/\x10\x00!\x16\xa4D\x7fU\xa1\x96\xcf.\xdb\x8f\xf3\xc2y\xcb\n\x7f\x01\xd1\xed\x8ao\xb8\xca\xf1\xad\xfd\xe8'\x10\xa6\x05\xa9\xd1|\xea;'\x19\xaf\x1c\x84$\xe3\xd7d\xc8\xfcxD\x91\x08\x9dUn\xa8.\x88s\xcd\xd6\x8f\x7f(\xad\xe5\x0c\x14\x15ce\xb0O\xec\x84\xbdG\x8f8\x1569\x1c\t\x17\x06\x9f\xc3\x9a\xb8\xe8\x05\x8e\xb3\xe0O\x14\xed\x86\x91\x81^\xfc\xf1F\x8e\xc9[a@F\x9b\x1cKo\xa0V\xa9G\xd5\x04v'\x0e\x86\xfd\xa0\x1b\xcb(PYQ\xc8\xd7q^'2\xea\xf9\xd0<\xb8\n\xc1\x01\x01\xd1\xed\x8ao1\xf1j\x97\x14\xc0N\"\xfa\xc3\xde$\x1c\xcf\xc1x_\xd7\xe0{\x85a\xc5Z\xdf\xf4\x98\xdag\xcc\x82\x186\x12\xaaF\xd0T\xd8\xaa>\x85\xf2\xd73\x95=\x96\x05\xa7n_\xd33\xf1\x16}\xc1\x118\xe48\\SH\xa3\x012n\x91\xcd[\xda\x889\xadP14\x87e\x93'\xe3+\x8d\xf3]\xe2\n\xe0\xa7\xaa\xd6\xf1\x19\xbb8=aL\xc3\x97\xac\xc1\xc5TI\x18\x9fV\x9bkn\xf2\xbb!\x14;\x86\x90\x91\x1f\xa7=\x92]\xc3\xe2RQ\xb3c_\xb3\xcf\xfe\xd3\xa3v\xa5*\xce\x9f?\xf8\x95\xa0\x83Q\x1e\xf3~T\xe2\x00\xd6T\xfa\xd7\xcb\xa1\x15\x14\x921\xbaVt\x12k\x11r\x08k\x86\x19\x86\xa9'^\xdd2[w4\x84\xf2\n\xe1\x01\x01\xd1\xed\x8ao\xd2`&\xfa\xe1COH\x08\xb5\xb2\x88\x9b`\xbd\xd2\xa26\x85\x11\x15\xe7\xc3\x9eo\xd3pa:B\x03?\xfe2V$4\xb2\x91~\xaa\x9e\xb7/\xc4\xc7\xa5\xa6\x0f\xf8\x16{\x10\x96\xa95P\x1b$L\xc0\x9f\x15\xf147=\xdb\xfd\xede\xc5\x8d\x97\x0bX\xeb:\xbd\xa3t+\x99\xec\xa0\xd0m\xebc\x8c\xa1\x06\x88#JO\xf7\xddv\x98\\\xd3\x8b\xadV\xfd\xe1\xf8\xf7\xf2\xca\x83-\x15\xb2D\xa9N\xaa%\xf5\x10\x06|\xce\x87\x95=\x08\x84\x06A\xb7\x94\x85/\x96\xf5'\x89/\x1b1\x0f/\xf8\x0c\xca\xf6\xdcY\x05%\xc93\x9d\xc3\xba~\x8ch\xa4\xce\xbb\xf7\xa4\x14]\xa6\x9e\xa3\xbe\xad\xfbw\x85o\xae\xbcA\x03\xd1\xa82}'\x98H3\x1f(*\x13%#O\x9fL\xb0x`\xa7\x1a\xdft\xe2}\x90Q\xfd^\xb8\xa9\xc5D\xab\x198N\x12\n\xed\x01\x01\xd1\xed\x8aoa\xcd'\x0e\xec\xf0\x11\xd7E\xb5\xa9A\"\x99\xd6\x88B\xa5\xb6g\xc2\x93Aa\xdd\xc1\xdd\x95\x1a\x98\xd6SmL\x8d/\xb7\xb9:cW\xc0c\xc9\xaf\xd7\xbfm\x05b\xd5\xc7uN\xb2\x8fC\x7f\xb3\x88%\xd0\x19Jg\xc2a\x1b>~\x8bx\xbe\x00\xa9\xe3\x85\xa1EQ\xa4\xd6\xd9\xed\xbb~\\\xf1n\x1b\xa4\x93\x85\x8f\xef\xe34\xe3W\x91\xde\xf9\xe4\x83\x11\x86\x12\xdd\xd1\xff\xe8\x9a}\x8d*H\x94\x96\xc0U\xda\xa8\x170.\xdf\xe1\x0b|;\x1f\x10\xc4Y\xc1\xcd\xd7\x95l\xa4\xec\x11\x96I6mu\x19,\xd1\xf4\xab\xf7\x05\x07}\xf7)\x17k\xd9b$\x97\x1f\x0fm\xa9G\xefZ\xffV|\x06V\rm\xef$\rP?\"K\x10Hk\x02\xb6\x15\xda\x98<+\xedK\x8b\xe3\xcd\x80x\xe0\xb4\xac\x94\x8b%b9\xf8\xf0\x81\xa3\x04[\xcc\xe7\xb8y\x8d\xc3\xc2\xcf\xb0O\xb9\xb0w\xc8\x11^\n\xb0\x01\x01\xd1\xed\x8ao\x068\xcf\xc9\x89\xa3\xa4\x1fZ\x18\xc2O8`\xcb\x9b\n\x1c\x857\xebtv(\x89\xdacR\x1ds\n\xc6/\x1e\x9ds\x93$\xe8\x93\x0bF\xb0{\r\xa0%\x7f\xa0\xc1\x1e\x85\x06>\x1f\xed@\xde\xba\xd1cq=\xdc\xce\x14Q\x88\xd2\xa9\x94V\xad\xff\xb6\x11T`2\xca,\xf4\xae\xf1\xf5D\x06~e\rHP\xba\xfe:\xd1\xa3\x1f#\x089\\;\x88\xbb\x9bb\x8b\x04W\x9f\xfc\x08\xd1xJ\xa3\xd15h;_\x1b\xc3\xe8\xe8\x7f\xbb6^P\xff\x12$>\x10%B\xbc\x06\xa1\"\xc0VN\xba\xf5#\x177A\xe4\xd6\x98Q\xe6\xfeN\xe6\t\x83 45\x02\xd9\x19f\xe3\xcf8",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "author": "Brandon Sanderson",
                                "pages": 544,
                                "title": "Mistborn: The Final Empire",
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
        "n_chunks": 3,
    }
)
async_stream_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n$\x01\xd1\xed\x8ao\xc7\x17D\xe2\x7f%*{xu8U\x10\x17\xfaCX\x03\x8e\x00\xb1\xd0\xd0\xe0\xe5Y\xe4\xcf\x9c\x04\xbb\nY\x01\xd1\xed\x8aoz\xf3\xa2\xcf\xa3A\xd2\x08\x93\x11\xd3)\xd1\x17\x81\xa9\xfcoy6\x04\xadV&\x18\x9bG\x1d\x08;N\xb7\x9b\x1bwG:\xacrJ\xc7y\xc0\x11\xc9\xc7\xcb9\xa6\xf2\xee\xd3\xb9\xfa\x1fl#B%q\xab\x9c\x83=]!Ky9<\xd8*EoM\xcb\xec\x04\xc9x\x81<\xa3W\n\xef\x01\x01\xd1\xed\x8ao\x06:\xae6\xdf\x1f\xce\x01G5\xa8iw@\x1b0\x89d\xd2\x9f\xdc0t\x19\xca\xe6\xa6\xefN\x90\x88t\xb5U\x90\xea\xa2\xd1\xf3\xc1\xf3\x8e\xdf\xc6\x85\xb1\x9f\x97P+\xfc\x1c\xddf'\x1f\r\x94x\x0c\xeff\xbaY\xbaFD\x14\x997T\xf9\xc0\xaa\x8cu\x8c.\xbfu\x8e)\xa5\xec\x1dH\xc7\xde\xea`S\xd2\x1a\xac\xa7\xacU\x8b<H\x91[\xf7#\xd7\xce\xba#+e\x1cex\xdc\x99\x95~\xd6-J>v\xf7\x1c\x12Ki\xc8j\x01\xaf\x827_X\n\xe2d\xdf/+\xcfZ\xba\x1adK\x1f\xf6\xc6\xe4U[#\xd8\xde9\x08tH&\xb0U8\xca\x8a\x026Ws\x15\xc1\x05\xb2\x19\xb5\xb0\xa6%\x9f\xb3\xd5\x85\x18/\x12\xfaic\xbe\x02\xacnJ\xd1\x99\xeb\xc3\xb1\xe8\xd7\x16*\xdc\xd7r\xa3 \xc3\x10\xcf\xb0\x9dzy`\x7f=2v\x1eb\xbe\xbc\xd3\xb2'e\xcc\xd6\x98q\x9b@\n\x87\x02\x01\xd1\xed\x8ao\xea2}\x92\xdfD\xdf\xfa\xe0+\x15#\xb2\x97s\xae\\Qh\x1cg~\xbe\x8dX\xb730\xc3\xb9\xf78\x07\xafL\n>$\xe3=\xcf\xb4%;<\xc4p>\x0cs\xf0(\xe6U^\xf1\xd1\xcc\xc9\xae\x1c=\xc7\xa6>\xd5\xf3e|\xc5}*rK\xf9\xb8\x90\xa4\xa0\xef\xfbw\xf97@\x82\xd58 V\x08\xf7kl\x04b\t\"\x96\x1a\xbfa\x93\x9e\xd3\xfa\x01o\xc0\xb6-\"\xb9.%\xa1\xb0=Y\xc5\xa8)i\xb0n\xcbD,\x03\x861\x9bs4\x91W\xa2\xfd\x15M\x13\xaa\x8f\xa0\x10P8\x8d\xc0\x7f]\xaaiY<\xcc^X\xc3B\xf3x\xc6\xafD6\x1c-<\xd7\x898x\xff>\xe1\x18\x1d{\x9f\xbf\x96q\xc95N\xd9v\xab\x03\xbd\x15\x95\x06\\\x0c+\xbb;\x0b\x18\xa2\xf3\x8f\xe0\xddk\xc0\xaf\xc5G\xd9\xaa7\x1f\xfa\x07\xa6\x9c\x94x\xcc\xe5\xa0onj\xe3Y\x02!\xd3\xf6 \xd0x\x1b\xf3\xc2\x0f\xb3.4_\x1b\x1cUs\tXVt\xa3S^\x92\x9a\xfb\n\xcc\x01\x01\xd1\xed\x8ao\xe3\xc6VQp\x92\xd0\x1f\x93\x81z>\xc4\xd6\x97\xcew\xda\xd7\x8bT\x0c&\x90=dMI+\xe6\xfb}\x9f\xdaK\x07@\xdb\xbfM\x83V\xb0(_R\xd5\xc0o~\xb3e:\x1a\xf7\x0bQ\x8b\xae\xc9\xa6\xa3\x08\x8fDuE\xe1`\xc7\xeb\x8d9\x9a\xb2\x91\xcd\xbcUS\x00Lon^\x9e\x84\xd5\x97vEw\x18(>/\xb6\xca-\xd4N\xb7\xfe\xdf'U\x00\xbb\x16\x15\xdc\xa8\xcb\xc9*\xea2\xa3\xf9\xb6\x15\xe1\xdb\xd1\x0c\xfc\xb1\t??\xd6jG2\x12\x909E((S\xb1\xac\xfe9\xb0\xbc\x94\xae\xe0\x95l\x14\x86P\xdf;W\xd0\x08$\x8bh\xe81\xce\x8bO\xb8\x91'\xcb\x1f\xba\xf0\xef\x15O\xb7\xf3\x04\x80\x05E#\xff&\x9a\xef\xdbA\xbd2\xde\x030\xeb\xe6v\n\xdf\x01\x01\xd1\xed\x8ao\xd9\xff\xd8\xd3jt4\xfdGj(\xa0H\xafY\x0e\xa7\x02\xe2\xf6\xd9_ONH\xab#\xf17\xcd\xd0\xcb\xfaL\xe9\xb0\xfc\xd9\xb84\xd7T\x83\x938(4\xed\xc8 \x80\x9ck\xf6\xc6\xe7\x0c\x07\xb9\xe2\xd6i\x86\x1a\xf9\xdb\xf3\x94\x83\xecH\xb5W\x17\xfbVr'\x92%R\xe6\xa2\\\xd2\xe5\xd5\xa9\x15(\x17QM\xb2E\xe6\xa0\x91\xcd\xee\xb1\x89=\x16\x8b\xdf\xab\x01c6\xc2\x96u\xc2W\xe4\x86\xdc\xc8\x02\xc1,\x1abh\\g'\xd2\xcf\xddU\x98\xbc\xad\xa4ysS\x1a6\x07\x004\x89\xc4k\x96\xc3FM|\x17\x13(.\xe2\xcc\xcf~\xc7e\xd3\x87\xa5S\xbb\xd5C\xc7\xb8t\xdb\x17\"\x94\x81\xd0\x08v\xda\xf2&\x04\x9d\xf0\x98\x86\xdc\x8b\xd9\xd1\xcf-I\x14\xafv\xbd\xfe\x7f\xae+}\x87\xdd\xaed\xe3b\xaf\xca\xd3E\x9fZ\\z\n\x86\x01\x01\xd1\xed\x8ao\x81\xd0\xbfs\xd2\x05\xa1X0\xef\xde\xab~\x0f\x8a\xef7\x88\x0b>\xf8\x98\xb7\x9e\xe2\x8a\xf1\x15\xafEw\xdf\x02E\xd56\xcf\xfd\xba\x13\xe4n\x1b)\xceg\x14u>/\xeft\x15\x88\xeeI\x7f\xfc\xb6*A\xcdz(\xc9\xf7WLD\xa50&\xddB\xe0\xfeH\xc9\xfdBQ\xc68g|\xd8\xfa\xab\x1b\xb3H\r\x19\x94\\\x8b\xb3\x0e$\x06Sy\xc6\xc8\rM.\xb8D\xf2\xee\xb0\x10\xa9\xa3f\x83\xc8\x1c\x85\x16h\xa7\x02\xae\x87\x85L3",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"title": "Mistborn: The Final Empire", "pages": 544, "author": "Brandon Sanderson", "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b'\n$\x01\xd1\xed\x8ao\xdc\x86C\x94\\\xd9\xae\x1e\xdfCm\xf28n\xba[9\xd5\x1a\xbdn\xeb\x1d\xc2\xd9I/9\x1f2\xd2\n\x7f\x01\xd1\xed\x8ao\xc9\xd6\x18\xb2\xceL9\xdc\x06\xc9>;U\xf7\x9f%\xfe\x13\xd1\xce\x06\x12\xd2\xbcRnK\xb4@\x80W\x9b\xdd9\\\xb9\x84$\xfa\xcbgCLW\xb7\x18\xd1y\x9cN\xbd\xa4\xf1y\x9e<./\x8e\x7fY\xddF\xc3\xe7\x8c\xbd\xfe^\xfdeL\x92\x15J\xd4\xc4\xf5\xc8\x982]\xc0\x89]\x81\x93<\t\xa5\xac\xd7\x0144\xb7\xe7K\xf6ng\x83\x17\xf57\xcdC@p%\xc7*\xa89\x8a\xa1#\x0b\x85M\xfcD\n\xc6\x01\x01\xd1\xed\x8ao\x8eZ\xc9\xf3B\x8d\x9a\x9c\xee\\P\xa1\xffE\x9fLp\xc8\x17\xaco\x0b\xe81\x98\t\x8f>\x12M\xc4N\xb7`\x86R)\x91e$3\xf5\xd0\x04\xbe-l\xed\xabQ\xc4\x04\x97\xa6\xde\xd8\x15h|\xb7\x05\xb1I]\x108\xc3\x08a\x9f\xdc\x11U\r\x99^\xa9\xf2\xb7\xb1\x01\xf5@\x0fO2`\xb6:e\xc2\xbb@\x13\x8c\xb3gG\x18sj\xf6\x8d\x13\x13\xc8\x93\xa3&\x94\x97\x14+5\x02\x88\x86&Q\xc6\x8c\xb4_\xb8\xdfnt\xc4K+\xde\xb0\xe0\x00\x08H\xec\xf9\xbd_\x84x_K\xd3J2-#\x18I\x82\xe0]\x8c\x8dO{\xed\xa7E`\xf9\x8fs_^\xc3\x1c\x18\xc1\xd1\x9c?\r\xd6w\x85@\xe8\x88n\xe8\xb7\xad_\xff\xa6d\x0c\x00\x15\xb5\n\xca\x01\x01\xd1\xed\x8ao\xd4\xbc\xe1B\x876F\xa0\xfc\xfd\x8eb>\xf4\xdc\x94\xa1+\x88;\xa7\x90\xc7\xefQ|z\x9d\xf8\xfb_ib}\\\x1eWU\xd2\xe5\xcb\xaec\xe6\x11\xf0v&%\x05T\xd4\x83c\xec8\xe7\x0ef\xa7\xc2\x97r\xd5\x88\x9d\x9b\x1c\xae\x1fh\t\xd8\xb4\xa2\x14\x04H*\x9d\xbdKw\xda\x970\xb1\xc9\x16t\xb1\xa6TR\xf0\xcb\x13Ze\x8c{\xc5\xbb\x07\xfe\xcb\xd2=1 \x08\xa6\ni\xc9Y$\x898\x16\x9ds\xaaz\xe5Ml:c-\t_\x98\xf6\xf7\xdc\xdc\xa5\xe1\x99\x91\x1c\xe4\xb8\xd8\xbb\x1f\x19\xfd\xeb\x87\xcd\x9c\x1eX/\xcd1\x8e\x01\xa3\xcduzB\x02\x9b\x84\xd0\x1449\xe0\x1c\xf5\x7f\xf0WP\x19."\xe6S\x07\xb0\xb9LH9Z$ \x15\x90\xcbB\n\xc2\x01\x01\xd1\xed\x8aod\x9b\x14/\x10\x94m\xd0\x8emRw\x89\x98\x15^d\x07\xde\xda\xcc(H\x87\x8c\x9fT\x94\x03\xcb\x16+ \xcc\x97\xddBN\xac1\xd1U6t\xf8\xbd\xfdr\xcc\xbd\xa6\xb0\x91\xcf\x7f\xa7\xa4J\xb3Y<\xb7!4\xa2\xcao`\xf9\xb4\x97\xd1\x17\xc0\x98\xad*\xa5\xf4.[[I-\xf5S\xa7\xd2\x0e\x03\x9c\x1b~\xd8<1K\xc4i\xa9\rY\xf7\x9687n\xf1mjd\x99\x19\xe2di0\xab\x0b\n\x85\xc8\x92\xa6)_\xee\x9e&#\x9e\x99\xa9\'\x80\x1e6\xe6ON\x9fW\xc0\xca\xe7\xf8\x98h\x8a\x88\x9f\xfe\xcfsb\x0bit\xe1\xb5\x8b\x08Z\xc7{\xa2\xcc\xbfR\xf7\r\xd27\xa9\x12<\xc6W\x8d\x97\xcf\xebB\xa9\x10AQj\x97\n\xa4\x01\x01\xd1\xed\x8ao\x7f\x9fM\xce\rp\xfbe\xd1\xeb\xaf\xc1\x93\xba\x90\xa1\x04\xb3\xd7\xb0\xa5\x8a\xcd@Wv\x96\x12}\xaa\xe9A\x06`S\xbf\x90y\xbd\xa2\xd8\x8b\x05\xf8\xadw\r\xd7*\xe0\x12s\x92\x84^\xeb \xab\xf3s\x8d`\x1f\x93B3\x83\xc3[Z\x0eg\x85B\xbe\x04\xb4SH\xbav\xac\x9a\xa8D\xc44\x81\x16\xd6g-\x85\x05F\xbf\x96\xe0\x98A\xad\x99[qp\x90wT8d~\x8bN\xb7\x8b\x98r\xe6\xc2r\x9d.Y\xdf\xde2"\xa0\xe1"\xb3OZ\x12\x0e`"\x15%\xdd\xe6\xad[X\x01\xd7\xc6g\xd1\x12!\xed\x8b\x1d\xea\x7f\xce\x7f\x90\nw\x01\xd1\xed\x8ao\x95F\x92Rbn\x86\x99\x0f\xa6\x079\xd5\xbb\xa69@\x18\xf8[\x13c\xd9x\x0f\x7f\x97\x9e?n\x80:\xf5`bp]\xec\xc5l\xef\xea\xf7n\xd7\xca\xf9\xcc\xdf\xf2\x0bN[\xde\xcd\x937CK\x80V\x14\xf6\xbeA"R\x83\xe3\xcb\xcc\xabp\xde\xcbY\xb7y\xa7\x8b\xd3\xfd+U\xd7\th>\xdbd\x7f)\xb1\x9c\xcfK\xf0\xb64\xeb\xbe\x81\x7f-\xe9S\x83p\x1d1Xn\xc1~',
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "title": "Mistborn: The Final Empire",
                                "pages": 544,
                                "author": "Brandon Sanderson",
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
        "n_chunks": 3,
    }
)
