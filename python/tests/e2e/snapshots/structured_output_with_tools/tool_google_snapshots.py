from inline_snapshot import snapshot

from mirascope.llm import (
    AssistantMessage,
    SystemMessage,
    Text,
    ToolCall,
    ToolOutput,
    UserMessage,
)

sync_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "params": {},
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\xb9\x08\x01\xd1\xed\x8ao!t\x01>\xfa\xc2\xa5\xd6\xd7\x07\xe6\xe3F\x1b\xa3\xca;\xa7\xdbR\xa1\xde\x11*\xa49\xb9\x12zo%\x1dc\xeen\x86\xf5\xf1`\xe7\x1d\x02)\\\x03|\x01\x88\xe8\xe6\xfc \x15%#\xd6\x7fJ\xcagy\xd9\x07\xc3\x83\xe2r\\\xf7\xbe\x9b\xe7OT\xcc \xb7\xfd\xfeBY\x15\xa0\x98\xc5\xff\xcd\xc5:\xfcM\x8e3\x9c\xa5\xd1B\x05\x97\xc6#<|@E\xfc\xe50\xd6\x01\x95!\xb87T\xffv\xa8\xc7\xc2\xe5Z\xed\x1d~3\xa9\x8f\xcb\xb4\x9a-\xa1\xe5\xec:\xbfa'\xcf/4\xb23s\x17\xe7\xef\xa1\x7f\xda1\xb7\xf0\r6\x1alJ\xe4\x9a\x8a`55\x07\xcf@\x85^P\xa7q)m\xe4\xc4\x96\"G\xe0\xac3\x97*\xda\x95\r\x0e\xdb1Ey\x14\x1cH\x8c\x12v\x96\xcfcuL.s\xcc1\xfd=\xe6\x0eh\xbdk\xf7\xa7\xf9r\x0c\xfe\x1bBXh\xf7\"e4\xbfc\x7f\xebVQ\x17p\xfaOV1Nw\xc9\x86\xe3\xccG\xcb\xa3k\x01\x9cJ\x8f\x8a@\xf1\x0bV\xebZ\xa6\xe7\rB\xfc\xa8|E\xef3\xe7\xfc\xd1\xac\xb1\xecHp\xd8B\xc0.7\xddJB\n\xb1\x81\x88W\xea\xc8\x8b\xf1'\x82\x08\xbc>\x8b\xb1\xfc\xd3d\x1b\x13>\xf3\xf7\xff\x10,\x88\xd6\\(\x1c\xc4\x88\xf7|XS\xa91\xe3\x0e\xcb\xdcJp\x13%\xf3\xbe3\xb1K1>\x85\xad\xf0\x93\xc9k\x7f|\xcb\xcc\xd1\xb7\x943\xcd\xf9\x13\xb9\xd0_\x85u\xda\x1d\xc1\x1f\x1dGv\xa1\x0et\xb3\x84q#\xc7\x81\xcdY\xa4ml\x10`6\x0es\x1b\xec\xd0\xc9\x82\xe4\xc9\"\r0\xdd.^{\x82\xb3\x03p4%\xffL-\"\xbe\xb2\x089` \xb8\xb9?\xc1\xa4aR\xb7\xe7o\x92\\zB\xfd\x02\xd5\xea\x16\x7f\x8d\x1e\xe8\xedJ\xa3Jr\x8c4\xa2/6`\x06\xafc\xe6\xc7\xaa\xec\xf11\xf2\xfe\xbazix3\xe3tk\x0e/\x181]\xdcV\xa5\xa5\xdf\xd7\n\x14\xbbt9\x11\x16\x1b<\xe5X\x1f]\xb1\xd7\xe5\xe69\xa0\xc9\x92\x10'\xa6\x0e1\xe3?\xaf\x96\x856\xa4e\xf8\x1d\xb3\xa9\xdb.0\xbb\xbe\xdcmH\xa9\x99\xe3\xcbN\x1a\x1b\x07\xc9U\x93f\x16^v\x92\xee\xed\t\x9f\x9d_\x0e\r\x1f'\xb0\xf1Y;c\xc7p\xe0<\xbb\x01\xea\x0b\xa1\n\xadAk\x10\xa7/A\xff\x86\xb1#<\xc5\xdbz,q\xe1\x86\xf2f\x0b#U\xe7\xaf\xce\xefS\xcd\x85g\x97\xbehd~\xf4\xda\xe9\xf0XvK\x07\x9b\x8f\x98i\x9d\xfc\xff\\\xb1\x8b\xbex\tZ\xc3\xa0\x07\xa4E\xae}\xd8\xcea\xb9?Z\xf5N\x9a'd/\xf1\x0c\xf9\xca\x8b\x02\xa4\xaai\xe9\x9cP\x0eJ\xecZ,l\xc6\xf6\x0b\x96\xd5K\x92u\xb1\xdf\xa7(\xe7\x1du\\H\xaa\x8e\x11\x8a\xfb\xa1\xa6\x8fP\x87?\xd6\xf4\x86\xb63\xd1\xfccHu\x89v\xfd\xed\xc8,\xad<M\r\xee\xc6.N\xf8\xd8uH\xe2\xb4h\xa0\xd7F};^\x1fcUm\xc9~\x1f\x8d\x1b\xea\xd6C\x05\xc7WK\x12\x8c_\xb2\xae\xf3$)dP\x91\x08K\x85W\xf5\x9a\x16c-\x08\xecG\x13o\xd3A\x1a\xe9\xec\xb8\x9c/\xc3.v~\x92w\xae\xba\x0e- \x05\xb3\xeeh#\xceW\xef$\x05\xb3\x9fx\xc7\xd9\xd9\xda\xe7E\xe7,6\x1b\xe3\x8e\xca\xd3C]4\xcd\xc0\x98\xd5\xbe\\\xa2,\xb5\x1e<\xaa\xd6\xb4\xd8\xf5\xaet7\rqO&2\xac\xa3\xbd.&m\x94j\x7f*i\xf7\xb5\x17J\x88tp\xec\xdb$680;\xa4}\xed\xf9\xd9\xbc\xdbXi\x07\x88\x8b_\xc8=\xecXW\xb0\xc7\xc0\xa0\x0c\x85\xcbX%jq.\x13\t\x7f\x1f\xfd\xc4\xf2\xf3\xf7Y;\x0b\xd59\xf8\xf3DEY\x9d\xfc\x93I^\r\xe5\x80\x94\xa5P\xcc\x97y\x86\xbdG\xb8\x9c\xb9\xbeR\x18\x03\x06X\x8d\x0f\xfd\xbd\x9b\x05M\xf4\xcb\xc0%`\xc0\xba\x7f\xd0\x99\x88^\x89\xc5r\x82\x0c\xf7\xf5\xbb\x91\xf8\xd9N\x1dE+\x838 \xc8\x0f|\xbd+\xfd\xeb\x0c`\x9b\x869\xd1d\x02)\xfb\x80H\xde\xc0qZ]\xe1\x82\xea\x80\xed\xce\xda\x02`\xe6~\xf3\x0f\xb6\xa2\xf6`2\xf7\x10v#9\x15\x03\x8dK\x7f\x9d\x8a-nG\x0f?\xac\xcf\xe14\xcc\x0bP[\x0f</ :\x1c\xaepM\xe9\xa2x\xb3\x13T\x10,\xbd\xd4\x86\x97Y\xfcI9",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"title": "Mistborn: The Final Empire", "author": "Brandon Sanderson", "pages": 544, "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\xde\x06\x01\xd1\xed\x8aoh\xb5\x88\\\xaeW\xd7m\x0e\xba\xf1\xac\xbc\xc7\n\xd6[iza9\xb4\x1f\xeb\r\x9e\xc6c@k\xa8\xc4\x9a+H\xe6\x96\xd6^^\x93\x02h\xb9O\x9f\xd4;f\x92\x8e=\xe5\xed'\x071\xf1\xa2\\\x96\xd4\x9e\xd8\xe6\x8e\x83\xf2%&\xcb:H\x0e\xc4\xafr\xdc\x04p[\xfd\x08wMv\xc1\x02\xb7\xc0\xfcC+\x9e\x85\xc8\xc3\x1ep\xaf\x8b|\xfb\r\xf7\xf3\xda\xa1\rl#z{T\xd0R\xf9\x01e\x88y\\e\x8f\xa3\xcd\xe5\xe1\x82\xe8F\x99\xa7rd: q\xfb\x07\xa8\x19w\xdf\x95\xef\x82\xf2\x86\xb6`\x18\xde\x99\x8a;\x86\xda\xbb\x93)\x82\xb25d\xb11sSJ-\x0e\xa2lJ\x12\xa02\x05`\x9azA\xd85\xbcO qoz\xb7\x8a)\n9\xae\x9b\xefZsp\xd4n\xf7\x8d\x85(7Dn\x7f\xfe\x81\xdb<\xcd7\xca\x8d\xeay\x91\x92M\xde\x01\xed[l\xd0\x9c\x1er^.A\x1e\x97\xc5\xb2d\x8d\xfe^V\xa0\x8d\x97\x12\x1bZc\xa6\x026N&\xf6\x91,\x9cw\x08\x83T\xc3\x90\x8d\x13\x92\x01\x02\xbf\xc1\xdb\xf7sX4m\xcf\xf3:\xc8\xf2\x92\xd6,\xc0\x0c\x89\xef\xb2C\x9f\xaf\xbf\xe7@\xab^\x17\xee@\xea;\xfb\x0b&\xab\x9b9\x14\xae\x97\x84L\xdc&\xf3\xb9\xa2)8\xd5\"`\xbc\x02l\x88\xd3\xe3\xd5\xea4\xd3\x93\xba\x0cui\x14\x87\xac\xcb\xcbc\"+\x9e@\xf9yG\xb7\x0f\xda\r\x1d#\x0c\x10r\xf5AS\x94x\xc8\x98,\xde\xf4\xfd\x8a\x02&;\xd5\xbf\x96\xc6\x9e,\x94\t\xbc\xce\xb0_\xc5\x8a\xc3\xe6\xa3;{#\x8etc\x01\x8f\x1f\x02\xcac\x1aZ\xfc-GG'\x0f\x7f\x05\x1f\xa1\xbfv\x8b\x9a\x96{\xcf\xd2\x1ar\xed/\x16/c\x85P\xa1\xeb\xfc\x1c\xfaq\x9e\xd8\xa1\x87\xbaL\xaf\x9b\xeb\xcb\xb8\xe5\x82\xbeC\xcb\xfc(\x01\xc2,\x8d\xb6\xb4jh\xbf\xbf\xcf\x8fW\xfb\xb2\xa3\x83\xa3\x15\xe1E\xf0\x17o\x1d\xc8\xc9\xa3\x06\xd4\xe4\xdbv\x93\xd9\x81,\xcd\xb6c=\x96\xd3\xd6>V\xa7\xb0e:\x96\xb5\x87\xcfr\xd0\x0c\xfb\xe7\x9cn1I@\xc4\x9d[\xd1\x1dX\x80\xf6\x17/\xbb\x9b\xa8f\t\xbb\xd5\x15\xb2\x18\xe6Rv\xb0\xbc\x7f\xf4\xb1\xaf\xfd\xf9p3SM\x10\xdd_\xa2\x7f,+<K\x83Di\x87v\x17'H\x894\xa7'\x90>r\x96\xe5\x1c\xc5\x92\xdab\xca\x9d\xf3\x1d\xb2\n\xd1\xa7k\xda$\xbd,\xcb\xb2N\x19\xa8h\x7ftp?\x15i\x9bZ\x94\x82OO\x004\xc3O\xe1,\xfb8\xf7\xa5\x9d#\x87\xadm\xf4\x9d3\xc2\n?\xc8\xe3\xd0I\xe2lb\x1f\x9b\xd5#<\x8d\xc8\xad\xee\r\xec\xe4\xf1ZX\xfc\xd5n\xcf\x89r\xa0W\xe3\xcc\xed\x8d\xf7d\xf1\xe2\xe9_\xfe\x80`\xf8&\xc2\x1e%\x9f\x18l\x92\xf9\x94\x8dX`\xdb\x14\n\x8f\x82P\xdf\x99\xe1\x13y\x1c\xd2\xe1\x98|k|8\xb4\xaa\xbd\xea\xc3\x91#D\xda\xee\xa2*\"\xab\xf2aQ\x95\x92\xc1@\"\xb3ki\xfb\xa0\xbdr(s\x918\xf8^\xd3\x1aBak\xd1\xac>\xfd\xa9\x8a\xed\xb5\xd7\xd73?\xb2\x1aD+\x07\x8b\xc0\x83`\xa5\x86\x80\xcb\x17W\xd9\x04-\xd5/\x1a\x9c\xec\xf8m\x96\xa6\x9f\xb0\xf0\xf9@Zn\xa8Vb|D\t\xd1\xc0\x14uA+\x15\xee\x85fs\r\xcc\xff\xe9\x88\xbe\x9e\xd3\xf5~\x01'\x0c\xdfU\x0c\x1c@\x00\xee9\x0e\xdf\x9d\x19(Q?x\xca\xfc\x00\xd6\xac",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "title": "Mistborn: The Final Empire",
                                "author": "Brandon Sanderson",
                                "pages": 544,
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
    }
)
async_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "params": {},
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\x8b\t\x01\xd1\xed\x8aof\xfc)+\x9d\x90=\xf9\xc29\x00\xd5]\x1c\x9a\xe6\xf00>\xb7\xe4\x90;\x8f\xd5P\xc0A\x96\x89]x\xf3+W\xfan\xa1\xe7\x1f\xf2j\x0ehYc\xa1\xac\xc7b\xb0\xc1\xa9ak.\xb9m\x99\\\xe8\x9fe\xd8\xd7\xd0\x8aA\xb8\xfe3\x03\xbb^\xe6\xb7$\xa8\x0e\x01\x1a\xf5Y,\x8c\xcd\t\x06\xe8Sy\x16\xcdEG\xbdV\t\x97\xba\xc9Bj\x19\xf5\x95\x1bu\x1f\xca\x85\xb6\xa7O-=\xd80\xb2T\xe9\xe2\xbb\x87\x89\xa5\xc2\x90AG\x93\x05\xc5\xfb\xc6X\xddy\xa3\xb5\x9f\x8d\xd9}\x1e?\xf0(j\xa5\xf3\x8b\xc7\nW\xe2\x02T\x8e\x82\xe4\xad\xb0\xc7\xaf\x95\x1f\xdd\xa4\xbem-X\xb2\x8f\xfe2:\xe301\x06\xd8\x97\xd2*\x8d\x90r\x08\xf0\x17\xf1\xba\xfdo\xd8\x07A\xcc3v\x00\x88\xfcGq;/\x03\x07#\x1e\xf7F\xdc\x9a\x9b\\'$\"6\xd9`\x0bQ\xa8\r\x94\xd7\xa3\x94\xa0\x061f48v'\xa5Qa\xe9\x92'<\xbf\x89s\x18ke\x8ah\xed\xb4\x14\xce\xeck\x98\xd0\x98\x86+\xdb\xa6\xfa(!\xcc1\x96\xd4EZ\x08bK\x9e~\x8b\x15m/a\xca\xd0\xfb\xe0\xbf\x82\xfe\x0bKJ\xa4\xde\x1fz\xcc\xa9\x7f\xab+w\xb1C^1u\x8e\x04_\x9f\xfb\xf4#\xa4IWJ\x7ft\x92\x01*\x946)\x1bb\xf2k\x9c\xf61\xf9\x1d\xec\xe3QK5\n\xb5\x19G3\xdc\xdfT{C\xf1\xf6&\xd7\x1fN\xaf\xf55\xb6OV|G \x7f\xfe^\x00\xf9\xff*\xc3\xbf\xe0\xa3I\x14\x0e\xa8\xee\xfc\xe0\x02KV\xa3\xdf\x14J\xdb C\xa0\xef#\xae\x8fy\xfa\t|\xcdE\n`02\xab\xa8|\xd0\x99\xae\x99\x82\x1e\xcdT,;\x82\x93\xf8\xfd*\xf4\xe3\xba\x1e\xea9\x1f\xe4\xc0\xbd\xb9\x87\xf0K\xda\xc0\xc5\x1bNM\xad\x7f\x87\x9d\xa9J\x85\x19\x9d|B\xc9$\x97!q}\xeb\x1d\xcb\x93!\xfb\xc3\xa1_7\x8f\xe3\x93\xfd\xa2Ff\xde\x94Z\xec\x92%\xf8J\nS\xf0C\xdd\xe4\x0fP\xf9v\xcb\xb2\x9cW\xc2\x9dh,\x94\xfej<\xfdp\x1d\x1b\xb4=\x8e\xa1`V\\.\xd5\x0bq\x14KVs\xc74\xccRG-\x9e\xc7T\x8f\x95*\xd7H\x0c\xe8W\x98F\xcbL\xe7t?\xf8\x07\rW\t>\x83\xebe\x17~+r\xb8\x96]\xce2\x93\xbcoF~\x91I\xf8\xb2b\x18$w$4\xa2\xe0\xf6r%\xb3\xe6q\xd2Q1\xefiUV\xb3Xm\xc0_\rmS\x08)\xf1\xd3q\xbf\x1c\xb7\xfd\x0f6\xfa\xe8\xdb>}_\x8d\xd1#X\x9b\xee\xbb\xe9\"V\x7f\x0b\x02\xc3\xf2\xdcqkf\xb9\x1eN\xf1fw9\x10\x14*\x07\x1b\x0c\xd6\x0cq\x16|\x95\xd7\x911\xab\xff\xed\xdb\xeaa\x98\x05j\x8a{\x89\xfda\xd2\xff\xe4\xbe>\xfc\xc9%\xb2\x10\xbb\x90\xee(\xad\x9f-\xaa\x00\xf6\x92\xea\x8bY\xa4\xd5\xb5\xfd~\x84F\xde3\xb7\xe6\xff\xdcq\x0f\xbeL\xa99\x94\xd4\x83\x0b\xce\xd5\xac\xffK7\xbeW\x04l\x13;\xc2\x8bm\xd5\x16\x16G\x0b` L\xde/\x99\x10\xaf\x95\xf8TE%\xcf\xdd\xb1uf\xb2$\x0eA\xa1.\xb6\xb3\x00\xbeX\x8ag~\x14^\xb8\xdc\xec2\xc7[\x1c\xe6\xd7\x8c\x93MN \xacn\xa2\x18aic\x99okB\x1e\x0c\xb8\x11\x8d\xd6%\xbeq\x10\x15\xcc\x8e\x1bS\x0e\xbb\xa7NES\x12M\xad\xadzI\xd0\xc0\xbe\xa4\xf8G\"\\\xb2\xbe\x81j\xed\xf0\xbf\xcb\n`\xc8\xfb5m\xb8|\xee\xc3G\xca\x8c\xce\xee\x16#\xceo\x8e\x019\xf9\x88[\x15|\xfev\xe2\xbd1\xe0\x1a\x02\x90P\xb8\xc3r^U\x1c\xc3i\xe4V^\xc2\xca\x04~\xca\xf1\xff\x0b\t|\x0cO\xc8\xf4\x8d\xb7\xb5\x84\xcc\x85H\xb6\x9e\x19\xa0\x89\x15\x12[\x05d\xa4\xce\xf3o\x03\x19G[M%\xb0i\xec\xffw\xcb\xffN\xc5\x07\xb00\x1db\x0f5\xfaHz$\xf5e\x8d\xc0O\x80i\xf3\xb0\xa9/\x1d\x9b\xcc\xb2t\xa9\xa0\xe0We\x8a\xa1\xfb\xad~\x8dA\xf4\x1c\x89i\x9d\x8c~\xe3\xc0\x987x\xe6\x05\xaa\xb1+\x01z\xfa\x8e\x15(\xbb\xe8Lw\xf5\xf6\xb9\xb1\xdf\x050\x93>i\x1e\xa6X\xa5O\xff\xa1\xddK\xa8\xb3\xa1\xb5D\x89+5\x08\x8e\x89\xbd\x99\xb3G\xb8 U\x1d|\xe5xT\xf3I\x14\x04\x91\xb0\xef*\xc5\xb7\x07\xa0>\xd2\xa1R&\x9d\xd6V\xe5\x1f\xdb\xe7v2\xdf\xce\x16]\xba89\xba\x15\xbb\x8f\xb5T\x1c\xb8\x02\x89\xf5Nc\x0f\xe3_\xd7l\r\xb4\xfe\x12nA?\x8f:\xda\xd1\xc1\xa3g\xc2\xed\xac\x96\xc7<\x01\x00\x19\x08\xb7\xdbZU\x98\xd2\x85\x0e\xcd\xec\xa0\xc1\xbd~\xe5k\xcf\xdej\xe8\xc5",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"title": "Mistborn: The Final Empire", "pages": 544, "author": "Brandon Sanderson", "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n\xd7\x06\x01\xd1\xed\x8ao\xcf\xbbE7\xb9H7\x14BJ\xf6!9q\xa4\x99F%\xff\xcd\r\x06\xee\x80dj\x1fM3q>\xa3\xaci\x08i\x00\xeb\x03\xc5\xdf'\xe5;\x86\xbd\xb9VL\xa2\x83`\x07\xd0\x84\xbcu\xd4n\x15\x13;\xc4\xbdV\x17\xb8\xf0\x9a\xdak\xca\xfbPp\x02:\x8c\xda\x0e@\x0eDtL\x88\xc5\xe4\xc8\xb1E\x86?v\xf6\xbb\x92#\x8a\x84\xf7m7\xe4\x8d\xa0\rd\xb9H\xd5\xb6\xc3Q\xe6\xe0\xa7\x9b\x8a`\x1e\xc9e\x08\xca\xc0n\xc8\xe7+\xa4\x9951Y\xef\xce\xa5\x9c\x8dN\xbcy\x85\xc2\xe0\xe8?\xc2\xbb\x8c\xc9\xc4\x1by\xe3\xfb\x00\xd8\xd5\xb1\xaaIj\xda4\xaa\x9b\xddeSl>\x0b\xa2]\xcb5\xd5D\xaf\xf0)\x03\x0f\x94E\xa5tR\xb6r\x10\xea\xbd\xd5B\x01\x15Id?\xf7\xcc\xfb\xcdPs\xa2_\x1f<\x9f\x04\xc4\x0c\xf5\xe6L\xe9\xc9\xde\xb8\xf4'z\x15\xc5Y\x7f\r,\xd4a\\\x9d\xeb\xcc\xc6\xb5\xfe\x156\x1d\x9e\x9c\xd1w\xf2\xf1cTX\x8b\xc4\xe3*uo\x88:]\xf6\x89\x93\xe8\xee\x95\x86\rr\xf13\xfe\"\x1a\xfd7y\xab5\xd9\xd3\xf6\x89\xe1\xe2)\x93\x15C\xa7\xfa\xa0d\xf9i|\x981\x8c\xba;\x7f\xc3z\x14\xb5e\xcf\xe4&\x809\x1b\x8f\xb7\xe8\xeaI@\x9e\xa9\xcayw6G;P\xabv\xb3G\x0c\xef\xeb<\xfb,7\x99a`&94aW\xb6\xa7\x14MJ\x80\xc6\x9f\xe6K(\xa9<6\xdf}\x98F\x96N{\x02QK\x9eu\x8b\xc0\xa3{\x00\xaa\xd0Jb\xf2.^\x84\\@m\\Q\xdb&\xbcr\x01\xcbHO\"\x07\xcf\x9e\xee\x9d\x8e\xf9\xa7\xa5\xd90#\x07hv\xf4zJ\xab\xa8\xfe\xa0\xe6\xdc\xcd\xba\x9aK\x9a&r\x93{$\xfe_\x1a\xb3Ru\xd7H\x98W\xaaO\xf8\xfb\xbe\x99X_+K\x87X\xc0\xfd\x9d\xc7\xac\xb2\xbf\x12\xbc\xa0\xf5\x9e\x9b\xcb\xce9\xb1\x075E.\x1a\xf7\xc4\x84\xee\xbdp\x82\xa72u\xbe\xcc\x8e\xf6\x86\x08\xb9}\x06:$\xd5\xa7M\"d\xf6\x02~\xc8\x89\xfd\xbe\xbd2_\xa7Y\xd0\xa9\xfd\xe0`\x18[\xb87r\xfdG\xddz\x93\xb5\xc7b\x8c\x8fE\x93L\xb0\x1a\xba\x85s\xdd:\xe5L\xdc}7\xba4\xa2\t\xd1\xaf`JU\x11.R.'i\xe6>{\xb0.\xae\xcfV\xd7@zf\xc1m\xbf\xd4<\xc9\x0f \xa4+\xdbe\xe4\xe2\x9e\xd5n:\xdc3\x01K\x91<\xe6\x19\xdd\xfd/\x85\xces\x85\x06O\xc8\xa8l\xa3\x1d\xb6\x00\xd03p)\xc9\xeb\xb2 \xd1\xa8\x0c\x138h\xf8s\xc1\xf6\xd0\x97\xf3\xb0\xef\xbdG\xb9\xf9-\xdd^\x01s\xb5$\xa8\x15,\xd8:'\xcb\x8d}\xbc\x7f'\x86no^g\x82\x00C\xcd\xe8\xe9\xef\xc0|\xd6\xf7wv\xef\xfd\x9d\xda\x0fk`Bg\xd6\xb3\xfb>\x93f\xe3Ceez\x983r<@\x15\x9b<\xbd\xcd\xbeN\x8e\\\xb2\x0507\xe7\xfd\xe8Bo\xbd\x1c\xa9\xc6\xd9LF\xb8@*\x9d\xaa\x9fh\x8a@\xc8\xca\xf6\xa9\xfa\x89\xa9\xc2V\xff1Rc\xc9m\xa9\x0b*?\x9a\x0f\x9ah\xbc|\xb0\xe6\xe8\x0b\x0ec\x84wg\xbb3;\x89\xcd\x10\x89X\x86\x94p\x92#\x7fwF\xe7\x870\x0c\xcd\xc5X\xdeN\xc8\xf4\x0f,\xd7\xd5\xc6\xe0\x0c\xc9 G\xb32\x85\xa8\xe4\x84\x1eJdP\xd1\x9f\xca`\x88\x9a\x9c\xc3\xc5r\xf69\x00\x9b\x15\xab\x8a\xcfs\x1cZ\x97Br",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "title": "Mistborn: The Final Empire",
                                "pages": 544,
                                "author": "Brandon Sanderson",
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
    }
)
stream_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n$\x01\xd1\xed\x8ao/\ty\x9al}\xc3\xc5\xbfY\xa8\x96\xaaQ\xf9\x86\xad\xdc\xd3\xa2\x8a\x90\xbd)A\x96\x01\x8c^q\x9a\n\x85\x01\x01\xd1\xed\x8aolN\x87\xf8\xf3\x97\xf1\xb7\xe1\x1b\xc4\x02\xe5]\xde|\xc4\xfe`yC\xf2C0\xf2\xbc\xee\xbbf\xe2s\xde\x9c\xc9\xad2\x9f\x83\xdf\xa5\x15\xc3!(\xcb\xef(\xac\xb8\xf4\xab\xdb\xef\xc1Q\x0eS\x9a\x02\x16\xe4CO\xb6\xdc\x8b\xe3\xfa\x04\xd7\x01`\xa92\xec3\xcf\xa0\xbc\x8cm\xaa5O. \x08\xbe\xae|\xbaQ?\xdb\x07\xa1\x8d\xca\xffS\xb2O>\xfb\\\xa5\x88\xbd\x80\xfc\xa5\xbb\x11\xeb\xa7\x0f\xa1 \x99^ \xb2\x9d\xa9\xa4\x1c\xc6\x8c\n\xfa\x01\x01\xd1\xed\x8aoZ\xff \xee\xf7\x0ee Ur\x04A\xdc\xb7\xbat\xb1\xb85\x186_\xe0\x7f\xec\x01z\xb9\xbf\xa4\xb9\x0f\x14@\xde?ax\xe8\xe3Kd\x80\xd7\xf0sP\xf7'\xa1\xdb\xdf\xad\x8a0q\x85\xb9\xb2&l\xaa\xd2R\x82pOL\xc2\xc3\xdd\xe7\x9b\xd5S&\\\x90\x08\x81\xd0x[\x8b\xeb\xe98eJ`\xba\xefl\xee\xb3\x9c\x98k\x02\xed?\xa4!\x18\xb1h\xa4<Ulnn\x82(x\xa9\x8d\x96\x83}g66C\xf6\xc82\x93\xca\xd5\xde,ev\xfd\xe2\xbd\xf5\xc1;\xe4\x9e>\x1f\xa3\x92\xf4\xa5\x12)#\x96\xf0\xfb\xdfA\x98\xc0c\x9d\x06v\xce8\xb9\xd3\xda\xa9\xb7Z\xc1\xc7\x98\xd7\x7f\x7f\xfd\x18\xef:\x978?3\xf7\xfcM\xe5\xda\xd5dt\xfd\x8d\xcdi\xe0\x15\x135\xbc\xe9\xbc\xfb\x0c\xa4\xae\xd5/ZX,\x94\x05K\x17m\x85O\xae\xf2P\x0b\xcf\x15>\xd9\xe0\x1d#-\x9c\xac\xf8\xee\xd7\xb1\xd8\x97\x016\xc6\xed\xf7q\n\xd3\x01\x01\xd1\xed\x8ao\xc4\xf7\x01\xddG2\x1f\xc3?X\x19\xb3{\xe8;\xe0\x1bA\xc4\x8aZ\xc3\xe7h{6J\xb2\xe0-\x87\xc1\x7f9\xd7\xf8qX\xab\xbe\x14\xdbwu\xd4\x9f\xeb\x17$5\xf3\x0277o\xf9D\x03\x80l\xb0\xc0\xad\x13\x17\x00\x07gWI\xbfO\xa82\xcc}\x8eD\xe5W?\x88\xa3-\xd5[&z\x01V\xfd\xf3e;gMr\xaf|\x19\xc5\xee\n!6\xee\xc9sO\x92@\xd5,\x16\xca\xf9\xb9\xab\xc1\x96\xac\x1bFA\x03v\xb2\xbf\xd6\xc4E\xcf\x1f\x86r\x9cO\x1b\xad\xb3\xd8\x1cY\x1dn\xce\xb2GbQ\xaa\xbbt\x8c!\x12\x10\x99\x869\\\x14\xbd\xcb\xb3\n\xf4.\xe6@O\x948o\xe6\xd8^\xa6\xa9\xce.\xc8\xb43s\x85\xe0\x89\xac\x98;\xa7\x87\r\xc47X\x99\x1f\xb3E\x1d\xcfiC\xc6\n\x9b\x01\x01\xd1\xed\x8ao\x1a?\x0f\xda\xb9z\xfc^\x12\xe7yNV#b\x05\xac\xaf\x82:g\xb0*$TR\x1b\x91\xc2\x8a\xa6,\x1b\x85xm\xcd\x10\xb0\xcaH\xf6_\x00\x08\x1fu\xbe\xb5\xb7of*\x04\xa7_\xca\xac9\x9c\t\xbe\xd2\x07\x87\x99}\x9aKVg\xe62{\x07\xf8\xf6\xb8\x05\xc7\xfaL\x9cK\x8a\xc5\x8bZ\xe2\x97+\x93;\x80b\x9a(_t7\xdfB\xe7p\xc4$\xa4\xde\x10\xce<\x8a\xcf9\xca\x03\r\xe8V3\xb5\xf1\xe2Z\xffQ \x18\xdc\x8d\xbby\xc3\xf7\xd2\xfc\xc5\xe9$?\xa5\xe9\x14\xaaJ\xd6v\x1aO7\n\xcf\x01\x01\xd1\xed\x8ao\xe7}f\x9e\xb0[\x91\xb6\xb5K\xf55\xd0\xfa\xb4\x9b\x11\xf7\xc3\xdd_\x814\xfa\x10\x912\x85j\x1c\xfbo\xa3\xeb\xbbn\xbaL\xaa\xf9\xb0~Y\x80J\xa7\x13i\x8f\xde\xc8\xd5G\x0b\x82\x95\xc2\xb5\\u\xceb\x86\xb0\x0bz+xSo\x98\x94\nr{\x16\x97\x9f\x84\xd1\xc9\xa0<\xd3\xbf\x93\xdc\x97q\xcap\xe7\xd2\x8a\xed\xc4\xea&\xda\xd4\xf2\xbfa!\x99F\x88\x92\xf3\x91\x94\xbe\xd9J\xd92\x9c\xd8\xd2\x98\xeeh\x05\xc7g\xfa\x8f\x95\xe0\x82\xfe\xda\xf3-^\xe0z\x81 Vm=\xefo\xa0\xe1\xe2{\xd2\x9e\xc4(\xe2\x19+\xab\x1f\x1c\xd6\r\xc1\x84\xb4\xbc\x12\x8d\xa6\x0f\x1a\xd4\xbf\xdd\x96\xfd\xf3\x8e\x1a\x82g\x0e\x05\xeb\x1d\xabSC\x94[\xd7\xdfR\xa5\xe2\xe5\xa8\xe5\xfbsr!\xaa\xd9\n\xc9\x01\x01\xd1\xed\x8ao\xe8\\]\x15\x0b\xd2'B\xa4\xc3\x07\x85\x8f\x12O\x02N\x03\t\x99\x1f\x99\xb6\x15\xab\xfe\x83\xffk3\x030\xc2\xb3\xc4h\x9b\\\x15\x82W\xad\xbe5\xf3s\xc3\x16\xd9H\xa2\x96\xafB;e\xce\x06\x0e*6~\xa4\x96\xfd\xd3\x87\xbes\xd9\x01\xbd\xb58\xc0\x99\x12\xea\x13OM\x04\x1e9\xfb\xe2QEi\xfa\xff\x92\xa9Iq\xc5z(W\xb3Y\xa7/\x12\xedSe\xcb\xa4\xd02\xfb0\xf4n\xad\x1f\xebJC\xbb\xcc\xd2{`\xaal\x11\xdf\xc7\x96\xe2:\xa7 \xa5\x8d\xe6\xa5\x08.\xe9\xc5\xa8B\xdc+\x82\xf65D\xaaw;\xdb\xc5\xf5\x87\xe9\x13\x94\xf5\x851[\x14\x15h\xcb\xe3\xabK\xe9\x00>\xa5ULz\xe9\xa7\xbe\xf6Z\x01T\xd0Mb\xff?M\x9b\xd0\x18A",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"publication_year": 2006, "author": "Brandon Sanderson", "pages": 544, "title": "Mistborn: The Final Empire"}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b'\n$\x01\xd1\xed\x8ao\x9e\\\x95Suoc\x94\xaeN\x14w\x86}\x08\xef\xea\xaf\x1b\xa9~D\x19q=\xa8\xfe\x08\x13\x17\xa6\n\x7f\x01\xd1\xed\x8ao\xc8UB\x13Y\x8a\xf0l\xb5\x94\x85o6\xfa\x0e\x81\r-\xa4<x\xcf\xa2\xb1\xd5 \x98\xf1Bf\x02\xbb\x13\xaf\xc2\xf3\\\x8c\xdc\xe2p7\x83|~(:\xad\xe3\x0f\x1e8\x06\t\x82\xf0\x94\xa9\xaf\x12hG\xef\xd4\x8f{\x02[8\xde\xbb[\x0b\x16\xee\xc2n\xb4\xeb\xcd\x9b\xc3p)L\xf4\xa5\xf4[\xf5\x88v\xdb\xc3G\xf5\xf8]\xcf7]\xc0\x9a\xaa\x8dx \xadTX5\xc98\xff\xc7\xc1\xca\xc6\xa6+lO\n\xc3\x01\x01\xd1\xed\x8ao\xd4\x94yh\x96\x9b\xc7\xd5E$\x08-\xca\xce\x04Y\xa6\x87\xa2\xd4\x98\x94Y\x9ck\xa0\r~\xf7\xa3\xe0t\xbfO\xd7\x93\xeeYn\xe7~(\xde\x8e\xb4J\xbepS\xac\rx\x1c\xe9.49\xc5w\x10\xc0\x1f\xf5F\xc0\xbajp@\x9f@\xc1\xae\xd0\xf0\x81!\xc2\xb1\x99\x0c\r\xb6\xfc\xe4N\x18\x15X\xa5c>\xe9P\x17L\x92\xcb\xf5lBx4p\xb7\x1c+\x91\xd4\xa7B\x02&\xae\x13Q\xa9\xd9$F\xca!B\x1eI\xf2H)D\xf1\x80\xd9:\x83]\x9d\x05\xd6\xb5L{\xa6\xba\x07\xce+\xe0!")\x16\x97\x06\xd5c\x06\x99B\x85\x05\x80}\xbfC\x0f\xe3\xfa\xd4Gu\x17\xc6 %T\x80\xb3Kt3\xafo@+)fY\xf8\x197\n\xc0\x01\x01\xd1\xed\x8ao^\xf5w\x93$\xd3\xa0*s\xb7\x11\xc7h<\xbbq8\xf2\xe8\xcd\xbfjiAx\xad\xdd\xe6nP\xa6J\x8c_f<\xf21N\x94\x85N\xda\x9d\x01\x9b\x82\x8a9\xb1Q\xb1;\xdb\x83\xe1/\x15\x08\xc9bm\xc5@\xf1\xafh3w\x82\xc5\xd9A\x14\xaf\x82\xc6\xcfH\x13W5\xde\xd6\x85\x92\xbf;%\xe1\xfe\xd3f\xb7\xe3\xc0\xe2\x9e\xdcv-$\x0b?W*\xc9T\xc7\xb3~\xef3a\xa2s#\xc7w\xc61?\x05+5\xaa\xe0@\xc3\xddr\x00\xa0\xdd7\xb0\xe2\x81\xe4[\x1f\xba}\xf9\x08f\xf2\x96\xe9y\xef\xdf\t\xb9\x08\xe6/?LvHn\xa9\xad\xc9L\xc2.\x05\xdbrW\x92\x07\xc3\x0b\x93-\xcd\xc8E\xb4\x1bq\x9d\x8b\x15\n\xb8\x01\x01\xd1\xed\x8aoU\x11\x80\x10\xb4Zr\xb3Ps\xd2\xba!\xf9\x103=\x96\xe1.\xcbd\xdb\x8d\xf10\x03^nQ\x19\xc5\x95\xa4$K(H\xbe0a\xd1\xa4\x032\xdf\x1e\x87&"\xfe}\xd8-\xf4\xe4\xdcDb\xc8\xc1\xa6\xc1\x7f\x7fk;\x8c0\xf6\n\xe0\x10\xc9}0\xb9\xa7\xef\xef`\x0f\xb1\xc7\xb1\x13\x1e\xad\xfa\xd1)\x8f\x03\xfa\x8a\xfa\xeb\x0eh\xf3g;;\x94f{x\x04\x10\xb2\xaba\x0c\x96FB\xc7\xb2FF0Q\xb5\xb5\x81\xb2BB\x80\xea\xe5S$Q5\x98]Z\x9e\xde\xc8\x81\xc3I&{M+\x87u\xf6\xceR\x9b\x12\x84\t:\xe6\xdb5\x88bPH\xa7\xbe\x03\xe8\xadO8\xd2#qf\x88"\xaf\n\xa4\x01\x01\xd1\xed\x8ao\xa4\t\x9d\xb0\xa1\xca\xf4\xa4\xb3\xe6\xa7\xa7z\x13\x14\xa4$\xa3\t\xca\xc1:\xd6/,\xcd\xc7p\x96\xee\':\xe5\xe4X\x13^\xc9\xceyJ_\x16w\xf1\xe6Z\x1f\x98\xb8k\xa8\xa0\x85U\xea\xf1\x95\x08\x80i\xa7\x96]\\\x0e\x1d\xa4\x17\x8c\x7f\xfe\x18\xb5\x01\xc0\xb2\xb9\xc3\x16%\xb1|qm\x9a\x0e\xf4\x95\x85s\x04%\xf0\x02\x85\xfe\xcb\xa2s%\x01\x8d\xe3W\x95C\xce\xee\xca\xce\xa3\xd3\x90\x8d\xd2v\x12\xee\x01\xfaJ53r\x95\x85\xd36C\xa8\xd9P\xdb\xb3\x02n\xfdexIe!T\xbew\xe1N\x8f\xdf!\x10\xe5#\xc89t\xadt',
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "publication_year": 2006,
                                "author": "Brandon Sanderson",
                                "pages": 544,
                                "title": "Mistborn: The Final Empire",
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
        "n_chunks": 3,
    }
)
async_stream_snapshot = snapshot(
    {
        "provider": "google",
        "model_id": "gemini-2.5-flash",
        "finish_reason": None,
        "messages": [
            SystemMessage(
                content=Text(
                    text="Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output."
                )
            ),
            UserMessage(
                content=[
                    Text(
                        text="Please look up the book with ISBN 0-7653-1178-X and provide detailed info and a recommendation score"
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    ToolCall(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        args='{"isbn": "0-7653-1178-X"}',
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b'\n$\x01\xd1\xed\x8ao\xc6\x16\xc4\x8f\x8b\xfcYh8\x9dh\x9a\xad\xf6\x83\xd4\x1b\xee\xf8.g\xf4\xc0\x9e\xc3=?\xb8v&-\n^\x01\xd1\xed\x8aobM,\xae\x01\xd2\x1d.k\x8b\xa5Iu\x83\xbf\xce\xf4ei\xbcYU\xda\x0f\xc5l\xb5\x98\xbf#\xa7JI\xa4\xa88m\xcf\xccY\xbc\xe6?\xda\xb7\xa0\xb8\x99d\xdbU\xa3\x81s>#A\xa2\x10\xe3\xe6.\x08\x10\n5\xdaY\xcd\x12X\x91\xb4\xc4\x16Y\xd3\xc9\xa2\xc4\x08A\xdf\x99\x15\xb3\xf2rn\n\xf9\x01\x01\xd1\xed\x8ao\xc0\xaf*\xe2T{Qw\x92\xf9mfmX\x86\xde\xc0\x1b\xd6)\xc7P.\xed\t\x95\n\x90f";bH\x84\x16X\xc1\xdb\x9d!F\xae\x98=E\x8c*\x00 \x7f\xe1;?\xadq\xcf5\x82]\xed\x12\xe8\x98\xb5\xb2f\xc6\xe9\x87\x94KT\xfc%r7\xca9\xde\x96\x19\x97Y\xf3 \xb4`W}\xe7W\x0eD^XU\xd7\x17\xaf9#\xbe\xb0\xec\rV\x83\x1f\\\x03s\x19\x9b\x14\xf2\x8b&\x1e\xbc\xf8\x97\xc8\xa9O\x8e$\xe6\xa2\xfc\xc9\x18\x97 \xecYB\xfd;\xfeGB~\x81\x9c\nz`hF\xe0\xc9\xd5Dm\xcf\x1b\xe9\x0e\x9d"M7\xcb(\xf4\xef\xeaNC\x81\xe7\xbb\xe4\xad\x052P0\xee\xc2\xde=\xa1G,2\xc6\xe9\xa9\xb2\\\xf4\xb1\xc4R\x9cM}\xe0DW]6\n\xe6\xff`=1\xebG\xcet\xe1\x05\x8a\x1cN1E\xf50]\xc8\xd8\xf5\x7fhp\xa6\xc0a\xe7"\x02\xa8HB\x82(\xfd\xab\xd6\x11\n\xe5\x01\x01\xd1\xed\x8ao\x19\x88sh\x11|\x8d~\xd25E\x17\xfc\x89\xdbvQ\xe6\xc1\xd8\xefF\x85\x1eBc\xf8:\xefbp\xe4C\xaa\xef\x1c\xa9\xb8|>\x9c\xba\x16\xa4\xc3\xf5\xf2\x80ED\x8b\xdd\x06P\xf8\x84\xceh>\xe37\x9c]\x0c\x9b\xc0av\xa4\xcc\x8b\x1c\xcbJ\xed\xf8s*\x08\x9bd<\xb41\xb1P\xeb\x9f\xac\xa3\xed|n\x15_^\x15\xc3\xc58\xab\xf5<)\xd6\x1dv-\xd6\xddW\x9d\xc7y\xca\xf8FI\x92)_Q(g\xb0\x11`\x03\x11q6k~J$N\xaa\xb9\xd1(\xaa\xecrZ\xd0=\x03~\x19J\xde\xab\x07\xcc\xff\xd3wl\x14\xc1\xe6U\x93\xdc\rd\x83\x83\xc1Cz\xa5S\x85\x97t(\xd3\x91\x9a\x15\xd5\xe5fa\x1em\x11=\xe5\xae\xde)\x03\xf8\x93\xda//\xfa8\x81\xb6\xf2\xb3\xaa\x86\xddT]\xb6\xbd\x9aW{E\x08\xe0=\xa8\xfc\xae\x87\xe6\n\xd5\x01\x01\xd1\xed\x8ao\\\x8a\xebo\xbc\x99\x068C4\x1e\x8e\n\\8\xdf\x1an\xa4\xd4\xefS\xb2\x8bzat\xde@\x13\xca\xbe\xb6\xeaW\xa1\xe7\xaf\x12=<0\xca3\xd0\xae\x12\x15SCcB\x00\xf1\xd8\x99VZam\xcc\xfd\xf3\xd7\x11\xd4\x7f\xbf{\xcc6?M\xb6\xf7\x82\x99&\xeb\xfeq\xb1L8\x1d#\xc2>\x96\xa9M\xb9b\xeb\xae\xaa\x92V\xc3 \xa7\xe5\xb0\xa2\x97\x01\xbb\x013#\x0fLc\xa8\x9c\xca\xc8\xe9~T\xa0\xebug\xfe\x00\xc8&\xfb\xdf8\x8et\xfc\xe6\xb8\xa1\x99y\xc3EY_\t\xe9M\x0f\xbe\xa8\xbf\xff\xab\x7f\x0c\x00K\xb3\xa3\xbaAe{\xdc\x1c\xcfq\xef\xc5\xd5\xac\x93\xf9\xe2D\x82\xa6\xc6m\xd5\xdbEPa\xd4(\xab\x8f\x1e\xd6\x0c\x18\x9c\x93\xb4\x8d\xad\x15\xf3\xd0W\x8b\x01e\xfd\xad\xab\x92\xb5',
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {"isbn": "0-7653-1178-X"},
                            "name": "get_book_info",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
            UserMessage(
                content=[
                    ToolOutput(
                        id="google_unknown_tool_id",
                        name="get_book_info",
                        value="Title: Mistborn: The Final Empire, Author: Brandon Sanderson, Pages: 544, Published: 2006-07-25",
                    )
                ]
            ),
            AssistantMessage(
                content=[
                    Text(
                        text='{"author": "Brandon Sanderson", "pages": 544, "title": "Mistborn: The Final Empire", "publication_year": 2006}'
                    )
                ],
                provider="google",
                model_id="gemini-2.5-flash",
                raw_content=[
                    {
                        "video_metadata": None,
                        "thought": None,
                        "inline_data": None,
                        "file_data": None,
                        "thought_signature": b"\n$\x01\xd1\xed\x8ao\xb2\x116\xad\xcc\x9b\xbcIe\xc4\xdc\xaaR|\xbc\x9e^e\x08\x07\xfd\xb6\xd4\x04\x06\xb6\xa6D9\x9c\x00\nv\x01\xd1\xed\x8aoNqB\xc2\xb6\xe5\x16\xeb\xa5J\x9e\xad\xad\x0b\x06\xc9\x08\xa3(\xf4\xa9\x9c\x87\x13l\xfc\x17\xcc\xe6\xf9\x80;\x9b_QO:=\x1dWK4\xe2\xbb\x99c\x10\xba\xe9uxju\x9d4\xe2\x11\x0b\xe5\x83\xf45\xb2\xd5$\xc5X\xfb\xe2\xb2\xda:^\xdf\x00VYV\xb7\x19*J\x9b(\xb5R\xa4\x0b\xc8\xcb\xb95bn\xd6I\xb5\x80s\x84@\xb4%\xb8\xf2\x1f\xf4\x0e\x84\x0b6\xeb\x89\n\xd4\x01\x01\xd1\xed\x8ao\xa4\xce\xbbh\xaek\xb1\x90\x11\xda\x93GFk\xb2<\xbd\xf8\xae\xf1/\xb5\xac%|\x9f\xef*\xb7\x0bb(\xe4R\xc07\xd4\xceq\x9d\xc5\xdd\xee\xa4i}k\xfb\x8f\xd2v\x83\x08\xe3<\x93\xb7C\r@\xdf\x0c\xf9\x02\xc5\x14\x13\x16^\x10\xe0\xf3\xb2\xf2\x1e\xa1\n;\xfb\x1a\xb2\x9f\x7f\x13\xe0\xb2\x0fQ\x8f\xf7\xdb\x19\n\xb6\xa8 \xa0\xf5\xea\x08\x8dwVz\x1c'\x83\xbd\x08\xbd'\x1e\xef*\x80\x0b<\xd4\xf4[\xcf\xb3\x9f;\xd4 d(,\xa4/\xee\xbd\xe4\xb3lg\xde\x8c\xc9\xee\x032V\x8c\xab]\xdbL\xeb\x16\xbc\x93W\x9c,y\xc9\xe5p\x821\xd7\xa4o'\xac\xe8\x0c}\"&\xe1\xc5\xd2ZOh}r\xea\xeb\\\x0f\x0e3\xba0\x99#P8\xd2\x02\xc9\xa8\x9ab\\U\xdfQ\x1b\xaf\x9d\xda\xd0\n\xaf\x01\x01\xd1\xed\x8ao]X\xb1\xcd}X\x17w\xf2E\xc0{S\x87l5\xe8np\x15\xd1\xa3\xeeV\xa9\x1a\x19\n\xd6\xbb\xb4#s\x15\xb7\xa5\xed\xbcH\xa6\x10q\x18\xfc$?\x11\x83\x82\xbcg\xc3x4\x83\xd99\x03\xf2?\xd1\xff\x84\xfd\x00c>\xe5\x03\xcb\xc4\xcfE\xb3\t\xbdy3\x88\xf4:\xc4\xf4\x0f4\x01\xcaT\x03\x12aJv\xb4\xed\xdc\x06L\xb0\x9a\xe9\xa04\x9b+6\xb8\xe2\xb1s\x9b\x97~*\x9dE\x98?d\x8b\"\x04\x1f\x01\x8c6\xe3\x19e\xa9o\xdc3\xb5\x9e\x87E\x1c\xab\x10\x86\x181\x9b\x85S\xd6\xb9\x99\x8e\xf7\x87\xbbq\\%A\x0e\x0b\x91d\xc0c<\x0e\x97\xe9VW\xb4\n\xd8\x01\x01\xd1\xed\x8ao\xd6\x02\x0f\x1b\xf6\x10\xa8gP\x98\xc7\x0e\xd1\xf8\xcf\xf9$\xc7\xe14\xc8\xc0\x1bg\x1b\xc9o\xf1\xcaaMB\xaa\xc3\x13(\xdeJ\x10l\x9fJ&\xaf\xc1X)0)\x03\xab\x16\xd1Ae\x9bk\x91,U\xce{\xcbi\xd3\x9e\x0c\xfd\x06\x98\xaf\x7f\xca\xc1.\x99\xc4\xb3N\xfb>\xd1\x00:\xe8\xd5\xa0VW\x1dF\xe7WH\xba*\x8bx\x92G\xbf\xb1x\xbb8\xe9Mq\xad\xb8|\xdeA\xdc8\xfe\xbb\xc6\x02\xc1\xaf\xb0s\x8b\x9b\x18\xfcE\xf6\xc9v%\n37%\x18L\xbb\x83\xe1\xf6\xa1q~\xeaJ\x90a\xca\xb6\x9dG\xe1b\xd6\x02$|m\xb1\xfdHS\xab\xd3~\x05\xa6\x91\x1b\xf3r\xd5\x02#\xcfr\xa6\x1f\x0c\x18c|&\x1e0\xe1\xb1\xba\x97\x9f\xfc\x8a\\\xe8m&(\x05\xba\x98\xb6\xa2u\xd2\xa4\x06 V\x85\n\xb7\x01\x01\xd1\xed\x8ao\x8a\xf4\xd7d\xc8\x8e\x1f\xfe\xe1m\xae\xd2G\xc6\x01#)\xf7A\xe8\xa9N\xfb\n\xa2K\xcc\xa7\xe9\x9a~\x18E\xb3jFX\x8ez\xad\xae\xbf\xc6\xb3\xa36}\xcb\xa8\xfb\xa5\xad\xef\xf2\x8eDAm>\x84\xf2\x1bl\xfb\\\x9b\xcf\xdb\x94\xc8{l\xc15\xc2\x91h)i\\\x103B\xe5K\x0f\xb47-\x98\x9e\\r\x18\xd8$\xba\xac\xe7\x9c\x8c9v\x06\xcb\xd8o\xddL\x84\xf8U\xde8|\xbc,\x8eZ\xc6\xddC\x17Z\xd0hN\x15\xf5o\x97)\"\x0f,\x04\xe4\x0fC]\xfb\xe6\xae&\xd9c\xd1\xd4~\xbc\xe6\x89-'\x80\xd3\x06\xae3\xa7\x95\x8eR)\x89p\xab=E\x9c\xc1\xf9\xc1\x11J\xb6q\xbe\n\xbd\x01\x01\xd1\xed\x8ao\xe0mt\xe9\xc3>\xfc\xd3\xa3I\xb4\xf2\xe5U\x1b\x08\x19\xcc3\xdb\x14|\xe0Z\xd6\x8f\xc2f\x08f\t>\xff@\xedS\xa7x\x17P\x01\xd2:\xffqv\x89\x17(\xc3d\xe8L+\xa6\xb2\x9e\xb2\xf0\xfd\xa5\xee\xa8+i\xa5\x98\xb6\xc4\xb7\x92\xe1\x16?{\xca\t\x03{\xb1\xd3\xd0\xcbFb\x83,>\xa3jW]\xa5\x0b\xe0\xd2-\xdf\xe6I a\xfb\xa9\xbcQ\xf5\xfe!k\xf68\xe72\x9aV0\x8f\xef\x9ai\x8d\xe8\x04\xa2sN\xc7\x80K\x84P\xc1\x89-@f0\xcc\x89\xe8\x80\xb7g\xae\x1d\x8d9\x978\xe3\xfb\x90\xde\xe9\x1e\xb4u\x92\x95\xfd\x14!N{\xce\xe2\xa5o\xf8\x018\x8ci\xf7=a\x96q\xba\xec\xe1\xc8\x9a",
                        "code_execution_result": None,
                        "executable_code": None,
                        "function_call": {
                            "id": None,
                            "args": {
                                "author": "Brandon Sanderson",
                                "pages": 544,
                                "title": "Mistborn: The Final Empire",
                                "publication_year": 2006,
                            },
                            "name": "__mirascope_formatted_output_tool__",
                        },
                        "function_response": None,
                        "text": None,
                    }
                ],
            ),
        ],
        "format": {
            "name": "BookSummary",
            "description": None,
            "schema": {
                "properties": {
                    "title": {"title": "Title", "type": "string"},
                    "author": {"title": "Author", "type": "string"},
                    "pages": {"title": "Pages", "type": "integer"},
                    "publication_year": {
                        "title": "Publication Year",
                        "type": "integer",
                    },
                },
                "required": ["title", "author", "pages", "publication_year"],
                "title": "BookSummary",
                "type": "object",
            },
            "mode": "tool",
            "formatting_instructions": "Always respond to the user's query using the __mirascope_formatted_output_tool__ tool for structured output.",
        },
        "tools": [
            {
                "name": "get_book_info",
                "description": "Look up book information by ISBN.",
                "parameters": """\
{
  "properties": {
    "isbn": {
      "title": "Isbn",
      "type": "string"
    }
  },
  "required": [
    "isbn"
  ],
  "additionalProperties": false,
  "defs": null
}\
""",
                "strict": False,
            }
        ],
        "n_chunks": 3,
    }
)
