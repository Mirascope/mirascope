---
# AUTO-GENERATED API DOCUMENTATION - DO NOT EDIT
title: response_formatting
description: API documentation for response_formatting
---

# response_formatting

## <ApiType type="Class" slug="content-response-format-def" symbolName="ContentResponseFormatDef" /> ContentResponseFormatDef

Protocol for defining a content mode response format.

**Bases:** 
<TypeLink type={{"type_str": "Protocol[CovariantT]", "description": null, "kind": "generic", "base_type": {"type_str": "Protocol", "description": null, "kind": "simple", "symbol_name": "Protocol", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Protocol"}, "parameters": [{"type_str": "CovariantT", "description": null, "kind": "simple", "symbol_name": "CovariantT", "doc_url": null}], "doc_url": null}} />

## <ApiType type="Function" slug="mirascope-llm-response_formatting-decorator--content-response-format-def-parse" symbolName="parse" /> parse

Parse a response into an instance of the class.

<ParametersTable
  parameters={[
  {
    "name": "cls",
    "type_info": {
      "type_str": "Any",
      "description": null,
      "kind": "simple",
      "symbol_name": null,
      "doc_url": null
    }
  },
  {
    "name": "content",
    "type_info": {
      "type_str": "Content | Sequence[Content]",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
      },
      "parameters": [
        {
          "type_str": "Content",
          "description": null,
          "kind": "simple",
          "symbol_name": "Content",
          "doc_url": "/docs/mirascope/v2/api/content#content"
        },
        {
          "type_str": "Sequence[Content]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "Sequence",
            "description": null,
            "kind": "simple",
            "symbol_name": "Sequence",
            "doc_url": "https://docs.python.org/3/library/typing.html#typing.Sequence"
          },
          "parameters": [
            {
              "type_str": "Content",
              "description": null,
              "kind": "simple",
              "symbol_name": "Content",
              "doc_url": "/docs/mirascope/v2/api/content#content"
            }
          ],
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The array of content response from the LLM."
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "CovariantT",
    "description": null,
    "kind": "simple",
    "symbol_name": "CovariantT",
    "doc_url": null
  },
  "description": "An instance of the class."
}}
/>



## <ApiType type="Class" slug="from-call-args" symbolName="FromCallArgs" /> FromCallArgs

A marker class for indicating that a field is a call argument.

This ensures that the LLM call does not attempt to generate this field. Instead, it
will populate this field with the call argument with a matching name.

This is useful for colocating e.g. validation of a generated output against and
input argument (such as the length of an output given a number input).


## <ApiType type="Class" slug="json-response-format-def" symbolName="JsonResponseFormatDef" /> JsonResponseFormatDef

Protocol for defining a JSON mode response format.

**Bases:** 
<TypeLink type={{"type_str": "Protocol[CovariantT]", "description": null, "kind": "generic", "base_type": {"type_str": "Protocol", "description": null, "kind": "simple", "symbol_name": "Protocol", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Protocol"}, "parameters": [{"type_str": "CovariantT", "description": null, "kind": "simple", "symbol_name": "CovariantT", "doc_url": null}], "doc_url": null}} />

## <ApiType type="Function" slug="mirascope-llm-response_formatting-decorator--json-response-format-def-parse" symbolName="parse" /> parse

Parse a JSON response into an instance of the class.

<ParametersTable
  parameters={[
  {
    "name": "cls",
    "type_info": {
      "type_str": "Any",
      "description": null,
      "kind": "simple",
      "symbol_name": null,
      "doc_url": null
    }
  },
  {
    "name": "json",
    "type_info": {
      "type_str": "dict[str, Any]",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "dict",
        "description": null,
        "kind": "simple",
        "symbol_name": "dict",
        "doc_url": "https://docs.python.org/3/library/stdtypes.html#dict"
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": "https://docs.python.org/3/library/stdtypes.html#str"
        },
        {
          "type_str": "Any",
          "description": null,
          "kind": "simple",
          "symbol_name": "Any",
          "doc_url": "https://docs.python.org/3/library/typing.html#typing.Any"
        }
      ],
      "doc_url": null
    },
    "description": "The JSON response from the LLM."
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "CovariantT",
    "description": null,
    "kind": "simple",
    "symbol_name": "CovariantT",
    "doc_url": null
  },
  "description": "An instance of the class."
}}
/>



## <ApiType type="Class" slug="response-format" symbolName="ResponseFormat" /> ResponseFormat

Class representing a structured output format for LLM responses.

A ResponseFormat defines how LLM responses should be structured and parsed.
It includes metadata about the format mode, whether to use strict validation,
and the schema for the expected output.

This class is not instantiated directly but is created by applying the
`@response_format()` decorator to a class definition.

When decorated with `@response_format()`, the class retains its original
fields and constructor, while adding the ResponseFormat functionality:

**Bases:** 
<TypeLink type={{"type_str": "Generic[T]", "description": null, "kind": "generic", "base_type": {"type_str": "Generic", "description": null, "kind": "simple", "symbol_name": "Generic", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Generic"}, "parameters": [{"type_str": "T", "description": null, "kind": "simple", "symbol_name": "T", "doc_url": null}], "doc_url": null}} />

<AttributesTable
  attributes={[
  {
    "name": "schema",
    "type_info": {
      "type_str": "dict[str, Any]",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "dict",
        "description": null,
        "kind": "simple",
        "symbol_name": "dict",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": null
        },
        {
          "type_str": "Any",
          "description": null,
          "kind": "simple",
          "symbol_name": "Any",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The original class definition before being decorated."
  },
  {
    "name": "parser",
    "type_info": {
      "type_str": "JsonParserFn[T] | ToolParserFn[T] | TextParserFn[T]",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "JsonParserFn[T]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "JsonParserFn",
            "description": null,
            "kind": "simple",
            "symbol_name": "JsonParserFn",
            "doc_url": null
          },
          "parameters": [
            {
              "type_str": "T",
              "description": null,
              "kind": "simple",
              "symbol_name": "T",
              "doc_url": null
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "ToolParserFn[T]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "ToolParserFn",
            "description": null,
            "kind": "simple",
            "symbol_name": "ToolParserFn",
            "doc_url": null
          },
          "parameters": [
            {
              "type_str": "T",
              "description": null,
              "kind": "simple",
              "symbol_name": "T",
              "doc_url": null
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "TextParserFn[T]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "TextParserFn",
            "description": null,
            "kind": "simple",
            "symbol_name": "TextParserFn",
            "doc_url": null
          },
          "parameters": [
            {
              "type_str": "T",
              "description": null,
              "kind": "simple",
              "symbol_name": "T",
              "doc_url": null
            }
          ],
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The parser for formatting the response."
  },
  {
    "name": "mode",
    "type_info": {
      "type_str": "Literal['json', 'tool', 'text']",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "Literal",
        "description": null,
        "kind": "simple",
        "symbol_name": "Literal",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "'json'",
          "description": null,
          "kind": "simple",
          "symbol_name": "'json'",
          "doc_url": null
        },
        {
          "type_str": "'tool'",
          "description": null,
          "kind": "simple",
          "symbol_name": "'tool'",
          "doc_url": null
        },
        {
          "type_str": "'text'",
          "description": null,
          "kind": "simple",
          "symbol_name": "'text'",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The mode of the response format, determined from the parser's signature."
  },
  {
    "name": "formatting_instructions",
    "type_info": {
      "type_str": "str",
      "description": null,
      "kind": "simple",
      "symbol_name": "str",
      "doc_url": null
    },
    "description": "Response formatting instructions, pulled from the parser's docstring."
  },
  {
    "name": "strict",
    "type_info": {
      "type_str": "bool",
      "description": null,
      "kind": "simple",
      "symbol_name": "bool",
      "doc_url": null
    },
    "description": "Whether the response format should use strict validation when supported."
  }
]}
/>


## <ApiType type="Class" slug="tool-response-format-def" symbolName="ToolResponseFormatDef" /> ToolResponseFormatDef

Protocol for defining a tool mode response format.

**Bases:** 
<TypeLink type={{"type_str": "Protocol[CovariantT]", "description": null, "kind": "generic", "base_type": {"type_str": "Protocol", "description": null, "kind": "simple", "symbol_name": "Protocol", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Protocol"}, "parameters": [{"type_str": "CovariantT", "description": null, "kind": "simple", "symbol_name": "CovariantT", "doc_url": null}], "doc_url": null}} />

## <ApiType type="Function" slug="mirascope-llm-response_formatting-decorator--tool-response-format-def-parse" symbolName="parse" /> parse

Parse a tool call response into an instance of the class.

<ParametersTable
  parameters={[
  {
    "name": "cls",
    "type_info": {
      "type_str": "Any",
      "description": null,
      "kind": "simple",
      "symbol_name": null,
      "doc_url": null
    }
  },
  {
    "name": "args",
    "type_info": {
      "type_str": "dict[str, Any]",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "dict",
        "description": null,
        "kind": "simple",
        "symbol_name": "dict",
        "doc_url": "https://docs.python.org/3/library/stdtypes.html#dict"
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": "https://docs.python.org/3/library/stdtypes.html#str"
        },
        {
          "type_str": "Any",
          "description": null,
          "kind": "simple",
          "symbol_name": "Any",
          "doc_url": "https://docs.python.org/3/library/typing.html#typing.Any"
        }
      ],
      "doc_url": null
    },
    "description": "The arguments generated for the tool call."
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "CovariantT",
    "description": null,
    "kind": "simple",
    "symbol_name": "CovariantT",
    "doc_url": null
  },
  "description": "An instance of the class."
}}
/>



## <ApiType type="Function" slug="response_format" symbolName="response_format" /> response_format

Decorator that defines a structured response format for LLM outputs.

This decorator operates as a dataclass transformation so that the original class
retains its original behavior and typing. At definition time, the decorator will
set the `__response_format__: ResponseFormat` attribute on the class, which is used
downstream to determine how to parse the LLM response.

By default, the decorator requires the decorated class has a `parse` classmethod.
The single argument of this method determines how to set the call parameters for
structuring the response, which must be one of:
    - `content: Content | Sequence[Content]` for structuring the content itself
    - `json: dict[str, Any]` for structuring the response using JSON mode
    - `args: dict[str, Any]` for structuring the response using tool mode

You can also set the `parser` argument to opt-in to a default parser.

Example:

    A simple `Book` response formatted using the default "json" parser:

    ```python
    from mirascope import llm

    @llm.response_format(parser="json")
    class Book:
        title: str
        author: str
    ```

Example:

    A custom text parser

    ```python
    from typing_extensions import Self

    from mirascope import llm

    @llm.response_format
    class Book:
        title: str
        author: str

        @classmethod
        def parse(cls, content: Content | Sequence[Content]) -> Book:
            """FORMATTING INSTRUCTIONS:

            ```plaintext
            \{title\} by \{author\}
            ```
            """
            title, author = content[0].text.split(" by ")
            return cls(title=title.strip(), author=author.strip())
    ```

<ParametersTable
  parameters={[
  {
    "name": "__cls",
    "type_info": {
      "type_str": "Any",
      "description": null,
      "kind": "simple",
      "symbol_name": null,
      "doc_url": null
    },
    "default": "None"
  },
  {
    "name": "parser",
    "type_info": {
      "type_str": "Literal['json', 'tool'] | None",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
      },
      "parameters": [
        {
          "type_str": "Literal['json', 'tool']",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "Literal",
            "description": null,
            "kind": "simple",
            "symbol_name": "Literal",
            "doc_url": "https://docs.python.org/3/library/typing.html#typing.Literal"
          },
          "parameters": [
            {
              "type_str": "'json'",
              "description": null,
              "kind": "simple",
              "symbol_name": "'json'",
              "doc_url": null
            },
            {
              "type_str": "'tool'",
              "description": null,
              "kind": "simple",
              "symbol_name": "'tool'",
              "doc_url": null
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "None",
          "description": null,
          "kind": "simple",
          "symbol_name": "None",
          "doc_url": "https://docs.python.org/3/library/constants.html#None"
        }
      ],
      "doc_url": null
    },
    "default": "None",
    "description": "The default parser to use, if any:\n- \"json\": Use JSON mode for structured outputs\n- \"tool\": Use forced tool calling to structure outputs\n- None: No default parser is applied, and a `parse` classmethod is required"
  },
  {
    "name": "strict",
    "type_info": {
      "type_str": "bool",
      "description": null,
      "kind": "simple",
      "symbol_name": "bool",
      "doc_url": "https://docs.python.org/3/library/functions.html#bool"
    },
    "default": "False",
    "description": "Whether to use strict structured outputs when supported by the model.\nDefault is False."
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "T | Callable[[JsonResponseFormatDef[T] | ToolResponseFormatDef[T] | ContentResponseFormatDef[T]], T] | Callable[[type[T]], T]",
    "description": null,
    "kind": "union",
    "base_type": {
      "type_str": "Union",
      "description": null,
      "kind": "simple",
      "symbol_name": "Union",
      "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
    },
    "parameters": [
      {
        "type_str": "T",
        "description": null,
        "kind": "simple",
        "symbol_name": "T",
        "doc_url": null
      },
      {
        "type_str": "Callable[[JsonResponseFormatDef[T] | ToolResponseFormatDef[T] | ContentResponseFormatDef[T]], T]",
        "description": null,
        "kind": "callable",
        "base_type": {
          "type_str": "Callable",
          "description": null,
          "kind": "simple",
          "symbol_name": "Callable",
          "doc_url": "https://docs.python.org/3/library/typing.html#typing.Callable"
        },
        "parameters": [
          {
            "type_str": "[JsonResponseFormatDef[T] | ToolResponseFormatDef[T] | ContentResponseFormatDef[T]]",
            "description": null,
            "kind": "tuple",
            "base_type": {
              "type_str": "tuple",
              "description": null,
              "kind": "simple",
              "symbol_name": "tuple",
              "doc_url": "https://docs.python.org/3/library/stdtypes.html#tuple"
            },
            "parameters": [
              {
                "type_str": "JsonResponseFormatDef[T] | ToolResponseFormatDef[T] | ContentResponseFormatDef[T]",
                "description": null,
                "kind": "union",
                "base_type": {
                  "type_str": "Union",
                  "description": null,
                  "kind": "simple",
                  "symbol_name": "Union",
                  "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
                },
                "parameters": [
                  {
                    "type_str": "JsonResponseFormatDef[T]",
                    "description": null,
                    "kind": "generic",
                    "base_type": {
                      "type_str": "JsonResponseFormatDef",
                      "description": null,
                      "kind": "simple",
                      "symbol_name": "JsonResponseFormatDef",
                      "doc_url": "/docs/mirascope/v2/api/response-formatting#json-response-format-def"
                    },
                    "parameters": [
                      {
                        "type_str": "T",
                        "description": null,
                        "kind": "simple",
                        "symbol_name": "T",
                        "doc_url": null
                      }
                    ],
                    "doc_url": null
                  },
                  {
                    "type_str": "ToolResponseFormatDef[T]",
                    "description": null,
                    "kind": "generic",
                    "base_type": {
                      "type_str": "ToolResponseFormatDef",
                      "description": null,
                      "kind": "simple",
                      "symbol_name": "ToolResponseFormatDef",
                      "doc_url": "/docs/mirascope/v2/api/response-formatting#tool-response-format-def"
                    },
                    "parameters": [
                      {
                        "type_str": "T",
                        "description": null,
                        "kind": "simple",
                        "symbol_name": "T",
                        "doc_url": null
                      }
                    ],
                    "doc_url": null
                  },
                  {
                    "type_str": "ContentResponseFormatDef[T]",
                    "description": null,
                    "kind": "generic",
                    "base_type": {
                      "type_str": "ContentResponseFormatDef",
                      "description": null,
                      "kind": "simple",
                      "symbol_name": "ContentResponseFormatDef",
                      "doc_url": "/docs/mirascope/v2/api/response-formatting#content-response-format-def"
                    },
                    "parameters": [
                      {
                        "type_str": "T",
                        "description": null,
                        "kind": "simple",
                        "symbol_name": "T",
                        "doc_url": null
                      }
                    ],
                    "doc_url": null
                  }
                ],
                "doc_url": null
              }
            ],
            "doc_url": null
          },
          {
            "type_str": "T",
            "description": null,
            "kind": "simple",
            "symbol_name": "T",
            "doc_url": null
          }
        ],
        "doc_url": null
      },
      {
        "type_str": "Callable[[type[T]], T]",
        "description": null,
        "kind": "callable",
        "base_type": {
          "type_str": "Callable",
          "description": null,
          "kind": "simple",
          "symbol_name": "Callable",
          "doc_url": "https://docs.python.org/3/library/typing.html#typing.Callable"
        },
        "parameters": [
          {
            "type_str": "[type[T]]",
            "description": null,
            "kind": "tuple",
            "base_type": {
              "type_str": "tuple",
              "description": null,
              "kind": "simple",
              "symbol_name": "tuple",
              "doc_url": "https://docs.python.org/3/library/stdtypes.html#tuple"
            },
            "parameters": [
              {
                "type_str": "type[T]",
                "description": null,
                "kind": "generic",
                "base_type": {
                  "type_str": "type",
                  "description": null,
                  "kind": "simple",
                  "symbol_name": "type",
                  "doc_url": "https://docs.python.org/3/library/functions.html#type"
                },
                "parameters": [
                  {
                    "type_str": "T",
                    "description": null,
                    "kind": "simple",
                    "symbol_name": "T",
                    "doc_url": null
                  }
                ],
                "doc_url": null
              }
            ],
            "doc_url": null
          },
          {
            "type_str": "T",
            "description": null,
            "kind": "simple",
            "symbol_name": "T",
            "doc_url": null
          }
        ],
        "doc_url": null
      }
    ],
    "doc_url": null
  },
  "description": "A decorator function that converts the class into a `ResponseFormat`."
}}
/>


