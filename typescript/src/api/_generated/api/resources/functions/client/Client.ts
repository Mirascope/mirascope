// This file was auto-generated by Fern from our API Definition.

import type {
  BaseClientOptions,
  BaseRequestOptions,
} from "../../../../BaseClient.js";

import {
  type NormalizedClientOptions,
  normalizeClientOptions,
} from "../../../../BaseClient.js";
import { mergeHeaders } from "../../../../core/headers.js";
import * as core from "../../../../core/index.js";
import * as environments from "../../../../environments.js";
import { handleNonStatusCodeError } from "../../../../errors/handleNonStatusCodeError.js";
import * as errors from "../../../../errors/index.js";
import * as serializers from "../../../../serialization/index.js";
import * as Mirascope from "../../../index.js";

export declare namespace FunctionsClient {
  export type Options = BaseClientOptions;

  export interface RequestOptions extends BaseRequestOptions {}
}

export class FunctionsClient {
  protected readonly _options: NormalizedClientOptions<FunctionsClient.Options>;

  constructor(options: FunctionsClient.Options = {}) {
    this._options = normalizeClientOptions(options);
  }

  /**
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.list()
   */
  public list(
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsListResponse> {
    return core.HttpResponsePromise.fromPromise(this.__list(requestOptions));
  }

  private async __list(
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsListResponse>> {
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        "functions",
      ),
      method: "GET",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsListResponse.parseOrThrow(_response.body, {
          unrecognizedObjectKeys: "passthrough",
          allowUnrecognizedUnionMembers: true,
          allowUnrecognizedEnumValues: true,
          skipValidation: true,
          breadcrumbsPrefix: ["response"],
        }),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "GET",
      "/functions",
    );
  }

  /**
   * @param {Mirascope.FunctionsCreateRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.ConflictError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.create({
   *         code: "code",
   *         hash: "hash",
   *         signature: "signature",
   *         signatureHash: "signatureHash",
   *         name: "name",
   *         language: "language"
   *     })
   */
  public create(
    request: Mirascope.FunctionsCreateRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsCreateResponse> {
    return core.HttpResponsePromise.fromPromise(
      this.__create(request, requestOptions),
    );
  }

  private async __create(
    request: Mirascope.FunctionsCreateRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsCreateResponse>> {
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        "functions",
      ),
      method: "POST",
      headers: _headers,
      contentType: "application/json",
      queryParameters: requestOptions?.queryParams,
      requestType: "json",
      body: serializers.FunctionsCreateRequest.jsonOrThrow(request, {
        unrecognizedObjectKeys: "strip",
        omitUndefined: true,
      }),
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsCreateResponse.parseOrThrow(_response.body, {
          unrecognizedObjectKeys: "passthrough",
          allowUnrecognizedUnionMembers: true,
          allowUnrecognizedEnumValues: true,
          skipValidation: true,
          breadcrumbsPrefix: ["response"],
        }),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 409:
          throw new Mirascope.ConflictError(
            _response.error.body,
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "POST",
      "/functions",
    );
  }

  /**
   * @param {Mirascope.FunctionsGetRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.get({
   *         id: "id"
   *     })
   */
  public get(
    request: Mirascope.FunctionsGetRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsGetResponse> {
    return core.HttpResponsePromise.fromPromise(
      this.__get(request, requestOptions),
    );
  }

  private async __get(
    request: Mirascope.FunctionsGetRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsGetResponse>> {
    const { id } = request;
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        `functions/${core.url.encodePathParam(id)}`,
      ),
      method: "GET",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsGetResponse.parseOrThrow(_response.body, {
          unrecognizedObjectKeys: "passthrough",
          allowUnrecognizedUnionMembers: true,
          allowUnrecognizedEnumValues: true,
          skipValidation: true,
          breadcrumbsPrefix: ["response"],
        }),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "GET",
      "/functions/{id}",
    );
  }

  /**
   * @param {Mirascope.FunctionsDeleteRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.delete({
   *         id: "id"
   *     })
   */
  public delete(
    request: Mirascope.FunctionsDeleteRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<void> {
    return core.HttpResponsePromise.fromPromise(
      this.__delete(request, requestOptions),
    );
  }

  private async __delete(
    request: Mirascope.FunctionsDeleteRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<void>> {
    const { id } = request;
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        `functions/${core.url.encodePathParam(id)}`,
      ),
      method: "DELETE",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return { data: undefined, rawResponse: _response.rawResponse };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "DELETE",
      "/functions/{id}",
    );
  }

  /**
   * @param {Mirascope.FunctionsFindByHashRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.findbyhash({
   *         hash: "hash"
   *     })
   */
  public findbyhash(
    request: Mirascope.FunctionsFindByHashRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsFindByHashResponse> {
    return core.HttpResponsePromise.fromPromise(
      this.__findbyhash(request, requestOptions),
    );
  }

  private async __findbyhash(
    request: Mirascope.FunctionsFindByHashRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsFindByHashResponse>> {
    const { hash } = request;
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        `functions/hash/${core.url.encodePathParam(hash)}`,
      ),
      method: "GET",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsFindByHashResponse.parseOrThrow(
          _response.body,
          {
            unrecognizedObjectKeys: "passthrough",
            allowUnrecognizedUnionMembers: true,
            allowUnrecognizedEnumValues: true,
            skipValidation: true,
            breadcrumbsPrefix: ["response"],
          },
        ),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "GET",
      "/functions/hash/{hash}",
    );
  }

  /**
   * @param {Mirascope.FunctionsGetByEnvRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.getbyenv({
   *         organizationId: "organizationId",
   *         projectId: "projectId",
   *         environmentId: "environmentId",
   *         functionId: "functionId"
   *     })
   */
  public getbyenv(
    request: Mirascope.FunctionsGetByEnvRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsGetByEnvResponse> {
    return core.HttpResponsePromise.fromPromise(
      this.__getbyenv(request, requestOptions),
    );
  }

  private async __getbyenv(
    request: Mirascope.FunctionsGetByEnvRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsGetByEnvResponse>> {
    const { organizationId, projectId, environmentId, functionId } = request;
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        `organizations/${core.url.encodePathParam(organizationId)}/projects/${core.url.encodePathParam(projectId)}/environments/${core.url.encodePathParam(environmentId)}/functions/${core.url.encodePathParam(functionId)}`,
      ),
      method: "GET",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsGetByEnvResponse.parseOrThrow(
          _response.body,
          {
            unrecognizedObjectKeys: "passthrough",
            allowUnrecognizedUnionMembers: true,
            allowUnrecognizedEnumValues: true,
            skipValidation: true,
            breadcrumbsPrefix: ["response"],
          },
        ),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "GET",
      "/organizations/{organizationId}/projects/{projectId}/environments/{environmentId}/functions/{functionId}",
    );
  }

  /**
   * @param {Mirascope.FunctionsListByEnvRequest} request
   * @param {FunctionsClient.RequestOptions} requestOptions - Request-specific configuration.
   *
   * @throws {@link Mirascope.BadRequestError}
   * @throws {@link Mirascope.UnauthorizedError}
   * @throws {@link Mirascope.ForbiddenError}
   * @throws {@link Mirascope.NotFoundError}
   * @throws {@link Mirascope.TooManyRequestsError}
   * @throws {@link Mirascope.InternalServerError}
   * @throws {@link Mirascope.ServiceUnavailableError}
   *
   * @example
   *     await client.functions.listbyenv({
   *         organizationId: "organizationId",
   *         projectId: "projectId",
   *         environmentId: "environmentId"
   *     })
   */
  public listbyenv(
    request: Mirascope.FunctionsListByEnvRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): core.HttpResponsePromise<Mirascope.FunctionsListByEnvResponse> {
    return core.HttpResponsePromise.fromPromise(
      this.__listbyenv(request, requestOptions),
    );
  }

  private async __listbyenv(
    request: Mirascope.FunctionsListByEnvRequest,
    requestOptions?: FunctionsClient.RequestOptions,
  ): Promise<core.WithRawResponse<Mirascope.FunctionsListByEnvResponse>> {
    const { organizationId, projectId, environmentId } = request;
    const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
      this._options?.headers,
      requestOptions?.headers,
    );
    const _response = await core.fetcher({
      url: core.url.join(
        (await core.Supplier.get(this._options.baseUrl)) ??
          (await core.Supplier.get(this._options.environment)) ??
          environments.MirascopeEnvironment.Production,
        `organizations/${core.url.encodePathParam(organizationId)}/projects/${core.url.encodePathParam(projectId)}/environments/${core.url.encodePathParam(environmentId)}/functions`,
      ),
      method: "GET",
      headers: _headers,
      queryParameters: requestOptions?.queryParams,
      timeoutMs:
        (requestOptions?.timeoutInSeconds ??
          this._options?.timeoutInSeconds ??
          180) * 1000,
      maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
      abortSignal: requestOptions?.abortSignal,
      fetchFn: this._options?.fetch,
      logging: this._options.logging,
    });
    if (_response.ok) {
      return {
        data: serializers.FunctionsListByEnvResponse.parseOrThrow(
          _response.body,
          {
            unrecognizedObjectKeys: "passthrough",
            allowUnrecognizedUnionMembers: true,
            allowUnrecognizedEnumValues: true,
            skipValidation: true,
            breadcrumbsPrefix: ["response"],
          },
        ),
        rawResponse: _response.rawResponse,
      };
    }

    if (_response.error.reason === "status-code") {
      switch (_response.error.statusCode) {
        case 400:
          throw new Mirascope.BadRequestError(
            _response.error.body,
            _response.rawResponse,
          );
        case 401:
          throw new Mirascope.UnauthorizedError(
            serializers.UnauthorizedErrorBody.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 403:
          throw new Mirascope.ForbiddenError(
            serializers.PermissionDeniedError.parseOrThrow(
              _response.error.body,
              {
                unrecognizedObjectKeys: "passthrough",
                allowUnrecognizedUnionMembers: true,
                allowUnrecognizedEnumValues: true,
                skipValidation: true,
                breadcrumbsPrefix: ["response"],
              },
            ),
            _response.rawResponse,
          );
        case 404:
          throw new Mirascope.NotFoundError(
            serializers.NotFoundErrorBody.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 429:
          throw new Mirascope.TooManyRequestsError(
            serializers.RateLimitError.parseOrThrow(_response.error.body, {
              unrecognizedObjectKeys: "passthrough",
              allowUnrecognizedUnionMembers: true,
              allowUnrecognizedEnumValues: true,
              skipValidation: true,
              breadcrumbsPrefix: ["response"],
            }),
            _response.rawResponse,
          );
        case 500:
          throw new Mirascope.InternalServerError(
            _response.error.body,
            _response.rawResponse,
          );
        case 503:
          throw new Mirascope.ServiceUnavailableError(
            _response.error.body,
            _response.rawResponse,
          );
        default:
          throw new errors.MirascopeError({
            statusCode: _response.error.statusCode,
            body: _response.error.body,
            rawResponse: _response.rawResponse,
          });
      }
    }

    return handleNonStatusCodeError(
      _response.error,
      _response.rawResponse,
      "GET",
      "/organizations/{organizationId}/projects/{projectId}/environments/{environmentId}/functions",
    );
  }
}
